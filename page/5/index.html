<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"dannyzhang.run","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Blogger&#x2F;Software Engineer&#x2F;Fitness Enthusiast">
<meta property="og:type" content="website">
<meta property="og:title" content="D.Z. Notes (Beta)">
<meta property="og:url" content="http://dannyzhang.run/page/5/index.html">
<meta property="og:site_name" content="D.Z. Notes (Beta)">
<meta property="og:description" content="Blogger&#x2F;Software Engineer&#x2F;Fitness Enthusiast">
<meta property="article:author" content="Danny Zhang">
<meta property="article:tag" content="Danny Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://dannyzhang.run/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>D.Z. Notes (Beta)</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">D.Z. Notes (Beta)</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Be insensitive, and keep a lifelong growth mindset.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section">Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section">Archives</a>

  </li>
        <li class="menu-item menu-item-technical">

    <a href="/technical" rel="section">technical</a>

  </li>
        <li class="menu-item menu-item-essays">

    <a href="/essays" rel="section">essays</a>

  </li>
        <li class="menu-item menu-item-readings">

    <a href="/readings" rel="section">readings</a>

  </li>
        <li class="menu-item menu-item-workout">

    <a href="/workout" rel="section">workout</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags" rel="section">Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about" rel="section">About</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/07/17/Techmon-Go-3-Segment-Tree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/07/17/Techmon-Go-3-Segment-Tree/" class="post-title-link" itemprop="url">Data Structure & Algorithms Notes: Segment Tree</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-07-17 23:21:47" itemprop="dateCreated datePublished" datetime="2016-07-17T23:21:47-07:00">2016-07-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2016-07-30 14:23:56" itemprop="dateModified" datetime="2016-07-30T14:23:56-07:00">2016-07-30</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/07/17/Techmon-Go-3-Segment-Tree/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/07/17/Techmon-Go-3-Segment-Tree/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-Segment-Tree-Definition"><a href="#1-Segment-Tree-Definition" class="headerlink" title="1. Segment Tree Definition"></a>1. Segment Tree Definition</h2><p>In computer science, a segment tree is a tree data structure for storing intervals, or segments. It allows querying which of the stored segments contain a given point.</p>
<p><img src="/content/images/2016/illustrationOfSegmentTree.png" alt="Illustration of Segment tree"></p>
<p>Segment tree could be implemented using either an array or a tree. For an array implementation, if the element at index i is not a leaf, its left and right child are stored at index 2i and 2i+1 respectively. </p>
<h2 id="2-Segment-Tree-Problems"><a href="#2-Segment-Tree-Problems" class="headerlink" title="2. Segment Tree Problems"></a>2. Segment Tree Problems</h2><h3 id="2-1-Range-Sum-Query-Mutable"><a href="#2-1-Range-Sum-Query-Mutable" class="headerlink" title="2.1. Range Sum Query  - Mutable"></a>2.1. Range Sum Query  - Mutable</h3><p>Given an integer array nums, find the sum of the elements between indices i and j (i ≤ j), inclusive.</p>
<p>The update(i, val) function modifies nums by updating the element at index i to val.</p>
<p><strong>Example:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Given nums &#x3D; [1, 3, 5]</span><br><span class="line">sumRange(0, 2) -&gt; 9</span><br><span class="line">update(1, 2)</span><br><span class="line">sumRange(0, 2) -&gt; 8</span><br></pre></td></tr></table></figure>

<p>This is a classic segment tree problem, and we can break it down to the three following steps:</p>
<ol>
<li>Build the segment tree;</li>
<li>Update the segment tree when an element is modified;</li>
<li>Calculate the range sum query using the segment tree.</li>
</ol>
<h4 id="2-1-1-Build-segment-tree"><a href="#2-1-1-Build-segment-tree" class="headerlink" title="2.1.1. Build segment tree"></a>2.1.1. Build segment tree</h4><p>Here, we use array implementation as example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] tree;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">NumArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nums.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        n = nums.length;</span><br><span class="line">        tree = <span class="keyword">new</span> <span class="keyword">int</span>[n * <span class="number">2</span>];</span><br><span class="line">        buildTree(nums);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n, j = <span class="number">0</span>;  i &lt; <span class="number">2</span> * n; i++,  j++)</span><br><span class="line">        tree[i] = nums[j]; <span class="comment">//Give values for the leaf nodes.</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt; <span class="number">0</span>; --i)</span><br><span class="line">        tree[i] = tree[i * <span class="number">2</span>] + tree[i * <span class="number">2</span> + <span class="number">1</span>]; <span class="comment">//Update the parents' value with a bottom-up approach.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Complexity Analysis:</strong><br>The total amount of nodes is:<br>n + n/2 + n/4 + n/8 + … + 1 ~= 2n</p>
<ul>
<li>Time complexity: O(n)</li>
<li>Space complexity: O(n)</li>
</ul>
<h4 id="2-1-2-Update-segment-tree"><a href="#2-1-2-Update-segment-tree" class="headerlink" title="2.1.2. Update segment tree"></a>2.1.2. Update segment tree</h4><p>When updating the array at i, we need to rebuild the segment tree as well. Here, we use a bottom-up approach. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    pos += n;</span><br><span class="line">    tree[pos] = val;</span><br><span class="line">    <span class="keyword">while</span> (pos &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> left = pos;</span><br><span class="line">        <span class="keyword">int</span> right = pos;</span><br><span class="line">        <span class="keyword">if</span> (pos % <span class="number">2</span> == <span class="number">0</span>) &#123; <span class="comment">// pos tands for left node.</span></span><br><span class="line">            right = pos + <span class="number">1</span>; </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// pos stands for right node.</span></span><br><span class="line">            left = pos - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// parent is updated after child is updated</span></span><br><span class="line">        tree[pos / <span class="number">2</span>] = tree[left] + tree[right];</span><br><span class="line">        pos /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Complexity Analysis</strong></p>
<ul>
<li>Time Complexity: O(log n);</li>
<li>Space complexity: O(1);</li>
</ul>
<h4 id="2-1-3-Range-Sum-Query"><a href="#2-1-3-Range-Sum-Query" class="headerlink" title="2.1.3. Range Sum Query"></a>2.1.3. Range Sum Query</h4><ul>
<li>Loop till l &lt;= r<ul>
<li>Check if l is right child of its parent P<ul>
<li>l is right child of P. Then P contains sum of range of l and another child which is outside the range and we dont’t need parent P sum. Add l to sum without its parent and set l to the next node on the same level.</li>
<li>l is not right child of P. Then parent P contains sum of range which lies in [l, r]. Add P to sum and set l to point to the parent of P</li>
</ul>
</li>
<li>Check if r is left child of its parent P<ul>
<li>r is left child of P: Then P contains sum of range of r and another child which is out side the range and we don’t need parent P sum. Add r to sum without its parent and set r to the previous node on the same level</li>
<li>r is not left child of P. Then parent P contains sum of range which lies in [l, r]. Add P to sum and set r to point to the parent of P.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Drawing a graph by yourself will help a lot!</strong></p>
<p>Here’s the code.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sumRange</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// get leaf with value 'l'</span></span><br><span class="line">    l += n;</span><br><span class="line">    <span class="comment">// get leaf with value 'r'</span></span><br><span class="line">    r += n;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((l % <span class="number">2</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">           sum += tree[l];</span><br><span class="line">           l++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ((r % <span class="number">2</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">           sum += tree[r];</span><br><span class="line">           r--;</span><br><span class="line">        &#125;</span><br><span class="line">        l /= <span class="number">2</span>;</span><br><span class="line">        r /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Complexity Analysis</strong></p>
<ul>
<li>Time complexity: O(log n)</li>
<li>Space complexity: O(1)</li>
</ul>
<h3 id="2-2-Range-Sum-Query-2D"><a href="#2-2-Range-Sum-Query-2D" class="headerlink" title="2.2. Range Sum Query 2D"></a>2.2. Range Sum Query 2D</h3><p><code>TODO</code></p>
<h3 id="2-3-The-Skyline-Problem"><a href="#2-3-The-Skyline-Problem" class="headerlink" title="2.3. The Skyline Problem"></a>2.3. The Skyline Problem</h3><p>Suppose you are given the locations and height of all the buildings as shown on a cityscape photo (Figure A), write a program to output the skyline formed by these buildings collectively (Figure B).<br><img src="/content/images/2016/skylineProblem.png" alt="Illustration of the Skyline Problem "></p>
<p>For instance, the dimensions of all buildings in Figure A are recorded as:<br> <code>[[2 9 10], [3 7 15], [5 12 12], [15 20 10], [19 24 8]]</code></p>
<p>The skyline in Figure B should be represented as:<br><code>[[2 10], [3 15], [7 12], [12 0], [15 10], [20 8], [24, 0]]</code>.</p>
<h4 id="2-3-1-Solution-without-segment-tree"><a href="#2-3-1-Solution-without-segment-tree" class="headerlink" title="2.3.1. Solution without segment tree"></a>2.3.1. Solution without segment tree</h4><p>The idea is very straightforward and can be divided into the following 4 steps:</p>
<ol>
<li>Create a list of all the nodes that sorted by the position in x axis;</li>
<li>Create a height array with the size of all nodes, and map the position in x axis to the array index;</li>
<li>Iterate all the buildings and update the height values in array.</li>
<li>Iterate the array and generate the final result.</li>
</ol>
<p>Here’s the complet code.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;<span class="keyword">int</span>[]&gt; getSkyline(<span class="keyword">int</span>[][] buildings) &#123;</span><br><span class="line">        List&lt;<span class="keyword">int</span>[]&gt; res = <span class="keyword">new</span> ArrayList&lt;<span class="keyword">int</span>[]&gt;();</span><br><span class="line">        <span class="keyword">if</span> (buildings == <span class="keyword">null</span> || buildings.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Step1: create a list of all nodes;</span></span><br><span class="line">        Set&lt;Integer&gt; nodesSet = <span class="keyword">new</span> HashSet&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] building : buildings) &#123;</span><br><span class="line">            nodesSet.add(building[<span class="number">0</span>]);</span><br><span class="line">            nodesSet.add(building[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Integer&gt; nodes = <span class="keyword">new</span> ArrayList&lt;Integer&gt;(nodesSet);</span><br><span class="line">        Collections.sort(nodes);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Step2: put all nodes into an array, and build hashmap to map the x axis position to the index in array.</span></span><br><span class="line">        <span class="keyword">int</span> nodesLen = nodes.size();</span><br><span class="line">        <span class="keyword">int</span>[] nodesHeight = <span class="keyword">new</span> <span class="keyword">int</span> [nodesLen];</span><br><span class="line">        Map&lt;Integer, Integer&gt; nodesMap = <span class="keyword">new</span> HashMap&lt;Integer, Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nodesLen; i++) &#123;</span><br><span class="line">            nodesMap.put(nodes.get(i), i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Step3: update the array</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] building : buildings) &#123;</span><br><span class="line">            <span class="keyword">int</span> startIndex = nodesMap.get(building[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">int</span> endIndex = nodesMap.get(building[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">int</span> height = building[<span class="number">2</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = startIndex; j &lt; endIndex; j++) &#123;</span><br><span class="line">                nodesHeight[j] = Math.max(nodesHeight[j], height);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Step4: generate the result.</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nodesLen ; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nodesHeight[i] == nodesHeight[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span>[] r = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">            r[<span class="number">0</span>] = nodes.get(i);</span><br><span class="line">            r[<span class="number">1</span>] = nodesHeight[i];</span><br><span class="line">            res.add(r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-3-2-Solution-with-segment-tree"><a href="#2-3-2-Solution-with-segment-tree" class="headerlink" title="2.3.2 Solution with segment tree"></a>2.3.2 Solution with segment tree</h4><p>Do we have better solution? Yes! Now we are going to use the segment tree approach to solve it.</p>
<p>In this case, since more than one value needs to be saved for each node: height, start and end, so it’s better to use the tree node implementation instead of the array implementation.</p>
<p>Comparing wiht the solution without segment tree, when we update the nodes’ height values, if we reach a tree node with an equal or higher height values, we can just ignore this building and continue to the next one. This makes the solution more efficient.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> start; <span class="comment">//Inclusive</span></span><br><span class="line">        <span class="keyword">int</span> end; <span class="comment">//Exclusive</span></span><br><span class="line">        <span class="keyword">int</span> height;</span><br><span class="line">        TreeNode left;</span><br><span class="line">        TreeNode right;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">TreeNode</span> <span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.start = start;</span><br><span class="line">            <span class="keyword">this</span>.end = end;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;<span class="keyword">int</span>[]&gt; getSkyline(<span class="keyword">int</span>[][] buildings) &#123;</span><br><span class="line">        List&lt;<span class="keyword">int</span>[]&gt; res = <span class="keyword">new</span> ArrayList&lt;<span class="keyword">int</span>[]&gt;();</span><br><span class="line">        <span class="keyword">if</span> (buildings == <span class="keyword">null</span> || buildings.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Step1: create a list of all nodes;</span></span><br><span class="line">        Set&lt;Integer&gt; nodesSet = <span class="keyword">new</span> HashSet&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] building : buildings) &#123;</span><br><span class="line">            nodesSet.add(building[<span class="number">0</span>]);</span><br><span class="line">            nodesSet.add(building[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Integer&gt; nodes = <span class="keyword">new</span> ArrayList&lt;Integer&gt;(nodesSet);</span><br><span class="line">        Collections.sort(nodes);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Step2: put all nodes into an array, and build hashmap to map the(x position, index in array</span></span><br><span class="line">        <span class="keyword">int</span> nodesLen = nodes.size();</span><br><span class="line">        Map&lt;Integer, Integer&gt; nodesMap = <span class="keyword">new</span> HashMap&lt;Integer, Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nodesLen; i++) &#123;</span><br><span class="line">            nodesMap.put(nodes.get(i), i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Step3: build the segment tree</span></span><br><span class="line">        TreeNode root = buildTree(<span class="number">0</span>, nodesLen - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Step4: update the height value</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] building : buildings) &#123;</span><br><span class="line">            <span class="keyword">int</span> startIndex = nodesMap.get(building[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">int</span> endIndex = nodesMap.get(building[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">int</span> height = building[<span class="number">2</span>];</span><br><span class="line">            updateHeight(startIndex, endIndex, height, root);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Step5: generate the result.</span></span><br><span class="line">        generateResult(res, root, nodes);</span><br><span class="line">        <span class="keyword">if</span> (nodes.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span>[] last = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">            last[<span class="number">0</span>] = nodes.get(nodes.size() - <span class="number">1</span>);</span><br><span class="line">            last[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">            res.add(last);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> TreeNode <span class="title">buildTree</span> <span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (start &gt;= end) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode node = <span class="keyword">new</span> TreeNode (start, end);</span><br><span class="line">        <span class="keyword">if</span> (start + <span class="number">1</span> &lt; end) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = start + (end - start) / <span class="number">2</span>;</span><br><span class="line">            node.left = buildTree(start, mid);</span><br><span class="line">            node.right = buildTree(mid, end);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateHeight</span> <span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> height, TreeNode node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="keyword">null</span> || start &gt;= node.end || end &lt;= node.start || height &lt;= node.height) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.left == <span class="keyword">null</span> &amp;&amp; node.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">            node.height = height;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//We don't need to change the start and end value, just the same.</span></span><br><span class="line">            updateHeight (start, end, height, node.left);</span><br><span class="line">            updateHeight (start, end, height, node.right);</span><br><span class="line">            <span class="keyword">int</span> leftHeight = (node.left == <span class="keyword">null</span>) ? <span class="number">0</span> : node.left.height;</span><br><span class="line">            <span class="keyword">int</span> rightHeight = (node.right == <span class="keyword">null</span>) ? <span class="number">0</span> : node.right.height;</span><br><span class="line">            node.height = Math.min(leftHeight, rightHeight);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">generateResult</span> <span class="params">(List&lt;<span class="keyword">int</span>[]&gt; res, TreeNode root, List&lt;Integer&gt; nodes)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//We only need the value from the leaf nodes</span></span><br><span class="line">        <span class="keyword">if</span> (root.left == <span class="keyword">null</span> &amp;&amp; root.right == <span class="keyword">null</span> &amp;&amp; (res.size() == <span class="number">0</span> || res.get(res.size() - <span class="number">1</span>)[<span class="number">1</span>] !=  root.height)) &#123;</span><br><span class="line">            <span class="keyword">int</span>[] r = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">            r[<span class="number">0</span>] = nodes.get(root.start);</span><br><span class="line">            r[<span class="number">1</span>] = root.height;</span><br><span class="line">            res.add(r);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            generateResult(res, root.left, nodes);</span><br><span class="line">            generateResult(res, root.right, nodes);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-4-Count-of-Smaller-Numbers-After-Self"><a href="#2-4-Count-of-Smaller-Numbers-After-Self" class="headerlink" title="2.4. Count of Smaller Numbers After Self"></a>2.4. Count of Smaller Numbers After Self</h3><p><code>TODO</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/07/16/Techmon-Go-2-Topological-Sort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/07/16/Techmon-Go-2-Topological-Sort/" class="post-title-link" itemprop="url">Data Structure & Algorithms Notes: Topological Sort</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-07-16 20:39:07" itemprop="dateCreated datePublished" datetime="2016-07-16T20:39:07-07:00">2016-07-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2016-07-30 14:23:56" itemprop="dateModified" datetime="2016-07-30T14:23:56-07:00">2016-07-30</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/07/16/Techmon-Go-2-Topological-Sort/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/07/16/Techmon-Go-2-Topological-Sort/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="I-Topological-Sort-Definition"><a href="#I-Topological-Sort-Definition" class="headerlink" title="I. Topological Sort Definition"></a>I. Topological Sort Definition</h3><p>First of all, what is topological Sort? Here is the definition from WikiPedia</p>
<blockquote>
<p>In the field of computer science, <strong>a topological sort</strong> or <strong>topological</strong> ordering of a directed graph is a linear ordering of its vertices such that for every directed edge uv from vertex u to vertex v, u comes before v in the ordering.</p>
</blockquote>
<p>Originally, say we have a graph like this.<br><img src="/content/images/2016/graph.png" alt="Original Graph"></p>
<p>After the topological sort, we will get a list like this:<br><img src="/content/images/2016/sortedGraph.png" alt="Sorted Graph"></p>
<h3 id="II-Topological-Sort-Algorithm"><a href="#II-Topological-Sort-Algorithm" class="headerlink" title="II. Topological Sort Algorithm"></a>II. Topological Sort Algorithm</h3><p><img src="/content/images/2016/topologicalSort1.png" alt="Topological Sort Algorithm"><br><img src="/content/images/2016/topologicalSort2.png" alt="Topological Sort Algorithm Explanation"></p>
<h3 id="III-Topological-Sort-Problems"><a href="#III-Topological-Sort-Problems" class="headerlink" title="III. Topological Sort Problems"></a>III. Topological Sort Problems</h3><h4 id="1-Alien-Dictionary"><a href="#1-Alien-Dictionary" class="headerlink" title="1. Alien Dictionary"></a>1. Alien Dictionary</h4><p>There is a new alien language which uses the latin alphabet. However, the order among letters are unknown to you. You receive a list of words from the dictionary, where words are sorted lexicographically by the rules of this new language. Derive the order of letters in this language.</p>
<p>For example,<br>Given the following words in dictionary,<br><code>[&quot;wrt&quot;, &quot;wrf&quot;, &quot;er&quot;, &quot;ett&quot;, &quot;rftt&quot;]</code></p>
<p>The correct order is: <code>&quot;wertf&quot;</code>.</p>
<p>思路：可以通过一定的转换，把这个问题转化为Topological Sort的问题。此外，在基本的拓扑排序算法之外，这里还需要考虑是否会有循环产生的情况，如果发生循环，则数据无效，返回空字符串。具体代码和注释如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> index;</span><br><span class="line">    <span class="keyword">char</span>[] results;</span><br><span class="line">    Map&lt;Character, Integer&gt; visitedMap;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">alienOrder</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">        Map&lt;Character, GraphNode&gt; map = <span class="keyword">new</span> HashMap&lt;Character, GraphNode&gt;();</span><br><span class="line">        <span class="keyword">int</span> nodeCount = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//Step1: Create all graph nodes;</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; words.length; i++) &#123;</span><br><span class="line">            String word = words[i];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; word.length(); j++) &#123;</span><br><span class="line">                <span class="keyword">char</span> c = word.charAt(j);</span><br><span class="line">                <span class="keyword">if</span> (!map.containsKey(c)) &#123;</span><br><span class="line">                    map.put(c, <span class="keyword">new</span> GraphNode(c));</span><br><span class="line">                    nodeCount++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Step2: Create the connections between different nodes.</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; words.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            String word1 = words[i];</span><br><span class="line">            String word2 = words[i + <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (j &lt; word1.length() &amp;&amp; j &lt; word2.length()) &#123;</span><br><span class="line">                <span class="keyword">char</span> c1 = word1.charAt(j);</span><br><span class="line">                <span class="keyword">char</span> c2 = word2.charAt(j);</span><br><span class="line">                <span class="keyword">if</span> (c1 != c2) &#123;</span><br><span class="line">                    map.get(c1).neighbors.add(map.get(c2));</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Step3: Topological Sorting.</span></span><br><span class="line">        visitedMap = <span class="keyword">new</span> HashMap&lt;Character, Integer&gt;();</span><br><span class="line">        results = <span class="keyword">new</span> <span class="keyword">char</span>[nodeCount];</span><br><span class="line">        index = nodeCount;</span><br><span class="line">        <span class="keyword">for</span> (GraphNode node : map.values()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (visitedMap.containsKey(node.c)) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!sortHelper (node)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(results);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">sortHelper</span><span class="params">(GraphNode node)</span> </span>&#123;</span><br><span class="line">        visitedMap.put(node.c, -<span class="number">1</span>); <span class="comment">//-1 代表该点正在被访问，用于避免循环的情况出现.</span></span><br><span class="line">        Iterator it = node.neighbors.iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">            GraphNode neighbor = (GraphNode)it.next();</span><br><span class="line">            <span class="keyword">if</span> (visitedMap.containsKey(neighbor.c)) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (visitedMap.get(neighbor.c) == -<span class="number">1</span>) &#123; <span class="comment">//如果循环发生，则返回false</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (visitedMap.get(neighbor.c) == <span class="number">1</span>) &#123;  <span class="comment">//如果已经被访问过，则跳过</span></span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; chua</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!sortHelper(neighbor)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        visitedMap.put(node.c, <span class="number">1</span>); <span class="comment">//完成该节点访问，状态变1</span></span><br><span class="line">        results[--index] = node.c;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GraphNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        Set&lt;GraphNode&gt; neighbors;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">GraphNode</span> <span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.c = c;</span><br><span class="line">            <span class="keyword">this</span>.neighbors = <span class="keyword">new</span> HashSet&lt;GraphNode&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此外，可以用Topological Sort解决的问题还有：</p>
<ul>
<li><a href="https://leetcode.com/problems/course-schedule-ii/" target="_blank" rel="noopener">LeetCode 210. Course Schedule II</a></li>
<li><a href="https://leetcode.com/problems/longest-increasing-path-in-a-matrix/" target="_blank" rel="noopener">LeetCode 329. Longest Increasing Path in a Matrix</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/07/14/Techmon-Go-1-Hash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/07/14/Techmon-Go-1-Hash/" class="post-title-link" itemprop="url">Data Structure & Algorithms Notes: Hash</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-07-14 21:57:32" itemprop="dateCreated datePublished" datetime="2016-07-14T21:57:32-07:00">2016-07-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2016-07-30 14:23:56" itemprop="dateModified" datetime="2016-07-30T14:23:56-07:00">2016-07-30</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/07/14/Techmon-Go-1-Hash/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/07/14/Techmon-Go-1-Hash/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="I-Hash-Function"><a href="#I-Hash-Function" class="headerlink" title="I. Hash Function"></a>I. Hash Function</h3><h5 id="a-31"><a href="#a-31" class="headerlink" title="a. 31"></a>a. 31</h5><p>In Java, the hash code for a String object is computed as</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1]</span><br></pre></td></tr></table></figure>

<p>The value 31 was chosen because it is an odd prime. If it were even and the multiplication overflowed, information would be lost, as multiplication by 2 is equivalent to shifting. The advantage of using a prime is less clear, but it is traditional. A nice property of 31 is that the multiplication can be replaced by a shift and a subtraction for better performance: 31 * i == (i &lt;&lt; 5) - i. Modern VMs do this sort of optimization automatically.</p>
<h5 id="b-31-mod-n"><a href="#b-31-mod-n" class="headerlink" title="b. 31 mod n"></a>b. 31 mod n</h5><p>Based on 31, mod the result with n, n stands for capacity.</p>
<h5 id="c-rolling-hash"><a href="#c-rolling-hash" class="headerlink" title="c. rolling hash"></a>c. rolling hash</h5><p>This is used to find if str1 contains str2:</p>
<pre><code>index = 0123456789
str1 = &quot;fsaabcdefg&quot;
str2 = &quot;abc&quot;
...
result1 = str1[3] * 31 ^ 0 + str1[4] * 31 ^ 1 + str1[5] * 31 ^ 2
...
result2 = str2[0] * 31 ^ 0 + str2[1] * 31 ^ 1 + str2[2] * 31 ^ 2</code></pre><h3 id="II-Hash-Families"><a href="#II-Hash-Families" class="headerlink" title="II. Hash Families"></a>II. Hash Families</h3><p>Hashtable: thread safe, but deprecated.<br>ConcurrentHashMap: an advanced version of Hashtable;<br>HashMap: not thread safe.<br>TreeMap: <a href="https://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html</a></p>
<h3 id="III-Implement-hashCode-and-equals-methods"><a href="#III-Implement-hashCode-and-equals-methods" class="headerlink" title="III. Implement hashCode and equals methods"></a>III. Implement hashCode and equals methods</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String str;</span><br><span class="line">    <span class="keyword">public</span> Integer inter;</span><br><span class="line">    <span class="keyword">public</span> Object obj;</span><br><span class="line">    <span class="keyword">public</span> Integer inter1;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> prime = <span class="number">31</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = <span class="number">345678</span>;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">1</span>;</span><br><span class="line">        result = result * prime + str.hashCode();</span><br><span class="line">        result = result * prime + inter;</span><br><span class="line">        result = result * prime + obj.hashCode();</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == obj) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (getClass() != obj.getClass()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Item other = (Item) obj;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (str == <span class="keyword">null</span> &amp;&amp; other.str != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!str.equals(other.str)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="IV-Probabilities"><a href="#IV-Probabilities" class="headerlink" title="IV. Probabilities"></a>IV. Probabilities</h3><p>a. n elements, n cells, question: for any particular cell, the prob of<br>    the number of elements is equal to k.<br>    Ans: prob = C(n, k) * (1/n)^k * (1-1/n)^(n-k)</p>
<p>b. N people with everyone of different birthday<br>    Ans: p(n) = 365/365 * 364/365 * .. * (365-n)/365 &lt; 50%</p>
<p>c. More probability questions<br><a href="https://www.careercup.com/page?pid=probability-interview-questions" target="_blank" rel="noopener">https://www.careercup.com/page?pid=probability-interview-questions</a></p>
<h3 id="V-Further-Readings"><a href="#V-Further-Readings" class="headerlink" title="V. Further Readings"></a>V. Further Readings</h3><p>a. Java Knowledge<br>    1. Annotation;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/06/27/python-basics-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/27/python-basics-notes/" class="post-title-link" itemprop="url">Learn Python Basics Learning Notes I</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-06-27 23:07:30" itemprop="dateCreated datePublished" datetime="2016-06-27T23:07:30-07:00">2016-06-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-03-21 08:57:48" itemprop="dateModified" datetime="2017-03-21T08:57:48-07:00">2017-03-21</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/06/27/python-basics-notes/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/27/python-basics-notes/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="I-Python-for-Beginners"><a href="#I-Python-for-Beginners" class="headerlink" title="I. Python for Beginners"></a>I. Python for Beginners</h2><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>Python is a language with widespread adoption and lots of uses.</p>
<h3 id="Python-Variable"><a href="#Python-Variable" class="headerlink" title="Python Variable"></a>Python Variable</h3><p>Example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">"Danny"</span></span><br></pre></td></tr></table></figure>

<h3 id="Fuctions-and-Objects"><a href="#Fuctions-and-Objects" class="headerlink" title="Fuctions and Objects"></a>Fuctions and Objects</h3><p>Example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_function_name</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"this is the function body"</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Syntax-and-Style"><a href="#Syntax-and-Style" class="headerlink" title="Syntax and Style"></a>Syntax and Style</h3><p>Every programming language has specific words and rules for using them which we call syntax. Some languages also have rules about how the code should look. Python has both of these!<br>Blocks are indented one extra step.Each indentation step should be four spaces (just hit tab)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">answer_the_phone</span><span class="params">()</span>:</span></span><br><span class="line">    greeting = <span class="string">"Hi, this is Kenneth. Who is this?"</span></span><br><span class="line">    print(greeting)</span><br></pre></td></tr></table></figure>

<h3 id="The-Python-Shell"><a href="#The-Python-Shell" class="headerlink" title="The Python Shell"></a>The Python Shell</h3><p>In Mac, just type “python” in terminal to enter python shell, and type “exit()” to quit.</p>
<h3 id="Running-Python-Scripts"><a href="#Running-Python-Scripts" class="headerlink" title="Running Python Scripts"></a>Running Python Scripts</h3><p>Example to run a python script in python shell:<br>treehouse:~/workspace$ python hello_world.py</p>
<h3 id="Errors"><a href="#Errors" class="headerlink" title="Errors:"></a>Errors:</h3><p>*<em>NameError: *</em><br>Example: 5 + x<br>Got the error because the x is not defined.</p>
<p><strong>TypeError: 5 + ‘a’</strong><br>Got the error because 5 and ‘a’ are different types, and can not be added.</p>
<p><strong>SyntaxError:</strong><br>Example: print(“Hello)<br>Got the error because of missing the syntax “</p>
<h2 id="II-Python-Data-Types"><a href="#II-Python-Data-Types" class="headerlink" title="II. Python Data Types"></a>II. Python Data Types</h2><p>TBD</p>
<h2 id="III-Logic-in-Python"><a href="#III-Logic-in-Python" class="headerlink" title="III. Logic in Python"></a>III. Logic in Python</h2><p>TBD</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/04/25/build-api-in-spark/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/04/25/build-api-in-spark/" class="post-title-link" itemprop="url">Build a REST API in Spark Summary</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2016-04-25 20:46:16 / Modified: 20:49:56" itemprop="dateCreated datePublished" datetime="2016-04-25T20:46:16-07:00">2016-04-25</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/04/25/build-api-in-spark/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/25/build-api-in-spark/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>In the last several days, I built a REST service by myself for the first time. It’s pretty cool to know the concepts of building REST service and make it working!  :)</p>
<h4 id="I-Intro"><a href="#I-Intro" class="headerlink" title="I. Intro"></a>I. Intro</h4><p> This project provides the following REST endpoints:</p>
<ul>
<li><strong>/courses</strong><ul>
<li>POST: add a course to server;</li>
<li>GET: get all courses from server.</li>
</ul>
</li>
<li><strong>/courses/{id}</strong><ul>
<li>GET: get a specific course from server.</li>
</ul>
</li>
<li><strong>/courses/{id}/reviews</strong><ul>
<li>POST: add a review to a specific course;</li>
<li>GET: get the reviews of a specific course.</li>
</ul>
</li>
</ul>
<h4 id="II-Topics"><a href="#II-Topics" class="headerlink" title="II. Topics"></a>II. Topics</h4><p>From this project, besides knowing the basic steps to build REST service, you can also get familiar with the following topics.</p>
<p><strong>IntelliJ IDEA</strong><br>The IDE used in this project, one of the most popular Java IDE.</p>
<p><strong>Gradle</strong><br>One of the most popular java building tools.  There are also other java building tools like Maven, Ant, etc.<br><a href="https://technologyconversations.com/2014/06/18/build-tools/" target="_blank" rel="noopener">Java Build Tools: Ant vs Maven vs Gradle</a></p>
<p><strong>Spark</strong><br>A micro framework for creating web applications in Java 8 with minimal effort, <strong>NOT</strong> the well known Apache Spark. Spark is built around Java 8’s lambda philosophy, which makes a typical Spark application a lot less verbose than most application written in other Java web frameworks.<br><a href="http://sparkjava.com" target="_blank" rel="noopener">Spark Homepage</a></p>
<p><strong>Dao:</strong><br>Data Access Object is an object that provides an abstract interface to some type of database or other persistence mechanism. By mapping application calls to the persistence layer, DAO provide some specific data operations without exposing details of the database.</p>
<p><strong>Serialization</strong><br>Serialization is usually used When the need arises to send your data over network or stored in files. By data I mean objects and not text.<br>Now the problem is your Network infrastructure and your Hard disk are hardware components that understand bits and bytes but not JAVA objects.<br>Serialization is the translation of your Java object’s values/states to bytes to send it over network or save it.<br>This is analogous to how your voice is transmitted over PSTN telephone lines.</p>
<p><strong>GSON</strong><br>A Java serialization/deserialization library that can convert Java Objects into JSON and back. Created by google.<br><a href="https://github.com/google/gson" target="_blank" rel="noopener">GSON Homepage</a></p>
<p><strong>Sql2o</strong><br>Sql2o is a small java framework that makes it easy to execute sql statements on your JDBC compliant database from java.<br><a href="http://www.sql2o.org" target="_blank" rel="noopener">Sql2o Homepage</a></p>
<p><strong>Lambda Expression</strong><br>Introduced in Java 8. It is an <strong>anonymous function</strong> that you can use to create delegates or expression tree types. By using lambda expressions, you can write local functions that can be passed as arguments or returned as the value of function calls. </p>
<p><strong>Test cases</strong><br>There are some test cases example included in the project, clone the code and check them out! :)</p>
<h4 id="III-References"><a href="#III-References" class="headerlink" title="III References"></a>III References</h4><ul>
<li><a href="https://teamtreehouse.com/library/build-a-rest-api-in-spark" target="_blank" rel="noopener">Treehouse Tutorial</a></li>
<li><a href="https://github.com/dannyzju/course-review-rest-api" target="_blank" rel="noopener">Github Repository</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/03/29/whyDoWeNeedReadingNotes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/29/whyDoWeNeedReadingNotes/" class="post-title-link" itemprop="url">为什么要写读书笔记？</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-29 22:17:36" itemprop="dateCreated datePublished" datetime="2016-03-29T22:17:36-07:00">2016-03-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2016-07-30 14:23:56" itemprop="dateModified" datetime="2016-07-30T14:23:56-07:00">2016-07-30</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/03/29/whyDoWeNeedReadingNotes/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/29/whyDoWeNeedReadingNotes/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>不动笔墨不读书 。</p>
</blockquote>
<p>在过去相当长的一段时间，发现在读书的时候只是快速扫过，当时会有一些感悟，但一段时间之后再回想便发现头脑中只剩下些残存的干瘪印象，并没有留下什么实质性的内容，于是乎，痛定思痛，决定通过写读书笔记的方式提高阅读质量。</p>
<p>总结下来，写读书笔记的好处无外乎有三点：</p>
<p>首先，写读书笔记可以加深对书籍的理解，哪怕仅仅是摘录些好句子，好段落。因为即使是摘录，也总的有个选择的过程，摘什么，怎么摘，必须动一番脑筋，进行一次深入思考，这个过程就加深了对文章的理解。若要写一篇读书心得，则更需要弄懂弄通所读书籍，如果觉得写不出来，或者写得不好，就说明对文章的理解不够。总之，通过写读书笔记，头脑中模糊和凌乱的东西就会清晰、有条理起来，你的思维就会想纵深发展。</p>
<p>其次，写读书笔记可以系统地整理和记忆知识。有人会说，书上都有了，自己何必去整理？其实这个过程是相当于有针对性地把你需要的知识从书中归纳整理出来，按照你的知识系统编辑起来。还记得以前在本科期末复习的时候， 不少成绩很好的同学都会把整本书的内容归纳梳理一遍，最后浓缩成几页纸内容，这个过程完成的同时也会有种豁然开朗的感觉，这和单纯地只是阅读一本书是完全不同的。</p>
<p>第三，写读书笔记，还可以在研究别人的观点中，形成你自己的见解和观点，这就是对知识的再创造。历史上很多有成就的人物，也都十分重视利用读书笔记积累和整理知识。比如列宁的《哲学笔记》是一部很重要的书，这部著作就是列宁在学习和研究哲学时所做的读书笔记。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/03/24/codeReview/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/24/codeReview/" class="post-title-link" itemprop="url">Best Practice for Code Review</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2016-03-24 20:27:34 / Modified: 20:32:29" itemprop="dateCreated datePublished" datetime="2016-03-24T20:27:34-07:00">2016-03-24</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/03/24/codeReview/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/24/codeReview/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Why-Code-Review"><a href="#Why-Code-Review" class="headerlink" title="Why Code Review?"></a>Why Code Review?</h4><ul>
<li>Developers know their code will be evaluated, so they work harder.</li>
<li>It improves a developer’s own programming skills.</li>
<li>It’s an opportunity for mentoring, so the programmers you work with get smarter (and thus, more fun to hang around with).</li>
<li>It creates consistency and a culture of quality across the project.</li>
<li>It encourages team bonding.</li>
</ul>
<h4 id="How-to-run-an-effective-code-review"><a href="#How-to-run-an-effective-code-review" class="headerlink" title="How to run an effective code review?"></a>How to run an effective code review?</h4><ul>
<li>Review fewer than 200–400 lines of code at a time</li>
<li>Aim for an inspection rate of fewer than 300–500 LOC per hour</li>
<li>Take enough time for a proper, slow review, but not more than 60–90 minutes</li>
<li>Be sure that authors annotate source code before the review begins</li>
<li>Establish quantifiable goals for code review, and capture metrics so you can improve your processes</li>
<li>Use checklists, because they substantially improve results for both authors and reviewers</li>
<li>Verify that the defects are actually fixed</li>
<li>Foster a good code review culture in which finding defects is viewed positively</li>
<li>Beware of the Big Brother effect</li>
<li>Review at least part of the code, even if you can’t do all of it, to benefit from The Ego Effect</li>
<li>Adopt lightweight, tool-assisted code reviews</li>
</ul>
<h4 id="More-Reference"><a href="#More-Reference" class="headerlink" title="More Reference:"></a>More Reference:</h4><ul>
<li><a href="http://www.cio.com/article/472377" target="_blank" rel="noopener">5 Reasons for Software Developers to Do Code Reviews (Even If You Think They’re a Waste of Time)</a></li>
<li><a href="http://www.ibm.com/developerworks/rational/library/11-proven-practices-for-peer-review/" target="_blank" rel="noopener">11 proven practices for more effective, efficient peer code review</a></li>
<li><a href="http://www.cio.com/article/2431557/developer/running-an-effective-code-review.html?page=2" target="_blank" rel="noopener">Running an Effective Code Review</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/03/20/createGitHubBlogWithHexo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/03/20/createGitHubBlogWithHexo/" class="post-title-link" itemprop="url">利用Hexo快速搭建GitHub博客</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-03-20 01:05:03" itemprop="dateCreated datePublished" datetime="2016-03-20T01:05:03-07:00">2016-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2016-03-24 20:25:50" itemprop="dateModified" datetime="2016-03-24T20:25:50-07:00">2016-03-24</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/03/20/createGitHubBlogWithHexo/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/20/createGitHubBlogWithHexo/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>目前基于GitHub的博客框架有不少，比如JekyII，Octopress等， 但相对来说Hexo上手简单，并且更加快速，简洁且高效，可以让我们更加专注于写作本身。</p>
<h4 id="Step-1-创建GitHub-Repository"><a href="#Step-1-创建GitHub-Repository" class="headerlink" title="Step 1: 创建GitHub Repository"></a>Step 1: 创建GitHub Repository</h4><p>登陆GitHub，并且创建一个新的repository。<br>需要注意的是这个repository的名字必须是username.github.io的形式。比如说我的用户名是dannyzju，那么在这里我的repository 的名字就必须是dannyzju.github.io。<br><img src="/content/images/2016/createGitHubBlogWithHexo.png" alt="Create a new repository"><br>确认repository名字无误后，点击 Create repository按钮。</p>
<h4 id="Step-2-安装hexo"><a href="#Step-2-安装hexo" class="headerlink" title="Step 2: 安装hexo"></a>Step 2: 安装hexo</h4><p>在开始安装hexo之前，需要确定Mac上已经装好：</p>
<ul>
<li><a href="http://nodejs.org" target="_blank" rel="noopener">Node.js</a></li>
<li><a href="https://git-scm.com" target="_blank" rel="noopener">Git</a></li>
</ul>
<p>接下来打开terminal，输入如下指令安装hexo：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>
<p>安装完成后，输入以下三行命令初始化博客：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog </span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p>本地hexo的安装就完成了，输入以下命令即可在本地预览。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<h4 id="Step-3-将博客部署到github上"><a href="#Step-3-将博客部署到github上" class="headerlink" title="Step 3: 将博客部署到github上"></a>Step 3: 将博客部署到github上</h4><p>首先需要在terminal中输入以下命令，安装 hexo-deployer-git</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>在刚才安装博客的blog文件夹下找到_config.yml， 用文本编辑器打开。<br>在最后可以看到deploy的初始设置信息如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">	<span class="built_in">type</span>:</span><br></pre></td></tr></table></figure>
<p>回到github我们刚才创建的repository页面，复制repository的url。<br>然后修改_config.yml的deploy设置如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/username/username.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>保存修改并退出。</p>
<p>打开terminal，进入创建的blog文件夹路径，依次输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<p>到此为止，个人博客就已成功部署到github上了。打开username.github.io，就可以看到刚才创建的博客了。</p>
<h4 id="Step-4-个性化设置"><a href="#Step-4-个性化设置" class="headerlink" title="Step 4: 个性化设置"></a>Step 4: 个性化设置</h4><p>我们可以在_config.yml中对博客进行进一步的设置。<br>首先用文本编辑器打开_config.yml文件，第一个section是博客页面的基本信息，我们可以修改如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line">title: D.Z. Notes</span><br><span class="line">subtitle: 不苛求完美，不停止进步。</span><br><span class="line">description:</span><br><span class="line">author: Danny Zhang</span><br><span class="line">language: en</span><br><span class="line">timezone:</span><br></pre></td></tr></table></figure>

<p>接下来我们可以尝试更换博客的主题风格，在这里以Maupassant主题为例：<br>在terminal中进入创建的blog文件夹，依次输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/tufu9441/maupassant-hexo.git themes/maupassant</span><br><span class="line">$ npm install hexo-renderer-jade --save</span><br><span class="line">$ npm install hexo-renderer-sass --save</span><br></pre></td></tr></table></figure>
<p>然后在_config.yml中修改theme设置如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line">theme: maupassant</span><br></pre></td></tr></table></figure>

<p>保存文件并退出。<br>在terminal的blog路径下，依次输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
<p>刷新博客页面，就可以看到网站信息和主题已经被更新了。</p>
<h4 id="Step-5-发布博文"><a href="#Step-5-发布博文" class="headerlink" title="Step 5: 发布博文"></a>Step 5: 发布博文</h4><p>在terminal中输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new post <span class="string">"文章题目"</span></span><br></pre></td></tr></table></figure>
<p>命令执行完后，就会发现在/blog/source/_post中多了一个“文章题目.md”文件，这就是我们刚才新建的博文。<br>Hexo支持markdown格式的文档，我们可以使用文本编辑器(如Sublime Text)或者markdown编辑器(如chrome app Marxico)，实现博文更新。</p>
<p>最后，再次执行下面几条命令，将博客部署到GitHub上：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">(若要本地预览就先执行 hexo server)</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<p>刷新博客页面，就可以看到博文更新啦 ：）</p>
<h4 id="End"><a href="#End" class="headerlink" title="End"></a>End</h4><ul>
<li>更多的Hexo设置请参考Hexo官方文档：<ul>
<li><a href="https://hexo.io/docs/" target="_blank" rel="noopener">https://hexo.io/docs/</a></li>
</ul>
</li>
<li>Maupassant主题的GitHub页面：<ul>
<li><a href="https://hexo.io/docs/" target="_blank" rel="noopener">https://hexo.io/docs/</a></li>
</ul>
</li>
<li>需要更详细的搭建指南也可参考以下文章：<ul>
<li><a href="http://sunwhut.com/2015/10/30/buildBlog/?hmsr=toutiao.io&utm_medium=toutiao.io&utm_source=toutiao.io" target="_blank" rel="noopener">如何利用GitHub Pages和Hexo快速搭建个人博客</a></li>
<li><a href="http://yangruihan.com/2015/03/22/Windows下一步步搭建自己的独立博客——使用%20GitHub%20Pages%20+%20Hexo%20基础教程（一）/" target="_blank" rel="noopener">Windows下一步步搭建自己的独立博客——使用 GitHub Pages + Hexo 基础教程</a></li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Danny Zhang</p>
  <div class="site-description" itemprop="description">Blogger/Software Engineer/Fitness Enthusiast</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">48</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags">
          
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Danny Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://dannyzhang-run.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
