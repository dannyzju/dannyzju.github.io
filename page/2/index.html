<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"dannyzhang.run","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Blogger&#x2F;Software Engineer&#x2F;Fitness Enthusiast">
<meta property="og:type" content="website">
<meta property="og:title" content="D.Z. Notes (Beta)">
<meta property="og:url" content="http://dannyzhang.run/page/2/index.html">
<meta property="og:site_name" content="D.Z. Notes (Beta)">
<meta property="og:description" content="Blogger&#x2F;Software Engineer&#x2F;Fitness Enthusiast">
<meta property="article:author" content="Danny Zhang">
<meta property="article:tag" content="Danny Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://dannyzhang.run/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>D.Z. Notes (Beta)</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">D.Z. Notes (Beta)</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Be insensitive, and keep a lifelong growth mindset.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section">Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section">Archives</a>

  </li>
        <li class="menu-item menu-item-technical">

    <a href="/technical" rel="section">technical</a>

  </li>
        <li class="menu-item menu-item-essays">

    <a href="/essays" rel="section">essays</a>

  </li>
        <li class="menu-item menu-item-readings">

    <a href="/readings" rel="section">readings</a>

  </li>
        <li class="menu-item menu-item-workout">

    <a href="/workout" rel="section">workout</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags" rel="section">Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about" rel="section">About</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/06/27/2017-weekly-7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/06/27/2017-weekly-7/" class="post-title-link" itemprop="url">最美的风景</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2017-06-27 22:26:00 / Modified: 22:29:01" itemprop="dateCreated datePublished" datetime="2017-06-27T22:26:00-07:00">2017-06-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近又到了高考季，想想距离我自己的高考已经九年了。突然又感性了一把，翻出了当年高考结束后写的随笔。</p>
<p>“高三,收获的不仅仅是成绩,而是一段刻骨而难忘的征途。我需要感谢的人太多,需要铭记的事也太多。可终究还是告别了高三,我已不会再回来。”</p>
<p>人生是一趟永远无法回头的列车，一段征途的结束往往又是下一个大冒险的开启。尽管前面充满了泥泞和未知，但我们也不能因此而停下前行的脚步，否则就会永远地止步不前了，而没有什么比这更令人绝望。</p>
<p>其实很早就开始模糊地意识到，理想的人生应该是抱着一种去修行的态度，近些日子愈发坚定了这一想法。早起，极简主义，自律，健身，时间管理，成长性思维，都是在修行道路上打怪升级的有力武器。而在修行的终极目标又是什么呢？一定是要去做那些你喜欢，有意义，并且特别希望能够做成的事儿。</p>
<p>这世界上没有什么真正的成就是唾手可得的，否则就难以称之为成就。相对于那些上来就开挂，无限金币加血槽，一路轻松虐菜，完爆大Boss的剧情，我反倒更喜欢那种坚持了，失败，再坚持，再失败，然后还能爬起来再坚持的故事。</p>
<p>失败并不是一件坏事，相反，逆境的历练会让你变得更加明智和坚强。</p>
<p>当年J·K·罗琳因遭受家庭暴力而离婚，彼时的她距离大学毕业已经七年，没有工作，婚姻失败，还带着一个嗷嗷待哺的孩子。她自嘲为自己所见过最失败的人，但她却形容那场失败是种解放。</p>
<p>“失败代表了摒除不必要的事物，我不再自我欺骗、干脆忠于自我，投注所有心力完成唯一重要的工作。要是我以前在其他地方成功了，那么我也许永远不会有这样的决心，投身于这个我自信真正属于我的领域。我重获自由了！因为我最大的恐惧虽然降临了，而我还活着，我还有个可爱的女儿，还有台老旧的打字机和伟大的构思。曾经跌落深邃的谷底，却变成日后重生深厚的基础。”</p>
<p>无论何时何境，希望我们都能双眼带着光彩，带着一往无前的勇气，去发现最美的风景。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/06/25/Complete-JavaScript-Course-Project-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/06/25/Complete-JavaScript-Course-Project-3/" class="post-title-link" itemprop="url">Put It All Together: The Budget App Project: Part III</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2017-06-25 11:44:13 / Modified: 11:47:36" itemprop="dateCreated datePublished" datetime="2017-06-25T11:44:13-07:00">2017-06-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-Project-Planning-and-Architecture-Step-3"><a href="#1-Project-Planning-and-Architecture-Step-3" class="headerlink" title="1. Project Planning and Architecture: Step 3"></a>1. Project Planning and Architecture: Step 3</h2><h3 id="1-1-What-We-Just-Completed"><a href="#1-1-What-We-Just-Completed" class="headerlink" title="1.1. What We Just Completed"></a>1.1. What We Just Completed</h3><p><img src="https://lh3.googleusercontent.com/zcQMdq5e9yHiXSsAr5CZAF4vlKBZV11aGMZjd2Tec3o-nkJhKLOIIihcwA_DebCHNEJtMu_3EFPHmCpPQ7O666yAV4y9Ab2XrxWfUg3g9lQW1n6oqijQW6OzhW5dWrC63FgSEcf7Ef6UbVclr5gvxgwTDyKuBMQEflW1lhefF_BsRFR1vHD6Gsks8ZRFlmmlcnx_k80q782tXrSElmjqifgZCpEY5bPPt8o8K5CBk5I5eCovsGuYqzPp7h46Km-crJ5t-f6sjNmeeBHdsQ-O-uFYZXUmAsgnc_i7W2MWj4u57usg4CSN0H3yH98hV2SgebkUqn6HRlIwo78oPLef8qniBQLLibWFhYAfhLGoMqzQkFd2383JPDlSqJZ0MEHf6F4YmpVea_e7Vb3U0u6AhYa3C0X-GPF0yWbxtoyMi97Z-W12-n7QFUNQWen4kGOXAnipezTUfmeRGFA7BVsLLyLi3bkfWbKoAkyPOv5qAsdkLV1pOUEewm0BW8dGjmawiyVRUvseY1wq8m7OToWGTq92aM6FhWTosG3krgCPCNLI62lTXgFgwjK7yRV_5Jnf0iVqbqGwlXRQMCWlEPU1jwmoF5BnXossg4yBM7AVd0f5lMEXvSfOEZFKuTJdX6m2tP6w3L-2-KAATJL8ioHK1MhNYmBCcwRONKZnGERIwA=w1592-h928-no" alt="What We Just Completed"></p>
<h3 id="1-2-Panning-Step-3"><a href="#1-2-Panning-Step-3" class="headerlink" title="1.2. Panning: Step 3"></a>1.2. Panning: Step 3</h3><p><img src="https://lh3.googleusercontent.com/iptcVLukbH-GpmuPlC7HORZ2rVsk_VEd9LCz8EkjKakE4658ijEZF-F8IBLVOfvWdoUYiXRhyCk8etI9MwzUxlj0DHX973A7eUbGOyj0nYJKmsEcKrYGztnWwC3XdGj2o-kBdtTKlOI1SdoZ4XSIQwvwSKszvE41tDTAzg7FrTuN8BwgAUolG2ojL75AVhkTpMHtEbtXx3XgMNBDQkddsXhkKPamv7sdEas2vBd9rS3IBuV8OE_68qdJOV3toEtabpfIGjsfrYuQWlDBevZ9RgONmySfDad9bFfLE3eSCX8L956wqS992mX7hU3EwJWlFQtH2qatXnPDuD9-2PeTdbWRKlRFDckD9-HtxdogNQsne9Kvmq8Q7I9jykIiWVUT_Yn0OaWPvBAN1l8ExOHLrYENuTuQRxZEldKoqfM4pSNAzPkO3dxLRCms3psFVgMVVrnuCo2yC6WC4M4rzenPLN__h0fMLggeeDZby5HTRqUjH8QwH8mDuPqKbqfQ9Si_TBTXB2jDW-FqGtvJOSQECKBxJrHt2AEr1h7Tw8sxWYptjyrYkoIJpWLW6BqM_UVBCLvdVuWOLUBR5cEdC6EPasKUwUNyTF_QuxPG5UAtLZ-RDtHDyvaFlR0vwi99YIN1Py14TYuqeijjM47N00RJQIkIwEVjFvWN-l8WzcQp9g=w1704-h834-no" alt="Panning: Step 3"></p>
<h2 id="2-Updating-the-Percentages-Controller"><a href="#2-Updating-the-Percentages-Controller" class="headerlink" title="2. Updating the Percentages: Controller"></a>2. Updating the Percentages: Controller</h2><ul>
<li>What you will learn in this section:<ul>
<li>Reinforcing the concepts and techniques we have learned so far.</li>
</ul>
</li>
</ul>
<p>Add updatePercentage Method in app controller.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (<span class="function"><span class="keyword">function</span>(<span class="params">budgetCtrl, UICtrl</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> setupEventListners = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> DOM = UICtrl.getDOMstrings();</span><br><span class="line">		<span class="built_in">document</span>.querySelector(DOM.inputBtn).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">document</span>.addEventListener(<span class="string">'keypress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">document</span>.querySelector(DOM.container).addEventListener(<span class="string">'click'</span>, ctrlDeleteItem);</span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> updateBudget = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 1. Calculate the budget</span></span><br><span class="line">		budgetCtrl.calculateBudget();</span><br><span class="line">		<span class="comment">// 2. Return the budget</span></span><br><span class="line">		<span class="keyword">var</span> budget = bubdgetctrl.getBudget();</span><br><span class="line">		<span class="comment">// 3. Display the budget on the UI</span></span><br><span class="line">		<span class="built_in">console</span>.log(budget);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> updatePercentages = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Calculate percentages</span></span><br><span class="line">		<span class="comment">// 2. Read percentages from the budget controller</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 3. Update the UI with the new percentages</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> input, newItem;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		input = UICtrl.getInput();</span><br><span class="line">		<span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (input.description !== <span class="string">""</span> &amp;&amp; !<span class="built_in">isNaN</span>(input.value) &amp;&amp; input.value &gt; <span class="number">0</span>)  &#123;</span><br><span class="line">			<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">			newItem = budgetCtrl.addItem(input.type, input.description, input.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">			UICtrl.addListItem(newItem, input.type);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 4. Clear the fields</span></span><br><span class="line">			UICtrl.clearFields();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 5. Calculate and update budget</span></span><br><span class="line">			updateBudget();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 6. Calculate and update percentage</span></span><br><span class="line">			updatePercentages();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlDeleteItem = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event.target);</span><br><span class="line">		<span class="keyword">var</span> itemID, splitID;</span><br><span class="line">		itemID = event.target.parentNode.parentNode.parentNode.parentNode.id;</span><br><span class="line">		<span class="keyword">if</span> (itemID) &#123;</span><br><span class="line">			<span class="comment">//inc-1</span></span><br><span class="line">			splitID = itemID.split(<span class="string">"-"</span>);</span><br><span class="line">			type = splitID[<span class="number">0</span>];</span><br><span class="line">			ID = splitID[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 1. delete the item from the data structure</span></span><br><span class="line">			budgetCtrl.deleteItem(type, ID);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 2. Delete the item from the UI</span></span><br><span class="line">			UICtrl.deleteListItem(itemID);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 3. Update and show the new budget</span></span><br><span class="line">			updateBudget();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 4. Calculate and update percentage</span></span><br><span class="line">			updatePercentages();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Our public init method</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Application has started.'</span>);</span><br><span class="line">			UICtrl.displayBudget(&#123;</span><br><span class="line">				budget: <span class="number">0</span>,</span><br><span class="line">				totalInc: <span class="number">0</span>,</span><br><span class="line">				totalExp: <span class="number">0</span>,</span><br><span class="line">				percentage: <span class="number">-1</span></span><br><span class="line">			&#125;);</span><br><span class="line">			setupEventListeners();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>


<h2 id="3-Updating-the-Percentages-Budget-Controller"><a href="#3-Updating-the-Percentages-Budget-Controller" class="headerlink" title="3. Updating the Percentages: Budget Controller"></a>3. Updating the Percentages: Budget Controller</h2><ul>
<li>What you will learn in this lecture<ul>
<li>How to make our budget controller interact with the Expense prototype.</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// BUDGET CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> budgetController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Some code</span></span><br><span class="line">	<span class="keyword">var</span> Expense = <span class="function"><span class="keyword">function</span>(<span class="params">id, description, value</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.description = description;</span><br><span class="line">		<span class="keyword">this</span>.value = value;</span><br><span class="line">		<span class="keyword">this</span>.percentage = <span class="number">-1</span>;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	Expense.prototype.calcPercentage = <span class="function"><span class="keyword">function</span>(<span class="params">totalIncome</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (totalIncome &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">this</span>.percentage = <span class="built_in">Math</span>.round((<span class="keyword">this</span>.value / totalIncome) * <span class="number">100</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.percentage = <span class="number">-1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	Expense.prototype.getPercentage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.percentage;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> Income = <span class="function"><span class="keyword">function</span>(<span class="params">id, description, value</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.description = description;</span><br><span class="line">		<span class="keyword">this</span>.value = value;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> calculateTotal = <span class="function"><span class="keyword">function</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">		data.allItems[type].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">cur</span>) </span>&#123;</span><br><span class="line">			sum = sum + cur.value;</span><br><span class="line">		&#125;);</span><br><span class="line">		data.totals[type] = sum;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> data = &#123;</span><br><span class="line">		allItems: &#123;</span><br><span class="line">			exp: [],</span><br><span class="line">			inc: []</span><br><span class="line">		&#125;,</span><br><span class="line">		totals: &#123;</span><br><span class="line">			exp: <span class="number">0</span>,</span><br><span class="line">			inc: <span class="number">0</span></span><br><span class="line">		&#125;,</span><br><span class="line">		budget: <span class="number">0</span>,</span><br><span class="line">		percentage: <span class="number">-1</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		addItem: <span class="function"><span class="keyword">function</span>(<span class="params">type, des, val</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> newItem, ID;</span><br><span class="line">			<span class="comment">//Create new ID</span></span><br><span class="line">			ID = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">if</span> (data.allItems[type].length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				ID = data.allItems[type][data.allItems[type].length - <span class="number">1</span>].id + <span class="number">1</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				ID = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Create new item based on 'inc' or 'exp' type</span></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">				newItem = <span class="keyword">new</span> Expense(ID, des, val);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">				newItem = <span class="keyword">new</span> Income(ID, des, val);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//Push it into our data structure</span></span><br><span class="line">			data.allItems[type].push(newItem);</span><br><span class="line"></span><br><span class="line">			<span class="comment">//Return the new element</span></span><br><span class="line">			<span class="keyword">return</span> newItem;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		deleteItem: <span class="function"><span class="keyword">function</span>(<span class="params">type, id</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> ids, index;</span><br><span class="line">			<span class="comment">// id = 3</span></span><br><span class="line">			<span class="keyword">var</span> ids = data.allItems[type].map(<span class="function"><span class="keyword">function</span>(<span class="params">current</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">return</span> current.id;</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">			index = ids.indexOf(id);</span><br><span class="line">			<span class="keyword">if</span> (index !=== <span class="number">-1</span>) &#123;</span><br><span class="line">				data.allItems[type].splice(index, <span class="number">1</span>);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		calculateBudget: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="comment">// calculate total income and expenses</span></span><br><span class="line">			calculateTotal(<span class="string">'exp'</span>);</span><br><span class="line">			calculateTotal(<span class="string">'inc'</span>);</span><br><span class="line">			<span class="comment">// Calculate the budget: income - expenses</span></span><br><span class="line">			data.budget = data.totals.inc - data.totals.exp;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Calculate the percentage of income that we spent</span></span><br><span class="line">			<span class="keyword">if</span> (data.totals.inc &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				data.percentage = <span class="built_in">Math</span>.round((data.totals.exp / data.totals.inc) * <span class="number">100</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				data.percentage = <span class="number">-1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		calculatePercentages: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			data.allItems.exp.forEach(fuction(cur) &#123;</span><br><span class="line">				cur.calcPercentage(data.totals.inc);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getPercentages: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> allPerc = data.allItems.exp.map(<span class="function"><span class="keyword">function</span>(<span class="params">cur</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">return</span> cur.getPercentage();</span><br><span class="line">			&#125;);</span><br><span class="line">			<span class="keyword">return</span> allPerc;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getBudget: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				budget: data.budget,</span><br><span class="line">				totalInc: data.totals.inc,</span><br><span class="line">				totalExp: data.totals.exp,</span><br><span class="line">				percentage: data.percentage</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		testing: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(data);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>


<p>Now we can update our app controller:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> updatePercentages = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 1. Calculate percentages</span></span><br><span class="line">	budgetCtrl.calculatePercentages();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 2. Read percentages from the budget controller</span></span><br><span class="line">	<span class="keyword">var</span> percentages = budgetCtrl.getPercentages();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 3. Update the UI with the new percentages</span></span><br><span class="line">	<span class="built_in">console</span>.log(percentages);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="4-Updating-the-Percentages-UI-Controller"><a href="#4-Updating-the-Percentages-UI-Controller" class="headerlink" title="4. Updating the Percentages: UI Controller"></a>4. Updating the Percentages: UI Controller</h2><ul>
<li>What you will learn in this section:<ul>
<li>How to create our own forEach function but for nodeLists instead of arrays.</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOMstrings = &#123;</span><br><span class="line">		inputType: <span class="string">'.add__type'</span>,</span><br><span class="line">		inputDescription: <span class="string">'.add_description'</span>,</span><br><span class="line">		inputValue: <span class="string">'.add__value'</span>，</span><br><span class="line">		inputBtn: <span class="string">'.add_btn'</span>,</span><br><span class="line">		incomeContainer: <span class="string">'.income__list'</span>,</span><br><span class="line">		expensesContainer: <span class="string">'.expenses__list'</span>,</span><br><span class="line">		budgetLabel: <span class="string">'.budget__value'</span>,</span><br><span class="line">		incomeLabeL: <span class="string">'.budget__income--value'</span>,</span><br><span class="line">		expensesLabel: <span class="string">'.budget__expenses--value'</span>,</span><br><span class="line">		percentageLabel: <span class="string">'.budget__expenses--percentage'</span>,</span><br><span class="line">		container: <span class="string">'.container'</span>,</span><br><span class="line">		expensesPercLabel: <span class="string">'.item__percentage'</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		getInput: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="keyword">var</span> type = <span class="built_in">document</span>.querySelector(DOMstrings.inputType).value,</span><br><span class="line">			<span class="keyword">var</span> description = <span class="built_in">document</span>.querySelector(DOMstrings.inputDescription).value,</span><br><span class="line">			<span class="keyword">var</span> value = <span class="built_in">document</span>.querySelector(DOMstrings.inputValue).value</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		addListItem: <span class="function"><span class="keyword">function</span>(<span class="params">obj, type</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> html, newHtml, element;</span><br><span class="line">			<span class="comment">// Create HTML string with placeholder text</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">        element = DOMstrings.incomeContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="inc-%id%"&gt; &lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">        element = DOMstrings.expensesContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="exp-%id%"&gt;&lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__percentage"&gt;21%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Replace the placeholder text with some actual data</span></span><br><span class="line">			newHtml = html.replace(<span class="string">'%id%'</span>, obj.id);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%description%'</span>, obj.description);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%value%'</span>, obj.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Insert the HTML into the DOM</span></span><br><span class="line">			<span class="built_in">document</span>.querySelector(element).insertAdjacentHTML(<span class="string">'beforeend'</span>, newHtml);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		deleteListItem: <span class="function"><span class="keyword">function</span>(<span class="params">selectorID</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> el = <span class="built_in">document</span>.getElementById(selectorID);</span><br><span class="line">			el.parentNode.removeChild(el);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		clearFields: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields;</span><br><span class="line"></span><br><span class="line">			fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.inputDescription + <span class="string">', '</span> + DOMstrings.inputValue);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">var</span> fieldsArr = <span class="built_in">Array</span>.prototype.slice.call(fields);  </span><br><span class="line"></span><br><span class="line">			fieldsArr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">current, index, array</span>) </span>&#123;</span><br><span class="line">				current.value = <span class="string">""</span>;</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">			fieldsArr[<span class="number">0</span>].focus();</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayBudget: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.budgetLabel).textContent = obj.budget;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.incomeLabel).textContent = totoalInc;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.expensesLabel).textContent = totalExp;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>（obj.percentage &gt; <span class="number">0</span>）&#123;</span><br><span class="line">				<span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = percentage + <span class="string">'%'</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			 <span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = <span class="string">'---'</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayPercentages: <span class="function"><span class="keyword">function</span>(<span class="params">percentages</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.expensesPercLabel);</span><br><span class="line">			<span class="keyword">var</span> nodeListForEach = <span class="function"><span class="keyword">function</span>(<span class="params">list, callback</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">					callback(list[i], i);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;;</span><br><span class="line"></span><br><span class="line">			nodeListForEach(fields, <span class="function"><span class="keyword">function</span>(<span class="params">current, index</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">if</span> (percentages[index] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">					current.textContent = percentages[index] + <span class="string">"%"</span>;</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					current.textContent = <span class="string">'---'</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getDOMstrings: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> DOMstrings;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>


<h2 id="5-Formatting-Our-Budget-Numbers-String-Manipulation"><a href="#5-Formatting-Our-Budget-Numbers-String-Manipulation" class="headerlink" title="5. Formatting Our Budget Numbers: String Manipulation"></a>5. Formatting Our Budget Numbers: String Manipulation</h2><ul>
<li>What you will learn in this lecture<ul>
<li>How to use different String methods to manipulate strings.</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOMstrings = &#123;</span><br><span class="line">		inputType: <span class="string">'.add__type'</span>,</span><br><span class="line">		inputDescription: <span class="string">'.add_description'</span>,</span><br><span class="line">		inputValue: <span class="string">'.add__value'</span>，</span><br><span class="line">		inputBtn: <span class="string">'.add_btn'</span>,</span><br><span class="line">		incomeContainer: <span class="string">'.income__list'</span>,</span><br><span class="line">		expensesContainer: <span class="string">'.expenses__list'</span>,</span><br><span class="line">		budgetLabel: <span class="string">'.budget__value'</span>,</span><br><span class="line">		incomeLabeL: <span class="string">'.budget__income--value'</span>,</span><br><span class="line">		expensesLabel: <span class="string">'.budget__expenses--value'</span>,</span><br><span class="line">		percentageLabel: <span class="string">'.budget__expenses--percentage'</span>,</span><br><span class="line">		container: <span class="string">'.container'</span>,</span><br><span class="line">		expensesPercLabel: <span class="string">'.item__percentage'</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> formatNumber = <span class="function"><span class="keyword">function</span>(<span class="params">num, type</span>) </span>&#123;</span><br><span class="line">			<span class="comment">/*</span></span><br><span class="line"><span class="comment">			+ or - before number exactly 2 decimal points</span></span><br><span class="line"><span class="comment">			comma separating the thousands</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			2310.4567 =&gt; + 2,310.46</span></span><br><span class="line"><span class="comment">			2000 -&gt; + 2,000.00</span></span><br><span class="line"><span class="comment">			*/</span></span><br><span class="line"></span><br><span class="line">			num = <span class="built_in">Math</span>.abs(num);</span><br><span class="line">			num = num.toFixed(<span class="number">2</span>);</span><br><span class="line">			numSplit = num.split(<span class="string">'.'</span>);</span><br><span class="line">			int = numSplit[<span class="number">0</span>];</span><br><span class="line">			<span class="keyword">if</span> (int.length &gt; <span class="number">3</span>) &#123;</span><br><span class="line">				int = int.substr(<span class="number">0</span>, int.length - <span class="number">3</span>) + <span class="string">','</span> + int.substr(int.length - <span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			dec = numSplit[<span class="number">1</span>];</span><br><span class="line">			type === <span class="string">'exp'</span> ? sign = <span class="string">'-'</span> : sign = <span class="string">'+'</span>;</span><br><span class="line">			<span class="keyword">return</span> type + <span class="string">' '</span> + int + <span class="string">'.'</span> + dec;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		getInput: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="keyword">var</span> type = <span class="built_in">document</span>.querySelector(DOMstrings.inputType).value,</span><br><span class="line">			<span class="keyword">var</span> description = <span class="built_in">document</span>.querySelector(DOMstrings.inputDescription).value,</span><br><span class="line">			<span class="keyword">var</span> value = <span class="built_in">document</span>.querySelector(DOMstrings.inputValue).value</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		addListItem: <span class="function"><span class="keyword">function</span>(<span class="params">obj, type</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> html, newHtml, element;</span><br><span class="line">			<span class="comment">// Create HTML string with placeholder text</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">        element = DOMstrings.incomeContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="inc-%id%"&gt; &lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">        element = DOMstrings.expensesContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="exp-%id%"&gt;&lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__percentage"&gt;21%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Replace the placeholder text with some actual data</span></span><br><span class="line">			newHtml = html.replace(<span class="string">'%id%'</span>, obj.id);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%description%'</span>, obj.description);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%value%'</span>, formatNumber(obj.value, type));</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Insert the HTML into the DOM</span></span><br><span class="line">			<span class="built_in">document</span>.querySelector(element).insertAdjacentHTML(<span class="string">'beforeend'</span>, newHtml);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		deleteListItem: <span class="function"><span class="keyword">function</span>(<span class="params">selectorID</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> el = <span class="built_in">document</span>.getElementById(selectorID);</span><br><span class="line">			el.parentNode.removeChild(el);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		clearFields: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields;</span><br><span class="line"></span><br><span class="line">			fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.inputDescription + <span class="string">', '</span> + DOMstrings.inputValue);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">var</span> fieldsArr = <span class="built_in">Array</span>.prototype.slice.call(fields);  </span><br><span class="line"></span><br><span class="line">			fieldsArr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">current, index, array</span>) </span>&#123;</span><br><span class="line">				current.value = <span class="string">""</span>;</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">			fieldsArr[<span class="number">0</span>].focus();</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayBudget: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> type;</span><br><span class="line">			obj.budget &gt; <span class="number">0</span> ? type = <span class="string">'inc'</span> : type = <span class="string">'exp'</span>;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.budgetLabel).textContent = formatNumber(obj.budget, type);</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.incomeLabel).textContent = formatNumber(totoalInc, <span class="string">'inc'</span>);</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.expensesLabel).textContent = formatNumber(totalExp, <span class="string">'exp'</span>);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>（obj.percentage &gt; <span class="number">0</span>）&#123;</span><br><span class="line">				<span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = percentage + <span class="string">'%'</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			 <span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = <span class="string">'---'</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayPercentages: <span class="function"><span class="keyword">function</span>(<span class="params">percentages</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.expensesPercLabel);</span><br><span class="line">			<span class="keyword">var</span> nodeListForEach = <span class="function"><span class="keyword">function</span>(<span class="params">list, callback</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">					callback(list[i], i);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;;</span><br><span class="line"></span><br><span class="line">			nodeListForEach(fields, <span class="function"><span class="keyword">function</span>(<span class="params">current, index</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">if</span> (percentages[index] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">					current.textContent = percentages[index] + <span class="string">"%"</span>;</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					current.textContent = <span class="string">'---'</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getDOMstrings: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> DOMstrings;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h2 id="6-Displaying-the-Current-Month-and-Year"><a href="#6-Displaying-the-Current-Month-and-Year" class="headerlink" title="6. Displaying the Current Month and Year"></a>6. Displaying the Current Month and Year</h2><ul>
<li>What you will learn in this lecture:<ul>
<li>How to get the current date by using the Date object constructor.</li>
</ul>
</li>
</ul>
<p>Step1: add displayMonth function in UI controller</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOMstrings = &#123;</span><br><span class="line">		inputType: <span class="string">'.add__type'</span>,</span><br><span class="line">		inputDescription: <span class="string">'.add_description'</span>,</span><br><span class="line">		inputValue: <span class="string">'.add__value'</span>，</span><br><span class="line">		inputBtn: <span class="string">'.add_btn'</span>,</span><br><span class="line">		incomeContainer: <span class="string">'.income__list'</span>,</span><br><span class="line">		expensesContainer: <span class="string">'.expenses__list'</span>,</span><br><span class="line">		budgetLabel: <span class="string">'.budget__value'</span>,</span><br><span class="line">		incomeLabeL: <span class="string">'.budget__income--value'</span>,</span><br><span class="line">		expensesLabel: <span class="string">'.budget__expenses--value'</span>,</span><br><span class="line">		percentageLabel: <span class="string">'.budget__expenses--percentage'</span>,</span><br><span class="line">		container: <span class="string">'.container'</span>,</span><br><span class="line">		expensesPercLabel: <span class="string">'.item__percentage'</span>,</span><br><span class="line">		dateLabel: <span class="string">'.budget__title--month'</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> formatNumber = <span class="function"><span class="keyword">function</span>(<span class="params">num, type</span>) </span>&#123;</span><br><span class="line">			<span class="comment">/*</span></span><br><span class="line"><span class="comment">			+ or - before number exactly 2 decimal points</span></span><br><span class="line"><span class="comment">			comma separating the thousands</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			2310.4567 =&gt; + 2,310.46</span></span><br><span class="line"><span class="comment">			2000 -&gt; + 2,000.00</span></span><br><span class="line"><span class="comment">			*/</span></span><br><span class="line"></span><br><span class="line">			num = <span class="built_in">Math</span>.abs(num);</span><br><span class="line">			num = num.toFixed(<span class="number">2</span>);</span><br><span class="line">			numSplit = num.split(<span class="string">'.'</span>);</span><br><span class="line">			int = numSplit[<span class="number">0</span>];</span><br><span class="line">			<span class="keyword">if</span> (int.length &gt; <span class="number">3</span>) &#123;</span><br><span class="line">				int = int.substr(<span class="number">0</span>, int.length - <span class="number">3</span>) + <span class="string">','</span> + int.substr(int.length - <span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			dec = numSplit[<span class="number">1</span>];</span><br><span class="line">			type === <span class="string">'exp'</span> ? sign = <span class="string">'-'</span> : sign = <span class="string">'+'</span>;</span><br><span class="line">			<span class="keyword">return</span> type + <span class="string">' '</span> + int + <span class="string">'.'</span> + dec;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		getInput: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="keyword">var</span> type = <span class="built_in">document</span>.querySelector(DOMstrings.inputType).value,</span><br><span class="line">			<span class="keyword">var</span> description = <span class="built_in">document</span>.querySelector(DOMstrings.inputDescription).value,</span><br><span class="line">			<span class="keyword">var</span> value = <span class="built_in">document</span>.querySelector(DOMstrings.inputValue).value</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		addListItem: <span class="function"><span class="keyword">function</span>(<span class="params">obj, type</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> html, newHtml, element;</span><br><span class="line">			<span class="comment">// Create HTML string with placeholder text</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">        element = DOMstrings.incomeContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="inc-%id%"&gt; &lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">        element = DOMstrings.expensesContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="exp-%id%"&gt;&lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__percentage"&gt;21%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Replace the placeholder text with some actual data</span></span><br><span class="line">			newHtml = html.replace(<span class="string">'%id%'</span>, obj.id);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%description%'</span>, obj.description);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%value%'</span>, formatNumber(obj.value, type));</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Insert the HTML into the DOM</span></span><br><span class="line">			<span class="built_in">document</span>.querySelector(element).insertAdjacentHTML(<span class="string">'beforeend'</span>, newHtml);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		deleteListItem: <span class="function"><span class="keyword">function</span>(<span class="params">selectorID</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> el = <span class="built_in">document</span>.getElementById(selectorID);</span><br><span class="line">			el.parentNode.removeChild(el);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		clearFields: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields;</span><br><span class="line"></span><br><span class="line">			fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.inputDescription + <span class="string">', '</span> + DOMstrings.inputValue);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">var</span> fieldsArr = <span class="built_in">Array</span>.prototype.slice.call(fields);  </span><br><span class="line"></span><br><span class="line">			fieldsArr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">current, index, array</span>) </span>&#123;</span><br><span class="line">				current.value = <span class="string">""</span>;</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">			fieldsArr[<span class="number">0</span>].focus();</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayBudget: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> type;</span><br><span class="line">			obj.budget &gt; <span class="number">0</span> ? type = <span class="string">'inc'</span> : type = <span class="string">'exp'</span>;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.budgetLabel).textContent = formatNumber(obj.budget, type);</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.incomeLabel).textContent = formatNumber(totoalInc, <span class="string">'inc'</span>);</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.expensesLabel).textContent = formatNumber(totalExp, <span class="string">'exp'</span>);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>（obj.percentage &gt; <span class="number">0</span>）&#123;</span><br><span class="line">				<span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = percentage + <span class="string">'%'</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			 <span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = <span class="string">'---'</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayPercentages: <span class="function"><span class="keyword">function</span>(<span class="params">percentages</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.expensesPercLabel);</span><br><span class="line">			<span class="keyword">var</span> nodeListForEach = <span class="function"><span class="keyword">function</span>(<span class="params">list, callback</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">					callback(list[i], i);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;;</span><br><span class="line"></span><br><span class="line">			nodeListForEach(fields, <span class="function"><span class="keyword">function</span>(<span class="params">current, index</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">if</span> (percentages[index] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">					current.textContent = percentages[index] + <span class="string">"%"</span>;</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					current.textContent = <span class="string">'---'</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayMonth: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> now, months, month, year;</span><br><span class="line">			now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">			<span class="comment">// var christmas = new Date(2016, 11);</span></span><br><span class="line"></span><br><span class="line">			months = [<span class="string">'January'</span>, <span class="string">'February'</span>, <span class="string">'March'</span>, <span class="string">'April'</span>, <span class="string">'May'</span>, <span class="string">'June'</span>, <span class="string">'July'</span>, <span class="string">'Auguest'</span>, <span class="string">'September'</span>, <span class="string">'October'</span>, <span class="string">'November'</span>, <span class="string">'December'</span>];</span><br><span class="line">			month = <span class="keyword">new</span>.getMonth();</span><br><span class="line"></span><br><span class="line">			year = now.getFullYear();</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.dateLabel).textContent = months[month - <span class="number">1</span>] + <span class="string">' '</span> + year;			</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		getDOMstrings: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> DOMstrings;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>


<p>Step2: call UICtrl.displayMonth() in init() method.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (<span class="function"><span class="keyword">function</span>(<span class="params">budgetCtrl, UICtrl</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> setupEventListners = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> DOM = UICtrl.getDOMstrings();</span><br><span class="line">		<span class="built_in">document</span>.querySelector(DOM.inputBtn).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">document</span>.addEventListener(<span class="string">'keypress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">document</span>.querySelector(DOM.container).addEventListener(<span class="string">'click'</span>, ctrlDeleteItem);</span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> updateBudget = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 1. Calculate the budget</span></span><br><span class="line">		budgetCtrl.calculateBudget();</span><br><span class="line">		<span class="comment">// 2. Return the budget</span></span><br><span class="line">		<span class="keyword">var</span> budget = bubdgetctrl.getBudget();</span><br><span class="line">		<span class="comment">// 3. Display the budget on the UI</span></span><br><span class="line">		<span class="built_in">console</span>.log(budget);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> updatePercentages = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Calculate percentages</span></span><br><span class="line">		<span class="comment">// 2. Read percentages from the budget controller</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 3. Update the UI with the new percentages</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> input, newItem;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		input = UICtrl.getInput();</span><br><span class="line">		<span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (input.description !== <span class="string">""</span> &amp;&amp; !<span class="built_in">isNaN</span>(input.value) &amp;&amp; input.value &gt; <span class="number">0</span>)  &#123;</span><br><span class="line">			<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">			newItem = budgetCtrl.addItem(input.type, input.description, input.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">			UICtrl.addListItem(newItem, input.type);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 4. Clear the fields</span></span><br><span class="line">			UICtrl.clearFields();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 5. Calculate and update budget</span></span><br><span class="line">			updateBudget();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 6. Calculate and update percentage</span></span><br><span class="line">			updatePercentages();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlDeleteItem = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event.target);</span><br><span class="line">		<span class="keyword">var</span> itemID, splitID;</span><br><span class="line">		itemID = event.target.parentNode.parentNode.parentNode.parentNode.id;</span><br><span class="line">		<span class="keyword">if</span> (itemID) &#123;</span><br><span class="line">			<span class="comment">//inc-1</span></span><br><span class="line">			splitID = itemID.split(<span class="string">"-"</span>);</span><br><span class="line">			type = splitID[<span class="number">0</span>];</span><br><span class="line">			ID = splitID[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 1. delete the item from the data structure</span></span><br><span class="line">			budgetCtrl.deleteItem(type, ID);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 2. Delete the item from the UI</span></span><br><span class="line">			UICtrl.deleteListItem(itemID);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 3. Update and show the new budget</span></span><br><span class="line">			updateBudget();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 4. Calculate and update percentage</span></span><br><span class="line">			updatePercentages();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Our public init method</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Application has started.'</span>);</span><br><span class="line">			UICtrl.displayMonth();</span><br><span class="line">			UICtrl.displayBudget(&#123;</span><br><span class="line">				budget: <span class="number">0</span>,</span><br><span class="line">				totalInc: <span class="number">0</span>,</span><br><span class="line">				totalExp: <span class="number">0</span>,</span><br><span class="line">				percentage: <span class="number">-1</span></span><br><span class="line">			&#125;);</span><br><span class="line">			setupEventListeners();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>


<h2 id="7-Finishing-Touches-Improving-the-UX"><a href="#7-Finishing-Touches-Improving-the-UX" class="headerlink" title="7. Finishing Touches: Improving the UX"></a>7. Finishing Touches: Improving the UX</h2><ul>
<li>What you will learn in this lecture<ul>
<li>How and when to use ‘change’ events.</li>
</ul>
</li>
</ul>
<p>Add ‘change’ event listener in setupEventListeners function in global app controller</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (<span class="function"><span class="keyword">function</span>(<span class="params">budgetCtrl, UICtrl</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> setupEventListners = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> DOM = UICtrl.getDOMstrings();</span><br><span class="line">		<span class="built_in">document</span>.querySelector(DOM.inputBtn).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">document</span>.addEventListener(<span class="string">'keypress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">document</span>.querySelector(DOM.container).addEventListener(<span class="string">'click'</span>, ctrlDeleteItem);</span><br><span class="line">		<span class="built_in">document</span>.querySelector(DOM.inputType).addEventListener(<span class="string">'change'</span>, UICtrl.changedType);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> updateBudget = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 1. Calculate the budget</span></span><br><span class="line">		budgetCtrl.calculateBudget();</span><br><span class="line">		<span class="comment">// 2. Return the budget</span></span><br><span class="line">		<span class="keyword">var</span> budget = bubdgetctrl.getBudget();</span><br><span class="line">		<span class="comment">// 3. Display the budget on the UI</span></span><br><span class="line">		<span class="built_in">console</span>.log(budget);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> updatePercentages = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Calculate percentages</span></span><br><span class="line">		<span class="comment">// 2. Read percentages from the budget controller</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 3. Update the UI with the new percentages</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> input, newItem;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		input = UICtrl.getInput();</span><br><span class="line">		<span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (input.description !== <span class="string">""</span> &amp;&amp; !<span class="built_in">isNaN</span>(input.value) &amp;&amp; input.value &gt; <span class="number">0</span>)  &#123;</span><br><span class="line">			<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">			newItem = budgetCtrl.addItem(input.type, input.description, input.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">			UICtrl.addListItem(newItem, input.type);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 4. Clear the fields</span></span><br><span class="line">			UICtrl.clearFields();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 5. Calculate and update budget</span></span><br><span class="line">			updateBudget();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 6. Calculate and update percentage</span></span><br><span class="line">			updatePercentages();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlDeleteItem = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event.target);</span><br><span class="line">		<span class="keyword">var</span> itemID, splitID;</span><br><span class="line">		itemID = event.target.parentNode.parentNode.parentNode.parentNode.id;</span><br><span class="line">		<span class="keyword">if</span> (itemID) &#123;</span><br><span class="line">			<span class="comment">//inc-1</span></span><br><span class="line">			splitID = itemID.split(<span class="string">"-"</span>);</span><br><span class="line">			type = splitID[<span class="number">0</span>];</span><br><span class="line">			ID = splitID[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 1. delete the item from the data structure</span></span><br><span class="line">			budgetCtrl.deleteItem(type, ID);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 2. Delete the item from the UI</span></span><br><span class="line">			UICtrl.deleteListItem(itemID);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 3. Update and show the new budget</span></span><br><span class="line">			updateBudget();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 4. Calculate and update percentage</span></span><br><span class="line">			updatePercentages();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Our public init method</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Application has started.'</span>);</span><br><span class="line">			UICtrl.displayMonth();</span><br><span class="line">			UICtrl.displayBudget(&#123;</span><br><span class="line">				budget: <span class="number">0</span>,</span><br><span class="line">				totalInc: <span class="number">0</span>,</span><br><span class="line">				totalExp: <span class="number">0</span>,</span><br><span class="line">				percentage: <span class="number">-1</span></span><br><span class="line">			&#125;);</span><br><span class="line">			setupEventListeners();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOMstrings = &#123;</span><br><span class="line">		inputType: <span class="string">'.add__type'</span>,</span><br><span class="line">		inputDescription: <span class="string">'.add_description'</span>,</span><br><span class="line">		inputValue: <span class="string">'.add__value'</span>，</span><br><span class="line">		inputBtn: <span class="string">'.add_btn'</span>,</span><br><span class="line">		incomeContainer: <span class="string">'.income__list'</span>,</span><br><span class="line">		expensesContainer: <span class="string">'.expenses__list'</span>,</span><br><span class="line">		budgetLabel: <span class="string">'.budget__value'</span>,</span><br><span class="line">		incomeLabeL: <span class="string">'.budget__income--value'</span>,</span><br><span class="line">		expensesLabel: <span class="string">'.budget__expenses--value'</span>,</span><br><span class="line">		percentageLabel: <span class="string">'.budget__expenses--percentage'</span>,</span><br><span class="line">		container: <span class="string">'.container'</span>,</span><br><span class="line">		expensesPercLabel: <span class="string">'.item__percentage'</span>,</span><br><span class="line">		dateLabel: <span class="string">'.budget__title--month'</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> formatNumber = <span class="function"><span class="keyword">function</span>(<span class="params">num, type</span>) </span>&#123;</span><br><span class="line">			<span class="comment">/*</span></span><br><span class="line"><span class="comment">			+ or - before number exactly 2 decimal points</span></span><br><span class="line"><span class="comment">			comma separating the thousands</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			2310.4567 =&gt; + 2,310.46</span></span><br><span class="line"><span class="comment">			2000 -&gt; + 2,000.00</span></span><br><span class="line"><span class="comment">			*/</span></span><br><span class="line"></span><br><span class="line">			num = <span class="built_in">Math</span>.abs(num);</span><br><span class="line">			num = num.toFixed(<span class="number">2</span>);</span><br><span class="line">			numSplit = num.split(<span class="string">'.'</span>);</span><br><span class="line">			int = numSplit[<span class="number">0</span>];</span><br><span class="line">			<span class="keyword">if</span> (int.length &gt; <span class="number">3</span>) &#123;</span><br><span class="line">				int = int.substr(<span class="number">0</span>, int.length - <span class="number">3</span>) + <span class="string">','</span> + int.substr(int.length - <span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			dec = numSplit[<span class="number">1</span>];</span><br><span class="line">			type === <span class="string">'exp'</span> ? sign = <span class="string">'-'</span> : sign = <span class="string">'+'</span>;</span><br><span class="line">			<span class="keyword">return</span> type + <span class="string">' '</span> + int + <span class="string">'.'</span> + dec;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">var</span> nodeListForEach = <span class="function"><span class="keyword">function</span>(<span class="params">list, callback</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">				callback(list[i], i);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		getInput: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="keyword">var</span> type = <span class="built_in">document</span>.querySelector(DOMstrings.inputType).value,</span><br><span class="line">			<span class="keyword">var</span> description = <span class="built_in">document</span>.querySelector(DOMstrings.inputDescription).value,</span><br><span class="line">			<span class="keyword">var</span> value = <span class="built_in">document</span>.querySelector(DOMstrings.inputValue).value</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		addListItem: <span class="function"><span class="keyword">function</span>(<span class="params">obj, type</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> html, newHtml, element;</span><br><span class="line">			<span class="comment">// Create HTML string with placeholder text</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">        element = DOMstrings.incomeContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="inc-%id%"&gt; &lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">        element = DOMstrings.expensesContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="exp-%id%"&gt;&lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__percentage"&gt;21%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Replace the placeholder text with some actual data</span></span><br><span class="line">			newHtml = html.replace(<span class="string">'%id%'</span>, obj.id);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%description%'</span>, obj.description);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%value%'</span>, formatNumber(obj.value, type));</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Insert the HTML into the DOM</span></span><br><span class="line">			<span class="built_in">document</span>.querySelector(element).insertAdjacentHTML(<span class="string">'beforeend'</span>, newHtml);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		deleteListItem: <span class="function"><span class="keyword">function</span>(<span class="params">selectorID</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> el = <span class="built_in">document</span>.getElementById(selectorID);</span><br><span class="line">			el.parentNode.removeChild(el);</span><br><span class="line">		&#125;,</span><br><span class="line">		</span><br><span class="line">		clearFields: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields;</span><br><span class="line"></span><br><span class="line">			fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.inputDescription + <span class="string">', '</span> + DOMstrings.inputValue);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">var</span> fieldsArr = <span class="built_in">Array</span>.prototype.slice.call(fields);  </span><br><span class="line"></span><br><span class="line">			fieldsArr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">current, index, array</span>) </span>&#123;</span><br><span class="line">				current.value = <span class="string">""</span>;</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">			fieldsArr[<span class="number">0</span>].focus();</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayBudget: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> type;</span><br><span class="line">			obj.budget &gt; <span class="number">0</span> ? type = <span class="string">'inc'</span> : type = <span class="string">'exp'</span>;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.budgetLabel).textContent = formatNumber(obj.budget, type);</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.incomeLabel).textContent = formatNumber(totoalInc, <span class="string">'inc'</span>);</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.expensesLabel).textContent = formatNumber(totalExp, <span class="string">'exp'</span>);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>（obj.percentage &gt; <span class="number">0</span>）&#123;</span><br><span class="line">				<span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = percentage + <span class="string">'%'</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			 <span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = <span class="string">'---'</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayPercentages: <span class="function"><span class="keyword">function</span>(<span class="params">percentages</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.expensesPercLabel);</span><br><span class="line">			nodeListForEach(fields, <span class="function"><span class="keyword">function</span>(<span class="params">current, index</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">if</span> (percentages[index] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">					current.textContent = percentages[index] + <span class="string">"%"</span>;</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					current.textContent = <span class="string">'---'</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayMonth: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> now, months, month, year;</span><br><span class="line">			now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">			<span class="comment">// var christmas = new Date(2016, 11);</span></span><br><span class="line"></span><br><span class="line">			months = [<span class="string">'January'</span>, <span class="string">'February'</span>, <span class="string">'March'</span>, <span class="string">'April'</span>, <span class="string">'May'</span>, <span class="string">'June'</span>, <span class="string">'July'</span>, <span class="string">'Auguest'</span>, <span class="string">'September'</span>, <span class="string">'October'</span>, <span class="string">'November'</span>, <span class="string">'December'</span>];</span><br><span class="line">			month = <span class="keyword">new</span>.getMonth();</span><br><span class="line"></span><br><span class="line">			year = now.getFullYear();</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.dateLabel).textContent = months[month - <span class="number">1</span>] + <span class="string">' '</span> + year;			</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		changedType: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields = <span class="built_in">document</span>.querySelctorAll(</span><br><span class="line">				DOMstrings.inputType + <span class="string">','</span> +</span><br><span class="line">				DOMstrings.inputDescription + <span class="string">','</span> +</span><br><span class="line">				DOMstrings.inputValue);</span><br><span class="line"></span><br><span class="line">			nodeListForEach(fields, <span class="function"><span class="keyword">function</span>(<span class="params">cur</span>)) </span>&#123;</span><br><span class="line">				cur.classList.toggle(<span class="string">'red-focus'</span>);</span><br><span class="line">			&#125;),</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.inputBtn).classList.toggle(<span class="string">'red'</span>);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getDOMstrings: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> DOMstrings;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>


<h2 id="8-Our-Final-Architecture"><a href="#8-Our-Final-Architecture" class="headerlink" title="8. Our Final Architecture"></a>8. Our Final Architecture</h2><p><img src="https://lh3.googleusercontent.com/1BZ8L7P6elWPyQ56s7jI0TBA3F5sUmuxL1_uIu3m0pXMlaDx-BcKV48byhiFRgSGy1rJZAAF0iGaxt7lF2Nsi-6Jzk20u1M7daIGZtgQdkQG5R_pJNUkCK2oKZiKc0dP8dXuMJktYnJTVhqn87Bz3LvhpEHUiCKxrS2t320cgh8AfXZp62zqNOBECAENb05E0DdWAbhfAL7fJWr6dv-GZnnNuAfWo2NpnB1QgkENFaCkYunA-PUlVpSfxHeIimwRxlaQ7WOeYfdEGB5tYHXoEHCS3Pt3YNzpEHeE9jNcsxw4lODEoV7Qy05svlQg1I35scb5TQ4uzjtU5Qly4nAN3dAJVLlONsqwzwWEwq-E-qr7A12p83Mk-BmIL_geuwPm1M831aFe3J-fIxsmLqXYxk44P-CXVg9G2fEBmHChZ2gRfKqTCcBWhTYAgXA5rldeIr7tZUQNW22eSgTXrgsO64CWs6KIkh8Yjfww2DeDefSkWj7rhRzXj9iVN9WxcaDkjR2jlM-AHA3jdCfsQxajjsv5wonKESZz4s_1OMq6cHcxGbRtnxAMraOTeme20vokZLjvp4A3hsmmuXOjqaK5Nvj9QlWap457OMrNZLvGilJB2mozA-sSy15m7JWYeG0gQGKjtCP5TEt68pOWVo9_GEc20YeAkopayGh5WGK21Q=w1274-h709-no" alt="Our Final Architecture"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/05/29/Complete-JavaScript-Course-Project-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/29/Complete-JavaScript-Course-Project-2/" class="post-title-link" itemprop="url">Put It All Together: The Budget App Project: Part II</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2017-05-29 15:36:44 / Modified: 15:40:36" itemprop="dateCreated datePublished" datetime="2017-05-29T15:36:44-07:00">2017-05-29</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-Project-Planning-and-Architecture-Step-2"><a href="#1-Project-Planning-and-Architecture-Step-2" class="headerlink" title="1. Project Planning and Architecture: Step 2"></a>1. Project Planning and Architecture: Step 2</h2><h3 id="1-1-What-We-Just-Completed"><a href="#1-1-What-We-Just-Completed" class="headerlink" title="1.1. What We Just Completed"></a>1.1. What We Just Completed</h3><p><img src="https://lh3.googleusercontent.com/lWHSuBs8felsWHAkvqpV00aL1I16pvwOuyWJWBIGCKWBdNmKtZLINWu4kMviBUSfR8sqIWtXkYQXV89q6G3uuDFVZOEb1qHgoiP_XFbobM0MTD7QuKl2XYARjHQ2SMdNzOjTLOxHUQLFAsdFbOz1ZQjWx52FKDHblkfwA6nu9dIOSRoRm4e_KIsybUsWC2_3HWlL40M96YR6PFYoqbp7AGyr5jEvPBaByzglQtjN3Nqq5bQxSRqjSoZdt5LvRvpGSf5qiJ8CUlmWTN3bIASzu7QTNWuk2nPKAgKRSeI6lk1iP5s6SM3Q0-lDVfxUf9oYJLxtmQwKz2WDG9ZaF8dbJ5fOxUNArNaWEKH0UWGOkWIKCn0X0_S2nd-RBdRTBb5k0dsUTx9DifrNOjMTu-jj5gfKha6vUrkh0Sr-3-x_J2i8ZctWlOdf89DEMdmeZuaOoU4YefaFka0r5UoFiyxCl6YDn26JEOccMDPCsK_4laOExPeIle56252nE1AmdnpQkzGew95GnUPYsJBPYql4QQfMhHG3Jjs8i2FFJEeja56_8-q_Mj_9NBR5OjbLhExeCmzq7HXPKh0yY37j-WTbJkJRU_sL31w5AI9kv15FvyHFtUL8a5HN-Kv6uqnlCiQpsXOycBoH_0iMtKMm91v87Sa38PJ8duw7KubvV-cFTw=w1734-h1010-no" alt="What We Just Completed"></p>
<h3 id="1-2-Panning-Step-2"><a href="#1-2-Panning-Step-2" class="headerlink" title="1.2. Panning: Step 2"></a>1.2. Panning: Step 2</h3><p><img src="https://lh3.googleusercontent.com/GE0EEABtsEXmgyU9mkcrKRA_8HCx9Ce0Aql32TGBRA3kvp3lK93plD9jxezzD1oQBfJnch59NZfYCBH4VJE41u1_p-496CSU-ilLb6sl9xcAaeLRUKyya8PL6aEdRguUj1yaJYltix4dFNtLzmz5kfsNdfDolbVj0TDq05U2GYQEyFWlC2DHILnWQ2C6gxCT5rOZ50E7d8pzEmLILfBD4VukS2Tju3Obail2Csd2mRV4ty6eFk7FtfVBj2Wqd2arQ7b36FICt_PKKwXiybATO1SF_ilm30l12ge58n5PVittFmI0fMBAVglKi7gNBwqTVqc8qMtIRr8jopHCDyBS6_zkw_NCoGzGAol8eQvR_MJirBeBhQEUI66mXDDUk-qmODARUteDvKSQgLdBDA0J2MwrMh_iEBYB8kcHMhAjVGtsXJo-WkGeiCaEwQ_MMLJAL2bvnqxrkgJ-39H84SDVMlfA_s1t7npm_AaIUmyWBWr7PtgaCzNSW_wiCOBoA4Ux5YPufYK36soW7GvTfvr2saHqFb4nv0-GT5vILIXNkyLgW7RDOMwjiYFaym79MJiWREGM6EaHQeWm4LVHwUJ9ezfM1DUHn9tBnE0ECT6oSWyQgCXOARZhkV-SJpZIsTPuecQtuV_km9g9DBdXCWgV793Nr5ABh-B1e9sqW1bo-g=w1734-h850-no" alt="Panning: Step 2"></p>
<h2 id="2-Event-Delegation"><a href="#2-Event-Delegation" class="headerlink" title="2. Event Delegation"></a>2. Event Delegation</h2><h3 id="2-1-Event-Bubbling-Target-Element-and-Event-Delegation"><a href="#2-1-Event-Bubbling-Target-Element-and-Event-Delegation" class="headerlink" title="2.1. Event Bubbling, Target Element and Event Delegation"></a>2.1. Event Bubbling, Target Element and Event Delegation</h3><p><img src="https://lh3.googleusercontent.com/--HVptQAUvm5pPbpqe3db6umeD2fiDOmNqVPk9IN40Hveu52sLVpUN7syCmeZChKc7-vv-rlcc7O3u-8Qu58L-psHxAPryPywwTaN1eSxTYUz8YCou1xrhIpcRG2udvNmp4jxuOT2pieJH68523eCjGOu8rG0M99FQu_PZqbte2PIGStrJxRyWoKr9GO5zaWzzHmbp_NvjJrRBF8c_tiiSIdhY_1ACeDu5vwJMmI7AwsahDiDJ2JYdYOZK0DdiJd3vMYJxWqQILsldxGmDllXiYT98peKz8LNKgyqKZqnp7HQtWU4qbnEw2y0kv6jsPyf71Hd44rsY1f2Mwlm2TSl9q7DGEVDlzlZ0oo82EhCNmF1Wr_RKdbMkgO-pMKh5iQp4OjPYdzY56YPblCOaw47JnOKXvCr36_RYiF-90HkEuT1tdrSF3nYIkFyaKIxfMxb9V1NXKocKdfz48aBiHW7UMVus-3fp4td61oyW66B3uG4QpJOg8fVpNvj59-CokV52UhcwGtajTwqpWdHNB5u7942I7mb0HwwxY7q4w1Z1snahSkZ_FuvamtjQ1MEmocxQPHFd4NrL71oMigqd2AqSy2mb3VW0Xq7LmhtshbrQrqhlWeG0ubgl4yYN4u8Hej2gOTvRNiUKGGbWMNXvUZHyx--imq2m5ydn2IzYHbNw=w819-h362-no" alt="Event Bubbling, Target Element and Event Delegation"></p>
<p><strong><code>Event bubbling</code></strong> mean that when an event is fired or triggered on some DOM element, for example,by clicking on our button here on the right side, then the exact same event is also triggered on all of the parent elements.</p>
<p><strong><code>Event delegation</code></strong> refers to the process of using event propagation (bubbling) to handle events at a higher level in the DOM than the element on which the event originated. It allows us to attach a single event listener for elements that exist now or in the future.</p>
<h3 id="2-2-Use-Cases-for-Event-Delegation"><a href="#2-2-Use-Cases-for-Event-Delegation" class="headerlink" title="2.2. Use Cases for Event Delegation"></a>2.2. Use Cases for Event Delegation</h3><ol>
<li><p>When we have an element with lots of child elements that we are interested in;</p>
</li>
<li><p>When we want an event handler attached to an element that is not yet in the DOM when our page is loaded.</p>
</li>
</ol>
<h2 id="3-Setting-up-the-Delete-Event-Listener-Using-Event-Delegation"><a href="#3-Setting-up-the-Delete-Event-Listener-Using-Event-Delegation" class="headerlink" title="3. Setting up the Delete Event Listener Using Event Delegation"></a>3. Setting up the Delete Event Listener Using Event Delegation</h2><ul>
<li><p><strong><code>What you will learn in this section:</code></strong></p>
<ul>
<li>How to use event delegation in practice;</li>
<li>How to use IDs in HTML to connect the UI with the data model;</li>
<li>How to use the parentNode property for DOM traversing.</li>
</ul>
</li>
<li><p>Action Items</p>
<ul>
<li>Add container in UI Controller DOMstrings;</li>
<li>Update setupEventListners in app controller;</li>
<li>Create ctrlDeleteItem method for event listener.</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOMstrings = &#123;</span><br><span class="line">		inputType: <span class="string">'.add__type'</span>,</span><br><span class="line">		inputDescription: <span class="string">'.add_description'</span>,</span><br><span class="line">		inputValue: <span class="string">'.add__value'</span>，</span><br><span class="line">		inputBtn: <span class="string">'.add_btn'</span>,</span><br><span class="line">		incomeContainer: <span class="string">'.income__list'</span>,</span><br><span class="line">		expensesContainer: <span class="string">'.expenses__list'</span>,</span><br><span class="line">		budgetLabel: <span class="string">'.budget__value'</span>,</span><br><span class="line">		incomeLabeL: <span class="string">'.budget__income--value'</span>,</span><br><span class="line">		expensesLabel: <span class="string">'.budget__expenses--value'</span>,</span><br><span class="line">		percentageLabel: <span class="string">'.budget__expenses--percentage'</span>,</span><br><span class="line">		container: <span class="string">'.container'</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		getInput: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="keyword">var</span> type = <span class="built_in">document</span>.querySelector(DOMstrings.inputType).value,</span><br><span class="line">			<span class="keyword">var</span> description = <span class="built_in">document</span>.querySelector(DOMstrings.inputDescription).value,</span><br><span class="line">			<span class="keyword">var</span> value = <span class="built_in">document</span>.querySelector(DOMstrings.inputValue).value</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		addListItem: <span class="function"><span class="keyword">function</span>(<span class="params">obj, type</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> html, newHtml, element;</span><br><span class="line">			<span class="comment">// Create HTML string with placeholder text</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">        element = DOMstrings.incomeContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="inc-%id%"&gt; &lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">        element = DOMstrings.expensesContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="exp-%id%"&gt;&lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__percentage"&gt;21%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Replace the placeholder text with some actual data</span></span><br><span class="line">			newHtml = html.replace(<span class="string">'%id%'</span>, obj.id);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%description%'</span>, obj.description);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%value%'</span>, obj.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Insert the HTML into the DOM</span></span><br><span class="line">			<span class="built_in">document</span>.querySelector(element).insertAdjacentHTML(<span class="string">'beforeend'</span>, newHtml);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		clearFields: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields;</span><br><span class="line"></span><br><span class="line">			fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.inputDescription + <span class="string">', '</span> + DOMstrings.inputValue);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">var</span> fieldsArr = <span class="built_in">Array</span>.prototype.slice.call(fields);  </span><br><span class="line"></span><br><span class="line">			fieldsArr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">current, index, array</span>) </span>&#123;</span><br><span class="line">				current.value = <span class="string">""</span>;</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">			fieldsArr[<span class="number">0</span>].focus();</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayBudget: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.budgetLabel).textContent = obj.budget;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.incomeLabel).textContent = totoalInc;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.expensesLabel).textContent = totalExp;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>（obj.percentage &gt; <span class="number">0</span>）&#123;</span><br><span class="line">				<span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = percentage + <span class="string">'%'</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			 <span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = <span class="string">'---'</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getDOMstrings: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> DOMstrings;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (<span class="function"><span class="keyword">function</span>(<span class="params">budgetCtrl, UICtrl</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> setupEventListners = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> DOM = UICtrl.getDOMstrings();</span><br><span class="line">		<span class="built_in">document</span>.querySelector(DOM.inputBtn).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">document</span>.addEventListener(<span class="string">'keypress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">document</span>.querySelector(DOM.container).addEventListener(<span class="string">'click'</span>, ctrlDeleteItem);</span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> updateBudget = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 1. Calculate the budget</span></span><br><span class="line">		budgetCtrl.calculateBudget();</span><br><span class="line">		<span class="comment">// 2. Return the budget</span></span><br><span class="line">		<span class="keyword">var</span> budget = bubdgetctrl.getBudget();</span><br><span class="line">		<span class="comment">// 3. Display the budget on the UI</span></span><br><span class="line">		<span class="built_in">console</span>.log(budget);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> input, newItem;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		input = UICtrl.getInput();</span><br><span class="line">		<span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (input.description !== <span class="string">""</span> &amp;&amp; !<span class="built_in">isNaN</span>(input.value) &amp;&amp; input.value &gt; <span class="number">0</span>)  &#123;</span><br><span class="line">			<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">			newItem = budgetCtrl.addItem(input.type, input.description, input.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">			UICtrl.addListItem(newItem, input.type);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 4. Clear the fields</span></span><br><span class="line">			UICtrl.clearFields();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 5. Calculate and update budget</span></span><br><span class="line">			updateBudget();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlDeleteItem = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event.target);</span><br><span class="line">		<span class="keyword">var</span> itemID, splitID;</span><br><span class="line">		itemID = event.target.parentNode.parentNode.parentNode.parentNode.id;</span><br><span class="line">		<span class="keyword">if</span> (itemID) &#123;</span><br><span class="line">			<span class="comment">//inc-1</span></span><br><span class="line">			splitID = itemID.split(<span class="string">"-"</span>);</span><br><span class="line">			type = splitID[<span class="number">0</span>];</span><br><span class="line">			ID = splitID[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 1. delete the item from the data structure</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">// 2. Delete the item from the UI</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">// 3. Update and show the new budget</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Our public init method</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Application has started.'</span>);</span><br><span class="line">			UICtrl.displayBudget(&#123;</span><br><span class="line">				budget: <span class="number">0</span>,</span><br><span class="line">				totalInc: <span class="number">0</span>,</span><br><span class="line">				totalExp: <span class="number">0</span>,</span><br><span class="line">				percentage: <span class="number">-1</span></span><br><span class="line">			&#125;);</span><br><span class="line">			setupEventListeners();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>



<h2 id="4-Deleting-an-Item-from-our-Budget-Controller"><a href="#4-Deleting-an-Item-from-our-Budget-Controller" class="headerlink" title="4. Deleting an Item from our Budget Controller"></a>4. Deleting an Item from our Budget Controller</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>Yet another method to loop over an array: map;</li>
<li>How to remove elements from an array using the splice method.</li>
</ul>
</li>
</ul>
<p>Add deleteItem Method in Budget Controller</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// BUDGET CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> budgetController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Some code</span></span><br><span class="line">	<span class="keyword">var</span> Expense = <span class="function"><span class="keyword">function</span>(<span class="params">id, description, value</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.description = description;</span><br><span class="line">		<span class="keyword">this</span>.value = value;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> Income = <span class="function"><span class="keyword">function</span>(<span class="params">id, description, value</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.description = description;</span><br><span class="line">		<span class="keyword">this</span>.value = value;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> calculateTotal = <span class="function"><span class="keyword">function</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">		data.allItems[type].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">cur</span>) </span>&#123;</span><br><span class="line">			sum = sum + cur.value;</span><br><span class="line">		&#125;);</span><br><span class="line">		data.totals[type] = sum;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> data = &#123;</span><br><span class="line">		allItems: &#123;</span><br><span class="line">			exp: [],</span><br><span class="line">			inc: []</span><br><span class="line">		&#125;,</span><br><span class="line">		totals: &#123;</span><br><span class="line">			exp: <span class="number">0</span>,</span><br><span class="line">			inc: <span class="number">0</span></span><br><span class="line">		&#125;,</span><br><span class="line">		budget: <span class="number">0</span>,</span><br><span class="line">		percentage: <span class="number">-1</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		addItem: <span class="function"><span class="keyword">function</span>(<span class="params">type, des, val</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> newItem, ID;</span><br><span class="line">			<span class="comment">//Create new ID</span></span><br><span class="line">			ID = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">if</span> (data.allItems[type].length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				ID = data.allItems[type][data.allItems[type].length - <span class="number">1</span>].id + <span class="number">1</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				ID = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Create new item based on 'inc' or 'exp' type</span></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">				newItem = <span class="keyword">new</span> Expense(ID, des, val);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">				newItem = <span class="keyword">new</span> Income(ID, des, val);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//Push it into our data structure</span></span><br><span class="line">			data.allItems[type].push(newItem);</span><br><span class="line"></span><br><span class="line">			<span class="comment">//Return the new element</span></span><br><span class="line">			<span class="keyword">return</span> newItem;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		deleteItem: <span class="function"><span class="keyword">function</span>(<span class="params">type, id</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> ids, index;</span><br><span class="line">			<span class="comment">// id = 3</span></span><br><span class="line">			<span class="keyword">var</span> ids = data.allItems[type].map(<span class="function"><span class="keyword">function</span>(<span class="params">current</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">return</span> current.id;</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">			index = ids.indexOf(id);</span><br><span class="line">			<span class="keyword">if</span> (index !=== <span class="number">-1</span>) &#123;</span><br><span class="line">				data.allItems[type].splice(index, <span class="number">1</span>);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		calculateBudget: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="comment">// calculate total income and expenses</span></span><br><span class="line">			calculateTotal(<span class="string">'exp'</span>);</span><br><span class="line">			calculateTotal(<span class="string">'inc'</span>);</span><br><span class="line">			<span class="comment">// Calculate the budget: income - expenses</span></span><br><span class="line">			data.budget = data.totals.inc - data.totals.exp;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Calculate the percentage of income that we spent</span></span><br><span class="line">			<span class="keyword">if</span> (data.totals.inc &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				data.percentage = <span class="built_in">Math</span>.round((data.totals.exp / data.totals.inc) * <span class="number">100</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				data.percentage = <span class="number">-1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getBudget: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				budget: data.budget,</span><br><span class="line">				totalInc: data.totals.inc,</span><br><span class="line">				totalExp: data.totals.exp,</span><br><span class="line">				percentage: data.percentage</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		testing: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(data);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>


<p>Call deleteItem method in App Controller ctrlDeleteItem:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> ctrlDeleteItem = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(event.target);</span><br><span class="line">	<span class="keyword">var</span> itemID, splitID;</span><br><span class="line">	itemID = event.target.parentNode.parentNode.parentNode.parentNode.id;</span><br><span class="line">	<span class="keyword">if</span> (itemID) &#123;</span><br><span class="line">		<span class="comment">//inc-1</span></span><br><span class="line">		splitID = itemID.split(<span class="string">"-"</span>);</span><br><span class="line">		type = splitID[<span class="number">0</span>];</span><br><span class="line">		ID = <span class="built_in">parseInt</span>(splitID[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. delete the item from the data structure</span></span><br><span class="line">		budgetCtrl.deleteItem(type, ID);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 2. Delete the item from the UI</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 3. Update and show the new budget</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="5-Deleting-an-Item-from-the-UI"><a href="#5-Deleting-an-Item-from-the-UI" class="headerlink" title="5. Deleting an Item from the UI"></a>5. Deleting an Item from the UI</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>More DOM manipulation: how to remove an element from the DOM.</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOMstrings = &#123;</span><br><span class="line">		inputType: <span class="string">'.add__type'</span>,</span><br><span class="line">		inputDescription: <span class="string">'.add_description'</span>,</span><br><span class="line">		inputValue: <span class="string">'.add__value'</span>，</span><br><span class="line">		inputBtn: <span class="string">'.add_btn'</span>,</span><br><span class="line">		incomeContainer: <span class="string">'.income__list'</span>,</span><br><span class="line">		expensesContainer: <span class="string">'.expenses__list'</span>,</span><br><span class="line">		budgetLabel: <span class="string">'.budget__value'</span>,</span><br><span class="line">		incomeLabeL: <span class="string">'.budget__income--value'</span>,</span><br><span class="line">		expensesLabel: <span class="string">'.budget__expenses--value'</span>,</span><br><span class="line">		percentageLabel: <span class="string">'.budget__expenses--percentage'</span>,</span><br><span class="line">		container: <span class="string">'.container'</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		getInput: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="keyword">var</span> type = <span class="built_in">document</span>.querySelector(DOMstrings.inputType).value,</span><br><span class="line">			<span class="keyword">var</span> description = <span class="built_in">document</span>.querySelector(DOMstrings.inputDescription).value,</span><br><span class="line">			<span class="keyword">var</span> value = <span class="built_in">document</span>.querySelector(DOMstrings.inputValue).value</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		addListItem: <span class="function"><span class="keyword">function</span>(<span class="params">obj, type</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> html, newHtml, element;</span><br><span class="line">			<span class="comment">// Create HTML string with placeholder text</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">        element = DOMstrings.incomeContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="inc-%id%"&gt; &lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">        element = DOMstrings.expensesContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="exp-%id%"&gt;&lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__percentage"&gt;21%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Replace the placeholder text with some actual data</span></span><br><span class="line">			newHtml = html.replace(<span class="string">'%id%'</span>, obj.id);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%description%'</span>, obj.description);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%value%'</span>, obj.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Insert the HTML into the DOM</span></span><br><span class="line">			<span class="built_in">document</span>.querySelector(element).insertAdjacentHTML(<span class="string">'beforeend'</span>, newHtml);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		deleteListItem: <span class="function"><span class="keyword">function</span>(<span class="params">selectorID</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> el = <span class="built_in">document</span>.getElementById(selectorID);</span><br><span class="line">			el.parentNode.removeChild(el);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		clearFields: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields;</span><br><span class="line"></span><br><span class="line">			fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.inputDescription + <span class="string">', '</span> + DOMstrings.inputValue);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">var</span> fieldsArr = <span class="built_in">Array</span>.prototype.slice.call(fields);  </span><br><span class="line"></span><br><span class="line">			fieldsArr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">current, index, array</span>) </span>&#123;</span><br><span class="line">				current.value = <span class="string">""</span>;</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">			fieldsArr[<span class="number">0</span>].focus();</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayBudget: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.budgetLabel).textContent = obj.budget;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.incomeLabel).textContent = totoalInc;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.expensesLabel).textContent = totalExp;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>（obj.percentage &gt; <span class="number">0</span>）&#123;</span><br><span class="line">				<span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = percentage + <span class="string">'%'</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			 <span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = <span class="string">'---'</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getDOMstrings: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> DOMstrings;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>


<p>Call UICtrl.deleteListItem and updateBudget methods in App Controller ctrlDeleteItem:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> ctrlDeleteItem = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(event.target);</span><br><span class="line">	<span class="keyword">var</span> itemID, splitID;</span><br><span class="line">	itemID = event.target.parentNode.parentNode.parentNode.parentNode.id;</span><br><span class="line">	<span class="keyword">if</span> (itemID) &#123;</span><br><span class="line">		<span class="comment">//inc-1</span></span><br><span class="line">		splitID = itemID.split(<span class="string">"-"</span>);</span><br><span class="line">		type = splitID[<span class="number">0</span>];</span><br><span class="line">		ID = <span class="built_in">parseInt</span>(splitID[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. delete the item from the data structure</span></span><br><span class="line">		budgetCtrl.deleteItem(type, ID);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 2. Delete the item from the UI</span></span><br><span class="line">		UICtrl.deleteListItem(itemID);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 3. Update and show the new budget</span></span><br><span class="line">		updateBudget();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/05/28/Complete-JavaScript-Course-Project-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/28/Complete-JavaScript-Course-Project-1/" class="post-title-link" itemprop="url">Put It All Together: The Budget App Project Part I</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-05-28 11:14:49" itemprop="dateCreated datePublished" datetime="2017-05-28T11:14:49-07:00">2017-05-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-07-07 22:08:22" itemprop="dateModified" datetime="2017-07-07T22:08:22-07:00">2017-07-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-Project-Planning-and-Architecture"><a href="#1-Project-Planning-and-Architecture" class="headerlink" title="1. Project Planning and Architecture"></a>1. Project Planning and Architecture</h2><h3 id="1-1-Architecture-Preview"><a href="#1-1-Architecture-Preview" class="headerlink" title="1.1. Architecture Preview"></a>1.1. Architecture Preview</h3><p>The following is the final architecture preview:<br><img src="https://lh3.googleusercontent.com/eHN4cOiKul0fFzt9c-ZMWMbVQYnYH8cU7YbCz7ndP-a1TcZPksuWvwSZOAPnxBJVuZamnkmszAtyT-vOxOsBTUh-LsQ-Dy_PWtAFKBFPPYnHWmdv5JQ-nwBjhmCjOPL8T_eKDYXgvp1ho0rCFBH2BI71oqMEEEnBFQKlWEWD8NeHWpxFkdaVa-9adznp9o81pPsnL6ZAz6HBzDoXFagESydtpv6Rf1U6GTpw-pS-eBIumvtp5kwUh1s2dYxvNvMPG9ZcBkUOT-eFPJzc6p2pNPgA6uuNnR_m8r-0nYbOssjo0ObJdgm7POwyaRaZSuajsAlwRK3uTGlceWf_omICqZwpJJr2bm1LU9ZE2MHOHzUTdt6dWCnw-H-Ih8DAoh1k6ThidJ8q6-HybfsV5BiLwCzXL5-kaqPo5MB42aqy7tEMMu5uWBNyXoEfKVtINeSy1jsflW5RbUu3tMXApTUjxscymMur7P7xsUGYCQ_lTU9eylIDO-F6u7V7w88igzTXZIfXTZvbg1198X3BYYiuciWGTSo-4rGdMCVS_HfCoiNbY3bAjoc5ffRt0H738I9tVaylNwFiAJc0ZavF4YNb2QbZsJCmNU5ffZYfcC9hLDd63JJ-RYEZiQzpMG3MVlAyjfETp7EDZlHFulj9dfIBlJE3jOuEjTaEBO0dT-MHMw=w1177-h681-no" alt="Architecture Preview"></p>
<p>But let’s not to be so fast, next we’ll start planning from scratch.</p>
<h3 id="1-2-Planning"><a href="#1-2-Planning" class="headerlink" title="1.2. Planning"></a>1.2. Planning</h3><p><img src="https://lh3.googleusercontent.com/Vq_20C_jNjPPcLjLnSgvcWKrCMhaCK9X1OuTr4iQp1P9P0tvqvnVzBRAUUR4ciMczOG3EySVrrh40T92yNVS9JQRIfmjGLIwLmC5GsjvdMx-HhmP6BHobjv-ksFax6jAyYcYb_tD0EqKYS0UlXQzy606iJqsMYTdVDY9AVc03L5iBf0F_zwalbFPAuyByUj1PabHhRX976zPxOdWqVKYt3DBAp-GPMHRi-uiZ2G4ApX-XaLVgVooOtOXVo1-4-ZyqpOkJZIUK1WdZh6i52YwEsih--r6t6tbHCkkxpDfRZGrMyg3YdU0-VH3Vo4sE3sHka1Uk6HmlluA20Pqw0SdWS1EwV_KNsLsRBF4mkhlTkYggHbB7E4JosBIcbeSOtJ_1q_u-_7X_jI-2lL2kE8PVowlPQa4QxEJ08P6t2dRoRJd6H5DbTd1IZ_O30HMfMdnsaX8Y-YgpIXt0VIZIk_KVz_C7mxn3qQhxkj2rEKw8QIcsAIQFOPrOwCdOGNA18sT_gGmVElSoVHlfz7Hn8w4wuhQztqL3zJpu4YGYajg80QnqSyQ-rHt8wAEvqb3FeTz3JG8tnXOpEyTI6Wd0RxgD5XBBmMsxs8pZJcH2fNdeGDVNIRcKwD6cb79qmFP-pEo6Hi1N48_dx7OKcR0AXOMnHpTaaHZYFDQy_PMZJwo3A=w1177-h556-no" alt="Planning"></p>
<h3 id="1-3-Structuring-Our-Code-with-Modules"><a href="#1-3-Structuring-Our-Code-with-Modules" class="headerlink" title="1.3. Structuring Our Code with Modules"></a>1.3. Structuring Our Code with Modules</h3><ul>
<li><strong><code>Modules</code></strong><ul>
<li>Important aspect of any robust application’s architecture;</li>
<li>Keep the units of code for a project both cleanly separated and organized;</li>
<li>Encapsulate some data into privacy and expose other data publicly.</li>
</ul>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/_WJUZnWVNk1q-KifAlnOMyeTt0V-nRCciTWBTR6eKtBLUlTvFG8dGIFQI2yoPtPg35jDFkTt5w9fR1UTdou1o-gNLveHAUldxUr5KwkRolnRpx3VzatRIO7Z7k-dSGsBgK-IuJgV99Sp2lvfDHxy-Js6-fKx2o3PyM8iVC5rT3UvLpg1fJ5HDeOOeC64GdPJ4woBZDGUY5OsZBJ6lYHMDMQDCWGriULwHiItzxjDJAKKWmEMprFVJqk85j0nsRaIbqixK-BQ-ep6GEkiECAurrTEgs1LNFhdhFcXGJoTPvDwiHSUVufzkZxb9LndkNBibo9zwd6RJH8X8U70jgOG9aYArOOlIUYI53Za4G0hue2Lx9onMXg-FI3WbrshVyfFtPDx4fqnwVGsfEpZKfLxYtYSZiE0-6WbAOzHLKYT90L1vK7JFZGZwQWrtYPG_AdJw9q8cstjE2vRhhYHinOuiv2Z6GgWlgk_ysTfv-h1yaZf0-Q_rGVngwgpqb7-A-uqD3czOQ0cw2oT0YDTpMk0Zrv-DpI5Fi5cc6wC5hgy-dVkRHmvf2mVmyK384mueQpAekJJjYMogmml0z6EZEhPJctMuAjX6d7p-Xkg13eEw9Z1U83cx7H0ZVY6Tycxd4WpLggutzf330rRc8egouvNoD5xEJSYEZTl_YMkZHDNaQ=w1177-h825-no" alt="Structuring Out Code with Modules"></p>
<h2 id="2-Implementing-the-Module-Pattern"><a href="#2-Implementing-the-Module-Pattern" class="headerlink" title="2. Implementing the Module Pattern"></a>2. Implementing the Module Pattern</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>How to use the module pattern;</li>
<li>More about private and public data, encapsulation and separation of concerns.</li>
</ul>
</li>
</ul>
<h3 id="2-1-Data-Encapsulation-Module"><a href="#2-1-Data-Encapsulation-Module" class="headerlink" title="2.1. Data Encapsulation Module"></a>2.1. Data Encapsulation Module</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> budgetController = (function() &#123;</span><br><span class="line">	<span class="keyword">var</span> x = <span class="number">23</span>;</span><br><span class="line">	<span class="keyword">var</span> add = function(a) &#123;</span><br><span class="line">		<span class="keyword">return</span> x + a;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		publicTest: function(b) &#123;</span><br><span class="line">			console.log(add(b));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>Running Result:</p>
<p><img src="https://lh3.googleusercontent.com/y4awh7GXtZWU6VMC6-nW-I8ZfYz2Pkt1WaGojFihXUPMhR3M8Z1b815sUCZxtQcWqgF8lHFIPIxBR1_4_qOdr64XSobxXfbOXtPQDYadpwoFM3DCOss4HH4N-_zZrw-9TWmKBHe3qoLDUaEiLfZZLq5-I2xm3zoFqe9m7JjHzuuNRiPtYUfV9zM0A8JAK4MisQx7Qjj2cCE8zF28BXnZl9Zc4oMZtemx3ynQJGPjSbkro51AvzTuNEFkmp7i6xt-YfHpdZeAX63ye2jOdxtqEWdT2a0HonHJyTXM-7Nlx2LT32HhxvNJlRsoFNELIii8PQe0bcT0jOnSU0XjthHJ27muQ856c5xN5IX4sNw_6TSfRYr53n2ikIjvc28X9pOzBpeYL4rdRe_vOrKt9Wr4KHliJzcOaipVgaadHQiZNCQIUVAfh7rUk2zRQI0mvJnwuBLysaJNyfTdDZMag8bADBoQd3M38XKwZVyUeh9pAiGZGZqeUg8ELwArGjnIwWv8wZ22hi_qiq0jQkbS4FOvwHh2dbvA5mTdlpsRFdN5484Bz-IYibEUYM_TLw9X8rb7VPQfoeZXjhMwAaLjQkkoFmGAOLK5S9k11il-lhF_LLV91io5Wj1J52OUZzFZ6ASwoT9MQ_vsFP8jVZekxPxnfZFifCHMo11ThEuPllwyBQ=w1734-h232-no" alt="Data Encapsulation Module Running Result"></p>
<h3 id="2-2-UI-Controller"><a href="#2-2-UI-Controller" class="headerlink" title="2.2. UI Controller"></a>2.2. UI Controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BUDGET CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> budgetController = (function() &#123;</span><br><span class="line">	<span class="keyword">var</span> x = <span class="number">23</span>;</span><br><span class="line">	<span class="keyword">var</span> add = function(a) &#123;</span><br><span class="line">		<span class="keyword">return</span> x + a;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		publicTest: function(b) &#123;</span><br><span class="line">			<span class="keyword">return</span> add(b);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (function() &#123;</span><br><span class="line">	<span class="comment">// Some code</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (function(budgetCtrl, UICtrl) &#123;</span><br><span class="line">	<span class="keyword">var</span> z = budgetCtrl.publicTest(<span class="number">5</span>);</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		anotherPublic: function() &#123;</span><br><span class="line">			console.log(z);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>


<h2 id="3-Setting-up-the-First-Event-Listeners"><a href="#3-Setting-up-the-First-Event-Listeners" class="headerlink" title="3. Setting up the First Event Listeners"></a>3. Setting up the First Event Listeners</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>How to set up event listeners for keypress events</li>
<li>How to use event object</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BUDGET CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> budgetController = (function() &#123;</span><br><span class="line">	<span class="comment">// Some code</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (function() &#123;</span><br><span class="line">	<span class="comment">// Some code</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (function(budgetCtrl, UICtrl) &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = function() &#123;</span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">		<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">		<span class="comment">// 4. Calculate the budget</span></span><br><span class="line">		<span class="comment">// 5. Display the budget on the UI</span></span><br><span class="line">		console.log(<span class="string">"It works."</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	document.querySelector(<span class="string">'.add_btn'</span>).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">	document.addEventListener(<span class="string">'keypress'</span>, function(event)) &#123;</span><br><span class="line">		console.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			console.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>

<p>Reference:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Events" target="_blank" rel="noopener">JavaScript Event reference /MDN</a></li>
<li><a href="http://keycodes.atjayjo.com" target="_blank" rel="noopener">Keycode Reference</a></li>
</ul>
<h2 id="4-Reading-Input-Data"><a href="#4-Reading-Input-Data" class="headerlink" title="4. Reading Input Data"></a>4. Reading Input Data</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>How to read data from different HTML input types;</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOMstrings = &#123;</span><br><span class="line">		inputType: <span class="string">'.add__type'</span>,</span><br><span class="line">		inputDescription: <span class="string">'.add_description'</span>,</span><br><span class="line">		inputValue: <span class="string">'.add__value'</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		getInput: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="keyword">var</span> type = <span class="built_in">document</span>.querySelector(DOMstrings.inputType).value,</span><br><span class="line">			<span class="keyword">var</span> description = <span class="built_in">document</span>.querySelector(DOMstrings.inputDescription).value,</span><br><span class="line">			<span class="keyword">var</span> value = <span class="built_in">document</span>.querySelector(DOMstrings.inputValue).value</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line">		getDOMstrings: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> DOMstrings;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (<span class="function"><span class="keyword">function</span>(<span class="params">budgetCtrl, UICtrl</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOM = UICtrl.getDOMstrings();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		<span class="keyword">var</span> input = UICtrl.getInput();</span><br><span class="line">		<span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">		<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">		<span class="comment">// 4. Calculate the budget</span></span><br><span class="line">		<span class="comment">// 5. Display the budget on the UI</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"It works."</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">document</span>.querySelector(DOM.inputBtn).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">document</span>.addEventListener(<span class="string">'keypress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>

<h2 id="5-Creating-an-Initialization-Function"><a href="#5-Creating-an-Initialization-Function" class="headerlink" title="5. Creating an Initialization Function"></a>5. Creating an Initialization Function</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>How and why to create an initialization function.</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (<span class="function"><span class="keyword">function</span>(<span class="params">budgetCtrl, UICtrl</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> setupEventListners = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOM = UICtrl.getDOMstrings();</span><br><span class="line">	<span class="built_in">document</span>.querySelector(DOM.inputBtn).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">document</span>.addEventListener(<span class="string">'keypress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		<span class="keyword">var</span> input = UICtrl.getInput();</span><br><span class="line">		<span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">		<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">		<span class="comment">// 4. Calculate the budget</span></span><br><span class="line">		<span class="comment">// 5. Display the budget on the UI</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"It works."</span>);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Our public init method</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Application has started.'</span>);</span><br><span class="line">			setupEventListeners();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>

<h2 id="6-Creating-Income-and-Expense-Function-Constructors"><a href="#6-Creating-Income-and-Expense-Function-Constructors" class="headerlink" title="6. Creating Income and Expense Function Constructors"></a>6. Creating Income and Expense Function Constructors</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>How to choose function constructors that meet our application’s needs;</li>
<li>How to set up a proper data structure for our budget controller.</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// BUDGET CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> budgetController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Some code</span></span><br><span class="line">	<span class="keyword">var</span> Expense = <span class="function"><span class="keyword">function</span>(<span class="params">id, description, value</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.description = description;</span><br><span class="line">		<span class="keyword">this</span>.value = value;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> Income = <span class="function"><span class="keyword">function</span>(<span class="params">id, description, value</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.description = description;</span><br><span class="line">		<span class="keyword">this</span>.value = value;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> data = &#123;</span><br><span class="line">		allItems: &#123;</span><br><span class="line">			exp: [],</span><br><span class="line">			inc: []</span><br><span class="line">		&#125;,</span><br><span class="line">		totals: &#123;</span><br><span class="line">			exp: <span class="number">0</span>,</span><br><span class="line">			inc: <span class="number">0</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>


<h2 id="7-Adding-a-New-Item-to-Our-Budget-Controller"><a href="#7-Adding-a-New-Item-to-Our-Budget-Controller" class="headerlink" title="7. Adding a New Item to Our Budget Controller"></a>7. Adding a New Item to Our Budget Controller</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>How to avoid conflicts in our data structures;</li>
<li>How and why to pass data from one module to another.</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// BUDGET CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> budgetController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Some code</span></span><br><span class="line">	<span class="keyword">var</span> Expense = <span class="function"><span class="keyword">function</span>(<span class="params">id, description, value</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.description = description;</span><br><span class="line">		<span class="keyword">this</span>.value = value;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> Income = <span class="function"><span class="keyword">function</span>(<span class="params">id, description, value</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.description = description;</span><br><span class="line">		<span class="keyword">this</span>.value = value;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> data = &#123;</span><br><span class="line">		allItems: &#123;</span><br><span class="line">			exp: [],</span><br><span class="line">			inc: []</span><br><span class="line">		&#125;,</span><br><span class="line">		totals: &#123;</span><br><span class="line">			exp: <span class="number">0</span>,</span><br><span class="line">			inc: <span class="number">0</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		addItem: <span class="function"><span class="keyword">function</span>(<span class="params">type, des, val</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> newItem, ID;</span><br><span class="line">			<span class="comment">//Create new ID</span></span><br><span class="line">			ID = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">if</span> (data.allItems[type].length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				ID = data.allItems[type][data.allItems[type].length - <span class="number">1</span>].id + <span class="number">1</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				ID = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Create new item based on 'inc' or 'exp' type</span></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">				newItem = <span class="keyword">new</span> Expense(ID, des, val);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">				newItem = <span class="keyword">new</span> Income(ID, des, val);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//Push it into our data structure</span></span><br><span class="line">			data.allItems[type].push(newItem);</span><br><span class="line"></span><br><span class="line">			<span class="comment">//Return the new element</span></span><br><span class="line">			<span class="keyword">return</span> newItem;</span><br><span class="line">		&#125;,</span><br><span class="line">		testing: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(data);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (<span class="function"><span class="keyword">function</span>(<span class="params">budgetCtrl, UICtrl</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> setupEventListners = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOM = UICtrl.getDOMstrings();</span><br><span class="line">	<span class="built_in">document</span>.querySelector(DOM.inputBtn).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">document</span>.addEventListener(<span class="string">'keypress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> input, newItem;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		input = UICtrl.getInput();</span><br><span class="line">		<span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">		newItem = budgetCtrl.addItem(input.type, input.description, input.value);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">		<span class="comment">// 4. Calculate the budget</span></span><br><span class="line">		<span class="comment">// 5. Display the budget on the UI</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"It works."</span>);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Our public init method</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Application has started.'</span>);</span><br><span class="line">			setupEventListeners();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>


<h2 id="8-Adding-a-New-Item-to-the-UI"><a href="#8-Adding-a-New-Item-to-the-UI" class="headerlink" title="8. Adding a New Item to the UI"></a>8. Adding a New Item to the UI</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>A technique for adding big chunks of HTML into the DOM;</li>
<li>How to replace parts of strings;</li>
<li>How to do DOM manipulation using the insertAdjacentHTML method.</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOMstrings = &#123;</span><br><span class="line">		inputType: <span class="string">'.add__type'</span>,</span><br><span class="line">		inputDescription: <span class="string">'.add_description'</span>,</span><br><span class="line">		inputValue: <span class="string">'.add__value'</span>，</span><br><span class="line">		inputBtn: <span class="string">'.add_btn'</span>,</span><br><span class="line">		incomeContainer: <span class="string">'.income__list'</span>,</span><br><span class="line">		expensesContainer: <span class="string">'.expenses__list'</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		getInput: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="keyword">var</span> type = <span class="built_in">document</span>.querySelector(DOMstrings.inputType).value,</span><br><span class="line">			<span class="keyword">var</span> description = <span class="built_in">document</span>.querySelector(DOMstrings.inputDescription).value,</span><br><span class="line">			<span class="keyword">var</span> value = <span class="built_in">document</span>.querySelector(DOMstrings.inputValue).value</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		addListItem: <span class="function"><span class="keyword">function</span>(<span class="params">obj, type</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> html, newHtml, element;</span><br><span class="line">			<span class="comment">// Create HTML string with placeholder text</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">        element = DOMstrings.incomeContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="inc-%id%"&gt; &lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">        element = DOMstrings.expensesContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="exp-%id%"&gt;&lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__percentage"&gt;21%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Replace the placeholder text with some actual data</span></span><br><span class="line">			newHtml = html.replace(<span class="string">'%id%'</span>, obj.id);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%description%'</span>, obj.description);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%value%'</span>, obj.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Insert the HTML into the DOM</span></span><br><span class="line">			<span class="built_in">document</span>.querySelector(element).insertAdjacentHTML(<span class="string">'beforeend'</span>, newHtml);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getDOMstrings: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> DOMstrings;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (<span class="function"><span class="keyword">function</span>(<span class="params">budgetCtrl, UICtrl</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> setupEventListners = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOM = UICtrl.getDOMstrings();</span><br><span class="line">	<span class="built_in">document</span>.querySelector(DOM.inputBtn).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">document</span>.addEventListener(<span class="string">'keypress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> input, newItem;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		input = UICtrl.getInput();</span><br><span class="line">		<span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">		newItem = budgetCtrl.addItem(input.type, input.description, input.value);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">		UICtrl.addListItem(newItem, input.type);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 4. Calculate the budget</span></span><br><span class="line">		<span class="comment">// 5. Display the budget on the UI</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"It works."</span>);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Our public init method</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Application has started.'</span>);</span><br><span class="line">			setupEventListeners();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>

<h2 id="9-Clearing-Our-Input-Fields"><a href="#9-Clearing-Our-Input-Fields" class="headerlink" title="9. Clearing Our Input Fields"></a>9. Clearing Our Input Fields</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>How to clear HTML fields;</li>
<li>How to use querySelectorAll;</li>
<li>How to convert a list to an array;</li>
<li>A better way to loop over an array then for loops: for each</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOMstrings = &#123;</span><br><span class="line">		inputType: <span class="string">'.add__type'</span>,</span><br><span class="line">		inputDescription: <span class="string">'.add_description'</span>,</span><br><span class="line">		inputValue: <span class="string">'.add__value'</span>，</span><br><span class="line">		inputBtn: <span class="string">'.add_btn'</span>,</span><br><span class="line">		incomeContainer: <span class="string">'.income__list'</span>,</span><br><span class="line">		expensesContainer: <span class="string">'.expenses__list'</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		getInput: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="keyword">var</span> type = <span class="built_in">document</span>.querySelector(DOMstrings.inputType).value,</span><br><span class="line">			<span class="keyword">var</span> description = <span class="built_in">document</span>.querySelector(DOMstrings.inputDescription).value,</span><br><span class="line">			<span class="keyword">var</span> value = <span class="built_in">document</span>.querySelector(DOMstrings.inputValue).value</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		addListItem: <span class="function"><span class="keyword">function</span>(<span class="params">obj, type</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> html, newHtml, element;</span><br><span class="line">			<span class="comment">// Create HTML string with placeholder text</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">        element = DOMstrings.incomeContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="inc-%id%"&gt; &lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">        element = DOMstrings.expensesContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="exp-%id%"&gt;&lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__percentage"&gt;21%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Replace the placeholder text with some actual data</span></span><br><span class="line">			newHtml = html.replace(<span class="string">'%id%'</span>, obj.id);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%description%'</span>, obj.description);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%value%'</span>, obj.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Insert the HTML into the DOM</span></span><br><span class="line">			<span class="built_in">document</span>.querySelector(element).insertAdjacentHTML(<span class="string">'beforeend'</span>, newHtml);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		clearFields: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields;</span><br><span class="line"></span><br><span class="line">			fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.inputDescription + <span class="string">', '</span> + DOMstrings.inputValue);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">var</span> fieldsArr = <span class="built_in">Array</span>.prototype.slice.call(fields);  </span><br><span class="line"></span><br><span class="line">			fieldsArr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">current, index, array</span>) </span>&#123;</span><br><span class="line">				current.value = <span class="string">""</span>;</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">			fieldsArr[<span class="number">0</span>].focus();</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getDOMstrings: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> DOMstrings;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (<span class="function"><span class="keyword">function</span>(<span class="params">budgetCtrl, UICtrl</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> setupEventListners = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOM = UICtrl.getDOMstrings();</span><br><span class="line">	<span class="built_in">document</span>.querySelector(DOM.inputBtn).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">document</span>.addEventListener(<span class="string">'keypress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> input, newItem;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		input = UICtrl.getInput();</span><br><span class="line">		<span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">		newItem = budgetCtrl.addItem(input.type, input.description, input.value);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">		UICtrl.addListItem(newItem, input.type);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 4. Clear the fields</span></span><br><span class="line">		UICtrl.clearFields();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 4. Calculate the budget</span></span><br><span class="line">		<span class="comment">// 5. Display the budget on the UI</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"It works."</span>);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Our public init method</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Application has started.'</span>);</span><br><span class="line">			setupEventListeners();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>

<h2 id="10-Updating-the-Budget-Controller"><a href="#10-Updating-the-Budget-Controller" class="headerlink" title="10. Updating the Budget: Controller"></a>10. Updating the Budget: Controller</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>How to convert field inputs to numbers;</li>
<li>How to prevent false inputs</li>
</ul>
</li>
</ul>
<p>To convert a string to a number, we can use parseFloat.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getInput: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> type = <span class="built_in">document</span>.querySelector(DOMstrings.inputType).value,</span><br><span class="line">	<span class="keyword">var</span> description = <span class="built_in">document</span>.querySelector(DOMstrings.inputDescription).value,</span><br><span class="line">	<span class="keyword">var</span> value = <span class="built_in">parseFloat</span>(<span class="built_in">document</span>.querySelector(DOMstrings.inputValue).value)</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>Apply DRY and prevent false inputs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (<span class="function"><span class="keyword">function</span>(<span class="params">budgetCtrl, UICtrl</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> setupEventListners = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOM = UICtrl.getDOMstrings();</span><br><span class="line">	<span class="built_in">document</span>.querySelector(DOM.inputBtn).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">document</span>.addEventListener(<span class="string">'keypress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> updateBudget = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 1. Calculate the budget</span></span><br><span class="line">		<span class="comment">// 2. Return the budget</span></span><br><span class="line">		<span class="comment">// 3. Display the budget on the UI</span></span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> input, newItem;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		input = UICtrl.getInput();</span><br><span class="line">		<span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (input.description !== <span class="string">""</span> &amp;&amp; !<span class="built_in">isNaN</span>(input.value) &amp;&amp; input.value &gt; <span class="number">0</span>)  &#123;</span><br><span class="line">			<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">			newItem = budgetCtrl.addItem(input.type, input.description, input.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">			UICtrl.addListItem(newItem, input.type);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 4. Clear the fields</span></span><br><span class="line">			UICtrl.clearFields();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 5. Calculate and update budget</span></span><br><span class="line">			updateBudget();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Our public init method</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Application has started.'</span>);</span><br><span class="line">			setupEventListeners();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>


<h2 id="11-Updating-the-Budget-Budget-Controller"><a href="#11-Updating-the-Budget-Budget-Controller" class="headerlink" title="11. Updating the Budget: Budget Controller"></a>11. Updating the Budget: Budget Controller</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>How and why to create simple, reusable functions with only one purpose;</li>
<li>How to sum all elements of an array using the forEach method.</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// BUDGET CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> budgetController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Some code</span></span><br><span class="line">	<span class="keyword">var</span> Expense = <span class="function"><span class="keyword">function</span>(<span class="params">id, description, value</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.description = description;</span><br><span class="line">		<span class="keyword">this</span>.value = value;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> Income = <span class="function"><span class="keyword">function</span>(<span class="params">id, description, value</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.description = description;</span><br><span class="line">		<span class="keyword">this</span>.value = value;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> calculateTotal = <span class="function"><span class="keyword">function</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">		data.allItems[type].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">cur</span>) </span>&#123;</span><br><span class="line">			sum = sum + cur.value;</span><br><span class="line">		&#125;);</span><br><span class="line">		data.totals[type] = sum;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> data = &#123;</span><br><span class="line">		allItems: &#123;</span><br><span class="line">			exp: [],</span><br><span class="line">			inc: []</span><br><span class="line">		&#125;,</span><br><span class="line">		totals: &#123;</span><br><span class="line">			exp: <span class="number">0</span>,</span><br><span class="line">			inc: <span class="number">0</span></span><br><span class="line">		&#125;,</span><br><span class="line">		budget: <span class="number">0</span>,</span><br><span class="line">		percentage: <span class="number">-1</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		addItem: <span class="function"><span class="keyword">function</span>(<span class="params">type, des, val</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> newItem, ID;</span><br><span class="line">			<span class="comment">//Create new ID</span></span><br><span class="line">			ID = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">if</span> (data.allItems[type].length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				ID = data.allItems[type][data.allItems[type].length - <span class="number">1</span>].id + <span class="number">1</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				ID = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Create new item based on 'inc' or 'exp' type</span></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">				newItem = <span class="keyword">new</span> Expense(ID, des, val);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">				newItem = <span class="keyword">new</span> Income(ID, des, val);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//Push it into our data structure</span></span><br><span class="line">			data.allItems[type].push(newItem);</span><br><span class="line"></span><br><span class="line">			<span class="comment">//Return the new element</span></span><br><span class="line">			<span class="keyword">return</span> newItem;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		calculateBudget: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="comment">// calculate total income and expenses</span></span><br><span class="line">			calculateTotal(<span class="string">'exp'</span>);</span><br><span class="line">			calculateTotal(<span class="string">'inc'</span>);</span><br><span class="line">			<span class="comment">// Calculate the budget: income - expenses</span></span><br><span class="line">			data.budget = data.totals.inc - data.totals.exp;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Calculate the percentage of income that we spent</span></span><br><span class="line">			<span class="keyword">if</span> (data.totals.inc &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				data.percentage = <span class="built_in">Math</span>.round((data.totals.exp / data.totals.inc) * <span class="number">100</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				data.percentage = <span class="number">-1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getBudget: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				budget: data.budget,</span><br><span class="line">				totalInc: data.totals.inc,</span><br><span class="line">				totalExp: data.totals.exp,</span><br><span class="line">				percentage: data.percentage</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		testing: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(data);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>In updateBudget method:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">	<span class="keyword">var</span> updateBudget = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 1. Calculate the budget</span></span><br><span class="line">		budgetCtrl.calculateBudget();</span><br><span class="line">		<span class="comment">// 2. Return the budget</span></span><br><span class="line">		<span class="keyword">var</span> budget = bubdgetctrl.getBudget();</span><br><span class="line">		<span class="comment">// 3. Display the budget on the UI</span></span><br><span class="line">		<span class="built_in">console</span>.log(budget);</span><br><span class="line">	&#125;;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>


<h2 id="12-Updating-the-Budget-UI-Controller"><a href="#12-Updating-the-Budget-UI-Controller" class="headerlink" title="12. Updating the Budget: UI Controller"></a>12. Updating the Budget: UI Controller</h2><ul>
<li><strong><code>What you will learn in this section:</code></strong><ul>
<li>Practice DOM manipulation by updating the budget and total values.</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// UI CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> UIController = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOMstrings = &#123;</span><br><span class="line">		inputType: <span class="string">'.add__type'</span>,</span><br><span class="line">		inputDescription: <span class="string">'.add_description'</span>,</span><br><span class="line">		inputValue: <span class="string">'.add__value'</span>，</span><br><span class="line">		inputBtn: <span class="string">'.add_btn'</span>,</span><br><span class="line">		incomeContainer: <span class="string">'.income__list'</span>,</span><br><span class="line">		expensesContainer: <span class="string">'.expenses__list'</span>,</span><br><span class="line">		budgetLabel: <span class="string">'.budget__value'</span>,</span><br><span class="line">		incomeLabeL: <span class="string">'.budget__income--value'</span>,</span><br><span class="line">		expensesLabel: <span class="string">'.budget__expenses--value'</span>,</span><br><span class="line">		percentageLabel: <span class="string">'.budget__expenses--percentage'</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		getInput: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="keyword">var</span> type = <span class="built_in">document</span>.querySelector(DOMstrings.inputType).value,</span><br><span class="line">			<span class="keyword">var</span> description = <span class="built_in">document</span>.querySelector(DOMstrings.inputDescription).value,</span><br><span class="line">			<span class="keyword">var</span> value = <span class="built_in">document</span>.querySelector(DOMstrings.inputValue).value</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		addListItem: <span class="function"><span class="keyword">function</span>(<span class="params">obj, type</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> html, newHtml, element;</span><br><span class="line">			<span class="comment">// Create HTML string with placeholder text</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (type === <span class="string">'inc'</span>) &#123;</span><br><span class="line">        element = DOMstrings.incomeContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="inc-%id%"&gt; &lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'exp'</span>) &#123;</span><br><span class="line">        element = DOMstrings.expensesContainer;</span><br><span class="line"></span><br><span class="line">        html = <span class="string">'&lt;div class="item clearfix" id="exp-%id%"&gt;&lt;div class="item__description"&gt;%description%&lt;/div&gt;&lt;div class="right clearfix"&gt;&lt;div class="item__value"&gt;%value%&lt;/div&gt;&lt;div class="item__percentage"&gt;21%&lt;/div&gt;&lt;div class="item__delete"&gt;&lt;button class="item__delete--btn"&gt;&lt;i class="ion-ios-close-outline"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Replace the placeholder text with some actual data</span></span><br><span class="line">			newHtml = html.replace(<span class="string">'%id%'</span>, obj.id);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%description%'</span>, obj.description);</span><br><span class="line">			newHtml = newHtml.replace(<span class="string">'%value%'</span>, obj.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Insert the HTML into the DOM</span></span><br><span class="line">			<span class="built_in">document</span>.querySelector(element).insertAdjacentHTML(<span class="string">'beforeend'</span>, newHtml);</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		clearFields: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> fields;</span><br><span class="line"></span><br><span class="line">			fields = <span class="built_in">document</span>.querySelectorAll(DOMstrings.inputDescription + <span class="string">', '</span> + DOMstrings.inputValue);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">var</span> fieldsArr = <span class="built_in">Array</span>.prototype.slice.call(fields);  </span><br><span class="line"></span><br><span class="line">			fieldsArr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">current, index, array</span>) </span>&#123;</span><br><span class="line">				current.value = <span class="string">""</span>;</span><br><span class="line">			&#125;);</span><br><span class="line"></span><br><span class="line">			fieldsArr[<span class="number">0</span>].focus();</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		displayBudget: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.budgetLabel).textContent = obj.budget;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.incomeLabel).textContent = totoalInc;</span><br><span class="line">			<span class="built_in">document</span>.querySelector(DOMstrings.expensesLabel).textContent = totalExp;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>（obj.percentage &gt; <span class="number">0</span>）&#123;</span><br><span class="line">				<span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = percentage + <span class="string">'%'</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			 <span class="built_in">document</span>.querySelector(DOMstrings.percentageLabel).textContent = <span class="string">'---'</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		getDOMstrings: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> DOMstrings;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// GLOBAL APP CONTROLLER</span></span><br><span class="line"><span class="keyword">var</span> controller = (<span class="function"><span class="keyword">function</span>(<span class="params">budgetCtrl, UICtrl</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> setupEventListners = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> DOM = UICtrl.getDOMstrings();</span><br><span class="line">	<span class="built_in">document</span>.querySelector(DOM.inputBtn).addEventListener(<span class="string">'click'</span>, ctrlAddItem);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">document</span>.addEventListener(<span class="string">'keypress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">		<span class="keyword">if</span> (event.keyCode === <span class="number">13</span> || event.which === <span class="number">13</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'ENTER was pressed.'</span>);</span><br><span class="line">			ctrlAddItem();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> updateBudget = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 1. Calculate the budget</span></span><br><span class="line">		budgetCtrl.calculateBudget();</span><br><span class="line">		<span class="comment">// 2. Return the budget</span></span><br><span class="line">		<span class="keyword">var</span> budget = bubdgetctrl.getBudget();</span><br><span class="line">		<span class="comment">// 3. Display the budget on the UI</span></span><br><span class="line">		<span class="built_in">console</span>.log(budget);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ctrlAddItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> input, newItem;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1. Get the field input data</span></span><br><span class="line">		input = UICtrl.getInput();</span><br><span class="line">		<span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (input.description !== <span class="string">""</span> &amp;&amp; !<span class="built_in">isNaN</span>(input.value) &amp;&amp; input.value &gt; <span class="number">0</span>)  &#123;</span><br><span class="line">			<span class="comment">// 2. Add the item to the budget controller</span></span><br><span class="line">			newItem = budgetCtrl.addItem(input.type, input.description, input.value);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 3. Add the item to the UI</span></span><br><span class="line">			UICtrl.addListItem(newItem, input.type);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 4. Clear the fields</span></span><br><span class="line">			UICtrl.clearFields();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 5. Calculate and update budget</span></span><br><span class="line">			updateBudget();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Our public init method</span></span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Application has started.'</span>);</span><br><span class="line">			UICtrl.displayBudget(&#123;</span><br><span class="line">				budget: <span class="number">0</span>,</span><br><span class="line">				totalInc: <span class="number">0</span>,</span><br><span class="line">				totalExp: <span class="number">0</span>,</span><br><span class="line">				percentage: <span class="number">-1</span></span><br><span class="line">			&#125;);</span><br><span class="line">			setupEventListeners();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;)(budgetController, UIController);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/05/22/2017-weekly-6-new-mexico/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/22/2017-weekly-6-new-mexico/" class="post-title-link" itemprop="url">新墨西哥州之旅</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-05-22 18:28:08" itemprop="dateCreated datePublished" datetime="2017-05-22T18:28:08-07:00">2017-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-05-30 22:27:44" itemprop="dateModified" datetime="2017-05-30T22:27:44-07:00">2017-05-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>“过去没有开始，未来没有终点。这是希望的旅程，是谁在风中奔跑，自由穿行梦想，向着幸福的远方。”</p>
<hr>
<p>周六(5月20日)凌晨四点，跟Link打Uber前往SFO, 开启了新墨西哥周末之行。</p>
<p>航班途径亚利桑那凤凰城(Phoenix), 最终抵达德州的El Paso，其距离我们此行的目的地白沙国家纪念地(White Sands National Monument)和卡尔斯巴德洞窟国家公园(Carlsbad Caverns National Park)都还算比较近。</p>
<h2 id="1-El-Paso"><a href="#1-El-Paso" class="headerlink" title="1. El Paso"></a>1. El Paso</h2><p>El Paso位于美国和墨西哥交界，和墨西哥城市Ciudad Juarez仅一线之隔，也正是因此，这里的街道和城市的风格具有浓厚的西班牙文化色彩。从Downtown往南沿着El Paso St走不远就是一个出入境的关卡，沿街有不少的小摊小贩，这样的场景其实在美国城市里并不多见，不少商铺的标价牌甚至叫卖声都已经是西班牙语，来来往往的行人也大都是墨西哥人的面孔，除了我们之外几乎就没看见其他中国人。</p>
<p><img src="https://lh3.googleusercontent.com/LJB51yA5JjvuerdK3wSOA4JZdgT3K6T-1Sv6ZJof7zluqLDtWcTz6fO4XGejuI1aUsUoe6dSODPVahBSC3PyZnVeEZmZ5VlTrAqkYWDZqbYLEY2P9mQGpyeJvxxlYxMG6bCl3DXqlwus2NXbSuL8stLLo51igl4bb84533fiI-JU5JidaQYWWAXSFXw5B17as0JhHtJggqfZXcBeK7dIIKIQ117PABSRN3-Eh6OtYVDhrKrqmqVup_o60AC1wKPp5Tf9hx7rRFPolx3UmSGFhOPvRTjROIOy6VTX66awEds9zgjDqbOJDvD-UxbJ1h3KrhjOEdEe49jBbTyCQ2p3QIYzwt_v6a99QuZFuOVPkdMaSFo21Jyx3xbL24gGPfO0yCPubvC3gmy2VYhQgc1pTfoEoteCACC98TtC178ngcY4K9B6uahUm01v-AyyvBFX97xkIktxXF5sqhYbs2ItHPr2IOIevKywOASuzgHbcHqjHBExaFfts0LgUJtrFOxua3W0i9ZZRkPJ_pCidrEmPaw_pTRzGptqcjhuBeGbNrQa2TJPaCcTdvnOXvC_S9RH8ppm4THap5XEZzaTmaUvSrdgJXlFZ-uM1fGx7v1PhKv4euH_tmRBch5KOLsgEFP0-hepYB7toy4HlTcAdoR0UBpuQBLWX2ZgxJ8lM6eiQA=w1791-h1343-no" alt="El Paso Street View 1"></p>
<p><img src="https://lh3.googleusercontent.com/achXyvvuFZmmDfnNSIsbQbQQEWFnRUn9OpDA-SIFw4jgze8xzmESkl31MKA26mcV_a53wQNcU06N78Q-SlJTA_mPfpd2lQdbDHClKiERkIyjvFZr-SJf6qTkInPthduxSggIQ2f7ze-69m9n7E5OlghHaePOsKmh9P1xu1aviOCy_xeow6-VAk0Kcm3wyxFod62Ms-pzwhwAAER78adchWaCzaJUAbd08CCMkAt9e8KJkKL7sxQl__SwQjoty9RPvFNoC2vqEDYOzivCWKkxOxezpUWUESCQP7nI1sQPVS3BKesx3Bw9MxWwWyq7HVdY__6TNyNvPyCtba1MGvH8OSbj35H9OG4U3d1GVBh5ZEsWVPCxg4wfkdeQ2KiEfj43sbbFmKHU_Byk5Hr1v-U7-PpwHillW0Jazznu7YiWrLHcw0S9_z1l9HDTe1bEHTfhI_QAeNOvdl7Aj0GGXed4dpekdVkiJI1Aw9K2cFrK4ERI8koc7Zeb9sfrFMTJss4cgH0tcf3mCWrOxByIcwOgDYxFKNezxHKVBBxt3S0UFpuSzAUYhkM35fK-djDoOBX7l-sim0snaqu5r8BMguVQtEIcjaL7_fxz3ZRu-3G-1tawTIp677OYCv8OwdHUI20bV1ZFonXc4a8oCGf080XNOdT7cohSnl0ze8Dsy-z3Hg=w1791-h1343-no" alt="El Paso Street View 2"></p>
<p>接着我们开车来到了El Paso著名的Scenic Drive, 这里的视野极好！可以俯瞰到整个El Paso和Ciudad Juarez两个城市，以及从中穿过的国境线。</p>
<p><img src="https://lh3.googleusercontent.com/bXeLFEyTMtigTTDYzh2xNt0SJQtL6GfXAUCKbA9tg0qG5C6rLSf18qCywfT81VKIHYsLjtBsoa4XM5SoHFH3zSHx5TIpn6WC1bKDVOVv-FraIA6f4-dj5ZTe9W8SRQS90OUCAzehgsIOZbqrEsZQfQ95qKeYednk3KChgnlBLTYa_oZ0HYLDrqYep-lbx0wokTVgNZELK68UvFeNvoL3BgbsxgvPyxIPKnG8RC_Ja8mxojhQcsRZb4ncfiU9G6HcMFoE11eGOAq8IyLV6pBH346wIkhkFeFphCvJGiI5fA_IPlan_ey9yMuFFWqqZ2JatRE5jSFztxkFuscsPUtC8mBaTlUxXk4h7H26JQPYSU2PAWc9LHshXlamZOGRXu_ScXyuvfee4KHiX18EhfrXLtzVLVgCUGKRXBJjkg9EVxYXJA5kL3fy9BH83Pj972VN3SyxMDn-FyfFQWeBaB0w_IVvcgl3jgJyG2KDBkkmj_EmViyzK89_k3T7iu3mho4tGjzth8-rTatdaqcAozMKEGi4TNxejekZnA-WtoEY7wIZVyJZnZNWW-JuhiqE-hcjf7P4aIotnKsbuLZqQufmOhf7T0VoNpdHKm2CpZFB4r2W1yVg6KUPkqmx19PMjl75J4-jyK2z4A5lmQaD8ZRR5gNC_3GUOGaH-dTC4-rklQ=w1791-h1343-no" alt="Scenic Drive View 1"></p>
<h2 id="2-White-Sands-National-Monument"><a href="#2-White-Sands-National-Monument" class="headerlink" title="2. White Sands National Monument"></a>2. White Sands National Monument</h2><p>结束了El Paso的短暂停留之后我们就驱车北上，进入新墨西哥州，前往近100 miles以外白沙国家纪念地。离白沙公园不远就是一个美国的空军和导弹基地，因此途中还遇到了例行的证件盘查。大概1个半小时之后抵达了白沙国家纪念地。</p>
<p>虽然目前只是National Monument，但白沙的名气比很多National Park还要大，方圆710平方公里的银白色沙丘构成了及其绝无仅有的自然景观，置身其中，如梦如幻。</p>
<p><img src="https://lh3.googleusercontent.com/i-k61xSA-DFQLji2LYQ9hqzdvYLITaIJx8pFcyRge1m_5oLJ9TDTVEX_sTpXZuvssH8_Kt6WsO8SXinTUS6oriC7rzBqOrmyNmoTBwKnIwLePvoK2dPOxT6xiFeH_Q67015oCGW50hviMq2S1H71pVekkgnYVwJAHUWJKD6k24tnZndG1NZ-rD2IVrRNyPq0iMGQWVJA0zk1hzrEhKnAWeV2pq4Xm3fzrDQ8koGKUfw22xYGZE479c_UdC24FJ_w_FUhLh-h-MGkiN-FozFFzkZ7DIPmA8aSZvZDHXjMaGRAd09euQnb46NVyyKnqlr2Do43dD0Dwbafz-0mQUXFj0Bvk6vQUYEqkNUf40Tbfdw0QCMfLgQns0_d8TPny-1zf3h-pl2ZoneorMBVM3O-EVgiHSFHZ9Dr8mdxqapG-uSahRLaXK77tWZSxQRX7kWGVr1NqHxyoHWpuwYO6tT9vbVqxil7HBw0ySOw3vRD-h-1hACie6mYyEYFChE9KUIrTGywWVCU2csZBEuijl1BHf8WYdrOYPG2tOLRNtyluoM0ZzhifxEpWo0XDAigvyZ5fMMQqg0fjTgKpWLXKviCVLcYKKVEYz-uqM4fkR4Hoo5soisAIzvECsvXAg5mHqnb6TPIIsdLPfZS1ZMNWKStDse7l4KBDpV2UbB3hSYn1g=w2560-h1157-no" alt="White Sands National Monument View 1"></p>
<p>在白沙公园看完了日落已经不早了，开车去附近的小镇Alamogordo觅食，本以为在这荒郊野外之地能找到些果腹的热食就不错了，没想到居然还发现了一家名字非常霸气的中式自助餐Rocket National Buffet。小店人也不多，席间老板很热情地跟我们聊天。得知他已经在这个僻静的小镇呆了十多年了，期间生儿育女，经营者自己的小生意，平平谈谈地活着。对于在城市里呆惯了的我们来说，这样的生活不免有些过于孤独。但转念一想，即使终日置身于繁华的车水马龙之中，我们是否又能真正地摆脱孤独？</p>
<p>正如马尔克斯在《百年孤独》中写的那样，“生命从来不曾离开过孤独而独立存在。无论是我们出生、我们成长、我们相爱还是我们成功失败，直到最后的最后，孤独犹如影子一样存在于生命一隅。”</p>
<h2 id="3-Carlsbad-Caverns-National-Park"><a href="#3-Carlsbad-Caverns-National-Park" class="headerlink" title="3. Carlsbad Caverns National Park"></a>3. Carlsbad Caverns National Park</h2><p>从白沙公园回到El Paso的酒店，晚上休息得还不错，第二天早上满血复活。沿着62号公路一路向东，开往Carlsbad Caverns National Park。Carlsbad Caverns在当地被称为蝙蝠洞，是西半球最大的天然巨穴之一。整个国家公园由约84个主要洞穴组成，奇特的地质形态非常罕见。</p>
<p>沿路还经过了德州的瓜达卢佩山国家公园（Guadalupe Mountains National Park）, 在车上就已经可以非常清晰地看到Guadalupe Peak(2,667 m)了，这也是德州境内最高地山峰，远远望去还是挺壮观的。</p>
<p><img src="https://lh3.googleusercontent.com/J9aU8g-FELsxKQ0gQNmUEfGJc6oy0Q8I9TDYE86upj9SE3H1UzV8tn6b9lem7aYtR-QdcT1TnUfekMcYyCzRtPijaDoP97OAkLIjYLZIajjd52eHE4MQoJZSWvzKW0ViAJIKojOlbWeeI2NccQKl5RDDJiHtlX9YjhKe_aR8qX7WkcCp1YyppmlwsL5xqFoE7rV6nOFzC50t5rhfqATg8VXzAzX2a1QRHm-VA0UV5SS21SvPNcVa3Lf2G9f151z-yoKbt5Q9pFzxWv7ZCynUbFYbVkK6y27crBQdwufUtsPXCtxg2K-9FXq0Tgof5Me9Caf0t4HwJNupvoZYwWh729k1B2ROIqTHYVMPa8zmOA3MBy6wbye8ZWgsUxGtH0SCgOLCuSOa-4mMBUN7OACYFBXpCIHUj_5x8CwjhvavXrc06uQtzvpcjqEbeR3rbKoDEQHHdAxml35tWWcCJV2gcdMCko6hxBdR0K4lU0qlRk9qgCPAIXJqPBtheF5zSDOD1ugB_yP8ktW7H05A5fRLZLb9pmLfDEe_PAyRKg9labr986X0ui-RpB-mI8s6bfXH4r5uFHI3t3YnXsXq-KDNfGiFoBgU5MCJV5BFhJp54t1H3MCQTUx7xo8ZLJqsYgmhMGDv_egU7zMKwwDeBIr3fyjCJ9-ddW1bNIRlfoutFA=w1791-h1343-no" alt="Guadalupe Mountains National Park"></p>
<p>大概两个半小时后抵达了Carlsbad Caverns National Park的Visitor Center, 吃了顿简单的墨西哥式午餐，稍作休息之后就在大厅里集合，准备参加一个之前就预定好的<a href="https://www.nps.gov/cave/planyourvisit/left_hand_tunnel.htm" target="_blank" rel="noopener">Left Hand Tunnel Tour</a>。公园里除了有让游客自由游览的Self-Guided区域之外，还好几个需要由专门导游带领进行游览的tour，因为时间关系我们只参加了这个难度适中的Left Hand Tunnel Tour。</p>
<p>导游是个帅气的白人小哥，跟大家简单地介绍了tour的概况以及相关注意事项，并且组织大家互相做了自我介绍。最后在出发之前每人都领到了一个点着蜡烛的手提灯，因为接下来将要进入的洞穴是完全没有任何照明设施。尽管这并不是我第一次去地下溶洞公园，但这种只能依靠手提灯来照明的情形还真是头一回。</p>
<p>一行十几人从Visitor Center直接乘坐电梯下降到了Big Room外的大厅，在导游的带领下开启了旅程，进入了彻底的黑暗之中。十几盏看似微弱的手提灯连成一串，合力照亮着脚下的路，以及两边形态各异的奇石。相比徜徉于别处那些被灯光装点得绚丽多彩的溶洞，这样的行程显得更加具有冒险的精神与探索的乐趣。</p>
<p><img src="https://lh3.googleusercontent.com/Cz5WgUMwyTrqnZDctwtU2ewrqg7PeG_Wg2xtu3KeFWa-GVl2A11-e-FoxPsqtCybVh-yFEtQFlXVk223Z7NjHgJWVcaiqINun48bS-O9mwAr7VPl7YF6leangWU3w82dQEBQXkvlJqNGlyfIpZhhUcjyzoiUKSKapGdD5BaDLC73cq2PrCSJoeU7RpipynYLpK8Bhe6MaW5RI-0ZDom5jnegFSBkOZM93P4L72YkSEdNPW0RF2ekNO3Psi9zK0drYrhs7AkQA7RVvCuY6VfbW1fdSil0IZ2faHueyRLsYc5SB79OKM8WymLOMujD0js0YGijzdmRJ9Y-Px0IUEN9GymnmdXnhM24nAJZQgFQgl-Rl2ZVR55Etj-8kFyBBUACStQRoXNeLus9llLHgPf5LEQNoUfh0ZPsQXbdP_kfkON4SGGn-V3dWDAU2OGAgBzmdO1xI6BmjNyh-GJehcbBjRLEn73S6qcKOq8wPKwDcWIup5VQEDxdi_GVR4Q0RMqls5MExCDvwFbHLrEaJUH7hCCPvDTD9xcpaJaIpdpzBZIdDzXCz8yJCNt6xnMc3ZTYs5NY2oLeaEns1mMI6oDSy_eoK1nDR_bYcaW_XHeaYswq40RchB7M87puJZ-zLz4Yh1R2j5JnGRuUso7RZLMylf_KUGgp1vBEcUI8QvmhVQ=w1502-h1343-no" alt="Left Hand Tunnel Tour View"></p>
<p>在Tour的最尽头，导游让大家都吹灭了手中的灯，仅留下他手中唯一的一盏。微弱的灯光在无边的黑暗中显得是那么的苍白无力。仿佛又把我们带回到了当年Jim White独自一人发现和探索Carlsbad Caverns时所处的情境。</p>
<p>耗时近两小时的Tour结束后，告别导游，我们开始了Big Room的参观。这就是那个已知的西半球最大的地下洞穴，与它相比，所有其他洞穴立即相形见绌。它长达550米，最宽处可达340米，盛得下十几个足球场；而且它有着惊人的高度，在里面建造30层的楼也绰绰有余。洞内的灯光照明也并不像国内的很多洞穴那样五颜六色，而是清一色的白炽灯照明，最大程度地保持了它本来的面貌。其带来的震撼程度也远远地超出了我们的预想，不得不再次感叹大自然的神奇力量与人类的渺小。</p>
<p><img src="https://lh3.googleusercontent.com/NdRVGcBKaF7mfRg1In_-v4nGjhi3xsvJhBc-MWklgb2iM_GwsPsOgex5i-NdDjfnUn8SAYh7xnkGJA18_sB7f0_JOP1s9h3qsz-QI8Xtdr6aAZvzvoY0HQrc7d_PXY6jjci-ZtlLa5BinrjgDxAatv49VyHq1CtJ8aksw0XdYCOtiNRiY4htZd9Qzrut3SxDdw7s_I6aLGUVUjRw7jzpSWSOfhp7EYADV-6zF_48LVANydXCuL9JUh6-15uR0XDf-jqmFWQxyOvVzg2NT6RjDCLuFT5A3g97dOUaAEjy9kcWGNm8dvGUKB5r-8FgzMBAyLxbyaElDk3UP0an5H_TayxKv8y7bWBxXzjxDdgydZm4UwxE73Wdjjl3xyIW3Og8e6pkOBD7KJdsn5J9hTc6eLTakioIdT9tkjCvMVQjnV0aQ4QAC6WMCPSw4WTY-GSj2Lc00Mg15yaRatQ7dcfJYYowHCCtlNZvGYxx5lrHO0ylYlgyzgKgO6fLnVBeulphqdm_zo37DkAWUS2qc2paKv2RaNC4bCQxEzwTJQ3OROgGaBrIqjtT0E-A_YDc0JeMnD4lM7to1xSOcQGoI4CdhGQR1HfCOqxnWGb2JoiYTeJO8tbOGtXik-IJg0RUUK0dpA5UfblvW1ig92RjnUZdcZzZK0qwI45MybLpnUGoig=w1829-h1060-no" alt="Big Room View"></p>
<h2 id="4-End"><a href="#4-End" class="headerlink" title="4. End"></a>4. End</h2><p>告别了Carlsbad Caverns National Park， 再次驱车回到El Paso，夜色中踏上了返程的航班。</p>
<p>“世界像无尽的画卷，一切像美丽的诗篇。如清风自在地旅行，掠过这辽阔的原野，掠过夕阳里的远山，在无限宽广世界自在奔跑。”</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/05/17/java-Multithreading-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/17/java-Multithreading-1/" class="post-title-link" itemprop="url">Java Multithreading: Run Two Synchronized Methods Concurrently</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2017-05-17 09:57:05 / Modified: 10:00:21" itemprop="dateCreated datePublished" datetime="2017-05-17T09:57:05-07:00">2017-05-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="I-Question"><a href="#I-Question" class="headerlink" title="I. Question"></a>I. Question</h2><p>If i synchronized two methods on the same class, can they run simultaneously on the same object? for example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">methodA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//method A</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">methodB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// method B</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="II-Explanation"><a href="#II-Explanation" class="headerlink" title="II. Explanation"></a>II. Explanation</h2><p>Java Thread acquires an object level lock when it enters into an instance synchronized java method and acquires a class level lock when it enters into static synchronized java method.</p>
<p>In this case, the methods(instance) are of same class. So when ever a thread enters into java synchronized method or block it acquires a lock(the object on which the method is called). So other method cannot be called at the same time on the same object until the first method is completed and lock(on object) is released.</p>
<p>Putting synchronized on a method means the thread has to acquire the lock on the object instance before entering that method, so if you have two different methods marked synchronized the threads entering them will be contending for the same lock, and once one thread gets the lock all other threads are shut out of all methods that synchronize on that same lock. So in order for the two methods to run concurrently they would have to use different locks, like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object lockA = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object lockB = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(lockA) &#123;</span><br><span class="line">            <span class="comment">//method A</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(lockB) &#123;</span><br><span class="line">            <span class="comment">//method B</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>For more reference, see <a href="https://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html" target="_blank" rel="noopener">Intrinsic Locks and Synchronization</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/26/2017-weekly-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/26/2017-weekly-5/" class="post-title-link" itemprop="url">初晴</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-26 22:37:17" itemprop="dateCreated datePublished" datetime="2017-04-26T22:37:17-07:00">2017-04-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-05-01 22:45:40" itemprop="dateModified" datetime="2017-05-01T22:45:40-07:00">2017-05-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p>这周从一个印度大客户那边得到了关于在产品Performance方面进一步提升的需求，于是花了不少时间重新梳理和分析了之前的code，的确是发现了不少潜在的可以通过重构进一步提高的地方。反观之前在开发新feature的过程中，往往总只是过于专注功能本身的实现，而缺乏了宏观上对于代码结构和性能的优化。</p>
<p>Martin Fowler专门有一本书叫做《重构:改善既有代码的设计》(Refactoring: Improving the Design of Existing Code)，就是来解释了重构的原理和最佳实践方式，并且指出了何时何地应该开始挖掘的你的代码并且以求改善。</p>
<p>其实在实际工作中，项目经理往往并不会主动要求开发者进行重构，甚至当开发者提出重构需求时还会招来反对。比如一个项目还剩一个礼拜，但还有N个需求没完成，现在你请求花费两天时间，“什么都不做”，开发者几乎都无法承受这样的压力。但是，比延误工期更严重的是，一个臃肿不堪，难以修改的项目，最终将面临添加需求困难，运行效率低下，以至于达不到可用的性能，因此最终失败几乎无可避免。</p>
<p>因此作为开发者来说，如何处理好这个矛盾呢？一个比较可行的方法是，把重构当做开发的一部分，一边开发一边重构，先快速的堆叠代码，实现功能，然后在功能不变的基础上(写好单元测试)，逐步重构。</p>
<h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2><p>周六一早，从湾区万里无云飞到了西雅图烟雨朦胧，无论是在《北京遇见西雅图》，《西雅图不眠夜》还是《晚秋》，西雅图给人的印象一直是个被文艺和浪漫笼罩着的城市，和这烟雨倒也恰好相得益彰。</p>
<p>雨并不算大，街上的人也不多，还真是很久没有一个人到一个陌生的城市了，一个人打着伞漫步在Downtown，就这么一路走走停停看看，经历了静寂的Pioneer Square, 造型特异的City Library，Waterfront的摩天轮，繁忙的Pike’s Market，第一家星巴克，还有Chihuly玻璃艺术馆，最后登顶Space Needle，整个西雅图的美景净收眼底。此时天气竟然也出乎意料地开始放晴，不远处一抹惊艳的彩虹横跨于城市上空，美不胜收。</p>
<p>风雨后的初晴往往更为可贵和迷人。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/19/2017-weekly-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/19/2017-weekly-4/" class="post-title-link" itemprop="url">双面</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-19 22:19:53" itemprop="dateCreated datePublished" datetime="2017-04-19T22:19:53-07:00">2017-04-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-04-20 21:54:19" itemprop="dateModified" datetime="2017-04-20T21:54:19-07:00">2017-04-20</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p>这周利用早起的时间又回顾了下数据结构与算法方面的知识，并且通过了微软的在线评测，有幸受邀去参与微软总部的AI &amp; Research Event的机会，这正好是一个不错的实地造访下这家西雅图巨头的好机会，同时也将是我第一次真正去到西雅图这座城市，新的经历和体验总是会让人充满期待。</p>
<p>在公司工作方面，整周基本都是在为了产品的Release做准备，完成block shipping bugs的修复，不过整体节奏都还在掌控之中。下班之余依然是健身和充电，一直有在follow的萌姐在喜马拉雅的课程也接近尾声，开始了整门课程的梳理和总结课，归纳起来基本就是分成了输入，管理系统和输出三大部分。其实如果把人看做一个系统，很多人与人之间的差异就会变得很容易理解，也许最初大家都是处于同一起点，但因为输入系统，管理系统的不同，进而决定了输出的不同，日复一日，也就自然而然地反映出了整个系统效能。</p>
<p>托马斯·弗里德曼(Thomas L. Friedman)在《世界是平的(3.0版)》中提到过，现如今空前平坦的世界上极大程度地促进了人们在全球范围内的竞争与合作，给个体带来的挑战是，不仅仅要求人们掌握一定的技能，还需要人们在心理上有一定的适应力、自我激励和应变力。而且对于新兴中产阶级来说，想要不被世界平坦化所冲击，还特别需要具备三方面的技能，即如何成为一个伟大的合作者，复合型人才以及讲述者。因此，对于个体而言，有一套好的“系统”则是这一切的前提。</p>
<h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2><p>周末跟一群朋友去了Las Vegas，其实也只是第二次来Las Vegas, 上一次都已经是三年多之前的事儿了。想想这还真是个神奇的地方，在一片荒漠中突兀地存在着这么一个充斥着金钱，欲望，和荷尔蒙的繁华都市，就真的如同Downtown的一家酒店名字一般，the Mirage(海市蜃楼)。</p>
<p>这次来访最令人期待的就算是太阳马戏团Cirque du Soleil的Zumanity show了，之前在纽约有看过他们家正常的show，感觉无论是专业水准还是场面效果都令人印象深刻，而上次来Vegas看的Jubilee，第一次领教了什么叫作高端大气上档次的成人秀。这次的Zumanity则是两者的合二为一，尽管从规模上来说比起前两个都要小，但也是亮点不断，无论是杂技演员的专业功底，还是歌手的演唱水准，都是极好的。</p>
<p>除此之外，又故地重游了凯撒宫(Caesars Palace), 威尼斯人(The Venetian), 百乐宫(Bellagio), 看了火山秀和喷泉秀，尽管奢华依旧，但感觉这些已有多年历史的酒店无论是外观还是内部装饰都已经是颇具老态了，相比而言反而是更喜欢新开的Aria那种极具现代感的赌场酒店。</p>
<p>大家一起出来玩一定是少不了吃吃喝喝，第一站是在Yunnan Garden吃午餐，鸭脖辣鸡什么的凉菜都很正宗，各类米线诸如过桥，小锅也一应俱全，而且居然还看到了贵阳辣鸡粉，果断点了一份，不过做法和贵阳本地的还是略有差别，但总的来说味道也还算不错，能在Las Vegas吃到这些感觉还真是意外的惊喜。之后晚餐去了市区一家叫Mon Ami Gabi的法国餐厅，分量足，味道好，尤其是三文鱼和鳟鱼做的非常赞，让人意犹未尽。还有就是第二天在Bellagio的自助餐，Vegas的自助餐还是颇有名气的，在很多人心目中一次Vegas之旅必须要有自助餐才算足够完整，果然是老远就看见了排着的长长的队伍，不过真的进去之后感觉虽然种类还算不少，但食物本身也就是中规中矩，因此也就抱着旅途完整的态度吃个情怀了。</p>
<p>一直觉得能跟一群朋友出去旅行是一件幸运的事情，也是一段值得珍惜的经历。周六半夜因为受限于Dress code导致Clubbing未遂之后，大家干脆就回到了酒店大厅里开始了吃东西，喝酒，玩桌游，直到凌晨三点半方才尽兴，想想还真是很久没有玩到这么晚过了。当然，短暂的狂欢之后生活还是要回归正轨，毕竟早睡早起的规律生活才是王道。</p>
<p>还记得Zumanity里面有一段柔术的表演，台上的演员把自己的身体进行了令人发指的扭曲和弯折，却依旧泰然自若，气定神闲。对于普通人来说这简直是难以置信！但其实仔细想想，哪有什么人生来就不普通呢？一个人不是因为不普通而所想所做不同，而恰恰是因为所想所做不同，持之以恒，最终才变得不普通。</p>
<p>（初稿完成于04/19/2017）</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/11/2017-weekly-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/11/2017-weekly-3/" class="post-title-link" itemprop="url">白日莫空过，青春不再来</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-11 22:33:16" itemprop="dateCreated datePublished" datetime="2017-04-11T22:33:16-07:00">2017-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-04-13 07:18:57" itemprop="dateModified" datetime="2017-04-13T07:18:57-07:00">2017-04-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>虽然在工作中其实经常用到JavaScript，但好像还真是很久没有系统地进行过梳理了，于是本着查漏补缺的心态，完成了Udemy的The Complete JavaScript Course基础部分的课程并且整理了笔记，过程中的确是发现了不少知识体系上的漏洞，也算是收获颇丰。</p>
<p>这周还顺带把笔记管理的软件替换成了iA Writer, 以前一直在用Evernote，但是对于Markdown的支持太鸡肋，反而有一堆不太用得上的杂七杂八功能，实在是显得冗余不堪。尝试了iA Writer之后发现这个软件完全走的是另一个路线，专业的Markdown支持，iCloud云备份，最重要的是其极简界面深得我心，多平台同步也是毫无压力，感觉接下来基本上可以抛弃Evernote了。</p>
<p>公司方面这两周都在搞Learn的Hackathon，因为Tap这边的也涉及到Learn的Feature, 因此上周也受邀参与了两天。这次Hackathon来得人还不少，不仅有湾区的同事，还有从德州，麻省，以及印度还有英国专程飞过来的，而且居然还意外看到了David Mason，当年一起做Phone Shell的时候可真是算难兄难弟了，虽然后面没有再合作，不过那段经历也真还是挺难忘。这次Hacathon是Jeff和Vitaly联合带队，若论起美国人的敬业精神，作为Learn Team Senior Director的Jeff就是一个活生生的例子，同时精于技术，管理，沟通，口才，领导力，而且工作起来精力极度旺盛。用一个美国同事的话说，Jeff是常年开启着N个克隆版本，带领着多个项目齐头并进，任何时候都属于高能状态。当初和Jeff工作的那段时间，有一次他一边高速上开着车，一边dial in到我们的scrum里面，而且遇到问题还指点着我们打开哪一个程序文件，然后去分析哪一段代码，简直是让人目瞪口呆。</p>
<p>不过说起敬业精神，也不得不提及日本这个民族。最近看了柳井正的《一胜九败》和稻盛和夫的《干法》，这两位卓越的企业家更是将日本人特有的那种专注，执着和敬业的精神发挥到了极致。稻盛和夫先生对于工作的态度给我留下了很深的印象，很多人工作不过是为了期盼假期，薪水和奖金，而稻盛和夫是发自内心地热爱工作，视工作为最佳的自我修炼方式。人生总是被“贪嗔痴”三毒所控制，要想减少这三毒，最好的方法就是“愚直地、认真地、专业地、诚实地”投身于自己的工作，工作就是万病的良药。</p>
<p>另外呢，这几个月通过GYL社群收获不少，通过早睡早起，使用效率手册，感觉时间的掌控能力好了很多。现在同时也开始承担了一定的GYL社群管理的工作，希望自己的坚持也能带动新加入的小伙伴们一起进步和成长。</p>
<p>柳烟侵御道，门映夹城开。白日莫空过，青春不再来。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/06/Advanced-JavaScript-Objects-and-Functions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/06/Advanced-JavaScript-Objects-and-Functions/" class="post-title-link" itemprop="url">Advanced JavaScript: Objects and Functions</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-06 17:29:12" itemprop="dateCreated datePublished" datetime="2017-04-06T17:29:12-07:00">2017-04-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-07-22 08:52:22" itemprop="dateModified" datetime="2017-07-22T08:52:22-07:00">2017-07-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-Everything-is-and-Object-Inheritance-and-the-Prototype-Chain"><a href="#1-Everything-is-and-Object-Inheritance-and-the-Prototype-Chain" class="headerlink" title="1. Everything is and Object: Inheritance and the Prototype Chain"></a>1. Everything is and Object: Inheritance and the Prototype Chain</h2><p><img src="https://lh3.googleusercontent.com/I0PB8RP7AO9LkCeT8eT6nVUMBSYDY2PyEfxlf_eum2bGhpxX_uy-S79Ork__5s57wNLgiz_s3WnltNj-te3j2av-KpJ2BjANLJh2IpST8waederhveRbfDqnAwQQgIPCQe6t3YFVXnG2nigrXIRz5Ph1QzSggrPrN-3HTP-NPfzHL6LbRWKhs0KwDDvF_FyXmn7o4Z-AwtK2PCf-8VdW_BktnK652XbVRnvRYKVnvYNhPmLH9Mu_X114V5Uw6HhflHTFy6WY3g4kQ7BzSfnM-jrSWVic9F8XHlUX_GXm5C6lpg3O7ATI31xuyIQuI6ElPIQ1fhJw3b9ZhJrtZworY8rSU7ESkSJoGt2O5C5LEaCcbiboKFcHlRlo7m1Tv63St7buD4IxPtQF1UZjXlU4mBnAw4nSBEXkt_r7v8jYCJZ_I3IyzNEZZcVWFpaNX5VWAbTKO77mXRikSSCR1FNBDdoPDQTFhnQXeqkJLZsHXLYXCi4c_QVSdeeoXJW990CoWB1rYFN3ZfQShvKxvL7sAJ8a_-HgRUguBXTBHHnrA2S4yWxiEv6oHC3u_mwLzuqKkLc_0rH_t4TAtdyAep3MpjIzeOh9-c72LGGjfEub1aiX9no-TbpB5OD82uPKhtKSywuOqZbCwvEwugp8fzKtI_Miah3Em9klXzMAPk6c2g=w759-h282-no" alt="Everything is and Object"></p>
<h3 id="1-1-Object-Oriented-Programming"><a href="#1-1-Object-Oriented-Programming" class="headerlink" title="1.1. Object-Oriented Programming"></a>1.1. Object-Oriented Programming</h3><ul>
<li>Objects interacting with one another through methods and properties;</li>
<li>Used to store data, structure applications into modules and keeping code clean.<br><img src="https://lh3.googleusercontent.com/JWGejWy-5UEIY4S3q6FNXkq3b7H0PbECFGRFiOlE3rDsvqY2c3yaTPwXxlhes7NNcz77vfBSs2nFME6GNEP9kDajiGD62-bjE3YxFQX2Jyr4Cs40IDTE4fNWFc9JHUfXgi_SbsHvCPEncJA1Fk_MH5rqCtMEEp-YIWFT2X5EBXAup910lnt_HqTB7MAR-Ipgx_gIN-WejB8q1p3x3goAK-fhykFYNnRvcLO0hJhQDb6niwYET13BlHgvehiFaESb9R9LJ4Uq_9iyaBrqisZBmWN45PIOggWbcqWiZf1tFo6_Ah-o00SAEey_MwdwpntmzZi7kBZA4gq2ibHmakHCq2t_i8760yenwMPPhrk7unDNiMHnqp3fYxjzOvNTc-NKxOl-1oJFbiwdyNU_TwccbfsGhCwtJg8tQmVbtTSdy_Vv-FUayhc0CPQiDHirDNwCkqRX5oWHkfcMfynVNyERU-weB-5J7ReTRUgWsfKe60BfQx1emhwjJ0wI_0rmlN4RN_2MjDEz3cwSUgVUmZw1z1JzYoHy8A0Uz_VWIi0Y59ysAnYXVekqwqp7jNtmsfMrtoemq1caDe7J4EQ3u8iVa5YbUk8d4ijud9e-AU1urV0EbFIn-xYrtIYZFWRf_yuK5Sqap7e89CiBd6tq9sHLteR3201C_Pcy0vsQmWwfZA=w759-h341-no" alt="Constructors and Instances in JavaScript"></li>
</ul>
<h3 id="1-2-Inheritance-in-General"><a href="#1-2-Inheritance-in-General" class="headerlink" title="1.2. Inheritance in General"></a>1.2. Inheritance in General</h3><p><img src="https://lh3.googleusercontent.com/pnHefeMqK3jMpAa0wTuxhgPzLPVHnuKXMPIRjRmDcjYJKU--kUg3sTx_uLi3qUsy9RVv3eTTOOdMiB820BPtAn6T8rG4XXQVgLnPVYVjyX_IgqS-RDt6gCH_HcLDP4SzkEfC8HUoJ2J0Ta6IxPNchYbVeYMInXzYQQv2bnnzURj4RCkAwKetJt7p04TAE-DEDHAincw5Uka5Lnay15UerYnTw4rglVn5s3anVJM5Hwy2PJ3VOY1M9RvxIJl1jgo1EvtoAkAAYaGHABIyoFARF6KfDWHFqxgM7N3WEzUDkaihSNBbHMloH3mDQHGyq5y7BJHBa9HUzwJgAbvrcPd53p22zPrFdTYn1YgQjFyc1mcf7Fv3I_cRptrG7JKHIxnvneF9-tkAXnAmvYiWd5tUJLN7ULre_GPj_G4kNh7qnk1hxocBXhao9p58bnJG7dPJdbyUZ98RXawaMoKZFDFlMxPu2r547fAgTUI8q1kV2JPw5dALyjU_HxE9auka0zvWebpQ3PCIEZJYLsVwVgPNW82-8t-LpIlIyuqv0xK7JfVoGanAc3T6ep3OuXg3P33S7U7MnOF9Qa9BF-ldGAhVNo9nxZBAfitFzTqwNcOJM7pgLbiOYhXDSkAEbPhwp3wrSk7FCpLnyjYjCXRjJS129YvZ4RcSaH75pE9wF-idPQ=w759-h351-no" alt="Inheritance in General"></p>
<h3 id="1-3-Inheritance-in-JavaScript-Prototypes-and-Prototype-Chains"><a href="#1-3-Inheritance-in-JavaScript-Prototypes-and-Prototype-Chains" class="headerlink" title="1.3. Inheritance in JavaScript: Prototypes and Prototype Chains"></a>1.3. Inheritance in JavaScript: Prototypes and Prototype Chains</h3><p>The inheritance in javaScript depends on “Prototype” property.<br><img src="https://lh3.googleusercontent.com/Ie7W5tqMOWICPnqSRIBksRmmfr8NGJbZ4r93oUGN_u-JxnJcFhQB60bDZDxV0gd9HdQpjSwq8XIcj8rXJrR6ivzc-Z1jsI-wljf873uGJONSe47-PkV1oB0C33ZF11yKkpIzyBhPFz4ZSWIED1w-VloXoafyxR5Xv0VL7TgmgRo9psFF1sI9oknV1qbPWNgrrvDjVJSholHkuCp5Cdnvj2t7xCLaChPFKe6wg7PsIJ58-RS_kHTBpR98XQvsPWhWTB7MVD9K8o5cw508Hcjvfgbl6RIpHCfYNOAz9DpWYyV0ekJX6oAt6hlL34OLoizipotSe2eWwz8B3EEd7YIYzmjEJW9ZfOMEkCPVTjYOnuF-RUvShhqwvV-yAcAwF2Y5LTyzoQnTt6VbxNT5lB5kH_gX3czTcxDa-BblwR_nL55_y8KiMU7SlV58VN3CFY4VC5oU9eeL9HlEmWDR7sZmPHEHxbEzTYiQqseE0_out0AbwO5KmfEN4X1Zw6NHvSoDyh1f3sa7mpyZBzBIxK5pvcQFQtvcRGySzrJYDZYmdGaIl53LfUhgpojZDLZNFFREJupIPtXVkqKkBI-LhlbmW6wW_xDlFcca9SNVWyrFSmd4Fw5qoQBFC-NuaF1HIeYZ8Sn0rYJ4n-16w-ShYkyPU3u59A7VmtTO_MevLdaZQQ=w759-h364-no" alt="Inheritance in JavaScript: Prototypes and Prototype Chains"></p>
<h3 id="1-4-Summary"><a href="#1-4-Summary" class="headerlink" title="1.4. Summary"></a>1.4. Summary</h3><ul>
<li>Every JavaScript object has a <strong>prototype property</strong>, which makes inheritance possible in JavaScript</li>
<li>The prototype property of an object is where we put methods and properties that we want <strong>other objects to inherit.</strong></li>
<li>The Constructor’s prototype property is <strong>NOT</strong> the prototype of the Constructor itself, it’s the prototype of <strong>ALL</strong> instances that are created through it.</li>
<li>When a certain method (or property) is called, the search starts in the object itself, and if it cannot be found, the search moves on to the object’s prototype. This continues until the method is found: <strong>prototype chain.</strong></li>
</ul>
<h2 id="2-Creating-Objects-Function-Constructors"><a href="#2-Creating-Objects-Function-Constructors" class="headerlink" title="2. Creating Objects: Function Constructors"></a>2. Creating Objects: Function Constructors</h2><p>The first way is to define all properties and functions in constructor:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Approach 1: only use constructor</span></span><br><span class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span>(<span class="params">name, yearOfBirth, job</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.yearOfBirth = yearOfBirth;</span><br><span class="line">	<span class="keyword">this</span>.job = job;</span><br><span class="line">	<span class="keyword">this</span>.calculateAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = <span class="keyword">new</span> Person(<span class="string">'John'</span>, <span class="number">1990</span>, <span class="string">'teacher'</span>);</span><br><span class="line">john.calculateAge();</span><br></pre></td></tr></table></figure>

<p>The alternative way is to use prototype property:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Approach 2: use prototype property</span></span><br><span class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span>(<span class="params">name, yearOfBirth, job</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.yearOfBirth = yearOfBirth;</span><br><span class="line">	<span class="keyword">this</span>.job = job;</span><br><span class="line">	<span class="keyword">this</span>.calculateAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.calculateAge =</span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Person.prototype.lastName = <span class="string">'Smith'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = <span class="keyword">new</span> Person(<span class="string">'John'</span>, <span class="number">1990</span>, <span class="string">'teacher'</span>);</span><br><span class="line"><span class="keyword">var</span> jane = <span class="keyword">new</span> Person(<span class="string">'Jane'</span>, <span class="number">1969</span>, <span class="string">'designer'</span>);</span><br><span class="line"><span class="keyword">var</span> mark = <span class="keyword">new</span> Person(<span class="string">'Mark'</span>, <span class="number">1948</span>, <span class="string">'retired'</span>);</span><br><span class="line"></span><br><span class="line">john.calculateAge();</span><br><span class="line">jane.calculateAge();</span><br><span class="line">mark.calculateAge();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(john.lastName);</span><br><span class="line"><span class="built_in">console</span>.log(jane.lastName);</span><br><span class="line"><span class="built_in">console</span>.log(mark.lastName);</span><br></pre></td></tr></table></figure>

<h2 id="3-The-Prototype-Chain-in-the-Console"><a href="#3-The-Prototype-Chain-in-the-Console" class="headerlink" title="3. The Prototype Chain in the Console"></a>3. The Prototype Chain in the Console</h2><p>In console, if we type in ‘john’, we can see the john object gets printed.</p>
<p><img src="https://lh3.googleusercontent.com/Q_0HsZL7t4aZMpmPfVEvvRWFZUqCQ8tZh7rAOLxM0oQ4Eg7urj4NxhKuwUq-b_8rwOVi21l__rgCx9pX8fW-YEkBFL1iT-sX_HMo_GQ6qibDHAwqF8tTl-FRz7pMtVllEzGN_-aKDGEYPVhzT7rrZhtzfV8biOAbiwIwP1AsPPCdTtxDxPsjqfj4lyb8_HW5vsAbOwJayWgSLYVkSAwi6PWoYQm3-OuLARqto7l4XHy6BqEFB4k8tgtXhtF4ldN1_YCYpuugETcSLh0cRoPDaAeFdgMw_GU-prQtU9k3g9BdHOmoG_Kvz9n_PcTu5B9YzKuut_B1Un0iCMGyqAQWRdLBsJaPJGPCsOmUAp5JUOCkmOpzS6IF4QxxPjZXAE4yA-bZMdw5-PQRALSiWJirQ5a1tZOgInWQCEgP6oO8mSpTss2V86-x315Aw4oT8LcVOxFTWp09bdHJi6REtWyOJUzanOBMbnhANlCRg0xRHkEuLhlNpFP3KdZ9wry9KcpoXQdgpU198CvQk3KyeFWC64t4ZtQZEFIracg310oNlL4swfmO7BtbF5JfIu9oVC401iCx9cO6YFAP2Ab0T9pdlLmsfwwjxB09PeiKaYNyYzrmqA2ghD1xPm3AQn2HJxQYS9fomjXondjoYWrXMXrpgKbyAUcl6US8UkpNEsmY7Q=w759-h415-no" alt="Person Object"></p>
<p>From the above screenshot, we can see Person’s prototype is an Object, and also</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john._proto_ &#x3D;&#x3D;&#x3D; Person.prototype &#x2F;&#x2F;Return true</span><br></pre></td></tr></table></figure>


<p><img src="https://lh3.googleusercontent.com/zVLqL7_JKgTh6VB-9-CrTa-dPWKk7RoI6ZX_k9FhwBpmF54dxI7TSXZ43k1veNWNkrcKjVfpcc1SV2UaQNYfQLQN1NxXM2Re41jBCbLvJsQ6v3QUtwJeEfUpydUzqle6Xr63zjuJtX7jgEXb4QwXviqB29y3eNbqmfGxpg-vwsvaKqADnYvlTATYoVv1XwB54dnyAFCsFTQyiEkMmaj1ejpu7raJbv-DMD4sfBKc2lY4562pU8EZo0J5u6XLNoYlVwvemDRQ2FmUl2ISeQeQaIE4QstfxuRaJdToX0KMvJ_Ce_2R6EC6p1FQJhVQ7KlD0s827XN2zE2SNwAlroYcriXYGiH63_JH2_rXSqgr8FTr55TzlwtYw-U2BT1jfP2pdfYqkJm_a0tRDsLniw12TEew0-eFm2LZc1jn92T11EvcEMafz0zXUn6b3rItk9lCHqMjGATr5FeYM8N6D9-US1sXgWV9Q9T0tzfe619JuvsLthVKX6Uva7CVzWc86aDX8RJFsdNBq6Jsy-26-mmf4VskLtFEh3DO7IqMx2m1r0dnBB7KvsSGPa7pF4XSu0zWsUHIWI1sVyL9FHVDeb71rZUG0oLwITS2jcRlHbAQweyAqRnLLZz1o69UaYvonxvAg8ISxWUpNe20WOtrY27KceFfi3Qn5ChCfEOesssHaA=w759-h588-no" alt="Screenshot 2"></p>
<p>From the second screenshot, we can see that because of the inheritance, the john object can call hasOwnProperty method. Obviously, <strong><em>job</em></strong> is john’s own property, but <strong><em>lastName</em></strong> is not.</p>
<p>Another method to know is <strong><em>instanceof</em></strong>, we can know john is an instance of Person object.</p>
<p>Here’s an additional example:</p>
<p><img src="https://lh3.googleusercontent.com/O0cEhZETj1K0l07nXPUJYM25MTcjuIqswjbxV52MPBNACSo8_Tbk92u6wz8Sdmcdf12rHeDOQ8VB3AWEtPEM2V_2nvRgaOkAU7Vnvtt2eCWCbZO9plRt8bRVI93L881u65p6Ua0DiADigwr1xvqnzOcE4xHsB34N23_AWYAwZ7GT4wkDWZL7USuBxYChE0B2bGbazuFMRuIvUQmEA0d1jD__xAiIrvcNiiP84YJ3l1Gny8WkffV3584AG5v0hria_7CwZrbdGCVqqPj0lcVEGxNOtF0A3eT37SRu6Z-nZ2yRRW7aJs564XgGjP0vm50w3htyytBo7KSAE2BNx97IIP0uJNxcZVZFsXWfqL7NS0W4EI_znZp7WRy2SWxs7CgF3om4orBxBzHEu4NZ9xXD8FGjXiPNYp-X4IbBaf1INIm3_54xyscIwnT4Abhun7jq3ad0mZ3adGorimhoLB2QOHzrSLCvDck0z6eMGW24mKOUomvoLkwK7VEsHXprNs1HiQ9n9ZZADk6ZEB3Rh_oMBuU6CAi-wagCA8ka9eo3Bf8t-w_aDP2tK2WCNgjHED4vsSMdnO50qU7BGzMjGjChwtyy4zKGI_Z8twLVttrsw15HvTYDDvnN-NseKKCig_wA9T9wRBOyDZ-AMTLaN6w37beltoHUEaMwfJPo9_2EaA=w759-h350-no" alt="Array Object"></p>
<p>By typing console.info(x), we can see this array object. If you click on the <strong><em><em>proto</em></em></strong>, you can see all methods available in array.</p>
<p><img src="https://lh3.googleusercontent.com/5NIUrcZs-QACaZ8ebMunMcCrWK_8HyObYoiXbUwt6T4S0PBdGgnQ6QhFDN9jcaOqvgzAsQcD9pCo-sFs5jqQBwciQkZN8eBCUqrD2Xu06UEbOAwRxQB-HYiKVWGdKwwLHtefUI0l58XXgh60lHN9DXd70q4agaXxHGdRN_usf27G3_c9_ein8ODosaQxa6lat5ZAEK3UVqJV_g1TIGTBqhATly0pHmlsI3qSxOKZTub8J0tpBWCf5AdQEIpWZDVmwlOrJlp4Af8GRkgx6pG7iRmDeY8AzSp2wbPsoIkpItZCY8wdRFDv3jvb_bIcuYPIph4bBd21RsBeMvCI6C8l8NJcTVicZnBnpsVzYkmb1lGprG_L5TIdgY2v_2hn8QBLgkatqnCY-nuEiE1fnPMUWFNjfFqgPsSnYJ9joQrGmVge1be9RiGoyuQ75wk0036gTS1E0Td5lP28NBYzHzYOMOvNwSLotM7SV4_4Xamx7I9z2dX7aoWpkNZ5S-NVJrS4rekeRU7KFErXtoAcXFuGnx3bpaPTdXtNCVDy9XCrKTblmwrQuGxCW3bk3iotfpJeQazYhS9MJxtxnkpHHL9Fcsy0JgnnsvA3Fu55wF4qRUfR09bK-EOdiq_oBPhnYCfw1MOCblNzQcrs6P5Jdbmo4587MydApziXt8zuFvJzXA=w759-h381-no" alt="Array Object 2"></p>
<h2 id="4-Creating-Objects-Object-create"><a href="#4-Creating-Objects-Object-create" class="headerlink" title="4. Creating Objects: Object.create"></a>4. Creating Objects: Object.create</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Alternative way to create object: Object.create</span></span><br><span class="line"><span class="keyword">var</span> personProto = &#123;</span><br><span class="line">	calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = <span class="built_in">Object</span>.create(personProto);</span><br><span class="line">john.name = <span class="string">'John'</span>;</span><br><span class="line">john.yearOfBirth = <span class="number">1990</span>;</span><br><span class="line">john.job = <span class="string">'teacher'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> jane = <span class="built_in">Object</span>.create(personProto,</span><br><span class="line">&#123;</span><br><span class="line">	name: &#123; <span class="attr">value</span>: <span class="string">'Jane'</span>&#125;,</span><br><span class="line">	yearOfBirth: &#123; <span class="attr">value</span>: <span class="number">1969</span> &#125;,</span><br><span class="line">	job: &#123; <span class="attr">value</span>: <span class="string">'designer'</span>&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<p>Object.create builds an object that inherits directly from the one that we passed into the firs argument.</p>
<p>While, on the other hand, the function constructor, the newly created object inherits from constructor’s prototype property.</p>
<p>Actually, one of the biggest benefits of object.create is that it allows us to implement a really complex inheritance structures in an easier way, because it allows us to directly specify which object should be a prototype.</p>
<p>Read more: <a href="http://stackoverflow.com/questions/4166616/understanding-the-difference-between-object-create-and-new-somefunction" target="_blank" rel="noopener">Understanding the difference between Object.create() and new SomeFunction()</a></p>
<h2 id="5-Primitives-vs-Objects"><a href="#5-Primitives-vs-Objects" class="headerlink" title="5. Primitives vs Objects"></a>5. Primitives vs Objects</h2><p>Variables containing primitives actually hold that data inside of the variable itself.</p>
<p>However, variables associated with objects do not actually contain the object, but instead, they contain a reference to the place in memory where the object is stored.</p>
<p>So again, a variable declared as an object does not have a real copy of the object, it just points to that object.</p>
<p>See the example</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">23</span>;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">a = <span class="number">46</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">	name: <span class="string">'John'</span>,</span><br><span class="line">	age: <span class="number">26</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = obj1;</span><br><span class="line">obj1.age = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj1.age);</span><br><span class="line"><span class="built_in">console</span>.log(obj2.age);</span><br></pre></td></tr></table></figure>

<p>In console, we can see the print out as follows</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">46</span><br><span class="line">23</span><br><span class="line">30</span><br><span class="line">30</span><br></pre></td></tr></table></figure>

<p>It shows that actually obj1 and obj2 are pointing to the same object, once obj1.age gets changed, it reflects to obj2.age as well.</p>
<p>Another example</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">27</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">	name: <span class="string">'Jonas'</span>,</span><br><span class="line">	city: <span class="string">'Lisbon'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">change</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	a = <span class="number">30</span>;</span><br><span class="line">	b.city = <span class="string">'San Francisco'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">change(age, obj);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"><span class="built_in">console</span>.log(obj.city);</span><br></pre></td></tr></table></figure>

<p>When we pass a primitive into a function, a simple copy is created. You can change a as much as you want, but it will never affect the variable on the outside.</p>
<p>For the object, instead of passing the object to the function, we just pass in a reference.</p>
<h2 id="6-First-Class-Functions-Passing-Functions-as-Arguments"><a href="#6-First-Class-Functions-Passing-Functions-as-Arguments" class="headerlink" title="6. First Class Functions: Passing Functions as Arguments"></a>6. First Class Functions: Passing Functions as Arguments</h2><h3 id="6-1-Functions-are-Also-Objects-in-JavaScript"><a href="#6-1-Functions-are-Also-Objects-in-JavaScript" class="headerlink" title="6.1. Functions are Also Objects in JavaScript"></a>6.1. Functions are Also Objects in JavaScript</h3><ul>
<li>A function is an instance of the Object type;</li>
<li>A function behaves like any other object;</li>
<li>We can store functions in a variable;</li>
<li>We can pass a function as an argument to another function;</li>
<li>We can return a function from a function</li>
</ul>
<p>Because of all above, we say that in JavaScript, we have <code>First-Class Functions</code>.</p>
<h3 id="6-2-Code-Example"><a href="#6-2-Code-Example" class="headerlink" title="6.2. Code Example"></a>6.2. Code Example</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> years = [<span class="number">1990</span>, <span class="number">1965</span>, <span class="number">1937</span>, <span class="number">2005</span>, <span class="number">1998</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">arrayCalc</span>(<span class="params">arr, fn</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> arrRes = [];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">		arrRes.push(fn(arr[i]));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> arrRes;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">caculateAge</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">2016</span> - el;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFullAge</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> el &gt;= <span class="number">18</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maxHeartRate</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (el &gt;= <span class="number">18</span> &amp;&amp; el &lt;= <span class="number">81</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">Math</span>.round(<span class="number">206.9</span> - (<span class="number">0.67</span> * el));</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ages = arrayCalc(years, calculateAge);</span><br><span class="line"><span class="keyword">var</span> fullAges = arrayCalc(years, isFullAge);</span><br><span class="line"><span class="keyword">var</span> rates = arrayCalc(ages, maxHeartRate);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ages);</span><br><span class="line"><span class="built_in">console</span>.log(fullAges);</span><br><span class="line"><span class="built_in">console</span>.log(rates);</span><br></pre></td></tr></table></figure>

<h2 id="7-First-Class-Functions-Functions-Returning-Functions"><a href="#7-First-Class-Functions-Functions-Returning-Functions" class="headerlink" title="7. First Class Functions: Functions Returning Functions"></a>7. First Class Functions: Functions Returning Functions</h2><p>Functions can also be returned from functions.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">interviewQuestion</span>(<span class="params">job</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (job ==== <span class="string">'designer'</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(name + <span class="string">', can you please explain what UX design is?'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (job === <span class="string">'teacher'</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'What subject do you teach, '</span> + name + <span class="string">'?'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Hello '</span> + name + <span class="string">', what do you do?'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> teacherQuestion = interviewQuestion(<span class="string">'teacher'</span>);</span><br><span class="line"><span class="keyword">var</span> designerQuestion = interviewQuestion(<span class="string">'designer'</span>);</span><br><span class="line"></span><br><span class="line">teacherQuestion(<span class="string">'John'</span>);</span><br><span class="line">designerQuestion(<span class="string">'John'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//An alternative way to call</span></span><br><span class="line">interviewQuestion(<span class="string">'teacher'</span>)(<span class="string">'Mark'</span>);</span><br></pre></td></tr></table></figure>

<h2 id="8-Immediately-Invoked-Function-Expressions-IIFE"><a href="#8-Immediately-Invoked-Function-Expressions-IIFE" class="headerlink" title="8. Immediately Invoked Function Expressions (IIFE)"></a>8. Immediately Invoked Function Expressions (IIFE)</h2><p>Here we use a silly game to demonstrate how IIFE works,</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> score = <span class="built_in">Math</span>.random() * <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(score &gt;= <span class="number">5</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">goodLuck</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> score = <span class="built_in">Math</span>.random() * <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(score &gt;= <span class="number">5</span> - goodLuck)</span><br><span class="line">&#125;)(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<p>IIFE can only be called once and has the advantage of data privacy, because unlike defining a function and assigning it to a variable, IIFE can not be reused elsewhere.</p>
<h2 id="9-Closures"><a href="#9-Closures" class="headerlink" title="9. Closures"></a>9. Closures</h2><h3 id="9-1-Code-Example"><a href="#9-1-Code-Example" class="headerlink" title="9.1. Code Example"></a>9.1. Code Example</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">retirement</span>(<span class="params">retirementAge</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> a = <span class="string">' years left until retirement.'</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">yearOfBirth</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> age = <span class="number">2016</span> - yearOfBirth;</span><br><span class="line">		<span class="built_in">console</span>.log((retirementAge - age) + a);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> retirementUS = retirement(<span class="number">66</span>);</span><br><span class="line"><span class="keyword">var</span> retirementGermany = retirement(<span class="number">65</span>);</span><br><span class="line"><span class="keyword">var</span> retirementIceland = retirement(<span class="number">67</span>);</span><br><span class="line"></span><br><span class="line">retirementUS(<span class="number">1990</span>);</span><br><span class="line">retirementGermany(<span class="number">1990</span>);</span><br><span class="line">retirementIceland(<span class="number">1990</span>);</span><br></pre></td></tr></table></figure>
<h3 id="9-2-Closures-Summary"><a href="#9-2-Closures-Summary" class="headerlink" title="9.2. Closures Summary"></a>9.2. Closures Summary</h3><p><code>An inner function has always access to the variables and parameters of its outer function, even after the outer function has returned.</code></p>
<h3 id="9-3-How-Closures-Work"><a href="#9-3-How-Closures-Work" class="headerlink" title="9.3. How Closures Work"></a>9.3. How Closures Work</h3><p><img src="https://lh3.googleusercontent.com/_lr3ZJ3wVRwrgDWcyInIPTNFGApLSYBWiSFcDPj73XFMmyr0RlEaSMUFr7INnkRwhVRHlX_VhiFci4DcUXRWWAiiLXh5zpBG93DxaXLmaCNGYorfBwqQ_nJYsuBPNzMmzMItQAeGWfQQp6GUbWiodzP8oYT7hHfC2NgqSFe7cioAEnh3WKBFIQ4ttY1B49-Dpj4TshizgMTMmabOmqi77ZDGVjDZyHkGD4_cc_6VFULKBPqOFjPGrwjlXPvK-MTrgsedUcgsB3CrW6L_6o7xdn9s9zcGtHu91cUl_QnTJ21gzau-qdKHN0-7nO18IAx-4nlNRAxuU9ehvXft4NrMLow7rOm5_VxUCpq8vPQ85MYO6QSoBygqgzptHYYF7YWRdCQGcWorpfQqroTqTq8Z3BPln354z260f0tko2N7ymdG_Oc0NUwrAMVKiymT6zoGoL-Fc05oABRAjSknQTBhSM_g9lIdgtIE2AAafIV_NFDx3LMTF_R4vMLrL23X3DxWpNGgW3cbHsYobXxOPVgon8TtbjNtQaAC2QxiNiHmksFk-Ce-JtzUV4coXHXZhve1__yJmCmu4Z5pWPjJXC1f2rUmPDWDwKNgPapP2JVjg3GHKnaiQJgNxnzg9-VzchSs9us1cuDg9WZMCH8A3_MXB9AZ4drDQaMUMlz3wcnlzg=w759-h334-no" alt="Closures Summary"></p>
<p>After the retirement function returns, the execution context of retirement function is gone from the Execution Stack. However, in the scope chain, the retirement function is still there and keeps working. Therefore, we can access the variables that we were created in the retirement function long after the function has completed execution, and after its execution context is gone.</p>
<h3 id="9-4-Rewrite-Interview-Question-Problem"><a href="#9-4-Rewrite-Interview-Question-Problem" class="headerlink" title="9.4. Rewrite Interview Question Problem"></a>9.4. Rewrite Interview Question Problem</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">interviewQuestion</span>(<span class="params">job</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (job ==== <span class="string">'designer'</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(name + <span class="string">', can you please explain what UX design is?'</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (job === <span class="string">'teacher'</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'What subject do you teach, '</span> + name + <span class="string">'?'</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Hello '</span> + name + <span class="string">', what do you do?'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interviewQuestion(<span class="string">'teacher'</span>)(<span class="string">'John'</span>);</span><br></pre></td></tr></table></figure>

<h2 id="10-Bind-Call-and-Apply"><a href="#10-Bind-Call-and-Apply" class="headerlink" title="10. Bind, Call and Apply"></a>10. Bind, Call and Apply</h2><h3 id="10-1-Examples-on-Bind-Call-and-Apply"><a href="#10-1-Examples-on-Bind-Call-and-Apply" class="headerlink" title="10.1. Examples on Bind, Call and Apply"></a>10.1. Examples on Bind, Call and Apply</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">	name: <span class="string">'John'</span>,</span><br><span class="line">	age: <span class="number">26</span>,</span><br><span class="line">	job: <span class="string">'teacher'</span>,</span><br><span class="line">	presentation: <span class="function"><span class="keyword">function</span>(<span class="params">style, timeOfDay</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (style === <span class="string">'formal'</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Good '</span> + timeOfDay + <span class="string">', Ladies and gentlemen! I\'m '</span> + <span class="keyword">this</span>.name + <span class="string">', I\'m a '</span> + <span class="keyword">this</span>.job + <span class="string">' and I\'m '</span> + <span class="keyword">this</span>.age + <span class="string">' years old.'</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (style === <span class="string">'friendly'</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Hey! What\'s up? I\'m '</span> + <span class="keyword">this</span>.name + <span class="string">', I\'m a '</span> + <span class="keyword">this</span>.job + <span class="string">' and I\'m '</span> + <span class="keyword">this</span>.age + <span class="string">' years old. Have a nice '</span> + timeOfDay + <span class="string">'.'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> emily = &#123;</span><br><span class="line">	name: <span class="string">'Emily'</span>,</span><br><span class="line">	age: <span class="number">35</span>,</span><br><span class="line">	job: <span class="string">'designer'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">john.presentation(<span class="string">'formal'</span>, <span class="string">'morning'</span>);</span><br><span class="line"></span><br><span class="line">john.presentation.call(emily, <span class="string">'friendly'</span>, <span class="string">'afternoon'</span>); <span class="comment">// Call</span></span><br><span class="line"></span><br><span class="line">john.presentation.apply(emily, [<span class="string">'friendly'</span>, <span class="string">'afternoon'</span>]); <span class="comment">//Apply</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> johnFriendly = john.presentation.bind(john, <span class="string">'friendly'</span>); <span class="comment">//Bind</span></span><br><span class="line"></span><br><span class="line">johnFriendly(<span class="string">'morning'</span>);</span><br><span class="line">johnFriendly(<span class="string">'night'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> emilyFormal = john.presentation.bind(emily, <span class="string">'formal'</span>); <span class="comment">//Bind</span></span><br><span class="line">emilyFormal(<span class="string">'afternoon'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="10-2-Rewrite-the-Age-Calculation-Problem"><a href="#10-2-Rewrite-the-Age-Calculation-Problem" class="headerlink" title="10.2. Rewrite the Age Calculation Problem"></a>10.2. Rewrite the Age Calculation Problem</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> years = [<span class="number">1990</span>, <span class="number">1965</span>, <span class="number">1937</span>, <span class="number">2005</span>, <span class="number">1998</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">arrayCalc</span>(<span class="params">arr, fn</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> arrRes = [];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">		arrRes.push(fn(arr[i]));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> arrRes;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">caculateAge</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">2016</span> - el;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFullAge</span>(<span class="params">limit, el</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> el &gt;= limit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ages = arrayCalc(years, calculateAge);</span><br><span class="line"><span class="keyword">var</span> fullJapan = arrayCalc(ages, isFullAge.bind(<span class="keyword">this</span>, <span class="number">20</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ages);</span><br><span class="line"><span class="built_in">console</span>.log(fullJapan);</span><br></pre></td></tr></table></figure>


<h2 id="11-Code-Challenge：-Build-a-Fun-Quiz-Game-in-the-Console"><a href="#11-Code-Challenge：-Build-a-Fun-Quiz-Game-in-the-Console" class="headerlink" title="11. Code Challenge： Build a Fun Quiz Game in the Console"></a>11. Code Challenge： Build a Fun Quiz Game in the Console</h2><h3 id="11-1-Basic-Level"><a href="#11-1-Basic-Level" class="headerlink" title="11.1. Basic Level"></a>11.1. Basic Level</h3><ol>
<li><p>Build a function constructor called Question to describe a question. A question should include:<br>a) question itself<br>b) the answers from which the player can choose the correct one (choose an adequate data structure here, array, object, etc.)<br>c) correct answer (I would use a number for this)</p>
</li>
<li><p>Create a couple of questions using the constructor</p>
</li>
<li><p>Store them all inside an array</p>
</li>
<li><p>Select one random question and log it on the console, together with the possible answers (each question should have a number) (Hint: write a method for the Question objects for this task).</p>
</li>
<li><p>Use the ‘prompt’ function to ask the user for the correct answer. The user should input the number of the correct answer such as you displayed it on Task 4.</p>
</li>
<li><p>Check if the answer is correct and print to the console whether the answer is correct ot nor (Hint: write another method for this).</p>
</li>
<li><p>Suppose this code would be a plugin for other programmers to use in their code. So make sure that all your code is private and doesn’t interfere with the other programmers code (Hint: we learned a special technique to do exactly that).</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Question</span>(<span class="params">question, answers, correct</span>) </span>&#123;</span><br><span class="line">		    <span class="keyword">this</span>.question = question;</span><br><span class="line">        <span class="keyword">this</span>.answers = answers;</span><br><span class="line">        <span class="keyword">this</span>.correct = correct;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Question.prototype.displayQuestion = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.question);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.answers.length; i++) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(i + <span class="string">': '</span> + <span class="keyword">this</span>.answers[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Question.prototype.checkAnswer = <span class="function"><span class="keyword">function</span>(<span class="params">ans</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ans === <span class="keyword">this</span>.correct) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Correct answer!'</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Wrong answer. Try again :)'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q1 = <span class="keyword">new</span> Question(<span class="string">'Is JavaScript the coolest programming language in the world?'</span>,</span><br><span class="line">                          [<span class="string">'Yes'</span>, <span class="string">'No'</span>],</span><br><span class="line">                          <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q2 = <span class="keyword">new</span> Question(<span class="string">'What is the name of this course\'s teacher?'</span>,</span><br><span class="line">                          [<span class="string">'John'</span>, <span class="string">'Micheal'</span>, <span class="string">'Jonas'</span>],</span><br><span class="line">                          <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q3 = <span class="keyword">new</span> Question(<span class="string">'What does best describe coding?'</span>,</span><br><span class="line">                          [<span class="string">'Boring'</span>, <span class="string">'Hard'</span>, <span class="string">'Fun'</span>, <span class="string">'Tediuos'</span>],</span><br><span class="line">                          <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> questions = [q1, q2, q3];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> n = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * questions.length);</span><br><span class="line"></span><br><span class="line">    questions[n].displayQuestion();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> answer = <span class="built_in">parseInt</span>(prompt(<span class="string">'Please select the correct answer.'</span>));</span><br><span class="line"></span><br><span class="line">    questions[n].checkAnswer(answer);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h3 id="11-2-Expert-Level"><a href="#11-2-Expert-Level" class="headerlink" title="11.2. Expert Level"></a>11.2. Expert Level</h3><ol start="8">
<li><p>After you display the result, display the next random question, so that the game never ends (Hint: write a function for this and call it right after displaying the result)</p>
</li>
<li><p>Be careful: after Task 8, the game literally never ends. So include the option to quit the game if the user writes ‘exit’ instead of the answer. In this case, DON’T call the function from task 8.</p>
</li>
<li><p>Track the user’s score to make the game more fun! So each time an answer is correct, add 1 point to the score (Hint: I’m going to use the power of closures for this, but you don’t have to, just do this with the tools you feel more comfortable at this point).</p>
</li>
<li><p>Display the score in the console. Use yet another method for this.</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Question</span>(<span class="params">question, answers, correct</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.question = question;</span><br><span class="line">        <span class="keyword">this</span>.answers = answers;</span><br><span class="line">        <span class="keyword">this</span>.correct = correct;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Question.prototype.displayQuestion = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.question);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.answers.length; i++) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(i + <span class="string">': '</span> + <span class="keyword">this</span>.answers[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Question.prototype.checkAnswer = <span class="function"><span class="keyword">function</span>(<span class="params">ans, callback</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> sc;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ans === <span class="keyword">this</span>.correct) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Correct answer!'</span>);</span><br><span class="line">            sc = callback(<span class="literal">true</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Wrong answer. Try again :)'</span>);</span><br><span class="line">            sc = callback(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.displayScore(sc);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Question.prototype.displayScore = <span class="function"><span class="keyword">function</span>(<span class="params">score</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Your current score is: '</span> + score);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'------------------------------'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q1 = <span class="keyword">new</span> Question(<span class="string">'Is JavaScript the coolest programming language in the world?'</span>,</span><br><span class="line">                          [<span class="string">'Yes'</span>, <span class="string">'No'</span>],</span><br><span class="line">                          <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q2 = <span class="keyword">new</span> Question(<span class="string">'What is the name of this course\'s teacher?'</span>,</span><br><span class="line">                          [<span class="string">'John'</span>, <span class="string">'Micheal'</span>, <span class="string">'Jonas'</span>],</span><br><span class="line">                          <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q3 = <span class="keyword">new</span> Question(<span class="string">'What does best describe coding?'</span>,</span><br><span class="line">                          [<span class="string">'Boring'</span>, <span class="string">'Hard'</span>, <span class="string">'Fun'</span>, <span class="string">'Tediuos'</span>],</span><br><span class="line">                          <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> questions = [q1, q2, q3];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">score</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> sc = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">correct</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (correct) &#123;</span><br><span class="line">                sc++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sc;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> keepScore = score();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">nextQuestion</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> n = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * questions.length);</span><br><span class="line">        questions[n].displayQuestion();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> answer = prompt(<span class="string">'Please select the correct answer.'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(answer !== <span class="string">'exit'</span>) &#123;</span><br><span class="line">            questions[n].checkAnswer(<span class="built_in">parseInt</span>(answer), keepScore);</span><br><span class="line"></span><br><span class="line">            nextQuestion();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    nextQuestion();</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Danny Zhang</p>
  <div class="site-description" itemprop="description">Blogger/Software Engineer/Fitness Enthusiast</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">47</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags">
          
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Danny Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
