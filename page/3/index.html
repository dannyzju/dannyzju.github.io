<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"dannyzhang.run","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Blogger&#x2F;Software Engineer&#x2F;Fitness Enthusiast">
<meta property="og:type" content="website">
<meta property="og:title" content="D.Z. Notes (Beta)">
<meta property="og:url" content="http://dannyzhang.run/page/3/index.html">
<meta property="og:site_name" content="D.Z. Notes (Beta)">
<meta property="og:description" content="Blogger&#x2F;Software Engineer&#x2F;Fitness Enthusiast">
<meta property="article:author" content="Danny Zhang">
<meta property="article:tag" content="Danny Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://dannyzhang.run/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>D.Z. Notes (Beta)</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">D.Z. Notes (Beta)</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Be insensitive, and keep a lifelong growth mindset.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section">Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section">Archives</a>

  </li>
        <li class="menu-item menu-item-technical">

    <a href="/technical" rel="section">technical</a>

  </li>
        <li class="menu-item menu-item-essays">

    <a href="/essays" rel="section">essays</a>

  </li>
        <li class="menu-item menu-item-readings">

    <a href="/readings" rel="section">readings</a>

  </li>
        <li class="menu-item menu-item-workout">

    <a href="/workout" rel="section">workout</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags" rel="section">Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about" rel="section">About</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/05/JavaScript-in-the-Browser-DOM-Manipulation-and-Events/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/05/JavaScript-in-the-Browser-DOM-Manipulation-and-Events/" class="post-title-link" itemprop="url">JavaScript in the Browser: DOM Manipulation and Events</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-05 06:44:25" itemprop="dateCreated datePublished" datetime="2017-04-05T06:44:25-07:00">2017-04-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-07-22 08:51:40" itemprop="dateModified" datetime="2017-07-22T08:51:40-07:00">2017-07-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-The-DOM-and-DOM-Manipulation"><a href="#1-The-DOM-and-DOM-Manipulation" class="headerlink" title="1. The DOM and DOM Manipulation"></a>1. The DOM and DOM Manipulation</h2><ul>
<li>DOM: Document Object Model;</li>
<li>Structured representation of an HTML document;</li>
<li>The DOM is used to connect webpages to scripts like JavaScript;</li>
<li>For each HTML box, there is an object in the DOM that we can access and interact with.</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/opF1GsIL8wI2VAPukMjRs_qVBbUa2SFB7IcszMYq4Y4Rhm31n4gtbs1dJZAwrziMJS4-wQn4OxbYBzN3_jLw8J7Fi4XG43rFJSnO6s1ODZG9r1vRMGqLybAWUzggx4lbGhzPJy_NZ6iwhv29W8Ko0mk-im0KsEg0ChQOH9Haxup8w-jkv2mRGqUQy01uUcWsEWU1SjMge3SqI3giiUh-0j9l2OVf8BDW6rKY6yvWyqeTdOYHnVma0D9MCuFcmJCInlpOAtaTXiiRkRJNuZAoVeOvSN0GsblKPvxS_lsoiJiA4WEnq-Y73Ud2OtGlC-_m0iE67Atr1i5Skm1x0kIVy-jpGxPFj0RKiVGlha2saK9izFfFK5-a0KSg_W0DxfjESVcSboe4xZO5JMeHdb6RnZIugIFRi2Q_UHxQtuqw5s3R7LXXRdQktEidCrIz3QnFGMm4D07Lx6fO6jKflunl30_do5_0aaOaitVKy_AV5EEc-luK8X5EAPyB8PzuWQaT_6rfdK7TbuRuob3JmrFzvBmxglZjxb6tY-LACSogxScpISC5MoYyUEP9HIzOkt-LprxJ0R19VN01FEyTrkpEU7TbX0D0qQwEDDGxb8tSnTBpdzUwzDfHUNMJijQjxlnfQ1HL8knMIyhz0ZPQoAmcrpARr1W9N9N5UkVMpv_kMQ=w1192-h1019-no" alt="DOM"></p>
<h2 id="2-DOM-Access-and-Manipulation"><a href="#2-DOM-Access-and-Manipulation" class="headerlink" title="2. DOM Access and Manipulation"></a>2. DOM Access and Manipulation</h2><p>To get a random number from 1 to 6:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dice = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">6</span>) + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>Select an element using query selector:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'#current-'</span> + activePlayer).textContent;</span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'#current-'</span> + activePlayer).innerHTML;</span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.dice'</span>).style.display;</span><br></pre></td></tr></table></figure>

<p>Select an element using getElementById: (faster!)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'score-0'</span>).textContent = <span class="string">'0'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="3-Events-and-Event-Handling"><a href="#3-Events-and-Event-Handling" class="headerlink" title="3. Events and Event Handling"></a>3. Events and Event Handling</h2><ul>
<li><strong>Events</strong>: Notifications that are sent to notify the code that something happened on the webpage;</li>
<li>Examples: clicking a button, resizing a window, scrolling down or pressing a key;</li>
<li><strong>Event listener</strong>: A function that performs an action based on a certain event. It waits for a specific event to happen.</li>
</ul>
<p>Add an event listener for an element:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.btn-roll'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//An anonymous function, which does not have a name, and can not be used elsewhere.</span></span><br><span class="line">	<span class="comment">//Do something.</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="4-DRY-Don’t-Repeat-Yourself-Principle"><a href="#4-DRY-Don’t-Repeat-Yourself-Principle" class="headerlink" title="4. DRY(Don’t Repeat Yourself) Principle"></a>4. DRY(Don’t Repeat Yourself) Principle</h2><p>For the same code used in different places, wrap it up with a function, like the init() and nextPlayer() in the project.</p>
<h2 id="5-State-Variables"><a href="#5-State-Variables" class="headerlink" title="5. State Variables"></a>5. State Variables</h2><p>In this example, use <code>gamePlaying</code> as a state variable to stop the game after a win.</p>
<h2 id="6-Complete-JavaScript-Code"><a href="#6-Complete-JavaScript-Code" class="headerlink" title="6. Complete JavaScript Code"></a>6. Complete JavaScript Code</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">GAME RULES:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">- The game has 2 players, playing in rounds</span></span><br><span class="line"><span class="comment">- In each turn, a player rolls a dice as many times as he whishes. Each result get added to his ROUND score</span></span><br><span class="line"><span class="comment">- BUT, if the player rolls a 1, all his ROUND score gets lost. After that, it's the next player's turn</span></span><br><span class="line"><span class="comment">- The player can choose to 'Hold', which means that his ROUND score gets added to his GLBAL score. After that, it's the next player's turn</span></span><br><span class="line"><span class="comment">- The first player to reach 100 points on GLOBAL score wins the game</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> scores, roundScore, activePlayer, gamePlaying;</span><br><span class="line"></span><br><span class="line">init();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.btn-roll'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(gamePlaying) &#123;</span><br><span class="line">        <span class="comment">// 1. Random number</span></span><br><span class="line">        <span class="keyword">var</span> dice = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">6</span>) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. Display the result</span></span><br><span class="line">        <span class="keyword">var</span> diceDOM = <span class="built_in">document</span>.querySelector(<span class="string">'.dice'</span>);</span><br><span class="line">        diceDOM.style.display = <span class="string">'block'</span>;</span><br><span class="line">        diceDOM.src = <span class="string">'dice-'</span> + dice + <span class="string">'.png'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. Update the round score IF the rolled number was NOT a 1</span></span><br><span class="line">        <span class="keyword">if</span> (dice !== <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//Add score</span></span><br><span class="line">            roundScore += dice;</span><br><span class="line">            <span class="built_in">document</span>.querySelector(<span class="string">'#current-'</span> + activePlayer).textContent = roundScore;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//Next player</span></span><br><span class="line">            nextPlayer();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.btn-hold'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (gamePlaying) &#123;</span><br><span class="line">        <span class="comment">// Add CURRENT score to GLOBAL score</span></span><br><span class="line">        scores[activePlayer] += roundScore;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Update the UI</span></span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">'#score-'</span> + activePlayer).textContent = scores[activePlayer];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Check if player won the game</span></span><br><span class="line">        <span class="keyword">if</span> (scores[activePlayer] &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">            <span class="built_in">document</span>.querySelector(<span class="string">'#name-'</span> + activePlayer).textContent = <span class="string">'Winner!'</span>;</span><br><span class="line">            <span class="built_in">document</span>.querySelector(<span class="string">'.dice'</span>).style.display = <span class="string">'none'</span>;</span><br><span class="line">            <span class="built_in">document</span>.querySelector(<span class="string">'.player-'</span> + activePlayer + <span class="string">'-panel'</span>).classList.add(<span class="string">'winner'</span>);</span><br><span class="line">            <span class="built_in">document</span>.querySelector(<span class="string">'.player-'</span> + activePlayer + <span class="string">'-panel'</span>).classList.remove(<span class="string">'active'</span>);</span><br><span class="line">            gamePlaying = <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//Next player</span></span><br><span class="line">            nextPlayer();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nextPlayer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//Next player</span></span><br><span class="line">    activePlayer === <span class="number">0</span> ? activePlayer = <span class="number">1</span> : activePlayer = <span class="number">0</span>;</span><br><span class="line">    roundScore = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'current-0'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'current-1'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-0-panel'</span>).classList.toggle(<span class="string">'active'</span>);</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-1-panel'</span>).classList.toggle(<span class="string">'active'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//document.querySelector('.player-0-panel').classList.remove('active');</span></span><br><span class="line">    <span class="comment">//document.querySelector('.player-1-panel').classList.add('active');</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.dice'</span>).style.display = <span class="string">'none'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.btn-new'</span>).addEventListener(<span class="string">'click'</span>, init);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    scores = [<span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line">    activePlayer = <span class="number">0</span>;</span><br><span class="line">    roundScore = <span class="number">0</span>;</span><br><span class="line">    gamePlaying = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.dice'</span>).style.display = <span class="string">'none'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'score-0'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'score-1'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'current-0'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'current-1'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'name-0'</span>).textContent = <span class="string">'Player 1'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'name-1'</span>).textContent = <span class="string">'Player 2'</span>;</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-0-panel'</span>).classList.remove(<span class="string">'winner'</span>);</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-1-panel'</span>).classList.remove(<span class="string">'winner'</span>);</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-0-panel'</span>).classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-1-panel'</span>).classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-0-panel'</span>).classList.add(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//document.querySelector('#current-' + activePlayer).textContent = dice;</span></span><br><span class="line"><span class="comment">//document.querySelector('#current-' + activePlayer).innerHTML = '&lt;em&gt;' + dice + '&lt;/em&gt;';</span></span><br><span class="line"><span class="comment">//var x = document.querySelector('#score-0').textContent;</span></span><br></pre></td></tr></table></figure>

<h2 id="7-Project-Demo"><a href="#7-Project-Demo" class="headerlink" title="7. Project Demo"></a>7. Project Demo</h2><p><a href="http://dannyzhang.run/projects/pigGame">Demo</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/03/How-JavaScript-works-Behind-the-Scenes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/03/How-JavaScript-works-Behind-the-Scenes/" class="post-title-link" itemprop="url">How JavaScript Works Behind the Scenes?</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-03 08:11:19" itemprop="dateCreated datePublished" datetime="2017-04-03T08:11:19-07:00">2017-04-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-07-22 08:51:01" itemprop="dateModified" datetime="2017-07-22T08:51:01-07:00">2017-07-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-What-Happens-to-Our-Code"><a href="#1-What-Happens-to-Our-Code" class="headerlink" title="1. What Happens to Our Code?"></a>1. What Happens to Our Code?</h2><p><img src="https://lh3.googleusercontent.com/O55ygo71OcIq1ZWkeq5MmJgJvngfikY68Y2u-P3HGg4JhMIQ_Nl4WA1LwQnpnartTQjnIrbanKGdCkUy8AUdY3nzu0qhpi_P7wZ0LOn_B8GF5Ot5PvxlP6IfR-OO4eCQhUHC6-MwQH1HL7gzV2JpmNSjT-D_8yrts5VVjXuuLItm5Rfm0bslWS2jZqIGJeuXg1Nd-eojrgVbMS3nL9P0R6uEbwpKXPrGu77WoTalhjbgKM-QLzdpsB0c7y9JqLHHobxqjrHI9Wogz0Szkcu0RfnB-1HryWlzsrollu8ncuzm8t730UV8GVNnviVSjWwlgEkeGPIDF1bonP1iFNLTVK7FdWtW11xxM2cuhjhdMp-jQnZjNpHoisOxEX0Kv7v81TOPQFukptupXiC42FuklYnqrUc1wLLhekUXwJSyKAxS93lvxSvxIWSuKJR9JjbgY3ZXwnst7K6A4YXwvqXoO2U71R6btXJK0YFiNN4coUO_VdDRqqq-EddpJrOzgUpf46BUlRhZ4S0HUbgfzFUbdhpllQrFC0kWQOwuYhVRHp7MASml8l6QsQsbPE1IFJ4u20yDwmuvA9g75i339JNGPKtmpo40tTA_Way8X434_oCKlUwx2JuAeBMLIF-2RIsOA-DPPniHT2HBp6uYQr9CvfsX1xVHQwOSqQKEP9cRFQ=w1440-h558-no" alt="What Happens to Our Code"></p>
<h2 id="2-Execution-Contexts-and-the-Execution-Stack"><a href="#2-Execution-Contexts-and-the-Execution-Stack" class="headerlink" title="2. Execution Contexts and the Execution Stack"></a>2. Execution Contexts and the Execution Stack</h2><h3 id="2-1-Execution-Context"><a href="#2-1-Execution-Context" class="headerlink" title="2.1. Execution Context"></a>2.1. Execution Context</h3><p><img src="https://lh3.googleusercontent.com/i7-xaGbNE0MKmlhdicghBytDi0k7AkekQBcPbc9HcXf2Lwn8cEx0Nr2UBQGlUVW1MUgzLsRt9o5KVeD7MIXPSIfEy33wWJSesaRJsJsgH6QBBKBNcl39YM75gMaT9XrQYbBDmyb4snP0d4Loz0Tpngo-BMLZ9jsVfzMTbXFww5f8PYHwFTJ7O5nB00sss588aILyLHQyps7mGpl_ZMSHL6Xkw3sWC-4Q1efkT-BGoSfkS8-swaE-Pm1AiH_5_OFThjcpobfh2pyOvDbs7Xb9sYmURhNuBBVsFSz5YUQtrb4jcL5tO6aUtQu6OYAhHVpk7Vf89JN2Iqxp7dGPIP9QPD-DOM-_mLAhvmUDWDeTMFyCQbTRweycYC-9EFlpaOcKLCuuTWQnqgynyaOFT59rO040W_-OvqnH1rIQli4TZxRGxJmTeU6EsTzUVq0t3p67AFMpEGJu-LHRB3_f7KcU-aqZOenwdIgj-6eNvWtTZzaDVOBD2O8MG8mB_Jdfh5cpruhWKDPdgYChfPyvba2PtVhgj4KRk8K-lWttQLrZexVC0OJR-sxtfZ8bCDNp4Z7TQbHI0zmKBS02sEa91ecrRr_2PnXLF3RgxR8AmxMNs-_cs2ZhFcM_tWqwkJlSdrIVLm7f1_2ZuKKnGhaCtgSOHDB1_7Sqa0SuD6n2Y_yiOw=w698-h838-no" alt="Execution Context"></p>
<ul>
<li>Code that is not inside any function</li>
<li>Associated with the global object</li>
<li>In the browser, that’s the window object</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lastName === <span class="built_in">window</span>.lastName</span><br></pre></td></tr></table></figure>

<h3 id="2-2-Execution-Stack"><a href="#2-2-Execution-Stack" class="headerlink" title="2.2. Execution Stack"></a>2.2. Execution Stack</h3><p>When executing the code inside a function, a new Execution Context will be created on top of the existing one.</p>
<p><img src="https://lh3.googleusercontent.com/Kslrk3U4J-QrkOX7zp3hUC2UIBxorVssUHX_ybRAUKELW8686sptO1exa9rM-87sI5A30N74aIQZh8NyCeqVQO1D469aNIbH8TwFFs1ybPcx1a0Xpg9_m84GrM3S6lkSgr3zWsN5KZrG3P34mWa_Zz_fWzz_7MFmjqsChDcrNLqazE8wkwGlbLt_bb_aaleUh26GEwCD_Wvgv5ijvPK2QwJnU6I2Wm-JMXZENdSxhPuijJD-6ve7T8MqlJ5H6Ufi1WuzXKSs-llulsMfBPkAz2LitwjGhKoPibij8ObYlgILT90EK6ZlR8qKbnCG193CJfG0EaO98UQaZ6ZHJBSDRW1C5gQEcAtYCSi5bM2RCcVFZAZV8zBEVwec4yfd0iQHlNGklpphLzwv7zPG3yhtwav9VWq-ORP0brJ2i7o3ISIKFT5IY8sO8NWNkzx9EN7jg2TEU58SSKNXatjG52l0bC-_rWuK4bXpennNZl142UzBkFGsRn6Rw89ePPQcyhlSA98gw3veq4DLjIufio3Oo6_jxdxP-MHP62W0_B5L81e8EqoNrbt_MO9XwZLJtKaamt_56_L3qe3L71mCmYVqAk0CoFLrn8qXF-_LQmRjWGNwGfOtgMlLeEKweqov4KTou7oPyZmIQ0WDyTDmK3O4rTLy3uAJXjhNMRBNqXAg0g=w1440-h805-no" alt="Execution Stack"></p>
<h2 id="3-The-Execution-Context-in-Detail-Creation-and-Execution-Phase-and-Hoisting"><a href="#3-The-Execution-Context-in-Detail-Creation-and-Execution-Phase-and-Hoisting" class="headerlink" title="3. The Execution Context in Detail: Creation and Execution Phase and Hoisting"></a>3. The Execution Context in Detail: Creation and Execution Phase and Hoisting</h2><h3 id="3-1-The-Execution-Context-in-Detail"><a href="#3-1-The-Execution-Context-in-Detail" class="headerlink" title="3.1. The Execution Context in Detail"></a>3.1. The Execution Context in Detail</h3><p><img src="https://lh3.googleusercontent.com/pf0WfjuVDh6ufRtT5lKLPEF0G5yAbSS_toYzm_HZh-dNcvEz8dadve0vF2j8P8ZUa7k0SIEjGHc4_qZXLPg8Yvs5Gb8QTKtKZRXgBmSdXNwASi4XUm4UmiDg4E6pVE0o2W_WoXhjeXp9tZByuTkGpTXV0Io_zR9f1gXkaszM2sAzjRkxOXN5AwoDR9NmUhkIaYa6_BF0_H7dpBlqOJO7GErgmE0-71a-mctQBR2dnRyO4nMcCB5KkYp-rNyZd-NESd8I_XMPWA1CtRpuJ9z0MNq4iXrlXt7FgmPD-iJ32Mx9xaLiwC778u_C1Os-sdVy_F65iUrtEqNXTekoQh16aVDcRF2bdPUX7Ph7WV3Bvl4M6TYg17PokRxg-YvVdT3SR4s0IcfjKCMwb49OIS3iHPFRv78qS_E8X1yv8XwXazEnqRSRSmCBk3Z_iFqPtEV5OOYo7wlMNnVBemhsZ7dMqPrpnMbJhRE5YvVp3k32gCEA5GTVtVoYXAUxcerwVQZRlonhnT6OXeDVrPXTRtqVS0nh84hx0TeLTsBzXdjkAKG0f4mBMC2_AWX0e9NeLWtTFLAIsXJl15xYGK9aiVm1d_VA2Z6D1mSB-BhPj5qpYS6zFQwWhhCD-JqbjJZG6ETL8_bpdmebNCFVNzcxk7WsR5LK8ySID_IecQJPn19TfQ=w453-h544-no" alt="The Execution Context in Detail"></p>
<ol>
<li>Creation phase<ul>
<li>Creation of the Variable Object(VO)</li>
<li>Creation of the scope chain</li>
<li>Determine value of the ‘this’ variable</li>
</ul>
</li>
<li>Execution phase<ul>
<li>The code of the function that generated the current execution context is ran line by line</li>
</ul>
</li>
</ol>
<h3 id="3-2-The-Variable-Object"><a href="#3-2-The-Variable-Object" class="headerlink" title="3.2. The Variable Object"></a>3.2. The Variable Object</h3><ul>
<li>The argument object is created, containing all the arguments that were passed into the function.</li>
<li>Code is scanned for <strong>function declarations</strong>: for each function, a property is created in the Variable Object, <code>pointing to the function</code>. [Hoisting]</li>
<li>Code is scanned for <strong>variable declarations</strong>: for each variable, a property is created in the Variable Object, and set to <code>undefined</code>. [Hoisting]</li>
</ul>
<h2 id="4-Hoisting-in-Practice"><a href="#4-Hoisting-in-Practice" class="headerlink" title="4. Hoisting in Practice"></a>4. Hoisting in Practice</h2><h3 id="4-1-Function-Hoisting"><a href="#4-1-Function-Hoisting" class="headerlink" title="4.1. Function Hoisting"></a>4.1. Function Hoisting</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">caculatedAge(<span class="number">1990</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculatedAge</span>(<span class="params">year</span>) </span>&#123; <span class="comment">//Function has already been available before executing</span></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">2016</span> - year);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The above code works because the function has already been available before executing.</p>
<p>However, for the following code, it’s not working, since retirement has been created, but just set to <code>undefined</code> before execution.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">retirement(<span class="number">1990</span>);</span><br><span class="line"><span class="keyword">var</span> retirement = <span class="function"><span class="keyword">function</span>(<span class="params">year</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">65</span> - (<span class="number">2016</span> - year));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-Variable-Hoisting"><a href="#4-2-Variable-Hoisting" class="headerlink" title="4.2. Variable Hoisting"></a>4.2. Variable Hoisting</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">23</span>;</span><br></pre></td></tr></table></figure>

<p>The above code only prints undefined, which is as expected.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">23</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> age = <span class="number">65</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(age);</span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br></pre></td></tr></table></figure>

<p>The results are:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">65</span><br><span class="line">23</span><br></pre></td></tr></table></figure>

<p>Because the first age is a local variable, but the second is a global one.</p>
<h2 id="5-Scoping-and-the-Scope-Chain"><a href="#5-Scoping-and-the-Scope-Chain" class="headerlink" title="5. Scoping and the Scope Chain"></a>5. Scoping and the Scope Chain</h2><h3 id="5-1-Scoping-in-JavaScript"><a href="#5-1-Scoping-in-JavaScript" class="headerlink" title="5.1. Scoping in JavaScript"></a>5.1. Scoping in JavaScript</h3><ul>
<li>Scoping answers the question “where can we access a certain variable?”</li>
<li><strong>Each new function creates a scope</strong>: the space/environment, in which the variables it defines are accessible.</li>
<li><strong>Lexical scoping</strong>: a function that is lexically within another function gets access to the scope of the outer function.</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/F4IJgAKT-DtOdIqxYEgCzS_im4MhDRX2VjF87eQkppiqA0jH2B-_ILhjtd5GmkmvOofxfcFvLvCIKOqyPJ9lkgHmYdPQvuCVHDxzUgQJKe5v81RMU_Gzbqe018Erp2Q6z9dDNwICMctzdJsYnv9YM3nLgg255Qr-6Ml9zoR1moGZjQEDTAlPFIUxioSS_GNm41KYGaBp7A03Hp745fKCPJJ6vtZ2ko0PbFfs_Imxgo8bvxwtC6wuw9IwfynWhwJHnPhyVYFL4KpmHbzWnlBVQU9du6gCElBNNQnUUOnSyYAyVNfiRPYd7ifb2Oj8KUwFl73bJqVQ1JQNhipx0qFwbDfUqSo7Z8aF9CxWLBFyPvd6lKaZyBTVcUvMAHd5J4Fp9W3mZWOopCKzrBQIrN6O4vW7peoZEgEc-027t1wpln7pQZ-4EUOTb7tRxF0qnLwcTPxzFNFjne2gLiL9oQeOG9Uta12St74BqUM9eDKFv7fvzfERLjmvVE6j4WD0LwXaWt2e_12qjU3A4l-9z4FfsGUbUlbY5M-xcPIkXSJJSEaG3s_H9TG4LB1FPrbJIvrWzB9dR0LUKMYt4W2lNRtbFQwdLjc7CNBF4Z1nv1s5m9xEOWNX5be7ZXEKgh10WMSaHF2sNOPnxuiE7y9eRjXFhMtQtNQUIxRydVum7N4dKg=w1440-h560-no" alt="Scoping in JavaScript"></p>
<h3 id="5-2-Execution-Stack-vs-Scope-Chain"><a href="#5-2-Execution-Stack-vs-Scope-Chain" class="headerlink" title="5.2. Execution Stack vs Scope Chain"></a>5.2. Execution Stack vs Scope Chain</h3><p>Though the stack and scope chain look similar, they are still different.<br><img src="https://lh3.googleusercontent.com/boB66Vu2o8EFG1Q8eWHzMDlCviauiFy2kX9ra0vi7TIg9-covb4qyOaz6sWgkukQlfhTl1eB-zeww6-wPd1aIhc6xdysxDFHeilC2VceCgfiPZfrhvvq7I4vErzy8kqbipEkFLRFH0w5jHseqzYpLf6dNJ5LZPNAv4FSrDSGMZ1Se1hHOP1xjfptBUqOANZjzgDqfSVNBjSzrxQIf7DJa25UUijwP24rZtxsVCU6gVO3qu1Z_KOzNsGMRKmL4SmAjW4DjtyBzCQEppanyCIJMubOtGZlQN3as2zZ2bDteFWtvJ_kKSMsRTP5Apu3W1bxEX0ABqy_POobuEsYCqKmlQyga6jt8ujUhFnpoQzJC_Gq4sdZ2-qAH4E5h48gUwFCS2HH-d1Q4zckCR4vs7C7EwGfrWVHYcaH0WUHnm43gav0xTenX_OwMKIHODWOkn76jJDdgMIHxSfIFJ_3vJPAe8sp_xp_KFQjwom9H5_s4Hk710hKjdaeyh_4mSrT2RVRZ1g5wUA2wO0d_DbKF-rlmt0qhPuO803sTzoIoPrAVcULzecG10ClbVSWhIh81IEkiZEXv-jCwuFt9UmpfjQlyTmiU7qeO1FRvUGC5294UGDtgNjCVpDbIPx8XbRsPHF2gr8ALfbkwVxIeqvamSjzzVD3eO47YX2n5tDTn1yIqg=w1440-h643-no" alt="Execution Stack vs Scope Chain"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'Hello!'</span>;</span><br><span class="line">first();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">first</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> b = <span class="string">'Hi'</span>;</span><br><span class="line">	second();</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">second</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> c = <span class="string">'Hey!'</span>;</span><br><span class="line">		third();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">third</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> d = <span class="string">'John'</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The execution result:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Uncaught ReferenceError: c is not defined.</span><br></pre></td></tr></table></figure>

<p>Because of the scope of the third function, it can only access variable a and d.</p>
<h2 id="6-The-‘this’-Keyword"><a href="#6-The-‘this’-Keyword" class="headerlink" title="6. The ‘this’ Keyword"></a>6. The ‘this’ Keyword</h2><ul>
<li><strong>Regular function call</strong>: the this keyword points at the global object, (the window object, in the browser).</li>
<li><strong>Method call</strong>: the this variable points to the object that is calling the method.</li>
</ul>
<p>The this keyword is not assigned a value until a function where it is defined is actually called.</p>
<h2 id="7-The-‘this’-Keyword-in-Practice"><a href="#7-The-‘this’-Keyword-in-Practice" class="headerlink" title="7. The ‘this’ Keyword in Practice"></a>7. The ‘this’ Keyword in Practice</h2><p><strong>Case 1</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">calculateAge(<span class="number">1985</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculateAge</span>(<span class="params">year</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">2016</span> - year);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//First 'this'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">	name: <span class="string">'John'</span>,</span><br><span class="line">	yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">	calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//Second 'this'</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">john.calculateAge();</span><br></pre></td></tr></table></figure>

<p>In this case, the first ‘this’ is the window object, and the second ‘this’ is the john object.</p>
<p><strong>Case 2</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">	name: <span class="string">'John'</span>,</span><br><span class="line">	yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">	calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//First 'this'</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">		<span class="function"><span class="keyword">function</span> <span class="title">innerFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//Second 'this'</span></span><br><span class="line">		&#125;</span><br><span class="line">		innerFunction();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">john.calculateAge();</span><br></pre></td></tr></table></figure>

<p>In this case, the first ‘this’ is the john object, however, the second object is  the window object. It’s because the second ‘this’ is inside a regular function call.</p>
<p><strong>Case 3 (Method Borrowing)</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">	name: <span class="string">'John'</span>,</span><br><span class="line">	yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">	calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">john.calculateAge();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mike = &#123;</span><br><span class="line">	name: <span class="string">'Mike'</span>,</span><br><span class="line">	yearOfBirth: <span class="number">1984</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mike.calculateAge = john.calculateAge;</span><br></pre></td></tr></table></figure>

<p>In this case, ‘this’ in calling john.calculateAge() is john object, and ‘this’ in calling mike.calculateAge() is mike object.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/02/Complete-JavaScript-Course-Basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/02/Complete-JavaScript-Course-Basics/" class="post-title-link" itemprop="url">Complete JavaScript Course: Basics</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-02 08:00:19" itemprop="dateCreated datePublished" datetime="2017-04-02T08:00:19-07:00">2017-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-07-22 08:49:44" itemprop="dateModified" datetime="2017-07-22T08:49:44-07:00">2017-07-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-What-is-JavaScript"><a href="#1-What-is-JavaScript" class="headerlink" title="1. What is JavaScript?"></a>1. What is JavaScript?</h2><p>JavaScript is a lightweight, cross-platform, object-oriented computer programming language</p>
<ul>
<li>JavaScript is one of the three core technologies of web development</li>
<li>JavaScript is most commonly used as a part of webpages</li>
<li>Today, JavaScript can be used in different places:<ul>
<li>Client-side: JavaScript was traditionally only used in the browser</li>
<li>Server-side: Thanks to node.js, we can use JavaScript on the server as well</li>
</ul>
</li>
<li>JavaScript is what made modern web development possible:<ul>
<li>Dynamic effects and interactivity;</li>
<li>Modern web applications that we can interact with.</li>
</ul>
</li>
</ul>
<h2 id="2-JavaScript-Basics"><a href="#2-JavaScript-Basics" class="headerlink" title="2. JavaScript Basics"></a>2. JavaScript Basics</h2><h3 id="2-1-Declare-a-variable"><a href="#2-1-Declare-a-variable" class="headerlink" title="2.1. Declare a variable:"></a>2.1. Declare a variable:</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'John'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lastName = <span class="string">"Smith"</span>; <span class="comment">//Both single quotes and double quotes work, but need to keep consistent.</span></span><br><span class="line"><span class="built_in">console</span>.log(lastName);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">26</span>;</span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fullAge = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.log(fullAge);</span><br></pre></td></tr></table></figure>

<h3 id="2-2-Primitive-Javascript-Data-Types-Variable-Mutation-and-Type-coercion"><a href="#2-2-Primitive-Javascript-Data-Types-Variable-Mutation-and-Type-coercion" class="headerlink" title="2.2. Primitive Javascript Data Types, Variable Mutation and Type coercion"></a>2.2. Primitive Javascript Data Types, Variable Mutation and Type coercion</h3><ul>
<li><strong>Number</strong>: Floating point numbers, for decimals and integers</li>
<li><strong>String</strong>: Sequence of characters, used for text.</li>
<li><strong>Boolean</strong>: Logical data type that can only be true of false</li>
<li><strong>Undefined</strong>: Data type of a variable which doe not have a value yet.</li>
<li><strong>Null</strong>: Also means ‘non-existent’.</li>
</ul>
<p><code>JavaScript has dynamic typing</code><br>We don’t need to define the variable type, Javascript will figure it out by itself.</p>
<p><strong>Variable Mutation &amp; Type coercion</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'Danny'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">27</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name + age); <span class="comment">//Type coercion: String + Number = String</span></span><br><span class="line">age = <span class="string">"twenty seven"</span> <span class="comment">//Variable Mutation: the data type can be changed for the same virable.</span></span><br><span class="line">consol.log(name + age);</span><br></pre></td></tr></table></figure>

<p><strong>Prompt &amp; Alert</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lastName = prompt(<span class="string">'What is the last name?'</span>); <span class="comment">//Allow user to type in.</span></span><br><span class="line">alert(<span class="string">'The last name is '</span> + lastName);</span><br></pre></td></tr></table></figure>

<h3 id="2-3-Operators"><a href="#2-3-Operators" class="headerlink" title="2.3. Operators"></a>2.3. Operators</h3><p>例子都很简单，在JavaScript中各种运算符的优先顺序可参考：</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="_blank" rel="noopener">Operator precedence</a></li>
</ul>
<h3 id="2-4-If-else-statements"><a href="#2-4-If-else-statements" class="headerlink" title="2.4. If else statements"></a>2.4. If else statements</h3><h3 id="2-5-vs"><a href="#2-5-vs" class="headerlink" title="2.5. == vs ==="></a>2.5. == vs ===</h3><p><code>==</code>: does type coercion<br><code>===</code>: does not do type coercion</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">23</span> == <span class="string">'23'</span>) &#123;</span><br><span class="line">	<span class="comment">//Result is true, javaScript transform 23 to string and compare with '23'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="number">23</span> === <span class="string">'23'</span>) &#123;</span><br><span class="line">	<span class="comment">//Result is false, to avoid bugs, it's more recommended to use ===</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-6-Boolean-Logic-and-Switch-Statements"><a href="#2-6-Boolean-Logic-and-Switch-Statements" class="headerlink" title="2.6. Boolean Logic and Switch Statements:"></a>2.6. Boolean Logic and Switch Statements:</h3><p>Too basic, and the same as Java</p>
<h3 id="2-7-Functions"><a href="#2-7-Functions" class="headerlink" title="2.7. Functions"></a>2.7. Functions</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculateAge</span>(<span class="params">yearOfBirth</span>) </span>&#123; <span class="comment">//Function with return value.</span></span><br><span class="line">	<span class="keyword">var</span> age = <span class="number">2016</span> - yearOfBirth;</span><br><span class="line">	<span class="keyword">return</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ageJohn = calculateAge(<span class="number">1990</span>);</span><br><span class="line"><span class="built_in">console</span>.log(ageJohn);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">yearsUntilRetirement</span>(<span class="params">name, yearOfBirth</span>) </span>&#123; <span class="comment">//Function without return value.</span></span><br><span class="line">	<span class="keyword">var</span> age = calculateAge(yearOfBirth);</span><br><span class="line">	<span class="keyword">var</span> retirement = <span class="number">65</span> - age;</span><br><span class="line">	<span class="built_in">console</span>.log(name + <span class="string">'retires in '</span> + retirement + <span class="string">'years.'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">yearsUntilRetirement(<span class="string">'John'</span>, <span class="number">1990</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-8-Statements-and-Expressions"><a href="#2-8-Statements-and-Expressions" class="headerlink" title="2.8. Statements and Expressions"></a>2.8. Statements and Expressions</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Function Statement</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">someFun</span>(<span class="params">par</span>) </span>&#123;</span><br><span class="line">	<span class="comment">//code</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Function Expression</span></span><br><span class="line"><span class="keyword">var</span> someFun = <span class="function"><span class="keyword">function</span>(<span class="params">par</span>) </span>&#123;</span><br><span class="line">	<span class="comment">//code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Difference:</p>
<ul>
<li>Function expression produces a value and outcome</li>
<li>Statement just performs an action</li>
</ul>
<h3 id="2-9-Arrays"><a href="#2-9-Arrays" class="headerlink" title="2.9. Arrays"></a>2.9. Arrays</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">'John'</span>, <span class="string">'Jane'</span>, <span class="string">'Mark'</span>];</span><br><span class="line"><span class="keyword">var</span> years = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1990</span>, <span class="number">1969</span>, <span class="number">1948</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(names[<span class="number">0</span>]);</span><br><span class="line">names[<span class="number">1</span>] = <span class="string">'Ben'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(names);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = [<span class="string">'John'</span>, <span class="string">'Smith'</span>, <span class="number">1990</span>, <span class="string">'designer'</span>, <span class="literal">false</span>];</span><br><span class="line"></span><br><span class="line">john.push(<span class="string">'blue'</span>); <span class="comment">//Add an element to the end</span></span><br><span class="line">john.unshift(<span class="string">'Mr.'</span>); <span class="comment">//Add an element to the beginning</span></span><br><span class="line">john.pop(); <span class="comment">//Remove an element from the end</span></span><br><span class="line">john.shift(); <span class="comment">//Remove an element from the beginning</span></span><br><span class="line">john.indexOf(<span class="string">'Smith'</span>); <span class="comment">//Return the index of an element</span></span><br><span class="line"><span class="built_in">console</span>.log(john);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (john.indexOf(<span class="string">'teacher'</span>) === <span class="number">-1</span>) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'John is NOT a teacher.'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-10-Objects-and-Properties"><a href="#2-10-Objects-and-Properties" class="headerlink" title="2.10. Objects and Properties"></a>2.10. Objects and Properties</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">		name: <span class="string">'John'</span>,</span><br><span class="line">		lastName: <span class="string">'Smith'</span>,</span><br><span class="line">		yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">		job: <span class="string">'teacher'</span>,</span><br><span class="line">		isMarried: <span class="literal">false</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(john); <span class="comment">//Print out all properties</span></span><br><span class="line"><span class="built_in">console</span>.log(john.lastName); <span class="comment">// Print out specific property</span></span><br><span class="line"><span class="built_in">console</span>.log(john[<span class="string">'lastName'</span>]); <span class="comment">// Print out specific property</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xyz = <span class="string">'job'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(john[xyz]);</span><br><span class="line"></span><br><span class="line">john.lastName = <span class="string">'Miller'</span>;</span><br><span class="line">john[<span class="string">'job'</span>] = <span class="string">'programmer'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(john);</span><br><span class="line"></span><br><span class="line"><span class="comment">//A different way to create object</span></span><br><span class="line"><span class="keyword">var</span> jane = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">jane.name = <span class="string">'Jane'</span>;</span><br><span class="line">jane.lastName = <span class="string">'Smith'</span>;</span><br><span class="line">jane[<span class="string">'yearOfBirth'</span>] = <span class="number">1969</span>;</span><br><span class="line">jane[<span class="string">'job'</span>] = <span class="string">'retired'</span>;</span><br><span class="line">jane[<span class="string">'isMarried'</span>] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(jane);</span><br></pre></td></tr></table></figure>

<h3 id="2-11-Objects-and-Methods"><a href="#2-11-Objects-and-Methods" class="headerlink" title="2.11. Objects and Methods"></a>2.11. Objects and Methods</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">		name: <span class="string">'John'</span>,</span><br><span class="line">		lastName: <span class="string">'Smith'</span>,</span><br><span class="line">		yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">		job: <span class="string">'teacher'</span>,</span><br><span class="line">		isMarried: <span class="literal">false</span>,</span><br><span class="line">		family: [<span class="string">'Jane'</span>, <span class="string">'Mark'</span>, <span class="string">'Bob'</span>],</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		calculateAge: function() &#123; //Function Expression</span></span><br><span class="line"><span class="comment">				return 2016 - this.yearOfBirth;</span></span><br><span class="line"><span class="comment">		&#125; */</span></span><br><span class="line">		calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Function Expression</span></span><br><span class="line">				<span class="keyword">return</span> <span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(john.family);</span><br><span class="line"><span class="built_in">console</span>.log(john.family[<span class="number">2</span>]);</span><br><span class="line"><span class="comment">//console.log(john.calculateAge(1990));</span></span><br><span class="line"><span class="built_in">console</span>.log(john.calculateAge());</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> age = john.calculateAge();</span><br><span class="line">john.age = age;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(john);</span><br><span class="line"></span><br><span class="line"><span class="comment">//v2.0</span></span><br><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">		name: <span class="string">'John'</span>,</span><br><span class="line">		lastName: <span class="string">'Smith'</span>,</span><br><span class="line">		yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">		job: <span class="string">'teacher'</span>,</span><br><span class="line">		isMarried: <span class="literal">false</span>,</span><br><span class="line">		family: [<span class="string">'Jane'</span>, <span class="string">'Mark'</span>, <span class="string">'Bob'</span>],</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		calculateAge: function() &#123; //Function Expression</span></span><br><span class="line"><span class="comment">				return 2016 - this.yearOfBirth;</span></span><br><span class="line"><span class="comment">		&#125; */</span></span><br><span class="line">		calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Function Expression</span></span><br><span class="line">				<span class="keyword">this</span>.age = <span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">john.calculateAge（）；</span><br><span class="line"><span class="built_in">console</span>.log(john);</span><br></pre></td></tr></table></figure>

<h3 id="2-12-Loops-and-Iteration"><a href="#2-12-Loops-and-Iteration" class="headerlink" title="2.12. Loops and Iteration"></a>2.12. Loops and Iteration</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//for loops</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> names = [<span class="string">'John'</span>, <span class="string">'Jane'</span>, <span class="string">'Mary'</span>, <span class="string">'Mark'</span>, <span class="string">'Bob'</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; names.length; i++) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(names[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = names.length - <span class="number">1</span>; i &gt;=<span class="number">0</span> ; i—) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(names[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; names.length) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(names[i]);</span><br><span class="line">	i++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(i);</span><br><span class="line">	<span class="keyword">if</span> (i === <span class="number">3</span>) &#123;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">	<span class="keyword">if</span> (i === <span class="number">3</span>) &#123;</span><br><span class="line">		<span class="keyword">continue</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-History-and-Versions"><a href="#3-History-and-Versions" class="headerlink" title="3. History and Versions"></a>3. History and Versions</h2><h3 id="3-1-A-Very-Short-History-of-JavaScript"><a href="#3-1-A-Very-Short-History-of-JavaScript" class="headerlink" title="3.1. A Very Short History of JavaScript"></a>3.1. A Very Short History of JavaScript</h3><ul>
<li><strong>1996</strong>: Changed from LiveScript to JavaScript to attract Java developers. <strong>JavaScript has almost nothing to do with Java</strong>.</li>
<li><strong>1997</strong>: ECMAScript 1 became the fist version of the JavaScript language standard:<ul>
<li>ECMAScript: The language standard;</li>
<li>JavaScript: The language in practice.</li>
</ul>
</li>
<li><strong>2009</strong>: ECMAScript 5 (ES5) was released with logs of new features.</li>
<li><strong>2015</strong>: ECMAScript 2015 (ES2015) was released: <strong>the biggest update ever</strong>.</li>
<li><strong>2016</strong>: ECMAScript 2016 (ES2016) was released with minor changes only.</li>
</ul>
<h3 id="3-2-JavaScript-Today"><a href="#3-2-JavaScript-Today" class="headerlink" title="3.2. JavaScript Today"></a>3.2. JavaScript Today</h3><ul>
<li><p><code>ES5</code></p>
<ul>
<li>Fully supported in all modern browsers;</li>
<li>Ready to be used today (2016).</li>
</ul>
</li>
<li><p><code>ES6/ES2015</code></p>
<ul>
<li>Only partial supported in modern browsers, no support in older browsers;</li>
<li>Can’t use it in production today (2016).</li>
</ul>
</li>
<li><p><code>ES2016</code></p>
<ul>
<li>Almost no support in modern browsers;</li>
<li>Can’t use it in production today (2016).</li>
</ul>
</li>
</ul>
<h3 id="3-3-Why-We’re-Using-ES5-in-This-Course"><a href="#3-3-Why-We’re-Using-ES5-in-This-Course" class="headerlink" title="3.3. Why We’re Using ES5 in This Course"></a>3.3. Why We’re Using ES5 in This Course</h3><ul>
<li>ECMAScript 2015 still has very incomplete browser support today.</li>
<li>Almost all tutorials and code you find on the web today is till in ES5</li>
<li>When working on older codebases, these will be written in ES5.</li>
<li>It’s easier to learn ES5 and then update to ES6/ES2015.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/28/2017-weekly-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/28/2017-weekly-2/" class="post-title-link" itemprop="url">Learn without limits</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-28 23:03:49" itemprop="dateCreated datePublished" datetime="2017-03-28T23:03:49-07:00">2017-03-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-03-29 10:20:12" itemprop="dateModified" datetime="2017-03-29T10:20:12-07:00">2017-03-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>这周按部就班趁早起的时间完成了Cloud Computing Concepts第三周的课程学习，主要是在讲P2P Systems, 虽然说云计算的概念最近几年才开始火热，但其实云计算无非是分布式系统的一个比较Fancy的名字而已。当年使用种子(BitTorrent)下各种资源的时候其实背后的原理就是分布式系统，而且其中用的很多技术原理和当今的云计算都是一脉相承的，不过云计算的名字确实听起来比较酷:)</p>
<p>前几周去上过两次CrossFit的课程，累得简直不行，然后才意识到其实之前自己在家练Keep的运动量其实太有限了。于是这周继续练习Keep的时候开始有意识地加大运动负荷，主要集中在HIIT燃脂强化的训练课程，难度是K4(Keep上仅有一组K5的课程，是《地狱Burpees挑战》，包含100次变式Burpees，想想都头大，因此K4的难度已经算不简单了)，每次做完都是累趴，找回了点被教练带着练CrossFit的感觉，并且隔天肌肉会有隐隐的酸胀感，说明负荷也应该算是够了。此外，想着既然博客已经开了健身板块，那我也就干脆每次完成健身之后都在博客上打卡统计，并且接下来每隔一段时间（比如一个月）进行一次体能测试进行反馈，以此来衡量之前健身的安排是否达到了效果，也算是一个的健身方面的观察实验，同时可以为接下来优化健身计划提供数据支持。</p>
<p>另外呢，最近因为《乌合之众》这本书偶然了解到了其背后的作者古斯塔夫·勒庞，在很多人印象中他只是一个心理学和社会学领域的大师。但这实际上并不准确，Wikipedia上对他的定义是 ———— A French polymath(<a href="https://en.wikipedia.org/wiki/Gustave_Le_Bon" target="_blank" rel="noopener">参考链接</a>)。</p>
<p>何谓Polymath? 其实就是指那些在很多不同领域都有很高造诣的人，用今天流行的话来说就是一个大师级的斜杠青年。勒庞并不是学心理学或者社会学出身，他早年是在巴黎大学学医并获得了医学博士学位(MD)，首先是一位医学方面的专家。毕业四年之后普法战争爆发，他又作为后勤和医疗团队的成员随军上了前线，他亲历了那种在战争中被彻底击溃的最坏遭遇，并用文字一一记录下了他真实的观察与反思，包括了当时军队表现出的纪律，领导力，以及人们在极大精神压力和痛苦之下的行为模式等，勒庞的这些记录受到法国军方高层的赞赏，并且后来被用于包括圣西尔军校（法国最顶尖的军校，在国际上与西点军校齐名，戴高乐将军就毕业于此）在内的多所法国军校的教学之中。同时他在语言学习方面也有极大的兴趣和造诣，一度通过阅读莎士比亚的著作来完成了自学英文和德文。与此同时，勒庞一生中还有着非常丰富的游历经历，足迹遍布欧洲，亚洲，美洲，并且在此期间写了多本游记。此外，勒庞对于人类学，社会学，心理学都有着极大的兴趣和研究，《乌合之众》仅仅是他在社会和心理学方面著作中的一本。</p>
<p>最最让人不能接受的是勒庞还是一个物理学家，他在家里有个物理实验室，因为他在物质和物质放射性方面的发现，竟然在1903年被提名了当年的诺贝尔物理学奖，1905年勒庞出版的《物质的进化》(The Evolution of Matter)中就已经预测到了质能方程的存在，这也正是后来被爱因斯坦在相对论中证明的E = mc^2。</p>
<p>这样的人生是不是感觉开了挂？其实正如查理·芒格所提倡的理念那样，人本来就不应该把整个人生限定在某一个特定的专业或是职业上，多读读不同领域的书，发展些不同领域的兴趣和爱好，去解决实际问题的时候思维其实也更容易被打开。</p>
<p>P.S. 这周末意料之外地又去了趟Hiking, 在Union City的Dry Creek Pioneer Regional Park。现在真算是在湾区Hiking的好时候，到处都绿意盎然，能在周末闲暇里短暂地回归自然，感觉真好：）</p>
<p><img src="https://lh3.googleusercontent.com/HHWNvZxMankC2EczNEzuNqgkJ6y5rFQAHn772c5JRbhzc6al1ZKEHBOGDfhRPcWXsPkb9X8kzfHGpCG16P3bqPtpTy46fXgOfYgmRSHgC3R13RdXXvvVfJ_Jx79jDlmZmz-0ZhoQafZkABnzFYQ3HlFY3NWCi92MdgO9rPvsyiN8dxBWZ4Iop3mkrP_6bT4M3kv6kCpOGvFz9b_kUNq9iylkOIMDqeue9lgDMgy7AQWRYl5jvwEIKT1IiawlKW1rFWcRTJ3H8lFJANw8gPOq_HG8VNUf8CUxBkiUXO683T2Insv4RNce9GErvQd5aicjPymWPif8iXBMhnHilD_pqmEqlgVZkM3-iX3bIRlcaiUAHtMIbtM0NQ8E5O4aVTDLleNmNV9lvOlwBf2TztgTAqNMlypAyeugpSUDjmuj0q-s9DxHYyngykGANWKDPd3rxDvMIK7nLLE1BN4d2uaTsG0bD23thGiWnytzR5kXktgEVDzO28Ws1CZ_GQdwnNMmKuEtQW0I0gQkx4JfntBNUcbKgB0oTpN0FANxVIpWp4fyDmB4J1EznHxbYwq4Bze9fAgPg-rpOI9VmF3XUgMScp3AuEUUVpVWbFCC4mdwbjBUXsGgvhyACK51o2tX6_7yj834aQwZ-ah7nI6JEQtMYdNRAOI5cMVr_mISbS2vyw=w1760-h1320-no" alt="周末Hiking"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/27/AIToolKits/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/27/AIToolKits/" class="post-title-link" itemprop="url">人工智能(AI)简明工具箱</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2017-03-27 08:02:45 / Modified: 08:11:52" itemprop="dateCreated datePublished" datetime="2017-03-27T08:02:45-07:00">2017-03-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="人工智能，机器学习和深度学习的关系"><a href="#人工智能，机器学习和深度学习的关系" class="headerlink" title="人工智能，机器学习和深度学习的关系"></a>人工智能，机器学习和深度学习的关系</h2><p>人工智能(Artificial Intelligence)是一个最广泛的概念，人工智能的目的就是让计算机这台机器能够象人一样思考。</p>
<p>机器学习(Machine Learning)是人工智能的分支，专门研究计算机怎样模拟或实现人类的学习行为，以获取新的知识或技能，使之不断改善自身的性能。</p>
<p>深度学习(Deep Learning)是一种机器学习的方法，它试图使用包含复杂结构或由多重非线性变换构成的多个处理层（神经网络）对数据进行高层抽象的算法。</p>
<p><img src="https://lh3.googleusercontent.com/QyJ1Gb1EOtFUsuvU6iTGLTvVDx1f1EEy5peJ236jTFoREH-RbpCxxK2WRt1t4HeXoU3z-_jMuVV983653NVfSHfOzq-Yx8giTBCRM6RP0nFcecggPfyRl5hTEtu0hULWc-eNZNo4T4n7HUhtijw0JyBe5uSf0sm3upFOI8mB-ukLrcJIxnKdIhqwryr5CKRfj1KB12VBBiv6-0FwTZYwgdELcz3VlCztPVjiPrqKuR6KTgArExTY3gt73p4_SDE5hebKJ_IJQ5U0ADTwwfkr17-xLr5fjOBTPDS-UrkWDuM8PHd5lXCEdCdaK3iaqOL_RenOUIC2i-YXCos1wIF7XdERAZ0yb6CYD74LPApKUlJiGSCrZ7ylj4lWLAdUos3Kre34dOoR4O_hAKYfEDQUtaGV_JQyck2DRVsfFtklMSpGKx4uFM-bLcwUZ9wdJWdRzMi6xxkTk4O9S5-tv14l_mRaqFgpS0NjsL3QTxPQlCiQ_k-9PmPkiFSYk9w1ysqnucZ4keIPOdSUEBbAtXqdvHGYka4duH5IzvToU8hpn0g9YY9Rodg87_hpJgFu4tooBHM5Roa1ojDiuPRzt_VlPLojD0pzHk7IwqAlVQtm5UuGaDxk9cy70itlf_n3i6GTjsGeAW0QJNYVwvesRHQBvVDVZ4AeUarGKh05Ss15mA=w773-h481-no" alt="What is AI/ML/DL"></p>
<h2 id="主流的深度学习框架"><a href="#主流的深度学习框架" class="headerlink" title="主流的深度学习框架"></a>主流的深度学习框架</h2><ul>
<li><a href="http://caffe.berkeleyvision.org/" target="_blank" rel="noopener">Caffe</a>   由Berkeley提出</li>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="noopener">TensorFlow</a>  由Google提出 (Apache 2.0)</li>
<li><a href="http://torch.ch/" target="_blank" rel="noopener">Torch (BSD License)</a>,  facebook是主要使用者</li>
<li><a href="http://mxnet.io/" target="_blank" rel="noopener">MXNet</a> 一个相对中立的机器学习框架(Apache 2.0), 被Amazon AWS使用</li>
<li><a href="https://github.com/Microsoft/CNTK/wiki" target="_blank" rel="noopener">CNTK 2</a> 由Microsoft提出 (MIT License)</li>
</ul>
<h2 id="全球主要人工智能公司"><a href="#全球主要人工智能公司" class="headerlink" title="全球主要人工智能公司"></a>全球主要人工智能公司</h2><p>福布斯关注的50家人工智能公司<br><img src="https://lh3.googleusercontent.com/C8CIJkcvh40KQcWMZu9nT0xbf069tlQlwmuBJdRtKyWsgRXbNrJ3HIpR17cG0mGHaIbh3r3cf5CAKDF_O2V1ba0h1QxVt7lSLfyJ1L9fNFYalrE3H26N80DoNIGlAlqLc9NHX0eGLvbnVNBT3Nm9sq1aZKJpHyUvEsjD3f2MxmwfKp75GSDi2alk5P-YSt6ukTctACu8ozSCy6gohpXaQ0hQTiFbYa39GEeFe7gb2Sjpp6QRX49laXhytwe9JGsHiHfsUvW7iZT6NnPY_ReR41vM-5tAOJFH0nLSvJN5NKlcg1Tg29xIwspO5V0ox6MSPKzwuoPcHOXNMO61rAvxhje1uZn52m5S8i9X8YUiQHL1Lxea1uI5NAxVQLX9-b-q3jw5fak2oT17udnjZTdpCQCkL2-DBrZlIs9yraI2CHFJ1aH8EetCWaVq4uq-IsSfctEP9ZZ6t9AwlfET9s8IDYuLKm184VKY3teJlkKBoWU5uNdK5VeidCiGSXT67ZCMhoIWTX_3fxBn18x6S1sQIVJkm5raTvm-BiXMhtVs5TyzvTngkJ4nZIyacE3FQh9lJde3NrO3VZ3a-NggVVoKmu8jIo4_8c3P55aUs7LdpYWBlQfz9couOf-XFxFu6Bqx_QHe6R8RzA3jU5a24t_tQto67LAjMtqzS24NSkyt5w=w773-h1022-no" alt="福布斯关注的50家人工智能公司"></p>
<p>融资最多的人工智能初创公司(2011-2016)<br><img src="https://lh3.googleusercontent.com/cYBAjVrWqmCVlOHk5cABSl_Vm_OCNmnWouHp7uG7Qy0aVOkzZ5WNXZ_IaJs6pUyDOtDE3bPAX9tBwkJzbpivmGOh0Sk7wg9xRfHin6LtpjdKM1djy1UMQQGwvxfBXSNu4HKPd_mi0eULXZdylccwNlO25nxNO48qA0g9PUM0HipMIC1lBOAzwkalc4oxlu3qASyqnvkuWSRmajRIDgeBU9MdZ4AANPcPust-xbsHJX6v6Btd72OP2VC42Rlf52un4KbhVLmwXJX3N1fjpaSppxI4CfK0r1_pEK3cLRrQwYpz-TpEeFhLqUqQrZzRtWq93w7MocOQwwR6Pg1XOE1AyWThh5Ce2IPW2wpq_xgZBbE4qC6_9yaC79EmaTK9rzId321snm-VRjD0kT5qd64Y5ASVsL_453FwFHZJKiRbP8q26VavZFiG22WMCF0DfJJFM3xTug54qai4tH0jxNdTdjeY20wZ2XV0fwb1iqRHpL0BRuyA4kc95_aBcJdt7z_HNmAQipmvCEWWZLlLg42tM1vxeJHMZucCcG-qg7cmP2gr5YmBfw_SrCpHetW47GjFUME6gl03AKv6KAoTupVPx80S2lK-aCuaWVaZ3-y-a1l1hNBpMeRaUFmDJNoPoVR4XfUeQ0NEMhbFiGHwaWBmKLpflpJYzo4swgJoKVYy0Q=w773-h559-no" alt="融资最多的人工智能初创公司(2011-2016)"></p>
<p>Sentient Technologies：使用先进的人工智能技术，大规模分布式计算和科学的方法来验证新发现的策略，Sentient Technologies为各种领域中的复杂问题提供了新的解决方案。</p>
<p>Ayasdi：机器学习平台，数据可视化，分析，金融技术，医疗保健代理系统：</p>
<p>Vicarious: 这是一家神秘的人工智能公司,Vicarious的目标定位于“建立下一代的人工智能算法”。并且声称要构建“像人类一样思考的软件”，实现“人脑级别的视觉、语言和自动控制系统”，致力于研究通用人工智能，目前他们的研究重点是实现人工视觉识别系统。</p>
<p>Context Relevant：Context Relevant通过使用机器学习驱动的自动化数据科学平台，来解决一些世界上最棘手的大数据，预测和行为挑战 - 比任何其他解决方案更快更有效。</p>
<p>Cortia：Cortica的技术模拟人类皮层，以便以最高的精度理解和识别图像。</p>
<p>Workfusion：WorkFusion是全球运营的完整自动化解决方案，将您需要的复杂业务流程数字化所需的核心功能整合到一个平台中：业务流程管理（BPM），机器人过程自动化（RPA），劳动力编排和机器学习提供的认知自动化。</p>
<p>RapidMiner：开源预测分析平台，使企业能够在业务流程中包括预测分析</p>
<p>Digital Reasoning Systems：确保合规性，保持安全性，并快速准确地分析信息。</p>
<p>H2O.ai：H2O是世界领先的开源深度学习平台。 H2O被超过80,000个数据科学家和超过9,000个组织使用。</p>
<p>Viv Labs：Viv在开发语音智能助理，已被三星收购。</p>
<h2 id="人工智能相关课程"><a href="#人工智能相关课程" class="headerlink" title="人工智能相关课程"></a>人工智能相关课程</h2><ul>
<li><a href="https://www.coursera.org/learn/machine-learning" target="_blank" rel="noopener">Machine learning</a> by Stanford University, 大名鼎鼎的Andrew Ng</li>
<li><a href="https://www.udacity.com/course/deep-learning--ud730" target="_blank" rel="noopener">Deep Learning</a> by Udacity &amp; Google</li>
</ul>
<h2 id="更多参考"><a href="#更多参考" class="headerlink" title="更多参考"></a>更多参考</h2><ul>
<li><a href="http://mp.weixin.qq.com/s/b3MjRLT1sImTcNlQid00kA" target="_blank" rel="noopener">如何区分人工智能、机器学习和深度学习？</a></li>
<li><a href="http://blog.jobbole.com/109352/" target="_blank" rel="noopener">普通程序员如何转向人工智能方向？</a></li>
<li><a href="http://www.voidcn.com/blog/passion18/article/p-4281386.html" target="_blank" rel="noopener">对于机器学习的入门和进阶，您有哪些好的建议？</a></li>
<li><a href="https://www.google.com/about/careers/students/guide-to-technical-development.html" target="_blank" rel="noopener">Google Careers: Technical Development Guide</a></li>
<li><a href="https://github.com/SyncedAI00/AI00" target="_blank" rel="noopener">AI00——机器之心百家影响人工智能未来的公司榜单</a></li>
<li><a href="https://www.zhihu.com/question/30156262" target="_blank" rel="noopener">知乎：国内有哪些人工智能领域的创业团队或创业公司？</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/25/Cloud-Computing-Concepts-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/25/Cloud-Computing-Concepts-3/" class="post-title-link" itemprop="url">P2P Systems</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-25 15:19:10" itemprop="dateCreated datePublished" datetime="2017-03-25T15:19:10-07:00">2017-03-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Peer-to-Peer Systems is important because it is a precursor to today’s cloud computing.</p>
<p>What will be covered in this chapter:</p>
<ul>
<li>Unstructured p2p systems, e.g., Gnutella, Napster, etc.</li>
<li>Structured p2p systems, e.g., Chord, Pastry, etc.</li>
<li>Latter is a pre-cursor to key-value/NoSQL storage systems (which comes in next chapter)</li>
</ul>
<h3 id="P2P-Systems-Introduction"><a href="#P2P-Systems-Introduction" class="headerlink" title="P2P Systems Introduction"></a>P2P Systems Introduction</h3><p>Why Study Peer to Peer Systems?</p>
<ul>
<li>First distributed systems that seriously focused on scalability with respect to number of nodes</li>
<li>P2P techniques abound in cloud computing systems<ul>
<li>Key-value stores (e.g., Cassandra, Riak, Voldemort) use Chord p2p hashing</li>
</ul>
</li>
</ul>
<p>A Brief History</p>
<ul>
<li>[06/1999] Shawn Fanning (Freshman Northeastern U.) releases Napster online music service</li>
<li>[12/99] RIAA sues Napster, asking $100K per download</li>
<li>[03/2000] 25% UWisc traffic Napster many Universities ban it</li>
<li>[2000] 60M users</li>
<li>[02/2001] US Federal Appeals Court: users violating copyright laws, Napster is abetting this</li>
<li>[09/2001] Napster decides to run paid service, pay % to songwriters and music companies</li>
<li>[Today] Napster protocol is open, people free to develop open nap clients and servers <a href="http://opennap.sourceforge.net" target="_blank" rel="noopener">http://opennap.sourceforge.net</a><ul>
<li>Gnutella: <a href="http://opennap.sourceforge.net" target="_blank" rel="noopener">http://www.limewire.com</a>(deprecated)</li>
<li>Peer to peer working groups: <a href="http://p2p.internet.edu" target="_blank" rel="noopener">http://p2p.internet.edu</a></li>
</ul>
</li>
</ul>
<p>What We Will Study</p>
<ul>
<li>Widely-deployed P2P Systems<ul>
<li>Napster</li>
<li>Gnutella</li>
<li>Fastback (Kazaa, Kazaalite, Grokster)</li>
</ul>
</li>
<li>P2P Systems with Provable Properties<ul>
<li>Chord</li>
<li>Pastry</li>
<li>Kelps</li>
</ul>
</li>
</ul>
<h3 id="Napster"><a href="#Napster" class="headerlink" title="Napster"></a>Napster</h3><h4 id="Napster-Structure"><a href="#Napster-Structure" class="headerlink" title="Napster Structure"></a>Napster Structure</h4><p><img src="https://lh3.googleusercontent.com/1xUO2uOVFcxMrRtxu5aPHmaYQ0ki5OurLTb6V_vKHhbxqYKWpDgkmlU4F0C1UwdMJ81HNdW44B5FFKR5H9dx6bTJOGFCky1rQTQWjh9juN0J3sYQtjMOeLA21cjEVoPH4Tr1B-EXkrxR6X3QaJJg-HWGj6_EaJKhle0v7JfLLLRKlwDHclNUIgwpQl10KLTKsLKpEALbl7uDpLI2oiaTrKCgiwiWftBO_9lEiargpxg3kaFSZZaLjy1q1H8J9aGYBM-XffE3BOpSPLWiS88Mf9TbBvbBtwOv1z-8uh59auq2_Hj67JOjcCxZE6oAhhdpa7Eu_GOlXieOY6JyPCYq1vfi94fVMjUgitYejNV3UlnRKHtyh0DDhKSP49hsd02llPToYiqZQQf2TcsOz1cXTpbrJAObAxdw2omyEjQCOvY3kTZ4BBfScGnGefcykyIU5l9nlkOyivRzwgtl-6HgqT7xsMrIi6mB9MqAvYMh2ynpA0-06nBHfDpjmIFLvRVGlgPL0r73i47_FsWmy82yXCCDv2EHAlPmhXxKhrphs675t0rmDLCNyJE3WHNcqPB_RZoOrbHjTLvfFn1Y8xTpbjmEgZf9tgxGbrGqoKYDn46088PdDONgPjK3S9UMsw3GCtYO39CCrC06xPzgaqMe_mKsKbMAG37HOE8gedc8Nw=w993-h624-no" alt="Napster Structure"></p>
<h4 id="Napster-Operations"><a href="#Napster-Operations" class="headerlink" title="Napster Operations"></a>Napster Operations</h4><p>Client</p>
<ul>
<li>Connect to a Napster server<ul>
<li>Upload list of music files that you want to share</li>
<li>Server maintains list of &lt;filename, ip_address, portnum&gt; tuples. <strong>Server stores no files</strong>.</li>
</ul>
</li>
<li>Search<ul>
<li>Send server keywords to search with</li>
<li>(Server searches its list with the keywords)</li>
<li>Server returns a list of hosts -&lt;ip_address, portnum&gt;<br>tuples - to client</li>
<li>Client pings each host in the list to find transfer rates</li>
<li>Client fetches file from best host</li>
</ul>
</li>
<li>All communication uses TCP (Transmission Control Protocol)<ul>
<li>Reliable and ordered networking protocol</li>
</ul>
</li>
</ul>
<h4 id="Napster-Search"><a href="#Napster-Search" class="headerlink" title="Napster Search"></a>Napster Search</h4><p><img src="https://lh3.googleusercontent.com/nEPVln8yqe-XrB9M5K1QfFfJdEYL-zmtFAJhmr28YFUBttMqHuI2kdejhh4Xd24KTEO2anFMrz-NA0v5X-5QPsx7t6-Vzs_TdwTyvqrL1yFjSamzQ5fbmIkw4TH1zlSyEM8MLiFnoW_VzGZ0IFb0mE1ptrp_cFfxh83Y7wJv-uVyhQj5hDceBpPEwI3LZ94wfgIOV1PA2NxytgsIHwnD6pHRtYqwvJkCn-0ovsx8RCvpeCqSuTmyrfq8-LbSEMg1r54EJqnlEFMbXiGjpTIoQSzV-QwvhIjPGMLPdqM8bGwhZdSJGb_9T-LEboMyKGlm_8rL-2yTEJD52qBeUriUFZn_pc5nX2WAvgrU1Gu0h0_osotM1xDwpzJpv9eam_hXr40b-s5AUubAk1CDgVEn1SluDNZ4zNiB1iJmQVu2-jakCfpE1541CI6QeAWuk48vraUNSq4JiJF67x9UvcvW4sf3si1Zcx-RfdkdldFKcL-tr7RwFdbYh6NelgUve29Z2x0WwxfmNDwWV9jf8IkiklflvFc3Ft2EjRBukMU6aIvnYy7NLAoLuw3mtFycdZjGh-up0MhFlcBtYfskopuZQVaABbCM0I5vtGfAH3JtFO6eNausAOUOTPGYeRg_NZMFL-1CFKmgQTuYi4_-De2HSBnOHx0rRN01GMvP21TW_w=w997-h622-no" alt="Napster Search"></p>
<h4 id="Joining-a-P2P-System"><a href="#Joining-a-P2P-System" class="headerlink" title="Joining a P2P System"></a>Joining a P2P System</h4><p>Can be used for any p2p system</p>
<ul>
<li>Send an http request to well-known url for that P2P service - http:<a href="http://www.myp2pservice.com" target="_blank" rel="noopener">www.myp2pservice.com</a></li>
<li>Message routed (after lookup in DNS = Domain Name System) to introducer, a well known server that keeps track of some recently joined nodes in p2p system</li>
<li>Introducer initializes new peers’ neighbor table</li>
</ul>
<h4 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h4><ul>
<li>Centralized server a source of congestion</li>
<li>Centralized server single point of failure</li>
<li>No security: plaintext messages and passwords</li>
<li>napster.com declared to be responsible for users’ copyright violation<ul>
<li>“Indirect infringement”</li>
<li>Next system: Gnutella</li>
</ul>
</li>
</ul>
<h3 id="Gnutella"><a href="#Gnutella" class="headerlink" title="Gnutella"></a>Gnutella</h3><h4 id="Gnutella-1"><a href="#Gnutella-1" class="headerlink" title="Gnutella"></a>Gnutella</h4><ul>
<li>Eliminate the servers</li>
<li>Client machines search and retrieve amongst themselves</li>
<li>Clients act as servers too, called <strong>servants</strong></li>
<li>[03/2000] release by AOL, immediately withdrawn, but 88K users by 03/2003</li>
<li>Original design underwent several modifications.</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/E-oSzLcIcVVpqK35ox8bgJQZU3zjNy5KjII_RJTR8BgxYFTE6AfNrEUxLIOt8neXcd7nC8gqq3Rk4oBwwUlfFk7QMN9pM1dVQ2lv47IPfT41vcHh7K_TWt0taRgK8Akst4AMdXAG_jUUrUJmT1Xh4dKpkSzi9CrDf2rM_cAh9QY69bOe_GUyOKRLJbie5t6rgx3GlRSmbdctSZk9zxiYJlN1xuXVWvIAFjZBhu4iTbkfwiLnxcKK2YaZfuVoA_ZesWiH013IY1qD4LGHYN6wH9i7IgfDgx9nh53NZeO3YD4wttMlV29t2B6hQdkzkU6Jq33TPsT4IuUwEep2iUQdPl0RNrOBVxe3ktsbetRIFBfI8hxcLV40Rg-vftCKL44C8fyxkJJ-ZsJaG_fPodNpcTujRq8i7EukE9J6qpk3i8-3ClYTuTWNbT0XMVEz14hZXzO0UDVdm74ukSXmCjTW-EP2ZnrsMFWTzNFP04Z9auPnSN0af2ziNZh2YOwHBEx28VI0jwImzSwU6HAv_OxVL9LBfKQbSzwf6Q8eaNuay9B8aabfgWuIsWC-FRLG8_9GXabh4RuSWSZibvsbwcKxTOEISit4CbGDxTi2xSbF-UigZyS6dl8tsdiGCaP4j0QMBockuc1cp2CA2qZJjxbVfAJCkTdRyC16ljWZo07dEA=w1136-h737-no" alt="Gnutella"></p>
<h4 id="Gnutella-Search"><a href="#Gnutella-Search" class="headerlink" title="Gnutella Search"></a>Gnutella Search</h4><ul>
<li>Gnutella routes different messages within the overlay graph</li>
<li>Gnutella protocol has 5 main message types<ul>
<li><code>Query</code> (Search)</li>
<li><code>QueryHit</code> (response to query)</li>
<li><code>Ping</code> (to probe network for other peers)</li>
<li><code>Pong</code> (reply to pong, contains address of another peer)</li>
<li><code>Push</code> (used to initiate file transfer)</li>
</ul>
</li>
<li>We’ll go into the message structure and protocol now<ul>
<li>All fields except IP address are in little-endian format</li>
<li>Ox12345678 stored as 0x78 in lowest address byte, then 0x56 in next higher address, and so on.</li>
</ul>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/LRSsbshjeCTQPD269zVh2vqZ3BLohu1StylZ35qPyTGHMMh2loNAMf2439lKocqGJ9fcGvhA42tu7abahe5miRGhJJAdcF4qsftmPYkzEHg6tbl3kRuhdVzQi3MobJTvYxiClf2Kp9IkaaW_LN37i-Yb-r9kEASk2GHHJM78xIzSCH402nX17YYXamRFn9HJAyzPygXwjqpT8rGNzJM17S9kismQI9lMzrVyJ4C_6ENPDzvzOLxz2FKNWNLWIPccrsy_clqIf8i6O04ljmvcJy7KfFEy_QCvFam10h6KNKUPflBIb7JXFol-ELG9QSUSai87TkpM2hZ2cw04pdq-jdj-iGbPNyDOTkTeQqi4Q3tBbeM8_sBGtbQXGPdeQuItodGCRRs87mie-HVSw0vn_KvFqqwHZ8PzecYHof24PY1RpgxawCsm-H7szc4Wp5EoxM5vtbYzhQwmyAniq6ruJlhzCfcAz4qu_b7Hb7au3jXl7L-9H-hj-V3okA1bcUZUMctO9LSGO95Y79GngeSodywmp60HmyNrWMRdoQjF-FDfnA5dp6jzWIPDmb75DVBc3cuv7kCmVInR72MbLodURPem3ryJCKQfg16ZnyXprA5tpM9x_lVr0MSC0p0VxzQbwpl5ZaxSeRLLa_GqoOsTb6eAgsH3PhrDhdErsiCf-g=w1199-h545-no" alt="Gnutella Message Header Format"></p>
<p><img src="https://lh3.googleusercontent.com/t5DT0ws6785AzmBtbTxfZ_Evm5Me8GehCp8A64fsfxg6agC2y1W1tSUjt7z7pf5YGsD4fjGvMfvHuwtD_1pJ2-moc3w8eWm5j43_eiOZDvlKfQoNrHx3aTfZbCLFhSEBAbi5U7MHinRGill2qS1KERb7dXEW0DfAOCKvcEPrlyj1-uGGazcHAO4sKTI-0Ns_p7Qz9NGmIVs5IKqAMLCFPlX6btZsSdyoJ0jgLiojFBiugr12W9YOvygzHjO4jJL-C-SEOWN_Diat1Z1FOl8K1A1qpDOmAxXIKTpVvlH8Xy3aF7onZ7QCIBGt51ysVG1iXS44UffoB5dTAJRwkLd5SLPv8f6Sv6k6qJT21LYdCcZGejxf6U1JflMgEYURDllqp24GjmCvOWz5u_7Fm_i8IWUg_Sx9D07kT3XN-gyYkjtJcCvRKnCDp328Zyj_mHjnH8CJ2x3C7bx7Osufp0AQSku5Le9EdHLqFcQ4GYHyWAHqC21MOVuG82zgk0qg3ul8qBwol2xu9LczhN5qqwawtVSpT2FhzwT0yyD8kKsKePS8gzVw1ULH_Nrb6_AqOt6gxypYVYLuUHgEH5U7Fe8VT9SKNCFGQYRv67UTjD3OOm8Cn0iLYm5_-vaUmVopnUR2jRo8nSbn3q3xyzFWhPBOF7z7LFDrh2N1x5TulxPTAA=w1131-h610-no" alt="Payload Format in Gnutella Query Message"></p>
<p><img src="https://lh3.googleusercontent.com/WL2uOCLMOsYsv9N9x5O_nQbFWiDWARQ0OzzXMlKXJoUybULNqltEP8F_Hy3WNZsx-Zh_S8D4xQKKNtDnXZJUlY3uMoJYrvA59qW-tLcuhsTe_bUd2c4otsAojchZwAzoMORqjWQGHLbAwKMVnJ8RZ2oh3knh8xU7m83vES3HpDs7O_MLn2QDmcsn7MbJri3-SyjUq1myzz9Mhd5AB_bqMIaKMc5iMvn_LnUclVdXcAUyKLrrc9ZwODrfaS5Cieh9Owhgoq8tt3vdwkB7bqMGudIsx4eZDIoc20grYpA1XruiDIxS3fpWEKw7xzTqd7N7SgMlfY3ANhL1eAjkIFgVLVqT5mZTP2PuT3ndbyQ6ILKhQOBxDfXLYCTTR0znYEurJLb5fJwQndyTO7swvufZQ1GSeXL7EwK52rbHDb4X0yVhFKLqOYyctQXlSnCXkGPhMGWCZ6_xXWLC1mSzXPrR_02wpexhLHWfuE7sCDmsweKOSA1JZ6JVJUoEjPtBql25XXPJU9U7Mlc2NaLKQ8LvmdKQvus3k_D2h1Gwu1SShBLNfFZotIWFKzTZuez2ZSxAn055WCeoWmvNRMgQ8CckFQZ2OqckljVtIEdwpZVxY3_3Ip5CPYiTuTwpluLTr7Pr_9ERAFUyCXixr472GFJt1bgTXfQeRmREY_jTpIeQGQ=w1161-h733-no" alt="Query"></p>
<p><img src="https://lh3.googleusercontent.com/c911jczEQAMunfIYehuINIsTa2wHqstosXDE_dWzalq_mnBlouQ9qixr_1vhIsk6fjdP1IPsW3BYrKYjmf5WyWS8uWoOD-eWo6oBD4DhHpcWeXFergI4BEylp7LBHLZvula6gw955_wnTWiPmuRvHQ6EBR_1v_-4J8cGUXUwFd5veVtrt7n0AUza4BcaroG9hMUVg-u7Yt4LHorWy9Mkyts5NGeEDF6R8zIvKFqY4Q7-uyzrauU5B4KCWNEFWMwhE58-zRIdLibhlSzlnYmMjo9tbEtUaNdzWmsW51tTxZXFdFL7QPGWXZPMUf8QZ2M46YXR1l5giKb6ey0HH78lcyAiwG3O31gvzgUIRNGyFWVtL_7q9_Ibx1vO1y86ZGhstrbDmcc8g4pUvw16t6Oz6ZWD7s4mvgfljLhBAqIfgnZ5sOHAvBiy-EmWnruRNHQ9sPqGx_0WBxScZwPnNdrfnkNgxGvopOAD-oEf98vFSi5cRSMww5mBVYKsOX5DbbBu5roU0GCzVzcz-bw8XbwMNVzmAGieCGFe8KqRJCVZhILZC2XTNJxD771VApTINguhNOROxcISHuU58IQO7vDzVWwar4ndBpboUbsIOyR3UT9T4279_m3n-xcwkoZtg3CB9qvTqABj-CKvRACcHHp8grvzV0EgeW03iaNwDXcyDA=w1199-h593-no" alt="Payload Format in Gnutella QueryHit Message"></p>
<p><img src="https://lh3.googleusercontent.com/Yea7x5cEVn3Hz1emPWPwXXlG_FXayMCiUBcSLKNKfcug4uYQytFUCW4blH_ihu7ICna1lqlFQw8uw3bNf4obpaD78M4TJNy2V5l460Cepdr65VqWflZTgZ5yY05KgIRdunxSAvOUcnr89DsreJ2Ae9LhBH3H_7zjsRpej1NUIYKBSptY5MLkyQRGzI4ZWtnzBudtspCZR9tZyVfJUC-bHTfEg23uZqo8YZEQ3VIAs4SL679Y_UJefozibd54UPy6FoXQfCC23Lc2RN9sFONBzXVIsCcF3jBCa217rkeHkTGAKXV0bsnhsC6Sc0tRLd4LZwy-abX_k9Tee0Og2-HCia5QI3IMIlMO8vLhnreQbkix8XB_0iz-eM558g4aMLHdYyee2wNYOAvMqj-73ZMBwZQTLvamMOkgJXLDXY2FOsXu5QtMtRSDKN7AClIW_mPDm0dl_CCOv8HSKJgmykui-GGVeINBUHyxXM-fTdf6Iv6_-2PbIlC6_Q9PgCwSPxkLXG3xKQNZTkZ2X1nh4_9m4PB5eWeokVzF3Id0cfLiy2WXJ5oV37NXFrpMqTLwkdIXBFbhKMdJU7Uj1FhBJm9Kx01RXXmhtpmaAzUbAquBURHtR1HRF8brlTyhTuZFPRDN722uwXvs44TyW8faBN51LoR9JguppmI_JRky9_UjmQ=w1170-h734-no" alt="QueryHit"></p>
<h4 id="Avoiding-Excessive-Traffic"><a href="#Avoiding-Excessive-Traffic" class="headerlink" title="Avoiding Excessive Traffic"></a>Avoiding Excessive Traffic</h4><ul>
<li>To avoid duplicate transmissions, each peer maintains a list of recently received messages</li>
<li>Query forwarded to all neighbors except peer from which received</li>
<li>Each Query (identified by DescriptorID) forwarded only once</li>
<li>QueryHit routed back only to peer from which Query received with same DescriptorID</li>
<li>For flooded messages, duplicates with same DescriptorID and Payload descriptor are dropped</li>
<li>QueryHit with DescriptorID for which Query not seen is dropped</li>
</ul>
<h4 id="After-Receiving-QueryHit-Messages"><a href="#After-Receiving-QueryHit-Messages" class="headerlink" title="After Receiving QueryHit Messages"></a>After Receiving QueryHit Messages</h4><ul>
<li><p>Requestor chooses “best” QueryHit responder</p>
<ul>
<li>Initiates HTTP request directly to responder’s ip + port<ul>
<li>GET: get/<File Index>/<File Name>/HTTP/1.0</li>
<li>Connection: Keep-Alive</li>
<li>Range: bytes=0</li>
<li>User-Agent: Gnutella</li>
</ul>
</li>
</ul>
</li>
<li><p>Responder then replies with file packets after this message:</p>
<ul>
<li>HTTP 200 OK</li>
<li>Server: Gnutella</li>
<li>Content-type: application/binary</li>
<li>Content-length: 1024</li>
</ul>
</li>
<li><p>HTTP is the file transfer protocol. Why?</p>
<ul>
<li>Because it’s standard, well-debugged, and widely used.</li>
</ul>
</li>
<li><p>Why the “range” field in the GET request?</p>
<ul>
<li>To support partial file transfers</li>
</ul>
</li>
<li><p>What if responder is behind firewall that disallows incoming connections?</p>
</li>
</ul>
<h4 id="Dealing-With-Firewalls-—-Push"><a href="#Dealing-With-Firewalls-—-Push" class="headerlink" title="Dealing With Firewalls — Push"></a>Dealing With Firewalls — Push</h4><p><img src="https://lh3.googleusercontent.com/dmLEy0BDI4v-jvB5RwPOcfI-FPtwOKTPNekn5IuiHzmmeNV7F-BgEROc5lmKAcRafXj9Ke_HAiQ8C1jSAj9N-UzVNN5ynX1o8863DYTgwlqXdVrP2-zHhVUVm9CiRyKQKbwukRucefS1WAuyIhReR07tfhO8_QTSPY4YMkkkOAo4MGtnfjR3C_EuCZmMdUmpFPQX78Yq2RUVKdUXlXBjUkL64JJ0D5Vie0XIhxe8B-QBO4VYKoHPSTIAqnt1SUFyqgpmUoN73J8qXdLtC5fBZ5t43Dc3nj2zRP9Ho8cVTga_BO3p_bw1YFkjAIzAE25njMQWfLJGM8AVXb-O1vlHBd7ibDy8NPbJb-b8yVDOMk6KnwIckhi9_rqdTVk5Kx6fd9OGbX-y_gEWBlkwuLKRSZfXEK2TNYAnRoTSWQj05Gi4LHT_AIHtI7e_rgptjlKV-O5Dx0LtXDZzRudG2YC8DyeM_epis5pmiCCAv5YpQkjQRUb1ctHWIjVAQ4kqYnEZq5xY7_lSAs6DCPiPUL1Ul1KaDP9-oiyr-htcSESTF9FKKGSfK9N1jOEqk40EdxEaasKKaIBywaUOVLGUWimcMYi7hxyDJWM-jDIWiwHR4ca7MxNA04WS8TQ7MspttqP2fcKL9k_S79q27S-D804EoVNl35-5nz8ZYonpgd4PDg=w1199-h698-no" alt="Dealing With Firewalls"></p>
<p><img src="https://lh3.googleusercontent.com/fl2Y1TR9pGUndWM2tcK4tBGHTipAP45fsusvV51v2yIvbOC4ozmDHO8MZNzOCQnJfYF9qzLRD6aRFWnbXVko20lsfUHbsUSZEFYgeYDjPnUAz1VhMf4pRewMvkpGgEysvpBOvYojmPSq-CfvMMxGC2e78lvTyt99_aDxJiZ5JIE2iSl15HHhaYUfS2tcjOrsUsasmcvK2xqOjQw1rn70yXu5Ut_brqHNnqE_VtPOZZARyVAIM-nxl1eQTe5nfn7OMMQsEJpNzXGhWXcA4Z8SROeXoQQKZ1ZYjD21ku15iiALdebmuGoGDOoQl8moMhH6tETfpYXN-VbZCZgm27CT6ZSVEk1uHb4N3wy-tbmYZk6hqjZoAY_8THjg39dqsKrp6tUIBHT-KlbHtqaDijz3bzD4XfpNOV5amMa3ZkBBki8TNC5k2SMSXiT9EHIrr4fsKM_nKS5p_Tn3U51e9E30G6P0IvVDNCJgryF0eXXPR6X1uEEKngkQ0-j8IVXRdqJCxdbGdQh5DVL7tjhBWA-DQaknLj4DZSVGSPh9ryMjUta6fu363_nki8C7b1V9h1fm_RfKslrVz3ucxBxE4crJImuzAuC7QPcpr62vp6a2EJWRbTpOKOwjKwS5a1I3h7V5t_T8kuMj-deQ5KYTeaqSTZd9QlCsYVpRUrxhMv7moQ=w695-h459-no" alt="Push"></p>
<ul>
<li>Responder then sends GET to responder (as before) and file is transferred as explained earlier</li>
<li>What if requestor is behind firewall too?<ul>
<li>Gnutella gives up</li>
<li>Can you think of an alternative solution?</li>
</ul>
</li>
</ul>
<h4 id="Ping-Pong"><a href="#Ping-Pong" class="headerlink" title="Ping-Pong"></a>Ping-Pong</h4><p><img src="https://lh3.googleusercontent.com/y0GASC1IUZFxTcmX0ax2rM6YZ4uKFeBwiVOxDQp8GA4BQUugzv2lanoUKklDahD3NBNLIX7BeRwlZooFWBaVf_W4w2EAC4hnP5J6WUAe2yX-d1Cwv5DcGQkx9XYuNqT__bfjK1mHDSllTZJ5E0MPRZjaJKWDKHZW7KBiS0X-eVDr0auI5eIqQokA5gPfNcEtbnyWbsJzQktceFPBhGCsrWpSRaB06716kGjw1JQGXVd3bJkizskJRq5tmRu6SULzeqWQdzt4FZWCpm7AYDGTRXBMVBbq-QgRj6tIDAj2c2f0xPmWzPMCVa8CMQnJJ70u15nX8KozUo8eQ27WfhtsAycetF-dFaIc3BYtVB4o8JEhWXbLyR30cgVoJc_RuGBM4TD4ScOrM6R2IoukKYMP7cUkGO8GqBk-f8XfmzxqVQNRnvmE92kbWEmuDvNp2IArPQpnGvVMbq57tSwUjPITblwDqphl7sFR-LzlKvERLPfN4E1B-HAiUG2fdSpWLa08rLd3r_2I_OGqxPGXfOBvBtOmmAIWrNIlQLX-xEP1dqufE8i_dxgrLSXyK2I4H_lrI05O9LGz5ggzhRzUq4egt2xYGDaKaA2gASAwcg4-NBrllfZovxX5wuye4oHdxo7GN4nWts8ljSTRLRsA77uiSOwAMQLESTmGdho2Me3vCg=w855-h262-no" alt="Ping-Pong"></p>
<ul>
<li>Peers initiate Ping’s periodically</li>
<li>Ping’s flooded out like Query’s, Pong’s routed along reverse path like QueryHit’s</li>
<li>Pong replies used to update set of neighboring peers<ul>
<li>To keep neighbor lists fresh in spite of peers joining, leaving and failing</li>
</ul>
</li>
</ul>
<h4 id="Gnutella-Summary"><a href="#Gnutella-Summary" class="headerlink" title="Gnutella Summary"></a>Gnutella Summary</h4><ul>
<li>No servers</li>
<li>Peers/servants maintain “neighbors”, this forms an overlay graph</li>
<li>Peers store their own files</li>
<li>Queries flooded out, tel restricted</li>
<li>QueryHit(replies) reverse path routed</li>
<li>Supports file transfer through firewalls</li>
<li>Periodic Ping-Pong to continuously refresh neighbor lists<ul>
<li>List size specified by user at peer: heterogeneity means some peers may have more neighbors</li>
<li>Gnutella found to follow <code>power law</code> distribution: P(#links = L) ~ L(-k), (k is a constant)</li>
</ul>
</li>
</ul>
<h4 id="Problems-1"><a href="#Problems-1" class="headerlink" title="Problems"></a>Problems</h4><ul>
<li>Ping/Pong constituted 50% traffic<ul>
<li>Solution: Multiplex, cache and reduce frequency of pings/pongs</li>
</ul>
</li>
<li>Repeated searches with same keywords<ul>
<li>Solution: Cache Query, QueryHit messages</li>
</ul>
</li>
<li>Modem-connected hosts do not have enough bandwidth for passing Gnutella traffic<ul>
<li>Solution: use a central server to act as proxy for such peers</li>
<li>Another solution:<ul>
<li>FastTrack System (soon)</li>
</ul>
</li>
</ul>
</li>
<li>Large number of <em>freeloaders</em><ul>
<li>70% of users in 2000 were freeloaders</li>
<li>Only download files, never upload own files</li>
</ul>
</li>
<li>Flooding causes excessive traffic<ul>
<li>Is there some way of maintaining meta-information about peers that leads to more intelligent routing?<ul>
<li>Structured Peer-to-Peer systems, e.g., Chord System (coming up soon)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="FastTrack-and-BitTorrent"><a href="#FastTrack-and-BitTorrent" class="headerlink" title="FastTrack and BitTorrent"></a>FastTrack and BitTorrent</h3><h4 id="FastTrack"><a href="#FastTrack" class="headerlink" title="FastTrack"></a>FastTrack</h4><ul>
<li>Hybrid between Gnutella and Napster</li>
<li>Takes advantage of “healthier” participants in the system</li>
<li>Underlying technology in Kazaa, KazaaLite, Grokster</li>
<li>Proprietary protocol, but some details available</li>
<li>Like Gnutella, but with some peers designated as <code>supernodes</code></li>
</ul>
<p><img src="https://lh3.googleusercontent.com/APqwNhTcyx54MT62fS1Es7uE3-vP3wQpO_8RkPfy5x_Hg4R4SpBJYOl_S2HUXvfHXdgs4G4_Sf5f7cfVNUXCSosoxODs1f3_0VZZfn2-zyk4VFhtnXn980hNrXavYyPZaecNr3xRzKsj-hNKr9Av46e7rhro95OfwrmJ6zXL46yHPdJGbndsnjbR1hN-ICwtdSOCozX-HVUALGOu7L-vv7cXm3rAlhBdOtxhnd0I9Pb-iV01dVHjMm9j9yRdIHN9YSOhOfcgX7v6sQPpN0dS206Di1eGG2B-3BNXCAjDOZ5gEspP0vEocO3BIP706q_rkguuNddSq1jUMni7kNWTBWSlyv-RnuPaFlleFuvTGVBtj6mJ6M18KwLOMxEcrwP7hWzSAW-tweuGYUZg2xaiqcnNrgLswabE_7NT2mVB3HOnm33LbFxITrx-cHEi1-rPmGEMk3jsnry15-KWIUbc4BrFhN152UZkGu2pPm9IvFju_Qx7jrvWijK_hHtzlev2Pgd8zE_Hu89qq9D2NwQNDUkzE6r1YB-ZUKuix0uG4nFypUCud_uwcI-3L2rTmfviGqqq1C5ZtWD08f6-G6H5F8q8zEKpg42faVMmeQ6jIj7Ke_UK1iifch_MukWYAvAaV6fI0Dl938qBme7xqt2AxfLPGKEwvPn2ljiKNHOaCA=w824-h496-no" alt="A FastTrack-Like System"></p>
<ul>
<li>A super node stores a directory listing a subset of nearby (&lt;filename, peer pointer&gt;), similar to Napster servers</li>
<li>Supernode membership changes over time</li>
<li>Any peer can become (and stay) a supernode, provided it has earned enough <em>reputation</em><ul>
<li>Kazaalite: participation level (=reputation) of a user between 0 and 1000, initially 10, then affected by length of periods of connectivity and total number of uploads</li>
<li>More sophisticated Reputation schemes invented, especially based on economics (See P2PEcon workshop)</li>
</ul>
</li>
<li>A peer searches by contacting a nearby supernode</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/FZgdQchpi7QmQDH-I6al0PVvKYPdfCUghCGEo2HGQnKZaFZzO50CRHO5PeKXQd6LbFgsuNMI6DHr94sxODjVULnEI_3cHHkPZAZUrCSkQrvbtefFkq8c9TXm9c6DDU0VH_DIhBmH1QhK2PeueV4GSIqDw75Lin7NzKr_WQiS8-7y1JS0LImy-iwqJ8YHgLhrRWY4LFjVOVBDX20J5yv4D11ZTLC0IJEk63GnIMPIgbzX7UGAl0rHJzIBFBUf_GuuMj2HRuLbPQb6qytNeyM3sCD3MYvqJJO2K8L4Su2pRAw5qp06p6iNVoLgJvYZzHFWKBFXBj2JEoknQPuh98ONlkjpj747Q7D9dBwdJyj9e65f9dnsVnWL0HydPSvQje7qviobbRTFmimq5DK6BayUqTnMxLP8E0VsDrupXRAQQxckQQ5J7BdV6nTuW7BSbBgoNHrYdXUCwVRVxl8f0XRHcwdr7rQRp9vi6U5KN1DKrO_Gkw-DOwV5ButB030D4yelinbYZLQlZ5mKD9DDWRNJxoWW7b-QxTKT42tyNlqhNXAkjGPwsXntfieT7cxRN_VRNaaJo02Put--uaX6LvCec9doBEwuaW9NVCmVQuLnlgSHkKy2LRTAFAb6TB90-40oWvrPsvxP73Y7uI-BEecAHQfETLCS2Ok_Jajhg1lfKw=w824-h500-no" alt="BitTorrent"></p>
<ul>
<li>File split into blocks (32KB - 256 KB)</li>
<li>Download <code>Local Rarest First</code> block policy: prefer early download of blocks that are least replicated among neighbors<ul>
<li>Exception: New node allowed to pick one random neighbor: helps in bootstrapping</li>
</ul>
</li>
<li><code>Tit for tat</code> bandwidth usage: Provide blocks to neighbors that provided it the best download rates<ul>
<li>Incentive for nodes to provide good download rates</li>
<li>Seed do the same too</li>
</ul>
</li>
<li><code>Choking</code>: Limit number of neighbors to which concurrent uploads &lt;= a number(5), i.e., the ”best” neighbors<ul>
<li>Everyone else chocked</li>
<li>Periodically re-evaluate this set (e.g., every 10s)</li>
<li>Optimistic uncheck: periodically (e.g., ~30s), unchoke a random neighbor - helps keep unchecked set fresh</li>
</ul>
</li>
</ul>
<h3 id="Chord"><a href="#Chord" class="headerlink" title="Chord"></a>Chord</h3><h4 id="DHT-Distributed-Hash-Table"><a href="#DHT-Distributed-Hash-Table" class="headerlink" title="DHT = Distributed Hash Table"></a>DHT = Distributed Hash Table</h4><ul>
<li>A hash table allows you to insert, lookup and delete objects with keys</li>
<li>A distributed hash table allows you to do the same in a distributed setting (objects = files)</li>
<li>Performance Concerns:<ul>
<li>Loading balancing</li>
<li>Fault-tolerance</li>
<li>Efficiency of lookups and inserts</li>
<li>Locality</li>
</ul>
</li>
<li>Napster, Gnutella, FastTrack are all DHTs (sort of)</li>
<li>So is Chord, a structured peer to peer system that we study next</li>
</ul>
<h4 id="Comparative-Performance"><a href="#Comparative-Performance" class="headerlink" title="Comparative Performance"></a>Comparative Performance</h4><p><img src="https://lh3.googleusercontent.com/Q8mF1tb6uR4nCwOFDDvDJZS4eNH78zpW4g93MHEVQ7AWEb9LJuBzexJpoPJbOG3lXeV0kRxtwKz8y_ZX3UVOru1JXr577dL9Sr-CgJAqWQOWA31noCpWp49Iovz4XwQ-r1Q7ZzGt59lUolMHFZe3Gp-LDzTnk5nBRTYJdx63qQbPqA6DaaBdCk-iVUvooYNEn6b83dxH8sfJBeDYQ-yxRN8mfa2VjhcaKA-J70yYnPeTHQArw_lhl_mYItp1r6WBNyMhlVLig_8Hr7QKPjSHqBma23BQmCAcKCw9JcpMPTNFlMYUZy2hPzURL0sopE2ysXtIAH1KNCh56x4NK4NfuXedO1YRjftybt97sJOiX56V9FVlDQdm69Y36fv5cV4TeFS709v19X6qVPoL1XRgKDnHmhOv1Kj9BUExYGlpizN7v9NiappcUN216jlholoL-62YzfCFfvrL3snnINspSVRkv7tH3d_1o9YLiX31MARFTpX36NUQB415oNmNGQroYxHgbY0l1m3x8d50bxi0VadkXMiX74wGi-0x_pxMbNe2C89VzX-vSUX_VTIu9HmQarlPi-54eL0gTYiWLob5s1GNXAxV7IXED8kh6HU3rm1QJh_p6vPVVALuXtyEcFesXCl2R1oc0nfVNTJy0WwNASoz6GPqDXaictow-O2HRg=w1006-h558-no" alt="Comparative Performance"></p>
<h4 id="Chord-1"><a href="#Chord-1" class="headerlink" title="Chord"></a>Chord</h4><ul>
<li>Developers: I. Stoica, D.Karger, F.Kaashoek, H. Balakrishnan, R. Morris, Berkeley and MIT</li>
<li>Intelligent choice of neighbors to reduce latency and message cost of routing (lookups/inserts)</li>
<li>Uses Consistent Hashing on node’s (peer’s) address<ul>
<li>SHA-1(ip_address, port) -&gt; 160 bit string</li>
<li>Truncated to m bits</li>
<li>Called peer id(number between 0 and 2^m - 1)</li>
<li>Not unique but id conflicts very unlikely</li>
<li>Can then map peers to one of 2^m logical points on a circle</li>
</ul>
</li>
</ul>
<h4 id="Peer-Pointers-1-Successors"><a href="#Peer-Pointers-1-Successors" class="headerlink" title="Peer Pointers (1): Successors"></a>Peer Pointers (1): Successors</h4><p><img src="https://lh3.googleusercontent.com/WT623T_MCVdUxDTx_WV1adLWQLWGxhGao1nTzPnD3gURsPnV4Iw8ib-ghmAG0MGJucDMOpjuT8qnVJBxeUcNaMhn-eM5nS80TFU5CO89qtxDKSLNfhJCXeuzlGarFzRuNFR7YzVry5FkdUGJVqPZnI_MYsYFecgHoEEizntjDrdB5sVaIqV9bNVKcDwJ6gTItYss6PNIla0oE8RthL2LfvbQKdrrFPT-hP4FdEp1DXmSIgdZ2WG6SqmsIJnri-EqdLZEn-uZ4rwEF7Mtez6092zvjok9eaYqol7-BAmJCuxkhDDSm2eh2D3xSQDnGnLjCl4I4-plh5FamYuvO4mIL1J85mD8hi4HALqZxdN90tpn8pypZOahqegX6bSvZ2ZwEHT_OusC529Rs7W-b0Ys0eCtw_yVWh7Sz0EO3W76NVuLCpY8m9CeLMbTvlu6otu6dbaAomvCmb6mC4Ax-BgwRUVbchmBYpWtqu5HJjtvhLrTVnERFOw7fDlySOJEaFv0p8XnEQ9D5G6VI9KdWsdYPVKOg6vhN5nz3gPeEHXbDselbwIg7ATDTy_59QaOqX2LHmDbxMB7vfMIBHL0golwAnGUZhTCsI_kgmmQ14Jb7x09jw0FUGqUAt-WTkX8bGufQiKFc9fIOuEb7HgytQ2OnJznnSXP095oEpPu7d8BaQ=w1005-h575-no" alt="Successors"></p>
<h4 id="Peer-Pointers-2-Finger-Tables"><a href="#Peer-Pointers-2-Finger-Tables" class="headerlink" title="Peer Pointers (2): Finger Tables"></a>Peer Pointers (2): Finger Tables</h4><p><img src="https://lh3.googleusercontent.com/RMfXjJem5R88pR5LOVEgc4mphhLbb-KE0in0Y0MLnnSYkIQgnvMuCfmlnihBdqkpW_L8hKqIDTJftG3xzKi-m6zS4H9KE-fDNymLTO77u7yGHyeTKU4ySzY6ODj0oRaW7n3ejPI1TxTtNdAwfR-O1Uv_4VIeQrDClOQP-VWHpiQJ-4cX2GG9hebTK8aSyEFUgMJwE3sj-fssGsMyMTBIZkkrhs2JR15tgO7OdsxAnuJRSkAOqnFMfpwt90XDkoMUgjQ8OKBCRQZtRkRhUXfCYPVImt8MOrIO0CMVz9IL08enopedI-HZEz3EyWhKkFwfTUfZmbisgNIIvI6ox4pJ6hESBedJMxGMYQ0bv3A5n19bjv_IVmO0_xQ7S04guoFaEgHbQaX9hG5QM95QGKWdQ6C5u9I3IQQYIUezIv5AiMXYLcIeIW-GStFsX3yJKkOTVhBBHkuXH1Ig0J0Lf8DmFJ9T_9CUI4H_1EBEh0YwBraE83ASEuzXNfSyBqJq7LNd7XsGvuZG_McxhYjSCaNWG4_XfI_P66B0FzWlEa59KpBuGMeItRfUX-LfpSaf9aLaSjV-pcAhmfRHeRqEZGZ3VtmOXZbTmXkxd2x5-oonpH-A7cSJd_VEMedAiRPeWnz99nlZmoWzPKPvCB_onE4UPoArQsOOsBVnOSMIOykWoA=w990-h517-no" alt="Finger Tables"></p>
<h4 id="What-about-the-files"><a href="#What-about-the-files" class="headerlink" title="What about the files?"></a>What about the files?</h4><ul>
<li>Filenames also mapped using same consistent hash function<ul>
<li>SHA-1(filename) -&gt; 160 bit using string(key)</li>
<li>File is stored at first peer with id greater than or equal to its key (mode 2^m)</li>
</ul>
</li>
<li>File <code>cnn.com/index.html</code> that maps to key K42 is stored at first peer with id greater than 42<ul>
<li>Note that we are considering a different file-sharing application here: <code>cooperative web caching</code></li>
<li>The same discussion applies to any other file sharing application, including that of mp3 files</li>
</ul>
</li>
<li>Consistent Hashing =&gt; with K keys and N peers, each pear stores O(K/N) keys. (i.e., &lt; c.K/N, for some constant c)</li>
</ul>
<h4 id="Search"><a href="#Search" class="headerlink" title="Search"></a>Search</h4><p><img src="https://lh3.googleusercontent.com/q4flxQoXToWb4t--H_gn_He68mofaCISK4p-vrGi0jgsFrNY3xtIzsaACg8I9Rk-wmpim6PJ5LFoaNkMjWifxV2l0ahMDXT0jmBtf_Nr-xSuM4gw-ez-Q8_vo1ex4iWu-nmv539ykuWSJD5u8RE68KLNsB9ZcZR5ElODTgLWa_vqMP0f7iVDMf7L4GtAvsdVFABfblcA3hHG5PtNBt5h_KBxQ6KGmLHFs9QWmigr_bTURI77d4V_9Qw9xRM6RckupzzAXrYGnOwWDmA2VEdgtoKe_RUFY63suVd6O55IZgdw6pxSJWedtnUCZvSE8vnjfpXwi364fyVcKk-caWvT0O-dn_lli9E5YgxXsUKIapQkynXvefm36uShd3QnM_p0CJBP4sh5tQSABDgqrlUHv1UlIrw3cX51E2cobS64XQWewAviPJF6lfcbMzUsFaoMDRacVY_d2_BhmL0o7MnTUuOXYqGUGfqgc7LNJH57Aw3kOU7ZhCd2vBoS0LZjqBfS2X2-I_wMNrvHgCAHtBgfp2rhO-yzOiwNImNvV-uVWK1skjSuCz7xWOdIzuBhnBV4tfDu27UQkMzqSUqI8lMY6_rncRwC3eKkK1CU2z4a23kgwI-SJQyi9uDabihh-CXLX_TTql5Nb3_om3BC09b_bwrHjSVjWhhWbgAw5Np9HA=w1005-h430-no" alt="Search"></p>
<h4 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h4><p><code>Search takes O(log(N)) time</code></p>
<p><strong>Proof</strong></p>
<ul>
<li>(Intuition): at each step, distance between query and peer-with-file reduces by a factor of at least 2</li>
<li>(Intuition): after log(N) forwarding, distance to key is at most (2^m) / (2 ^ log(N)) = (2 ^ m) / N</li>
<li>Number of node identifiers in a range of (2 ^ m) / N is O(log(N)) with high probability (why? SHA-1! and “Balls and Bins”)<pre><code>So using successors in that range will be ok, using another O(log(N)) hops</code></pre></li>
<li>O(log(N)) search time holds for file insertions too (in general for routing to any key)<ul>
<li>“Routing” can thus be used as a building block for<ul>
<li>All operations: insert, lookup, delete</li>
</ul>
</li>
</ul>
</li>
<li>O(log(N)) time true only if finger and successor entries correct</li>
<li>When might these entries be wrong?<ul>
<li>When you have failures</li>
</ul>
</li>
</ul>
<h3 id="Failures-in-Chord"><a href="#Failures-in-Chord" class="headerlink" title="Failures in Chord"></a>Failures in Chord</h3><h4 id="Search-Under-Peer-Failures"><a href="#Search-Under-Peer-Failures" class="headerlink" title="Search Under Peer Failures"></a>Search Under Peer Failures</h4><p><img src="https://lh3.googleusercontent.com/qKpwgq3yOFazF2YkC3KlZa-DhA43KxSQrOWSgGg8a0ZFgs1-u1iJZ3AbBYiQqUjF1LZGtOoL3HG_YT_PtNqX8mJsWBtd8eliU6HzIgMcj3V1D1bjmnLHbYvZXw57IIZ6SpSktVjvvwJBQaGNfbCQQw79EvU5bFga0SaSkE9ALUVTIlVYqdi1Syy_0EoTnx5khdzrwgt33cnmb-AVJlE44wKmfQCqsBurl9l0kdaajOkgIE3-aE6nViyTuA5Bla1K8dIr68UmxIKm3kN6yzY_NdTOb6LNWhetGPKHldTZUuN-TYu6MHOE97uKsPUtsE8ZW6p8JQOp-ZugSRwZIPYHDqAiqJlCdRMh6-lWoyJ7m5r2h4LMfQp9I2ZrgeelHaiplhzsMCTFfVZM4uYDYBX0j14pErxHmd5d1nY5MYAxFY_KKkCO7W0JuykFEk--0duBlRQ6L3_pB5ayJvqtBzwS_BoyU_kK4PalzphazYfV4gpRUc3a-KrWHAzwoZvLicCeBPBFgYfousF3bXTiKuG_JrQsoO2OVMZDNv6XBNrdmMSxpIDtsh_erXMkApboeotwtxxS2DMinGzNcn1atbp8gbU-hdu8s1ACzeEOB_i_0dDphqEtE2cWR2_A4ubX40wCvFERLp0IvCUnFBkqsTMpNZuk3WKFFM-77SZRvGmi1A=w774-h472-no" alt="Search Under Peer Failures"></p>
<p><code>One solution: maintain r multiple successor entries in case of failure, use successor entries.</code></p>
<p><img src="https://lh3.googleusercontent.com/hELVxi5XY2h-3Cw6fHVeZvKG__temY7lJrFUQcm4jd0zQF6JeM8A73lXIs7ANpVH-T2s2blF1GQpIuXHd2_NQdc9xHyoAVErpic2Kvpu890B3iUkMiJi8uTxOxh570PL49he0h1QbFTUdF-UMMYXvN9HKADK8SNdn4hoouf0WEZAIlb8W6G1RQYOX3zH26ButO5I38zJRSYqaPnOg7SucXFvIye3xuNlp3K4hvC1eMGJtcts93xB_-WlVyw_Y6GE-QdS54pU-DOitXKl0SQqm-gEgWeOw9wgAH3MU6-4YeU93_wcp0xo1Lzxs4a5iIVmTac4FVoW2oR9B23kJWnwUSD9GaGlE3lyH44xZK2COk_26KRD7TI71PlIQ-r6jTKtPMUtCRL8wc2ax7_kTX2aWoH6bAS5Qd-GVLZ9ETs8kkfXFh0KGmhFmGNqQ8bsKIcdV3LV2CNUAX4ASYCpek55unLzApucUW_p4t_8ReGbc6pDKTsqUgWGyxqSBMKC0c30FDbMtxcKO7hyZHMUVe7VmwSJYGY4n58RSLjVCj-NmsZKU7PL-SLn-YUB-YAGPoQyFhyVfOJPh52vyLaHY1QF6pGwIHl5McoFnQOTQ2WQTcSdHDFkx-xbsEHtKArXcN0mWLuy8HTVkiF8XMHJ_DkE8muWeZjvJfUp0EYdWNKCAA=w773-h458-no" alt="Search Under Peer Failures 2"></p>
<p><img src="https://lh3.googleusercontent.com/Bg9E7h2kb7E5BaSAl-NYr61NGzJ6bXTMud6uB8bM6x6urzXHSQ1B7hcGQ8AEoYFK69Gmu5WHawEmuchvRCiQWlyaCoLg81DCGGd3QDp0P91GKLsRO2gpJ-TApbpvcdI_yEW7FcIOPGeJsupdL1FDmfZeejqYc0lCpC37rLL8cnl-aYW_veUAAKXtW8sOXuzyD6P68RVfju5r7ilyKYJCG8DhVPS_1lM42J_4ZSm-6P1W00HxksUKM6zn-Vhnhw-_M3-zAr1rXiTIjo5pDc57MPhXch9J-D5Hy5O6RgY29rLHvopf7-rpF7hlLnVB1XxCkIQA0IUg5pbyqtUAu-rBo2CN7TkBoAoudiE-F5NNPIU2ZDcsxKATTnl8TKu2bFRSK9UZVo2hPv1HK6AMufXFodAevwLUJktlrBraH1pTHretl-Lq4dG0lsVm8cgnhSuliM92Exx8BzU7fq_aS12Uw44FJfAG_gXY4DcP8Ga6Ktz2ZYJZhOQPEbuEyq_6bhH4QxxZeCFsQ0EB5WoICV1oiYB8HDBZOovkYsuaX-Iyb9iU0p1rC3Qo8DE32w5bfBodvyvDTGzbvc_CCT_Cg9zjRrryLdqyQJDzaCWxB0zz5kaRYMRaaxYvoCol_aEqpQtE0BjeGEULYdFuJh5ihRtX-xk5u-n3pJc9zNg_8oXHCg=w372-h207-no" alt="Search Under Peer Failures 3"></p>
<p><img src="https://lh3.googleusercontent.com/7Z2y7Mv2SmncJND1eXX6NiZlUyujHSZjl3_FI3u65RLisUEhFGRhuIsh1_0DMFr_y0TOIL8BwI2EHLhxFlfxTesXb82cH3R_sgOgnqLJjDWNmu3_-QyVQy_B9p9yeJqCPQApBIX_BLW59_maSrAkECSpFG6HexVvTq7soZtvwPslaVAGFuqNNlf6g_rL3h8oi15ccS_qU4r2IC4gJvBEfUuApDz-DEK5ZSNrGGMkSctbQNn5ycj53gGH27XVw6VeetXR8TSs5U33e7wzEXhN9K5dAzesMz-kkfFcGC-6cuWhFWTjaJ-BJ1nYWaZ6JgB64S2pc0D7OjfHZDSJ8DolmjQwyBdDo40mFIUXgKkgM4_5QLTzkd3T3-ARIHedE601RtF_cUr-8dXpGHsoYNbI6Q-ltSsEdpsb62b_qz8tc63VZWr1AneY-SIqGav-FF0UaY-onYuZ5qJQMSIkoY1MvcxG47fGGDnhQCrZRHcH3h_9477AI-ZTbIxv1fLAXeWL7SDgc19GwEyI6x1Q_lQro2q4Gzc-dxLTQ8uyfWj-FPo_TyPp_4kNxdbrYui33aCzBSGp6y7SY2iLm4PpcjgRUaHLIY2hL_Fszo6sbse425MQ0h2qegpHqgJXvlvi7iQVvNJxSOQNAgu3iMllrLeRcGa1ZuPlb8m6Ip0LD2tiqw=w773-h443-no" alt="Search Under Peer Failures 4"></p>
<p><code>One solution: replicate file/key at r successors and predecessors</code></p>
<p><img src="https://lh3.googleusercontent.com/fCrDcjBZLDvqRY4-BdjWxKlxbKazX7wl_kaOWgN2pO618eT3zY4uRKqT_iZWOFyBbJc2dnjvD6AA7_HnxBI5TvQ9xXDsCUoNo4_EVwm_jZIFiKpoE3ncuVXeNXmyP9O2wRKJx1xI3XYlRD5WsyE4fKPSOV-i_z5vfKwmzPuOWziHW9mhmcKRZhmIR0A8gcSaRUo9TNvxB-GqzJzl0KDD4KA75bBtqAvDYP9yprmmxnzIzWqdwYXwFQ5VFYWcwiaX3KxuusO9HtkO4X3LOEgMPMdTszBml9DgxK57MAfh0teZ5tnlHcj9Opb7lpMN_27CLqzWPaDI13VvBVqZH-aRL9Ncyb8oFUx9YH6hh3MybEjNfKyqbDIJ7--D5mgTTNCOlpsZ4kVMKaIz7_HXeZLa10jMHuFJ21x4JR55_b7R8NjFijZCnP2bV0EEC9Y5RGSamHqHT4AvT7_y1wu5V_Z2YvZ8fq80PKsfIMgN4OxBWjJeXMf3_l8c8Qut0601HXeSFBiXMpt4AZfYL6lkb_Jv6DpfUNQUlWsj4aY4CKuuOhTMroCYE2K3QBC0O7RSYntYe95g3AvCSuwzvCKivAFCKHA5J98KzSWySD3ydmc83rWHZQZVkBEQ3gJ_2EfANjVas3sTbkcadIbO_tSsgGH0pOm6ph-01HIpWuxmsHdIog=w774-h443-no" alt="Search Under Peer Failures 5"></p>
<h4 id="Need-to-Deal-with-Dynamic-Changes"><a href="#Need-to-Deal-with-Dynamic-Changes" class="headerlink" title="Need to Deal with Dynamic Changes"></a>Need to Deal with Dynamic Changes</h4><ul>
<li>Peers fail</li>
<li>New peers join</li>
<li>Peers leave<ul>
<li>P2P systems have a high rate of churn (node join, leave and failure)<ul>
<li>25% per hour in Overnet(eDonkey)</li>
<li>100% per hour in Gnutella</li>
<li>Lower in managed clusters</li>
<li>Common feature in all distributed systems, including wide-area (e.g., PlanetLab), clusters (e.g., Emulab), clouds (e.g., AWS), etc.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>So, all the time, need to update successors and fingers, and copy keys.</p>
<h4 id="New-Peers-Joining"><a href="#New-Peers-Joining" class="headerlink" title="New Peers Joining"></a>New Peers Joining</h4><p><img src="https://lh3.googleusercontent.com/jcNJUPI5iLuGObCyRzDY1MgpcMrv-uJwX_uJsry0EKo-rntC9dJnJTMFtt7oLtlgfAduL3-cElzpgs_zyqSW2c3g7-4FEnCQMZg2ulXmlEccftogOZ7kCSiKgoJp441lGplWNtSq6jsNyCx5sXGHtIOHED2NGWJZAo1c71I0JhTOhO16XN6LduanhF6Bjfv3F9aldRbKEJd9o6ret1qzwqfQwCBZZ9ZR280dlNL1VOi6GCF8w4pcBWETPJq05h5EpbJWqKng1Eq_gRv7ES-o-FT0TaaKaXi83_HZQGg9ykz84LzN0Oep958oUPzzSHep28NxO3ZFyjQFBl2lSCflpRPhxiOiCK3NfaVRlzCEdAo6rPW_yjrU2WPKSEQC4Ywi0UB25yfjyV52UgXjxN1NRoUzu4mhT-1kCW-QQy5j_marRss_3zdDr2554t8-6Y1jnIbhKEiNynqiEN_H9VqfqHUJSstBlg5J6T711eBMjgBOapDITYOsV4_vU5_86X5W5Qw7WyjIBV1kRsgdAyie1SGanVEuGU8Eg6K7DUSJ5v5_wOVYtIb3UFHTkw4-m3ZOKmqh9IN1n0CUDuEAqtUx3I45Eo3BtHOH-h1GKiy2x0_4GF63rxHWrZ54sdS8s-VfenAL8NBTL-0DWgXfPmHSZRRPOLSGi39DfEECAlarOg=w774-h496-no" alt="New Peers Joining"></p>
<p><img src="https://lh3.googleusercontent.com/p5YBAqg8u_2YgNOtjghPjqU7kbfBhY9nbxoj81_WZ5EmLDTEM3nGyQalWfPw2oH8YjSTQF81U4UprThaLoLsr0IQFOof9h3kuzej5nP1aTW25TqSxkW9HoHcn2rTarkgOb2pq57Zxjt9Sj31A0n2pwzeyI8YJz6A8nWWNOFyKDAVCHPwrjU8aoffGRYMbK5Ph-lL32RNV19TI6fsnByIVR5MekOsDRGi_IFUlfFlN6vlEGasqY0m7ZiX1qCeusf-Zfu8Y9G-ERtlwOE1MMPBc3RlcNAXrE3n3ZxhKttlrMmtoyUADBzEoeuze2i4S6nOnNh0jx2AMRINGH_JU9ULvgf8C-Rpx7EEoioemoXZgsHiGu2CmA9WvpfonpZlQJOUMSeS6tIo4g9pRnMrQtCwQUknk-Pb-x1H2Eq2ph496Qz7T9k_8zqUVuISKjK_WrYBljQFainVjpNiUpY-2V7pBQ02I9vxxZJ6cZBZMZ3eeJ3wKi_z5r1PHxQ3FFDQU1wHBUFtDzG0Dr_l71axtmrzQdOchCaXFOEwbbQVpKK-u_oj40TzKshg8J-uYpf7YrFWQ47jT54Pob37ZGDXjeQBvw74mPXacWeq2k-5oeAZB6oyqHFC3CgjrbV2_cybkEOpLtzyYBz44utXG55Q6zUEtsIgY2tcvRs-NXSRKJb5ug=w773-h481-no" alt="New Peers Joining2"></p>
<ul>
<li>A new peer affects O(log(N)) other finger entries in the system, on average[why?]</li>
<li>Number of messages per peer join = O(log(N) * log(N))</li>
<li>Similar set of operations for dealing with peers leaving<ul>
<li>For dealing with failures, also need failure detectors (we’ll see these elsewhere in the course!)</li>
</ul>
</li>
</ul>
<h4 id="Stabilization-Protocol"><a href="#Stabilization-Protocol" class="headerlink" title="Stabilization Protocol"></a>Stabilization Protocol</h4><ul>
<li>Concurrent peer joins, leaves, failures might cause loopiness of pointers, and failure of lookups<ul>
<li>Chord peers periodically run a stabilization algorithm that checks and updates pointers and keys</li>
<li>Ensures non-looniness of fingers, eventual success of lookups and O(log(N)) lookups w.h.p.</li>
<li>Each stylization round at a peer involves a constant number of messages</li>
<li>Strong stability takes O(N^2) stabilization rounds</li>
<li>For more see [TechReport on Chord webpage]</li>
</ul>
</li>
</ul>
<h4 id="Churn"><a href="#Churn" class="headerlink" title="Churn"></a>Churn</h4><ul>
<li>When nodes are constantly joining, leaving, failing<ul>
<li>Significant effect to consider: traces from the Overset system show hourly peer turnover rates (churn) could be 25-100% of total number of nodes in system</li>
<li>Leads to excessive (unnecessary) key copying (remember that keys are replicated)</li>
<li>Stabilization algorithm may need to consume more bandwidth to keep up</li>
<li>Main issue is that files are replicated, while it might be sufficient to replicate only metal information about files</li>
<li>Alternatives<ul>
<li>Introduce a level of indirection (any p2p system)</li>
<li>Replicate metadata more, e.g., Kelps (later in this lecture series)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Virtual-Nodes"><a href="#Virtual-Nodes" class="headerlink" title="Virtual Nodes"></a>Virtual Nodes</h4><ul>
<li>Hash can get non-uniform -&gt; Bad load balancing<ul>
<li>Treat each node as multiple virtual nodes behaving independently</li>
<li>Each joins the system</li>
<li>Reduces variance of load imbalance</li>
</ul>
</li>
</ul>
<h4 id="Wrap-up-Notes"><a href="#Wrap-up-Notes" class="headerlink" title="Wrap-up Notes"></a>Wrap-up Notes</h4><ul>
<li>Virtual Ring and Consistent Hashing used in Cassandra, Riak, Voldemort, DynamoDB , and other key-value stores</li>
<li>Current status of Chord project:<ul>
<li>File systems (CFS, Ivy) built on top of Chord</li>
<li>DNS lookup service built on top of Chord</li>
<li>Internet Indirection Infrastructure (I3) project at UCB</li>
<li>Spawned research on many interesting issues about p2p systems</li>
</ul>
</li>
</ul>
<h3 id="Pastry"><a href="#Pastry" class="headerlink" title="Pastry"></a>Pastry</h3><h4 id="Pastry-1"><a href="#Pastry-1" class="headerlink" title="Pastry"></a>Pastry</h4><ul>
<li>Designed by Anthony Rowstron (Microsoft Research) and Peter Druschel (Rice University)</li>
<li>Assigns ids to nodes, just like Chord (using a virtual ring)</li>
<li><code>Leaf Set</code> - Each node knows its successor(s) and predecessor(s)</li>
</ul>
<h4 id="Pastry-Neighbors"><a href="#Pastry-Neighbors" class="headerlink" title="Pastry Neighbors"></a>Pastry Neighbors</h4><ul>
<li><code>Routing tables</code> based prefix matching<ul>
<li>Think of a hypercube</li>
</ul>
</li>
<li>Routing is thus based on prefix matching, and is thus log(N)<ul>
<li>And hops are short (in the underlying network)</li>
</ul>
</li>
</ul>
<h4 id="Pastry-Routing"><a href="#Pastry-Routing" class="headerlink" title="Pastry Routing"></a>Pastry Routing</h4><ul>
<li><p>Consider a peer with id 01110100101. It maintains a neighbor peer with an id matching each of the following prefixes (* = starting bit differing from this peer’s corresponding bit)；</p>
<ul>
<li>*</li>
<li>0*</li>
<li>01*</li>
<li>011*</li>
<li>…0111010010*</li>
</ul>
</li>
<li><p>When it needs to route to a peer, say 01110111001, it starts by forwarding to a neighbor with the largest matching prefix, i.e., 011101*</p>
</li>
</ul>
<h4 id="Pastry-Locality"><a href="#Pastry-Locality" class="headerlink" title="Pastry Locality"></a>Pastry Locality</h4><ul>
<li>For each prefix, say 011*, among all potential neighbors with a matching prefix, the neighbor with the shortest round-trip-time is selected</li>
<li>Since shorter prefixes have many more candidates (spread out throughout the Internet), the neighbors for shorter prefixes are likely to be closer than the neighbors for longer prefixes</li>
<li>Thus, in the prefix routing, early hops are short and later hops are longer</li>
<li>Yet overall “stretch”, compared to direct Internet path, stays short</li>
</ul>
<h4 id="Summary-of-Chord-and-Pastry"><a href="#Summary-of-Chord-and-Pastry" class="headerlink" title="Summary of Chord and Pastry"></a>Summary of Chord and Pastry</h4><ul>
<li>Chord and Pastry protocols<ul>
<li>More structured than Gnutella</li>
<li>Balck box lookup algorithms</li>
<li>Churn handling can get complex</li>
<li>O(log(N)) memory and lookup cost<ul>
<li>O(log(N)) lookup hops may be high</li>
<li>Can we reduce the number of hops?</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Kelips"><a href="#Kelips" class="headerlink" title="Kelips"></a>Kelips</h3><h4 id="Kelips-A-1-Hop-Lookup-DHT"><a href="#Kelips-A-1-Hop-Lookup-DHT" class="headerlink" title="Kelips - A 1 Hop Lookup DHT"></a>Kelips - A 1 Hop Lookup DHT</h4><p><img src="https://lh3.googleusercontent.com/nQBrB7OpWiWRNfSWgWmLoguYYXdQfRoPlk5dg4ld3alwUUqMwJWdkzJt-Ilh1hYWmIBAhH1D2D4-wIp-BQtYJ4X2TY8dSW7IEJGsY6mX7l81Qmgr6h1KXq5AHuuSKU9dY9Tbg9l5KOS9bslaFVOQjrB8d3aSwRq9RQlgyzcU4fgv7EGUTINgJAd0o9TqnMLobI3PuGpyfHSNdg_RjG6ShDRJgPr0Pqmg7E0UGW62UDwZqMchwnf1nWnTLEKc3U27j7vcQWo3476UlYS5TL6yRUwRRh-irKj7ECB8J7CCDFCNUE1VzPhlqJpbpFfZCYyAPBq_UjO9ydtmeO0RjaXyps9qSZRLLdq1q4nZO50dmHuBgVeK-Gdzh6dYzyATWZWEoL1CMwfc1x3jq-pDIKqiQIfIxhRZfzBfPO_VLpB1QKOzejtNGaIVerCbFHWLVFwYPeJa21EWGXOsHdh5wyw1e9NLQkfD0CNPTDXc1LrFCb8qHZ575LtLof7Ws91IeWcsiGxn-vdl9wr-CUOkgr9i3erngUOxwZSL8AiUZCQh8bzQeEf26W7dJSDVbyyMPKw-8yO6D8xT7qm2cme0iUErHucZsqKxTVk9GX09ZgYpEHUh7y-cy1qOa1Q88cWgNyM0jNoiNIanU1LUhEyeAWb85UUIq680GMx8Oj5u4yNHiA=w773-h485-no" alt="Kelips"></p>
<ul>
<li><p>File can be stored at any (few) node(s)</p>
</li>
<li><p>Decouple file replication/location (outside Kelips) from file querying (in Kelips)</p>
</li>
<li><p>Each filename hashed to a group</p>
<ul>
<li>All nodes in the group replicate pointer information, i.e., &lt;filename, file location&gt;</li>
<li>Affinity group does not store files</li>
</ul>
</li>
<li><p>Lookup</p>
<ul>
<li>Find file affinity group</li>
<li>Go to your contact for the file affinity group</li>
<li>Failing that try another of your neighbors to find a contact</li>
</ul>
</li>
<li><p>Lookup = 1 hop (or a few)</p>
<ul>
<li>Memory cost O(N^(1/2))</li>
<li>1.93 MB for 100K nodes, 10M files</li>
<li>Fits in RAM of most workstations/laptops today (COSTS machines)</li>
</ul>
</li>
<li><p>Membership lists</p>
<ul>
<li>Gossip-based membership</li>
<li>Within each affinity group</li>
<li>And also across affinity groups</li>
<li>O(log(N)) dissemination time</li>
</ul>
</li>
<li><p>File metadata</p>
<ul>
<li>Needs to be periodically refreshed from source node</li>
<li>Times out</li>
</ul>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/ar6rT0PG-tFxrdSSnWiKsxS82MLrhrMg7XX-KceL6YSRyr5WcXQBo-daxuHYXdF3Ol7jCFmJgW0XDn-MZYestCAW2OttxAzD2SBtHoOMVngWgGRtBw6I4vQB6ZYQP-ervSHpv5Ye3nJuZFnb4IBJ8Akm9brEkY_p8KrPQGXMCE1TE_UlY5q2odY7FBB07vQLdZWFbuOJFYFhH7pa44WWBvYIZxvGhsPY6xkcjcoCwFJVHzb6LlX5xCoszL3mgm0U05fp98g6GV1RWiG_P6_YTrC1E2nMEQwFie6wrf9pP-nLuHw4B8loN55deDllRoO6i7k399UQIk47RA5NsiMDTRqJy2C0RDdQnLkwO-isvlqHJpye65KYpsGJHydzgZboC7TpKt4HSzoZEe6T5efx6gWB0UGdhBOUnssKeKQjS2D1ULivhA9Pdv0NdArbdKHoEG8ligJXPO04kvzfuPUTc_8FWzFQ0qs4zEdiakatD_rWGBd8Cu4MDI-HzKrD0xlBtrSnDWX7R0WidcvEZSujr5va6g-lDMmHo8Reozqif3OnbTcRUCp-ErChHXHkFp2gIbKRmap1CYdrjw-psiIFd9Jg496r4-giI1-NJKeki9Obn4cpDHUIAQxSdYKuwe1UcMaH_aFz54G3Uxlb8GDYmyT2Xn6IB4Adp-MjgjEy0A=w685-h762-no" alt="Kelip"></p>
<h4 id="Chord-vs-Pastry-vs-Kelips"><a href="#Chord-vs-Pastry-vs-Kelips" class="headerlink" title="Chord vs. Pastry vs. Kelips"></a>Chord vs. Pastry vs. Kelips</h4><ul>
<li>Range of tradeoffs available<ul>
<li>Memory vs. lookup cost vs. background bandwidth (to keep neighbors fresh)</li>
</ul>
</li>
</ul>
<h4 id="What-We-Have-Studied"><a href="#What-We-Have-Studied" class="headerlink" title="What We Have Studied"></a>What We Have Studied</h4><ul>
<li>Widely-deployed P2P Systems<ul>
<li>Napster</li>
<li>Gnutella</li>
<li>Fasttrack (Kazaa, Kazzalite, Grokster)</li>
<li>BitTorrent</li>
</ul>
</li>
<li>P2P Systems with Provable Properties<ul>
<li>Chord</li>
<li>Pastry</li>
<li>Kelips</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/20/2017-weekly-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/20/2017-weekly-1/" class="post-title-link" itemprop="url">好久不见的周记君</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-20 22:47:23" itemprop="dateCreated datePublished" datetime="2017-03-20T22:47:23-07:00">2017-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-03-21 08:57:55" itemprop="dateModified" datetime="2017-03-21T08:57:55-07:00">2017-03-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>周末和不同的三拨朋友有了不同的三场聚会，主题也是各不相同，分别是Hiking, 生日趴以及给已经回国，短期过来开会的学长接风聚餐 + 桌游，感觉还真是很久没有同一个周末参加这么多聚会了，和大家在一起非常开心，有幸能和这么多优秀的人在一起，也是激励自己继续努力的动力。</p>
<p>除去聚会之外，这周继续完善了博客的方方面面。先是给不同的版面都加上了索引页，借此机会也对之前文章进行了分类和整理。在接下来的更新中，相应的内容也会被整理到对应的板块分类，一来方便了文章查找，另一方面也可以让接下来的博文更新更有针对性。</p>
<p>虽然说目前自己还是挺有意愿坚持博客写作的，觉得这是一个非常好的记录和促进自己学习和思考的方式，不过三分钟热度这样的事情实在是屡见不鲜了。于是呢，决定在博客名后加入(Beta)，也就是试行版的意思。能有Beta版推出至少代表了一个好的开始，任何产品的不都是始于Beta的么？坚持做下去，什么时候当写博客能够真正成为自己的习惯时，那就什么时候升级为正式版。</p>
<p>从某种程度上来说，写博客其实很像计算机算法里的Dynamic Programming, 当你学到或者想到什么东西时，记下来，下次再遇到同样的问题，就很容易快速提取。Life is short, so I need dynamic programming.</p>
<p>此外呢，这周利用早起的时间继续学习Cloud Computing Concepts的内容，每天学一点，一周下来也顺利完成了一周要求的课程量，并且已经把笔记以博文的形式发布了。自今年年初第一次尝试早睡早起开始，到现在已经坚持两个多月了，经过这一段时间的体验，真的发现生活规律了很多，也能更从容地安排学习和生活了。很庆幸自己在2017年伊始有了这一次尝试，如同写作一样，接下来依然是贵在坚持。</p>
<p>最后爆几张周末聚会照吧：）</p>
<p><img src="https://lh3.googleusercontent.com/gVLOLVPPe09wyoiQtQ-XK7T5N_JL5Wv_QP43BXtMgdf6kyXcUmtBzddsLVYiLtCXIEdj57u_5kx2mGqvBmkTVpKJJO55b_FsAwGcf_lfe0Gsm3MZqICo5Ob1TWvmRHfdAbQNH2vm2a6f6AhROksAitsqGfL_KQAiVUIrDlCxGrSGksqH2jaLZzsAwDBlXAeKFaQ21INlXyA2ayIYPww_TASJCvnf3dA7oX1ZRIhE8xzV_G093kZbq404VR1mfIDWiteCeBMEamtk0uN65_uQMDCgA0h1OEQwWJ4tlOWo6QIq1xs50yPuK7qJj-PKUx0bX4cocGALB-kF53ZhqrEkkggXqkY4R9kJI2pjBuJ7Y6kKyPSUxlqmd1sJVF9D2hlyVYdOsh2h32o2KKb73jZc0MLS7m4pWJBnjKaOVXePQ9sQPn7Z1Jt8qkgrTzGRbBgBEQYgIFvqmVOQXjygM55dtlGoOu11ZP5dDsCaN6b0wZW7JQt32_nsSP1-x_aH2jTJXUvc3PHsFw2IPhK770NV3_22OC6Y8SvZu7zEpHHjiuhsfC2pBOoSS9KaDgzWtQBMJfuDNpS4rCkt-mKyCXvubK5H5RfluuLfY6EaQqsyYP_aIHaCwXWZFqBwRIHfTs32631ibj3wz8mCdVPbwVijbduNNU5plzQyZtB0x3hziQ=w388-h1356-no" alt="周末照"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/14/Cloud-Computing-Concepts-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/14/Cloud-Computing-Concepts-2/" class="post-title-link" itemprop="url">Gossip, Membership, and Grids</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-14 08:23:37" itemprop="dateCreated datePublished" datetime="2017-03-14T08:23:37-07:00">2017-03-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-03-21 08:58:14" itemprop="dateModified" datetime="2017-03-21T08:58:14-07:00">2017-03-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Class notes 2 for Cloud Computing Concepts by Indranil Gupta @ Coursera</p>
<p>(更新于 03/19/2017)</p>
<p>This chapter mainly introduces the following two building blocks for distributed system (in the cloud)</p>
<ul>
<li>Gossip or Epidemic Protocols</li>
<li>Failure detection and Membership Protocols</li>
</ul>
<h2 id="Gossip"><a href="#Gossip" class="headerlink" title="Gossip"></a>Gossip</h2><h3 id="Multicast-Problem"><a href="#Multicast-Problem" class="headerlink" title="Multicast Problem"></a>Multicast Problem</h3><p>What is multicast?</p>
<ul>
<li>Sending information to other nodes in the group;</li>
<li>Opposed to broadcast, multicast is more restricted and only sends info to a particular group of nodes, instead of everyone.</li>
</ul>
<p>What are the requirements for multicast protocol?</p>
<ul>
<li>Fault tolerance</li>
<li>Scalability</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/L_7hHFT-OEtwK3K6GAUqBGWVo3ND1lFM--mUzCCy4-iTYq78jDX_7HkAAK4-b4kQttoshXc9T1QTsUQcO0dp1gDatZPXMo50tIHIZCIH9p7-0WF2zGMZpJK7vZk9XFMfErhccaeQtvYEgc1r8IB_ah68oFqv7-gIvlqOtKCHGgAsOcp1IS4N7xbx9RPxEJZ84hBAjoPX7hdHtjLIA6-e5spMtx8oBmmAU7DuCqJGuVhtoG_L6mXUkvWd_S9wqhd4PiNtpT8kxJ92MoyK1EtxiFqFsFm0TqUzkss_EnlfAZkDxeG9FPSwxDqj13CifzooL5cHfYXxpCptv16uVUYg1rMo2ul6EdXxGDX9Zpd1v_O_x0sTAmZfXgu0RjF4cQBMQ8I0_X68FKkFkGWNsW6rfk7KnJRepiGhq19CE-Ncf-TRDwKxDJ4FAjTVLQh31cU_Eu8Y77kePgZYk4ZmlAX0mmsmVfYwyxfP3HreYJnPWH2z29jU2Mer0ChsY2FYJKLNBcG11Pi5pEzAybRdUnSoJ_13V1a5zt53gIlwQiiktK2ZWSUC-nIr5q4eK0UKxnoOFBsOVawgpQ-41n07oAT8PI_FlvApJm_DIaPob7i3-yTdhRhl2dbyZJhnaD7xzIExhOtt1FEB4Nn_PYJnhGQ_zJuTZ4Q6h4SlgqyhqQrv3Q=w969-h509-no" alt="Fault-Tolerance and Scalability"></p>
<p>One of the simplest ways of doing multicast is a centralized approach.<br><img src="https://lh3.googleusercontent.com/iGKGaDBr6k3b0lN5284Yh6zFnl6mH0ixIYZvq9uun3xY71FsTWOXapeRhExf3z4jVTOinKWEgDkpBoe71QbU16b_oMP-q6Opzd9mkyaznd-9rzNIcljp9UKG1EuqH8IUtEc1SVGUmsEmrZkT_WBkSXk0mjb66UNjDAaMutXJiAoU_w8kvTusuHG1rWth-FrkxHq5DJPiMDGeMMJgTeSbwiRvL7KEZUWU79G9BNdVbNu9RP53WATxL_e6bOOfqqxGkzQowEbsPU8gPZdNbTiQpCar_IOt43TtHJmBgqMeDZZCqmgeXW-WUqfIkiNyiB5wUztlflE5rlz_7tOQwOvLbVzMksY8chJjTIwIt9AmsK4vhl4hdpNLB8Wn0z5W96awlNfyYlEUpSaCuPBoc7g8bfGTBMLZvZlPmlwnkUy4UuXjMTjQsQK0Qa2urNahOqTMtU7_NOfO_uJSLfYpNt7PszecpkFCj9GSNbxnxZlTFhhpvC-TqHxcYnm5ptCu0dyyMVAqnQWywb8XGWe3sdVHR8iwwB4WtrISehy0mWeT09qWwdkba-U1Ux4dX1YgzwJ7r91-fTVvhZ0j5VdKl3CtiR54pwKzYpGn8qtle7sfYyFjY6Wod8BvPUUfV3gCke9CoWPfpsTvZpyCgsWdUgtSC-rmQRNWNTI5BqtfsmiAyg=w934-h491-no" alt="Centralized Multicast Protocol"></p>
<p>Problems with centralized approach:</p>
<ul>
<li>Fault tolerance: if senders fails, all rest fails;</li>
<li>Overhead is high, O(N) time complexity.</li>
</ul>
<p>A better approach, Tree-Based Multicast Protocols<br><img src="https://lh3.googleusercontent.com/a-zPrhEuMA4jMnaYOGfg3dMgB6DnsPoUk0yn2dZ_kBlldDFj8cwRf2t6CZ-SXgoFKusheiHq3nHJq8enf2EwIdjUSFDsJfhKuHYB7k2ot19jPunVAaHjKs9FDvfuveaYrm0sfUzcJBvbZme7g6em6eQwSb9Hf1icCOiTORD5xMu1BEWqt_hz80YDniukw4Fc-4IMPDy-L5bAfuAAsERi0UCpzEUhKDP_d3n70Eph6NximkNKFdwNB_UTLkuA7mjVfsyVMbQgArUxhwWO03rYLwSQ_tsPdXeYxo4YyNvvwWakHpwBcDLnTXbOG0dpGnuPJlyRvNwHfEwUJAwI-tdWOI-orHHcNvy0FjXb-rGaFO49Hke1tpfYAKwadAQttDvkxbeRM3YXDN3zX6GeKWo4Et9NbASsRRV1tBXyk9Ztu3YC9VmhHR399-SkfUb0cOCD8KC_ktFl2oXktg7gsPXXam9_FWG7p4oJgZZq_hLdAOSV7EcGP0VnKb7mo1_81rjb6lmRM6xaFLouAnfb6IpdnR_bBL2H-lk0-bIkt5ndY_aVwZmkq0HhbdJN3-3YBDCDTsXdknyr6NbfajxNDXuELg_d6p-g2iBPFC67qcnW3Iwr-gix7vZ8cs75waEfZxh1uh_rnpmfr8whwBRhjJx85SROUloi1DiHaqaEMwndHw=w1086-h604-no" alt="Tree-Based Multicast Protocol"></p>
<p>Tree-Based Multicast Protocols</p>
<ul>
<li>Build a spanning tree among the processes of the multicast group</li>
<li>Using spanning tree to disseminate multicasts(Latency reduced to O(log(N)))</li>
<li>Use either acknowledgements (ACKs) or negative acknowledgements (NAK) to repair multicasts not received</li>
<li>SRM (Scalable Reliable Multicast)<ul>
<li>Use NAKs</li>
<li>But adds random delays, and uses exponential back off to avoid NAK storms</li>
</ul>
</li>
<li>RMTP (Reliable Multicast Transport Protocol)<ul>
<li>Use ACKs</li>
<li>But ACKs only sent to designated receivers, which then re-transimit missing multicasts</li>
</ul>
</li>
<li>These protocols still cause an O(N) ACK/NAK overhead</li>
</ul>
<h3 id="The-Gossip-Protocol"><a href="#The-Gossip-Protocol" class="headerlink" title="The Gossip Protocol"></a>The Gossip Protocol</h3><p>A gossip protocol is a style of computer-to-computer communication protocol inspired by the form of gossip seen in social networks.</p>
<p>Periodically, a sender will select b random nodes from the group, and sends them copies of the gossip. B is a gossip parameter, and typically is a very small number, e.g., 2.</p>
<p><img src="https://lh3.googleusercontent.com/EbrnuPa6Uyoyf8UFdii-RaYIS3Sq3cSDN6aRPKiRJYRNw1KX0e1oObPHv4xlAJ1piYE00V5Nz-GvN_kFbF8GIwpKsD5_fFhr0aoVL3EAZ4QmZgu53eMYXAi9Cj48TBki7eHrb6iKdPaNYkdAqO31RTi6-2epDYdN5_dWy2Wbet82CIIWVSK-d_H87V_u7q4YZR9t9emQZSDQIkzBmctkzwduBwbzH30mMf_CYSAyduXs38LtqQ8LyukG469CxWUNar4rSlovLAUEGrckrHAB6qj1CbtQlTypZiS7KDT_2tZDdob1pxMPE0G1ciq7E5tUkSxgFL3M3Qh1k0ziMZgRY-NQMJN-JdKuX7PKe_CDp2gRX03xK1dz02JLM_EN1R6DR7nIdkNvwVlfDBz5cGBtF89p4_KawaGb4XDMidUzpfv30liynnFB-GRu1QjhzzUVT6JuNHVmiJz_V-N_W5KvQmAkhBp8jcZCAAVQwxtNR8QVEx7wCvsgbGMlcU41Pmj0FzJqEZSZRZhDB7iUjq1T3lbCl-DBTpVh-7OBJvzfyvagQkvYDVSyth4vhe3hcSMS7Ro9ZtcEBsnMgKv5dOBjwMeOVqUfRIZgnV3tToiv4Lb4w8L-GOjJd2CzIKZtaHiiBZY0boWJ6_3Kqfv350pa_Xcruqp4QTsCKL3zuxTp4w=w690-h415-no" alt="Gossip Protocol"></p>
<ul>
<li>“Push” Gossip:<ul>
<li>Once you have a multicast message, you start gossiping about it.</li>
<li>Multiple messages? Gossip a random subset of them, or recently-received ones, or higher priority ones.</li>
</ul>
</li>
<li>“Pull” Gossip:<ul>
<li>Periodically poll a few randomly selected processes for new multicast messages that you haven’t received</li>
<li>Get those messages</li>
</ul>
</li>
<li>Hybrid variant: Push-Pull<ul>
<li>As the name suggests</li>
</ul>
</li>
</ul>
<h3 id="Gossip-Analysis"><a href="#Gossip-Analysis" class="headerlink" title="Gossip Analysis"></a>Gossip Analysis</h3><p>Claims of the simple Push protocol</p>
<ul>
<li>Is lightweight in large groups</li>
<li>Spreads a multicast quickly</li>
<li>Is highly fault-tolerant</li>
</ul>
<p>From old mathematical branch of Epidemiology</p>
<ul>
<li>Population of (n + 1) individuals mixing homogeneously</li>
<li>Contact rate between any individual pair is β</li>
<li>At any time, each individual is either uninfected (numbering x) or infected (numbering y)</li>
<li>Then, x0 = n, y0 = 1, and at all times x + y = n + 1</li>
<li>Infected-uninfected contact turns latter infected, and it stays infected.</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/NpSovr4yV8-wykhh47j8mcgef9GOfHY_75tUxslOq3evkiDrarZbGwK4JpEo2dZXmL4vYR5gn33yuhMgwLX5uYHQdirtn7y08sa40FaFEmkXFJdAMWcDAsK-1IYOZmop-O7cpx9MomEAbatE6jX4Xifh1b1Xb-vZqEt7SUTvinHs6wu_3hRrvmMMbe_Qrk6E6_nJmNZ7mZ1zJX04IQ22i-55fPFbaKi4ToDlkH9tDGwM-kurVc1I5wklWXTjOB8k78n0EdffUG_UNxxtNq8qH-3OlM-_S14ibMZvGt7hPCU0qKlR5oYECBA3zbPj4cDYVsYpzKIyDimE4zoN4BvYXN5eOR5az5NDgr-0J-hmNeYOP9SrDaMv7592_kZTpiLc-lrQDc9MXxQHrL8oC7mFRBk533r8yXQCph5Ez02Wjx-7DzflLGzyQjxdECSJS9OVk7RpTdtKHvEn79lBvgcdogHzI1seqmnTmp_CMfP7jf1SBDcAScmkst6ZRSIthA3_37l5V5bqrqz5NGceVRsrnySqsZguJUyCtm_ZpXavjlOQ4ltRMd78JgcqphQWz0gKF80iVzCYXFjgeGMOuCgaRyrMP72JJuYQa2xIVNBMrpYFxPo7RPqAHPthY36t4DYDMB7PFmA6NH9rQaxI9d195mrF7GEpUA6dbwqkB9AqYw=w1504-h644-no" alt="Analysis"></p>
<p>xy represents all possible infected-uninfected pairs.</p>
<p><img src="https://lh3.googleusercontent.com/CwP-Z-ArAtD8P7SSnsOsvnXeerZbagIEpUWwMAlD_0VlwT97n-wo4F6ukD3q8zkt-adBoc4YBm6rRMGknJGbZNDNGQY_DudDW5XoIQUOJ0QpGO_sSxsNtRd5bBIVELuHa3FdhwqVj_EY0gPmMZxVubddQCmrzFLdLp1PBrBwtW1ekIXNpjbShAdlbZJjC_cvSWHeTwURFppogOdYaD_V8EhucYad85YZMqRlEA-iHXXwJwN2SJfjPnv3DUTxDYyHkqIKv6gIm7NEOcDqyJOKGLz3buCWgvYqjdHPmR9NiBcT18eoJ-Vnl8sv8UtVC6ZbWZ33QYlGjx8lygIwjG6Fu5fWSQnEcDctyUw0aRf5z829w3Kr5KlvchExYhre-QfZvEaQseHXKuYo1DTUmMeTVUF2s-EhPt53d15gShk-FNEiZjZNF-VuhpCobBeatR3ocOpDcGv7sb_fRW2MLyQVlmwCfo804rMnxu939CpQwMO_pCS9_f4uYI7WYsssUG0C4jj45or2OrZAZjyOtKg5qhrkbmUJGe9mQp8zk-fQ-Iw21MV1HL0nEylnie91VluRC190gU_L_cqltXaN64lZKVqOy11R9gNpTVp_ODXucJcA1fV00ILyyo856CYRx0plo6hc2F9dfLD2BvzT0M6jJcZ-dZGUkGYR2GytZhg9kg=w1387-h603-no" alt="Analysis 2"></p>
<ul>
<li>Log(N) is not constant in theory</li>
<li>But pragmatically, it is a very slow growing number</li>
<li>Base 2<ul>
<li>Log(1000) ~ 10</li>
<li>Log(1M) ~ 20</li>
<li>Log(1B) ~ 30</li>
<li>Log(all IPv4 address) = 32</li>
</ul>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/4kNgYoaJajllNlsq9oq_Uw2JP3wdj3WXBymX4oh_rkr_nyO6YsMcWBmiDkK8zGsTOHPIKN9yU0XkmpAAEyWCRjtmIh4HeY-CEOO-aJzR352ZAA7mQd-TWRkuw53QCi2KrWxMUshYcYLYwXLQUpKncnOkW4kvH9z0DKdfid4npnSEGARY5jVfRgbpS5yKJpf9XCVWk7vk0BcN-OwFFXM6mbx3htfP1J2q3QW6RXoxJWJ69HxHwlb4NNA0CYmT4AFsaENvfoAXF2kEhesI6Ndr0_Y0tlDX12ahA8u6AcaYQ0jTQPpLs7fl7-245W1I5utaTq3KiOdrhB9XkJ7AMjYuuWklj6c5oFwhI-5xEhd0j2Xaige5QkaVIcyG-dF_fGpg2Oh-3QcJq-LNa5OLSy4jHQqrTh7_Unwo8rXvN3cJtWWqGR9gi43yxvGhM41HnoJbao2tJME5NY3tNGkJRh2kRJ03NgdydYmmce5pro--R3aIj0BZxJGDIuzlCNNgY3QDhQMTxQwl4NdqZgMmoQw5ZAqNE2xBjby_yZl2hOxjBxq4iu8eUD5443lqhWAV7SSwXVJcdce16uZs6kUigxvGksn-Sy3btZp3B2ZWCf0oX_ItXljyoQeJfkmkJKvYEKdbXi-99w-IgOdXGujCHEfTLAKNFmndbvM5Ox0kKed4cw=w1161-h525-no" alt="Analysis 3"></p>
<p><strong>Fault-Tolerance</strong></p>
<ul>
<li>Packet loss<ul>
<li>50% packet loss: analyze with b replaced with b/2</li>
<li>To achieve same reliability as 0% packet loss, take twice as many rounds</li>
</ul>
</li>
<li>Node failure<ul>
<li>50% of nodes fail: analyze with n replaced with n/2 and b replaced with b/2</li>
<li>Same as above</li>
</ul>
</li>
</ul>
<p><code>With failures, it is possible, but improbable that the epidemic will die out quickly.</code></p>
<p><strong>Pull Gossip: Analysis</strong><br><img src="https://lh3.googleusercontent.com/-bS_pDxZcAn2KdGdGlI-fhesApSpI0m4IbxMoxi5uAFAu6q2lkIw8MUsbrRhpzFocmWIea-ZawHbcug-D8nfClxzs-82ZBK9e7HAGg9UzPg-RgH_IKyaWN-SPsjORVOQkaqq_Fot1FEfhnSyYP_Ecu4Df7DmNmy9ivGB08G36nA0PKReExwz0ncdx_gMLnDNuWzyE8JHJ_8lX0FeYhEoPDN9LwD9qWHvLXjmXUXhPUIE_o5sDC2xx_-jwb-G-9NdltWa2sG3rFr0dFz1PbwjL7ySdPzG_ZvL62g6UW2HXA9fSHnlxMB6GgBWPOrjPN12brrU8J_IW5_C1uWMb2oU4apmQI8xe-aLYZUEscnN-x59pmYD6m8aQSUnA2YvSK9ApZX3lCP069Qadc_qTFm_TQ5mnNgtSJt2ezDymV191oyke-csSeF6rx00WIMVqIrApeeFFEy4cBcVExsdBgTngVBUAqmEv19DpyAp9fsSOLWUDi7sM7eyL64fWTibR6r-EOZRgDxcNC-lo5fjxOCbTAPSpMLXAHaqWdTLsE_BuLhpfto5GsNrsr5l3TlByEYu5LIaRxFPWlwQDoLXDyyMeQflwCD1zQt97S6LeR54375RhdJXqZmU8i3cZuMATIhyn1pX8Ihe9zY9mVtbiSBHInTO9GyFKE4ofwYVkTL8Qg=w1039-h620-no" alt="Pull Gossip"></p>
<p><img src="https://lh3.googleusercontent.com/YdpmtEundS6HNVvq3IX8DGRvgw-mx0xsSkCBLVl5IlxjDmQsFadWYjaYlpkbwhLOG8zK2SSkhnglKCMUY3ejAs7YLajdQsaa7WEkE67l6xRRi2xZVd2o6Ixq_rl1J3lQsJdM1BL1HRlmWyAEupW2TVEhNNPfEZLZS0KjnuwPB_2Jkzusbo-H8IwvIcN-PjZ-fjlttMCOMwDE6hQtlp7LoGRYuyMRMTcSvWBKp8UDKGI16oh0Pjsb7ibIXnrnHRIoE88Z2MzjGKHLUAcDVXEGd6Iy21o-F9Gp4cdjScKp7sat_rQBXGmzqZlbdqf1QdOBaQlIs52X4huWhKBlLZAeH-opmZi6hcIhMgo0PmCGMdRTUviNIWeY3fc5K3wi-dfuN4GDBJlErR8Oy2kcriborK0M9LcLkhkO1P4waWPh2C7-yu1RFQ9OLLihH2FXFXtfWjsGMi8cqdPClWylL6BDz1FA9fOkyDM7uOXm8vrbqbeMaX96zt6bIJV2Cn4NHF76wu73IS-jl9r6xYsw7H7Fd0D3FmnyvnWZLfn40vALco3GpNNmFnVS2nk7FEtjEWJr7fshWW_tM8sm0XdrRrdJ2_TRagx61Ws93nNQJ7dOe-ssDIso4rS5HQU35z7L0cRcFKKyN2Erspvdf63tzC-w7Z6YkNIW30D_jGHo0uuYhA=w1034-h634-no" alt="Pull Gossip 2"></p>
<h3 id="Gossip-Implementations"><a href="#Gossip-Implementations" class="headerlink" title="Gossip Implementations"></a>Gossip Implementations</h3><p>Some Implementations:</p>
<ul>
<li>Clearinghouse and Bayou projects: email and database transactions</li>
<li>refDBMS system [PODC ’87]</li>
<li>Binodal Multicast [ACM TOCS ’99]</li>
<li>Sensor networks [Li Li et al, Infocom ’02, and PBBF, ICDCS ’05]</li>
<li>AWS EC2 and S3 Cloud (rumored). [‘00s]</li>
<li>Cassandra key-value store (and others) use gossip for maintaining membership lists</li>
<li>Usenet NNTP (Network News Transport Protocol) [’79]</li>
</ul>
<p>NNTP Inter-Server Protocol</p>
<ul>
<li>Each client uploads and downloads news posts from a news server</li>
<li>Server retains news posts for a while, transmits them lazily, deletes them after a while.<br><img src="https://lh3.googleusercontent.com/Jxz9cSmiucf1j2CQMPfZ3CKVZF1oGZvI02y2rOblcAeiI1DBn5Plo_q6fl28SlPmImdV63VdEy1xjlnmc6FWpio90Le63iO579tQpwoBpliH5PJ22rsnAcBVbImas_kf3yoL1s1Vwd_tH7-YVYgwYwp8NybAGo604LTuXHMLNM1thfFn4-u0TkQBSv030O5PtKRJsohTWeFDrYOpxMJ0Y2AMU-lcx1f5cZdeYv_6mgJEDM4Uppyee8OkhbGAhbpKKL1Fx7qyhNOXAC0BcpsGo_1lMA6pNnHuoWeDaVWeIg88Ism3ZAvazxWLamEiOI9KDUd_kLwDmkq82wnez7d_yyQSvqkHuxeHvvrSRrHScFeCKdgA2O7okDPuX8P7AVErMSbYam34dqF-LfFBF5wClsk6LwF2doTz0vol2jAZGghXjG4NjfwcvMymd227EoWIxOjDFtqUDjp5yTyT4zgb2hG3tJkfX8NxpnJvhI-tyBfvynrGEYKFu82zLsOhpBDmOI-EOBl-KSRxzeU-xpprKfGMGhPtxrk3ZvnaZEbGYUAYp-oPRsfODxTVSKookhWckbelnpnAqfq3TjQhXm6epWj9xYpIC6tQYkbfRaXinT4k_PqaEpV8ehopGLRveGxyJwWCxzBTb5Fuh8TiwGhTJmXvsbiXPV6LyI6w5gW3-Q=w1552-h531-no" alt="NNTP Inter-Server Protocol"></li>
</ul>
<p>Summary</p>
<ul>
<li>Multicast is an important problem</li>
<li>Tree-based multicast protocols</li>
<li>When concerned about scale and fault-tolerance, gossip is an attractive solution</li>
<li>Also known as epidemics</li>
<li>Fast, reliable, fault-tolerant, scalable, topology-aware.</li>
</ul>
<h2 id="Membership"><a href="#Membership" class="headerlink" title="Membership"></a>Membership</h2><h3 id="What-is-Group-Membership-List"><a href="#What-is-Group-Membership-List" class="headerlink" title="What is Group Membership List?"></a>What is Group Membership List?</h3><p><strong>Failures are the norm</strong></p>
<ul>
<li>Say, the rate of failure of one machine (OS/Disk/motherboard/network, etc.) is once every 10 years (120 months) on average.</li>
<li>When you have 120 servers in the DC, the mean time to failure (MTTF) of the next machine is 1 month.</li>
<li>When you have 12,000 servers in the DC, the MTTF is about once every 7.2 hours!</li>
</ul>
<p><strong>Group Membership Service (Membership Protocol</strong>)<br><img src="https://lh3.googleusercontent.com/0lSZMTpCdbfukb0W2qy3gVf93baG9mzQrBll_VjXTJ8Td_8yQZSSRL80-L-aHLLSSmZonepBXLwEkdCbXA0MDcIxxCq-Mbb-0mpkWD8QZNhIgEbjud-Y3IdecPryk27KJpTiXyq0gPyTu5ci2HGcsRaZgW2mKlRdqfDjjEvVyabxcsQriV563lVAyUgIBHf9qEQOkn1oxcbT4Q_XLrysHJ-QXbaK1R2RlpmMjt4VFoRSgvrGkqsLmonJMcC8Plt0ganAs_lFdGqls_dSHJysDpsCqOWJpquRUhCAJDixwnAfzC_-h0hFcKxd4vLVaI2Vw1br7Wd7IpIulpbX7HKlHGY8BTOGVCwUUPUw3wQMcAQ15fk0X5_wJqN3rCxwjADA93D1tWhS14SxsmtJjLQ2kJaQXm-WHtGybPfxuyJbL5XpLTkuhyJBrFGJx1heuUmnTVuEwUEid_s5FI2_AzsT_ryvWYl-Xx4WIEYw1e1XcPrEm1MgzXu5N6x1yOdej6eT6bH1-caw6swkIJQeev6adPOYsBbjSpenN_FIykb6u3YdTEuiiHR1jDjT1HmJlenHVE8fGRkN1Qi1oJV6eI_snPiNMIeu1pnusz7LDVkO89W0EuSUDqZDYN4lrZqzmxY78LzRfs0UsJBd0uNwXRHsbeJpMP8hSr8OiVbvO8cbPQ=w990-h328-no" alt="Group Membership Service"></p>
<ul>
<li>In each application process <em>pi</em>, there is a membership list that maintains a list of most, or all of non-faulty processes.</li>
<li>The membership list is a <em>Almost-Complete list(weakly consistent)</em></li>
<li>Two sum-protocols<ul>
<li>Failure detector: a mechanism that detects failures.</li>
<li>Dissemination: disseminates information about these failures after detection to other processes in the system.</li>
</ul>
</li>
</ul>
<p><strong>The flow of failure detection and dissemination</strong><br><img src="https://lh3.googleusercontent.com/yI2nCBtceXUVH4jDI2ZojE4T4O4GBT2mNztSehJsaG252JhtlSC8VF7WPA3gn5dKGJh155coxkHXX6i7pr7JkVC1ehMLs0fJFxGI2QN7_IhwBH366sSNWgopjOc7NSJD6rLwnhdY13bn8mtzyDkNiqPHqlEvbc0dk5rYzECxZl0xf2PvxVIqrtoAWhZzPDMwMT11mgCMWMR7j3O7ltxMuhGxfPe4t_0SoUZTE3DexPbogQjIaaEP95Fy7fuWU5UBaf_lCCzdDRSz5gNAIszcmlYETvllFZgSqQrCH5-06ZUkTEMrN-AIx-TO2G_7wslInPNNQmZPaqONMICDJMTWbDF9gn3WlINMR7wIpvclg-GYA2W8ZQ9JHy9pucm_J2mk7qco7GaXwbmq8t_5KdS42eGfUA92EwuIVZrEqcMmHsGmxAQ1u9R22YAi4U2SivrMLDWZD_JjNTSo2WLtV_f08xOKtI5nEEU6TQEJzoybpjmbBQivFSd3Fy4K38Dggf-r-WGgym8jHI8ek12VhqK2nNDTSDmiQb8qITIfPLa_e5zutFKlip-lkuX-hWmohDU5ZqpTtA0FJCbHg1GWvwFrtOF0RK9iF6RAV3J4hFSWEPZsyDmnkSi6SnQOQYHyjf601EWPJDJ7K2IPg6XSOODs7NTKkqlcpBxLaGy4wCYe6Q=w990-h566-no" alt="Failure Detection and Dissemination"></p>
<h3 id="Failure-Detectors"><a href="#Failure-Detectors" class="headerlink" title="Failure Detectors"></a>Failure Detectors</h3><p><strong>Distributed Failure Detectors: Desirable Properties</strong></p>
<ul>
<li>Completeness: each failure is detected</li>
<li>Accuracy: there is no mistaken detection</li>
<li>Speed: Time to first detection of a failure</li>
<li>Scale:<ul>
<li>Equal Load on each member</li>
<li>Network Message Load</li>
</ul>
</li>
</ul>
<p><code>Completeness</code> and <code>Accuracy</code> are impossible together in lossy networks [Chandra and Toueg], if possible, then can solve consensus!</p>
<p>In real world, <code>Completeness</code> is always guaranteed, and <code>Accurary</code> is partial/probabilistic guaranteed(almost 100%, but not exactly). Because when you have a failure, you definitely want to be able to detect it, recover from it, and make your data consistent again. You don’t want to miss any failures. However, if you mistakenly detect a failure, it’s fine for you to ask that poor and victim process to leave the system and rejoin again, perhaps at a different identifier. The overhead of doing that is less than if you do the reverse.</p>
<p>Here are three failure detection protocols.</p>
<h4 id="Centralized-Heartbeating"><a href="#Centralized-Heartbeating" class="headerlink" title="Centralized Heartbeating"></a>Centralized Heartbeating</h4><p><img src="https://lh3.googleusercontent.com/EnWz7E6gfc_ozDudBKkrKqduZGC2TohywwywXXts03hWhUsJNzzowXd6sLQpw33VeLIhI-JaaOCUt959lcIHMG8FMPiaiFLngZWghn73zWZNYBfkjjxFw7qN1Yjq83C2znsnHfBH0OnfzOVm2AaWZ1cop__B8quvavAjd4sba7oqafZ1oI9X1zlHMJ655wDE5tK7RvV81Dy7PjbeFNjxW7JRRCOvbAnm8JIl06faSQJxq7-jBg_hUkyyOI4VS4CeiGMr6g-ICkX6UBKh7GIDaa5hAdah9x_b8F3wVBLRoX3VOv0HSHC-n-vStKENbNwH7XanKeLPaOVZ-sozSxICB4UQIi9Pa0KGDJhM98M2xkhKwM_YGgRRJiuJ5i1nVuNs7dULF_rvx0HVQ74Fd9xpHhsDj23s6P7b6xEh3pv8Z9lFuH5kabGt-cSD_gYgi5q254CgzR0NZ6sNqOoxlhzdEgLhUzpAaPVdN5LWPBr3vsQMuyxT2lgsbJ4uZGg-nTH3BVS9b0pS5QfUJXfIWgSzikM4sDKzDoQmIns3f8s1Ojhk0sfYqD7BGxAalz8w3ChqrI2bkAlFA10on_piugYsLC--JgpgKGzqfVS4jd7B1nFVJ9mb-WbcUfJMb9i7-LHrAHJuv7NcSWjvxrhLf3ipoMLVpTAD34Ck7mZf181Qbw=w1249-h522-no" alt="Centralized Heartbeating"></p>
<p>Cons:</p>
<ul>
<li>When <em>pj</em> fails, there is no guarantee about who detects its failure</li>
<li>Overloaded, hotspot issue.</li>
</ul>
<h4 id="Ring-Heartbeating"><a href="#Ring-Heartbeating" class="headerlink" title="Ring Heartbeating"></a>Ring Heartbeating</h4><p><img src="https://lh3.googleusercontent.com/3Tqbd9Ph6sWH0mIl1CsWUm7xze3dP4EszbEJ8oZDwd9nV-QzFOD3hdPV9cUk9VA-zpQmhiHl2Cye84rg8YogXdwC4SOoHo-5IlMAxYWrSudRcfTqefhmC9PxYGvJ1MMdyZZf2YI7LdOm5mje9OhbjGhtJQHFu6kvD_p4ZVaLrwbjhjaoL3_Be2MjMXevSyRwoNd7OiIL0yzyeDUuLzrRwqjdJYXuaZhvbP3_RoL6I47APMc8i5_A0I4GwoR7fJgstSRUyKlE7ppyKTB2KumeLA79c_IeU5ra7CR9UdQ2nMDw10pmINTyfnWe48c98Lj9uCDpiAKp1Z8GlZBuN0R4Kk9EacwRnwQEVSfJBJ4JTXt-XmGqK3iAbMWaHPSV7bIxyNe31SpcU0Keu_hfMuDB9tXUA6Ai3hVALsFYMFO4AaYmnmLnep_Pg_xFTmo4nCuxK3xoYBTu645eKN15dym0Q7B4tpx4Pb-NH3AhcwKEDLMu7u5pEdxS91XLYJkdHRTpvree1Jy24ieopHqovPW32Fv1yOs3m4k-RDahljnuaq3vRRY3Kz--KEm0UomCtmxtcGVyGjAT7YKzq_QD7hTwg-fY7OQ5inZzykzhXWce5EEdTEywGQ950bPzSvfDrJWG9vZjjdbhe8TK-vxN4EkRaClA8IeDS7eyO9H9OHmogw=w1249-h517-no" alt="Ring Heartbeating"></p>
<p>Pros:</p>
<ul>
<li>Avoid a hot spot, better than the centralized approach;<br>Cons:</li>
<li>Might still have some failures undetected when you have multiple failures, e.g., both pi’s neighbors fail</li>
<li>Repairing the ring is also another overhead.</li>
</ul>
<h4 id="All-to-All-Heartbeating"><a href="#All-to-All-Heartbeating" class="headerlink" title="All-to-All Heartbeating"></a>All-to-All Heartbeating</h4><p><img src="https://lh3.googleusercontent.com/KfoZUNOg4xYnr1fwebulo6X80KmEf1aobujAP_VP0pJBTWbFHuMyuXpNjsVun9-reIbeJNPSNfFCW5AuqKR7EpI-tvdt7lFmRLWWlFqBlHVKKwhtGd2Mno-yMpQ6wEUhFNb9wWgvihMS1g4Vv6uTx03q59wZYe0vyUv2s6gSG95mjBIl6YB-FfPGbuMDFmhOHPLnjMUSQvYzizHYzeZPrdIpkGNP9SDWpqBx8C409qwEnxj3oBUJQqmMp56B83qd11kNl5KVLkw1u4lCl6r_Z6cCGjs1LjRLYG6Qh3f-x7y6t-9NFiX4AhduPtSN2aBOsSw_YKJXxx5OdAxpJusYMYmkvzJK37UmTSgxzBCJ83JX5LQuewhmKZXFeFNwBZM5wf_q-tEU7ah9wKVgOsxVSRF2izskO3pBn5SepggfwSefboVu3uYi4wCdGUW8Fu38EMpiSSrdb6RJgG8zcFvyBqx2WHDD1zqihDHfMPL4_g7PAFVwVTZ5bCZhRTEXxGuTpsZ5dhlQqdqzueqBvh58aj-iXUtQUamWUnbZVQNB6TsdW4HWSiA2WIYLcoINCI34FNSdYdKx7kWYim4aObiChUr3nFWpaYkczpJd3G-3jPqNKbq6UwLopjnVT3lWf0GDXseHZljyp6ptEkI2U7cNqiwm_d-8IaTbxILV7_yBlQ=w1249-h578-no" alt="All-to-All Heartbeating"><br>Each process pi sends out heartbeat to all the other processes in the system.<br>Pros:</p>
<ul>
<li>Equal load per member, well distributed across all. (The load looks high, but tactually be not so bad)</li>
<li>The protocol is complete, if pi fails, as long as there is at least one other non-faulty process in the group it will detect pi as having failed.</li>
</ul>
<h3 id="Gossip-Style-Membership"><a href="#Gossip-Style-Membership" class="headerlink" title="Gossip-Style Membership"></a>Gossip-Style Membership</h3><p><img src="https://lh3.googleusercontent.com/-I-ViG1FQQVya5UK1Wm8Dd5M6zAF1-OZb1tBpY-0zOc5XcpHpwri_11qQ6xWXz8DS02haSQEobVSjXxpNY9tC0KXgdisn4-N_fdJL6HEO9kQK8Q_Ykf_f2UgXUjgz-IUhQ-Z0foqxJo1Xd0YzxIqy5is0VUhttbf76nquNVyRGElmORxu4nZeObEPyE1sJgb5i-88OQss0qOfSPDBxnGDcjOU6sg8GIu_XlFZ9ycw-JnEs96disdl8PKzgDp7pHo93o_yeamQ08ih8GGl1vsIyjUhgBoqO5x90qXBbQEgTbKHmPhbdIB-P3SZyZ59szOG0CaJvh1K5prQz0yxKrfyJvfg2c0a_y89Y7VqKlFJ0W5PlOmA3vj1exObJwQj9-KuHv6M2WhuE0EVbPxw0QK2EqSRoELKmKCiTlPwOk4rXDkkVZqmvhIAp8g6KVNus8HbcfNUZt-0Q28Cjl43AkqipDuh8SqIFEByv6cjqEGzCdFyd9RXPJJPS0Sqns5MpmAjMc-TMGlsT9kvqY09GEBVmIWcLNBruR5u2RRWodDrXhIYFa1lN4WbJpp9dGMRpAzCvu1OuUyNsXHYzctJ2TM5hFDzIW4ubvt4FKd4CwkrbCu9-1g0oL14WOvY261qtymXBY9dr5xcvw6GXGgK0Dg9CViGR-3MAgWdInZrsoTfQ=w1105-h466-no" alt="Gossip-style Heartbeating 1"></p>
<p><img src="https://lh3.googleusercontent.com/3epbIenhHzsTU_UBrTeQuTDTckh3Aq_N8dQTQxGFlq08K5n0a6cH4MhfeI0DEo5Vu9BgcdafEUYNwmP5gW6S-vFuL3A6In7yJFPgZWpfNmwkVtbi8OShgp7gFZ8PsUY3zjqkccm_fzMP6h7AP96La4mTbaTxx54sHSQgD1M2aKtxKt3m0SU89aZFake6jNGe0wdMhEBjxqH1ZF5rxqhG4-f6Jq66CmuMuQLxk3ufUWSNohctvooXfUd1JXfwk6bXb49xaqX91sX-QH36oeZQMTE14VttxWihbfQAbW_YCuikSFR0fsckdCcmtTwF_K4q9kEFKj5iaRuqWxV6RVerQJKK2gvt7iQ6XquB7aE6JowhlaIBvt2zatzQeQKPKsUog93qx6BZ3sLLBqj6gqH6TxqvTok2tZh0ff7PM72FOuIBqR61NNuCj4K0RUriWHz43SHe5JMQznebAU3tMec2SpnmQgNyMnY3Y5GWcBO0WnWkpXO62g9ajnyzlcxuCQ8z5ATOdE0GO7yT23vODTbmny2QH0pBrXzhHUx4gcOghjF0elqCMN9-N_-peTVc3pyUXzv-Av1ZNN8He2S8iH5natrZw8oh_7xrU1LeU7eJGJmOHzZv3LuVwJNyRtxQQybBhRdSC_T3y3SE0xAgWnb6g4L5fY8hdpQ5bh4n1gFHkw=w1105-h463-no" alt="Gossip-style Heartbeating 2"></p>
<p>Gossip-style Failure Detection</p>
<ul>
<li>If the heartbeat has not increased for more than T(fail) seconds, the member is considered failed.</li>
<li>And after T(cleanup) seconds, it will delete the member from the list.</li>
<li>Why two different timeouts?<ul>
<li>If you delete the member right away where an entry might never go away.</li>
<li>For instance, if process 2 has an entry just failed, and deletes it. Then process 1 may have the same entry not failed yet, and sends it to process 2, the process 2 may consider it as a new entry and add it back with the new local time. With the ping pong behavior of gossip, this entry may never go away from the system.</li>
</ul>
</li>
</ul>
<h3 id="Which-is-the-best-failure-detector"><a href="#Which-is-the-best-failure-detector" class="headerlink" title="Which is the best failure detector?"></a>Which is the best failure detector?</h3><p>Optimal is derived from the main properties:</p>
<ul>
<li>Completeness: Guarantee always</li>
<li>Accuracy: Probability PM(T)</li>
<li>Speed: T time units<ul>
<li>Time to first detection of a failure</li>
</ul>
</li>
<li>Scale:<ul>
<li>Equal Load on each member</li>
<li>Network Message Load</li>
</ul>
</li>
</ul>
<h4 id="All-to-all-Heartbeating-Load-Analysis"><a href="#All-to-all-Heartbeating-Load-Analysis" class="headerlink" title="All-to-all Heartbeating Load Analysis"></a>All-to-all Heartbeating Load Analysis</h4><p><img src="https://lh3.googleusercontent.com/O-l6oxNOi0qQM_vMdfRIIBc43dX-8h1yR8J4lijgl256f3jxLasA-2343VzE8kb9FX9FhVaAC8GGL3qQ3HByo15_8n27mXzYH7ciKhsloVS9o3oKld5aOHJA3E6vHe9-jD4o7a8inaKzbBIWGkF1iza-YZC-MluM1Mg1RUhd85ML2P1m0JOFooSl4qd9U9brBrqQmSrhXYhDbw3otRUbMphY7MnCdVJQh_qdJPNu43oAZQuTRW1zkhROlufqPa4ZpFZsBcJDGfMCvv7uKHDNh8YRXdbGYgAZirUGKdRGshrdR_gvjx6PsEn_KaxhdnPXzOIuVgyA0_cW5BGJW-hMky5-wLLwKZsZvnKXtmmEX27fsCEvmxLrDkAFSFEsZPIaJ-oeeZD3tLuYZoNfIRb0q8irc8d_waqEk6YYVvtB-YSCAIoqgsxTeQ6c873PXU3Yp2dgA6mO2a_vqOEB-ZSPu0Mct78Y00Mn-UBs5Q0VaopDmu1Vwqyy6ZZmyFICTVQGMzhcoenrNNM-uyOLFv2wfSHIprWN8GL6N5SFW8RhBTDWcmkrrFOGPosPKGxcdSmdsF1mdkJalqPVhBsSJD7vy1g0hp-IkvLG6kXEJCxO12BsbbfkZ4KXLgCVtppmvA7GVwOTeNBb2Z0DX-D-I-lqaKP_fwyvgl78943v2DcFUQ=w828-h347-no" alt="All—to-All Heartbeating Load Analysis"></p>
<h4 id="Gossip-Heartbeating-Load-Analysis"><a href="#Gossip-Heartbeating-Load-Analysis" class="headerlink" title="Gossip Heartbeating Load Analysis"></a>Gossip Heartbeating Load Analysis</h4><p><img src="https://lh3.googleusercontent.com/7voCt5CxStRmleomYLpCH7Droe4bi-imoFLTXDzsyd528Q0LubHAZF_kciHF6PPCIHo4Tu66G8pT7VGNVqJhvgwtPYfNy5Jd5JfZn9InszpkOWnQLt7Tiwc7ntm3-8C8L58SV47L4zFLfyvNZeiNGU_1ZteWTJbt9IwfTtwsdnuc3qfhuAjqhmkdJXqEV7Xh7pqA6BRofFkTya7bgVoTzdnOwOGR5wRXkZ7EAeuPL-FrHT0ZkxY2pM2KekZuOkPu7JspDDm9LiFCUMwoQ5GoQbCRrhUvcShxlqKkQm4pw2ATwBJYvfGLJPnPoCvX8pMKqWimdQpsDrHtL-PHmSb5IS4FLN82nQYAhQ0799_7q-KbJKrW2U1JI7NIMtQR1JJrt9x7NLwQcSFosioznCj_niI1IAiMNTR35FM2VBj9w2pdHa_oGMA4ajpLVUulluy5RNDoFTQ4Hh-UzXFyRjVX_jK1Z8jWkHVYDtQ38x8jwDsft9xO3x1QCVCjw-Frkl6KflBIYYrHDL31XyDrCcPMgnlei3Y3UEtQdZlsOi15b80MsQ4U5M0li7PLp9kwvkQlwCJ3zVbObGXVUsfhmeK988xd-l9HHeSiU3fuDQ07UoNpBBZy56YQbFIOWOVy9att60UguJ2kW7_CpKQvxvSsvYp9mzuO0fH01faTm7L6tA=w828-h347-no" alt="Gossip Heartibeating Load Analysis"></p>
<p><strong>Conclusion</strong>: Gossip-based heartbeating protocol has a higher load than the all-to-all heartbeating, it’s because gossip is trying to get a slightly better accuracy by using more messages.</p>
<h4 id="What’s-the-best-optimal-we-can-do"><a href="#What’s-the-best-optimal-we-can-do" class="headerlink" title="What’s the best/optimal we can do?"></a>What’s the best/optimal we can do?</h4><p><strong>Worst Case Load</strong><br><img src="https://lh3.googleusercontent.com/rhAw6FGaWhUHR1bYYNA1A2IBkbZFCZdLAQb8cvrl9JtVZLyOUkrcS3JgiKuZOkSiWqw4l9T-bOc9f7I39xQZH1V5QzOwYjbTnt1m74yJeheqtZGbpELByIqEtlVgSroRnrsgtqC8pPOP2yHnKn32u8NN6vCHqK-HCeQqCogyWurv6li4K7KI9n_C-ICKpvjJMa3nVBi6K1vKnNsTj8jeSmT6FfZj2MBWSW76nIw9nhp97pgyDC8THe6wngbvn_yjhhOZb7d3FmKtJ2t7apG7Ib7j1bMFoyTKFJcBBp2sqKOIXEZqK_kc69d6Hpu_byZs9vhHT4wgL-VqEMhMn_UtEKKOtChJ580Sjaos8Ziv3lwIGjplS-vm-dchTOMHSRw_kSxMxyWvcSxckbc_WTepyN7HU-23xPeX3mU3MAtECNHeOkH3Ox31aCP87VFcpj77SFqL8ymx6SX-RvAZl_yOKKFpzcv_IzD2gziItCzWCP9cV_nH_WjlwoQQXS0U3wuhzluK50xqwzsOpvQy9VjZXpsJOtvm8qk9r65EYln3CkTl-QsV1wgnlgWnKtsSG2JGFL5I6NKIj7ODQnpCYF2jl2BWOd5z7rLVstZkryKYswtE_bMcI5ad_2OO9-hB1lFM5BjKG2GrGUZq5XjaeCIGEe3qCDap5j5Y604lzuJR-w=w828-h355-no" alt="Worst Case Load"></p>
<p><strong>Optimal Case Load</strong><br><img src="https://lh3.googleusercontent.com/U4Onb3oayMfPRSjA2Os49lp9gQkW9b45PmC9jzUzwr6upIJHvRCj1ySLEd7XGQOHU5Xa-vmJizsVBq0YnyDhTUc1zu6jMryWXEFkM6On7HAMJO_eODifxPaJadgiv7yghk56I9ip50PEau5IMJiBSkpdqOKTUFpX_IsBQ7A2IzvUpJKZOoiGMLOHVTr3ceMvgWwAiF9GD3xxC1vTnRp_vvZoXvCUgfd-69DY2Rd_a6hqJr5CkBm8PD78StVpJhf9yBxuR4fVgdSwAJZNvGoJyvDJNgvYB3GjtCXvnZeSd8Pji_vNJE7cSr5lCm6UdQsQzdThV3EX1oBN7EfKXZjIo6Y7AhrwbCmFUtiFkVfuqEj12vXhYRNDJL5Va3e3O-scxfC65OgOTPYQ5qL7RCtzfb0xDvh-Xvlw7eiLRC0AtjpSfNO7F_grtZbAKMljteDsz28QFoExJgCfkh8Otfuqa2VJkvPGDAqEGaKOduFdOx95oKs7k6qQnb7mPp1NbAFVCpyiopCMOr9wRhu2wuRBGQcJptgrql__fb2be1PWnYe12sOKTm-FVQCvHCsLx3w6cZ746uztJWQuyq4-JreVcBpoIV8QxjJHcf3f2mAJCmIStIPZf3Q8N8eUezw9jDdNC9DAlcTXgutxOyGc-H8APsSgQ9dXwWRmYqYh8cxAbQ=w828-h543-no" alt="Optimal Case Load"></p>
<h3 id="Another-Probabilistic-Failure-Detector"><a href="#Another-Probabilistic-Failure-Detector" class="headerlink" title="Another Probabilistic Failure Detector"></a>Another Probabilistic Failure Detector</h3><h4 id="SWIM-Failure-Detector-Protocol"><a href="#SWIM-Failure-Detector-Protocol" class="headerlink" title="SWIM Failure Detector Protocol"></a>SWIM Failure Detector Protocol</h4><p><img src="https://lh3.googleusercontent.com/39oV7t3ZOD7xAumWYGetDu7SLu93znYs7Bzk4MLKXjoFhMFbIh1G8SnLnaRR0v9YdzKiYcXLNCCFtvzvMOKiVb7SS5uud4s5daHSErLCvSvJz354MK5JGG_mlyeMsTdt4ShVIdTzhqm5TUFnOGiL7RItVMiORZ4sZsq-wIJ4upHT7awNxUXhXqZfhdYwksYakTok9rRl0K7qZY1wna2PbnxBI0_JgIHFG8LJeR7070gkLYrX71ueswXl1g_H7OQkfUq7AJrOdj1hJbh8jt8e3phNwUlGCEsEjJi9SC3pZRedcS8lWEUWCbZo8gHqXXALBY9hXUD7tOsPjYR6WO8FW6NcyZOIxPczBb4Y__lkuPujiCxHymoGCTmeIXj2YqsyQf_I6BtXQu-2LHVzHg8n-deCdQ2bmJUJHIzTclYYrPBboJ1WrkqvB6gIJS8-L_WvRPdw9LwUmKITnnjs71BNNM8Srlb6xGUhg97FqxJjbmQsVGFy09vOlokCZvPXbTyRVvHHZTWD_mEyCq1pyM2w8TB7ei0p8tZp13CRfE9360uiTj6wPT_wp2HONXV9Txlzs3aryGlJB7YkeXSyHBKMgdZ-enOH6ZC00OJ06fsEheWnAW1syuWNUyoLRxq3iMV0VLA6Pd4rvcC9R9yIXi9_yWKjTvV2afzLLZALfOGKCw=w761-h318-no" alt="SWIM Failure Detector Protocol"></p>
<h4 id="SWIM-Versus-Heartbeating"><a href="#SWIM-Versus-Heartbeating" class="headerlink" title="SWIM Versus Heartbeating"></a>SWIM Versus Heartbeating</h4><p><img src="https://lh3.googleusercontent.com/Bepw0l52MMlCi1Zw5dwuFeyPjVwI7jDTeFYUlvgAw8UJBF6BDhx0y7CUCrf8OvJOvQAaF4vvGYyochL-KF8jCtkPljv9YAQ6hBWUyW4Zaa_7dN2sQR1k9K-j59e1G-7-zlTqKHN1dOKnEOwmks_mrqdwmy4Xvf0HW3VZ9SzdhhjdnAdlgD0Nwt9OSaf6PjprzQl4iDL4L9BZkulWX66W2YwMtCmBYlket9zF0kHhnzKFtchDWzF37afKQMmPeKvKJtzBlr47VnOkalTKUO3n6YxkUumaVkrVhzFssFmFub6Sd8FukZ9_g8DpwL7Vfh6rUgz08Ex3eY1TqALU1YmYatQoFKEzCM22cIa6CCHfeLLN5db_-SSspLWJsBcd7au_OR-dTlM0eJxsoDEhYX9-WDWBgiZjclIpyefZXn0aE7PBOMMnHPGSinQfRMyrgUpcTmIG1A27DJPhNuUmS7cxFO2l0q_rpv9lNwY9lsR9aw9kKBAJJaCMwigONm5ID5FN2f15N9sSp7xsWpnqU7j0EJoxrtzBCWP9BDS24-e-Lqo9dr-11nYM04jeg-SV2UpPX3sLvkox-7ZgKMwNLXYhGEUMkVvrhidMz1B2zQjHrNnLePxtqdIlWehR01VaMKnnsrTfJoeoPjXl2PHj8V7JwuWyGoQNwJA0CkC7IVj54Q=w891-h377-no" alt="SWIM vs Heartbeating"></p>
<h4 id="SWIM-Failure-Detector"><a href="#SWIM-Failure-Detector" class="headerlink" title="SWIM Failure Detector"></a>SWIM Failure Detector</h4><p><img src="https://lh3.googleusercontent.com/N4gLqzn3s3qV1FwRC4vV3jpR7vtGzwrHPIVhbyRMBER_yaC2To8Dgfzs9TwcR8lqwuifNgrnJDIpD5O7beNNIKIwzrlI3x11L2V2tw8pwcmJy_fB2BgmRy-igoDQ4OjHmJIaXwq_AQZ_TUobkNuJUSrQ7nDmV-tyFvi9UtN9coN8MNLns0flOXOa9wix_Rx3BDt7mLRx8mB50rkBMCt6jBcdDCEIF0fr_fsM8JyG0an509gEHlHlOI5LOTGlT2DDuKbd3FLJajuGDco8B0ZDPHTp5uSRjCMln-n-e9q4FT86n_5J9_kBTvhW6CjeEiEhmKLWR_oxDXauMrGJpWltkTZRJ50ov5GRKyGP6Ok_yC9U30OizjaNAZdsp7qYBM9xu6-iAnITHkMtQlEkKlbbcGS9-v6x86NQdwdoirWBQsKtaY70Jr5qZNxKWoKbAB0bRkGkDC1vePMoKl9kWcWmKiBvc8sBXVC16eyDj_6ezFg2qgw32VG2ekP9M4teiK_fojha_UfedfXGkevtJynAEoidYy6vmucK4DTzHI5chvz4cc6YA_jT23mJjPbWX5DqEfkFLXfZ6JfqNu8ers2MuwPqEHv7vwesbJFQwA7U8SpNSsNt94oCKMKvta6sQ-I5gNNyjn1TdURS-MZaBiXJvUOOrJSLiQ4Ll1NjfIwoNA=w891-h594-no" alt="SWIM Failure Detector"></p>
<p><strong>Accuracy, Load</strong></p>
<ul>
<li>PM(T) is exponential in -K. Also depends on pml (and pf)</li>
<li>See paper</li>
</ul>
<p>L/L* &lt; 28, E[L]/L* for up to 15% loss rates</p>
<p><strong>Detection Time</strong></p>
<ul>
<li>Prob. of being pinged in T’ = 1 - (1 - 1/N)^(N - 1) = 1 - e^(-1)</li>
<li>E[T] = T’ e / (e - 1)</li>
<li>Completeness: Any alive member detects failure<ul>
<li>Eventually, every other non-faulty process that has this failed process in this list, will pick it as a pinged target.</li>
<li>By using a trick, within worst case O(N) protocol periods</li>
</ul>
</li>
</ul>
<p><strong>Time-Bounded Completeness</strong></p>
<ul>
<li>Key: select each membership element once as a ping target in a traversal<ul>
<li>Round-robin pinging</li>
<li>Random permutation of list after each traversal</li>
</ul>
</li>
<li>Each failure is detected in worst case 2N-1 (local) protocol periods</li>
<li>Preserves FD properties</li>
</ul>
<h3 id="Dissemination-and-suspicion"><a href="#Dissemination-and-suspicion" class="headerlink" title="Dissemination and suspicion"></a>Dissemination and suspicion</h3><p><img src="https://lh3.googleusercontent.com/dogZe4DEAHoMWXOaQ7r7iOAh3BtnyZCd4VFI2JBZVDMerUNatygWo1ua7BIWOQrL0GrzCMDKGbNDswBY6-pyT2FcwwAXHSnJ-Ccsq-ZsiSBDF9OykA0EXU1QA5yiwOHX1abCfGtf5T4-MNgkBjPuukd_5A6mo2cO23lFvTygdWw5vVGoz9SRXNqiMzwi26uYzgeSMBROxggLPkcvDdrZSpjkFm0XeWvKDZgvLd3vRtwf5p30UM-_PUfwo_P0UlS1pNF3THzqWiIIJYyOg_4eo6-T76yrCMYUz75Vn6nD1yo04MNTEkX5nGD1pIjRyrp8rSePS5WxrEuGBLaY9LNHaMNES69VvkjNRYSx8jaT_3SljH_KzSJ6XFYRS6beP6sKz_QSyq0QlfZ7KoWuWj-46_2WKYROTTgbNDf79jZKfGNXzIKCUcB6G8WcN9dQqazdsE8F1pH8TBd0D9GMoOAY-WfnmtJB6cOiwCCLUQs8IYLDrWMnFj4AubJJkntUZXYCoYb8bquQBFXiggphKzAv0H8CSbCVgXl8tlo6T3befhuIhvrQkyui0VE64OM4cCBfx48NKjymRrrwWcqWo-AhPkAJwpBwaj5rWE7nxGShkUMfR_yoTpn5Tkq-swPOc3A5bg6de4m-ceKwx0jymf7yiWxeTOYHcxEH3k1UPN9a3Q=w868-h518-no" alt="Dissemination"></p>
<h4 id="Dissemination-Options"><a href="#Dissemination-Options" class="headerlink" title="Dissemination Options"></a>Dissemination Options</h4><ul>
<li><p>Multicast (Hardware / IP)</p>
<ul>
<li>Unreliable</li>
<li>Multiple simultaneous multicasts</li>
</ul>
</li>
<li><p>Point-to-point (TCP / UDP)</p>
<ul>
<li>Expensive</li>
</ul>
</li>
<li><p>Zero extra messages: Piggyback on Failure Detector messages</p>
<ul>
<li>Infection-style Dissemination</li>
</ul>
</li>
</ul>
<p><strong>SWIM Failure Detector Protocol</strong></p>
<h4 id="Infection-Style-Dissemination"><a href="#Infection-Style-Dissemination" class="headerlink" title="Infection-Style Dissemination"></a>Infection-Style Dissemination</h4><ul>
<li>Epidemic style dissemination<ul>
<li>After λlog(N) protocol periods, N^(-(2λ - 2)) processes would not have heard about an update</li>
</ul>
</li>
<li>Maintain a buffer of recently joined/evicted processes<ul>
<li>Piggyback from this buffer</li>
<li>Prefer recent updates</li>
</ul>
</li>
<li>Buffer elements are garbage collected after a while<ul>
<li>After λlog(N) protocol periods, this defines weak consistency</li>
</ul>
</li>
</ul>
<h4 id="Suspicion-Mechanism"><a href="#Suspicion-Mechanism" class="headerlink" title="Suspicion Mechanism"></a>Suspicion Mechanism</h4><ul>
<li><p>False detections, due to:</p>
<ul>
<li>Perturbed processes</li>
<li>Packet losses, e.g., from congestion</li>
</ul>
</li>
<li><p>Indirect pinging may not solve the problem</p>
<ul>
<li>e.g., correlated message losses near pinged host</li>
</ul>
</li>
<li><p>Key: <strong>suspect</strong> a process before <strong>declaring</strong> it as failed in the group</p>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/m_pzGtPdmyCiYLM6B_Xj_hxgCgZ2MxBHsJcOW5WHuFc5xNCplSRZUvxbPfjS2Wcw5t_mvOhyxsvzTUK4xDR7SPuPYozaQ8JJnR65UUc8LClsIyFD1fHElwaOVJO_TPkdKpbibhM4C0ACwwXVtTzeDvTYl4RVacnwAZLzmzyRQtLsalPpbvMwPRze5ki_v1o1wQ5n5YcG7MguXFzYO_ylL225iCHmVw-9I48ewd1e7GGAr7ucoS_S04Vz3tz7eyaF8lyqmcurqpU7gj4edPutsbknIteyu0eqLttWQBu2m_5B4zMrCTqXQ_H2DADuIrxj92r5Ho01WMDtLjP150LtFCL8qZ5iJ3TGUl01BYSANnAsjqaH1XNgSqIsStg0rQLPq_TFwxHqQqCq3hLF1mnqPBPZFwE5v0jwd0SeIWHrM-ImlOdvMDhaNuJcMGn94aFp-v-vvv5fZTu0qniZZ0rvJ8YGvNlRoE5JZAJlghdWbZxBnx0bWnUq3t2awAqFnF5EI-pvEZTi9Tk-osRFafzVpTHYY7Ar5EvIMaceVjjfpzj0_nfNmDLPwL9TepVExfDlpIkmCYySfsXni7yS3DTumvKBQFO6bbNqV4iQHiW0tWs4e74o7DDw1sjkU-GnM6QLA1FpYRECvSWH0RF_M78C9235-dUWBLYtlF6K5oziiA=w868-h362-no" alt="Suspicion Mechasnism"></p>
<ul>
<li>Distinguish multiple suspicions of a process<ul>
<li>Pre-process incarnation number</li>
<li>Inc # for pi can be incremented only by pi<ul>
<li>Typically Pi does this when it receives a suspect Pi message.</li>
</ul>
</li>
<li>Somewhat similar to DSDV (a routing protocol that is used in ad hoc networks)</li>
</ul>
</li>
<li>Higher inc# notifications over-ride lower inc#’s</li>
<li>Within an inc#: (Suspect inc #) &gt; (Alive, int #)</li>
<li>(Failed, inc #) overrides everything else</li>
</ul>
<h4 id="Wrap-Up"><a href="#Wrap-Up" class="headerlink" title="Wrap Up"></a>Wrap Up</h4><ul>
<li>Failures the norm, not the exception in datacenter</li>
<li>Every distributed system uses a failure detector</li>
<li>Many distributed systems use a member ship service</li>
<li>Ring failure detection underlies<ul>
<li>IBM SP2 and many other similar clusters/machines</li>
</ul>
</li>
<li>Gossip-style failure detection underlies<ul>
<li>Amazon EC2/S2 (rumored!)</li>
</ul>
</li>
</ul>
<h2 id="Grids"><a href="#Grids" class="headerlink" title="Grids"></a>Grids</h2><h3 id="Grid-Applications"><a href="#Grid-Applications" class="headerlink" title="Grid Applications"></a>Grid Applications</h3><h4 id="Example-Rapid-Atmospheric-Modeling-System-ColoState-U"><a href="#Example-Rapid-Atmospheric-Modeling-System-ColoState-U" class="headerlink" title="Example: Rapid Atmospheric Modeling System, ColoState U"></a>Example: Rapid Atmospheric Modeling System, ColoState U</h4><ul>
<li>Hurricane Georges, 17 days in Sept 1998<ul>
<li>“RAMS modeled the mesoscale convective complex that dropped so much rain, in good agreement with recorded data”</li>
<li>Used 5 km spacing instead of the usual 10 km</li>
<li>Ran on 256+ processors</li>
</ul>
</li>
<li>Computation-intensive computing (or HPC = High Performance Computing)</li>
<li><code>Can one run such a program without access to a supercomputer?</code></li>
</ul>
<h4 id="Distributed-Computing-Resources"><a href="#Distributed-Computing-Resources" class="headerlink" title="Distributed Computing Resources"></a>Distributed Computing Resources</h4><p><img src="https://lh3.googleusercontent.com/wJkApIlpQHJxeKok6fK9Xl81M0QegAwkNUJ2sS1bw6Xxhh61ZoJbhOFqz273BvHSWR8SrA2wsa1w8uN8x3gPLbwzgEBto0ZKeWmz7u5vTAHxEqB6P3XTxGRoS5h5qUPDQDjXSW2eUsyaqUi5zyBmKYnwtwcmCPH4Jzw_iIzFh2HIfwwECkGuf5hHVcJmuCHVq01leDK4gyzBY-czPGgB6KrbQegDCUrrXZe1kFejRsD5nmHQxph54oOMUVwUarKHJwJ6IaaCskLtUJm2XS-G-RgMTG58Ujy2c9s6q3uBoAlfuOuhff-4IsDIAlFiiivEeWRXW9jwRW5XVyv_5_jqZvoUsq1p7L9wVqsm1Tt9fiEqNvduRZAjdXiD30omU30OR-ocO3eXVHs17n1SnfUcRb9nHJ2SgwcWlNqSCDhftzCMzZaUEflkm0PhNLwMjpLsvZs6RnEavR6l6A4Qq3CcS-VRtXyI7yEmvtc03ZzHg_aHVPAW3Ngk7j6f2kOhp97Tsicu5J7X-UwFRvBIiZwQDrUbbvg8OkBaoYSCPQCOFcc_4S2VS_VwDLrz-OEYpCpDZuLW7tX9d408E49zkE7bxFmII6BX_R2dhc5vedvdBs736Wgq99x7HHwQEk0kFLf47OzL1oN4H69dxl9Fyxq0fDHMw6g2Z0ZBt2v0Y45hRg=w868-h507-no" alt="Distributed Computing Resources"></p>
<p>For example, at certain times of the day, the work stations/clusters at Madison, MIT and NCSA are free and available for running your application.</p>
<h4 id="An-Application-Coded-by-a-Physicist-Biologist-Meteorologist"><a href="#An-Application-Coded-by-a-Physicist-Biologist-Meteorologist" class="headerlink" title="An Application Coded by a Physicist/Biologist/Meteorologist"></a>An Application Coded by a Physicist/Biologist/Meteorologist</h4><p><img src="https://lh3.googleusercontent.com/dh74d-bz_NYQwpp2T1GOQ1VpLk6wIkUVvF79tWzuXVt5hdOkaX3G2gxCSFlweNepdCV4cyrQanqdgYrsDynQvgrG7uhRQv3Ih6fbxgIcjwTIxY5EgEfeAC8nCMANtmoffV3nbamqnvjwoTWuhjDaTNiQV6uWTJUw6qeZCCnLaFPNEnaucwDJkuWV_fSx5kD4Fxq2OXkXk1-hlE8QbUY0hL_xQbkmzdcAOtgBkW0lv6F2F7EZ-B8ONVkOxOgeSkLlvQC-xaRIKZJzSwOF0kJS-cyEmuMlaRGR9WzZ5rvb-lhw-PsWH-m6DhwJlI2kukokLW8G_55qlatD5fcGck1mK1IcDsrbxkcqozweZurI3gHX6HKByQpJP5BmeU60kN5SlzEq-jMLAplgHI6M0KFj4KIXUJr7XcydZ1a8ur9wAYRbX2rjm7U03GNVUHmiU-yXlcEIzTnS5w0T8uUyQ6sQqjKvtj3ZtwSJddkLnRZvasIBQO4FDf1TFeq3DoDVjdk3jV97m1hgcC0W6goMUwMJ1-LGoKCedV6sFdA89pW1AE9ToQyNHNaCleYt100hWbvlBwkXCuvRc-D6zP5hQ8OtlTTcqQIkMdaf2kpsIvi_YMgf4Lm-KAnLppV5wI8bLwgj_KojAm9nJ8nqlRBJl1HlQhJTT5geMtC1aKR1uXHwIQ=w868-h511-no" alt="An Application Coded by a Physicist/Biologist/Meteorologist 1"></p>
<p><img src="https://lh3.googleusercontent.com/hd1V_S85bk2M_PTHJ8TZH3WKHDC33DjlJs6FiqqCyhfZne_iDB1UnKjRm4U9PQfOXy-P_KlVNN4uYU9QQaIOkCH0CMh_AstBLXm8m3Ku1XFy6EgyKip1lQ61oIeXzfGxoiSR4KlcEu7saiPpV0L7mbVp2rot3piDunQ4XVHLWHbEmNUxt_nMIz_ZL1mwhVUu4dTcd7nCsuxCbqw_lhznsPByxwSdb5b3n60L3D9FNWWrXPaClzk5hvdBHRM2nN1GurPEFvFCqdnpgaMC1jmS7AOmDBA76X_IIqA46qQOeAVCRZf3x-FB4WwP5Dw7c0JOa3ZhKxddTmHscI3Fj2VOSRbazxAa0G0bnG3HIWVT30Edd3F6cjYV7uExD8JL5IeD3zk7Soyf6-bXqh-GeYoGnYyDo5HPfZAgQ8EIf1DyKxppmbT25wQlUeBup1mzhIsWXoBlsrnL7Omrc04rBDM6pZtDOIV46axBTEQQ7LSwH8I9Dtd0NRafYVT2vevLgJ1fDOIbLBqr-qI1QNzYyilsxLTc_7PlDHGCeoMTuwIJAsolx2_nd1ufcfVYE9UUo1eFzkjM0xn9cSDJqQR2Z6X8ofTJex7uZ33Sf8KIfR324aUMpj4RDSJcWukPrexwh44FUXqCpD1z6XHtitzn5MC_kSA-9TWc0sqTYu_K7EXKJg=w868-h525-no" alt="An Application Coded by a Physicist/Biologist/Meteorologist 2"></p>
<p>So how do we schedule the jobs?</p>
<h3 id="Grid-Infrastructure"><a href="#Grid-Infrastructure" class="headerlink" title="Grid Infrastructure"></a>Grid Infrastructure</h3><h4 id="Scheduling-Problem-2-level-Scheduling-Infrastructure"><a href="#Scheduling-Problem-2-level-Scheduling-Infrastructure" class="headerlink" title="Scheduling Problem: 2-level Scheduling Infrastructure"></a>Scheduling Problem: 2-level Scheduling Infrastructure</h4><p><img src="https://lh3.googleusercontent.com/hd1V_S85bk2M_PTHJ8TZH3WKHDC33DjlJs6FiqqCyhfZne_iDB1UnKjRm4U9PQfOXy-P_KlVNN4uYU9QQaIOkCH0CMh_AstBLXm8m3Ku1XFy6EgyKip1lQ61oIeXzfGxoiSR4KlcEu7saiPpV0L7mbVp2rot3piDunQ4XVHLWHbEmNUxt_nMIz_ZL1mwhVUu4dTcd7nCsuxCbqw_lhznsPByxwSdb5b3n60L3D9FNWWrXPaClzk5hvdBHRM2nN1GurPEFvFCqdnpgaMC1jmS7AOmDBA76X_IIqA46qQOeAVCRZf3x-FB4WwP5Dw7c0JOa3ZhKxddTmHscI3Fj2VOSRbazxAa0G0bnG3HIWVT30Edd3F6cjYV7uExD8JL5IeD3zk7Soyf6-bXqh-GeYoGnYyDo5HPfZAgQ8EIf1DyKxppmbT25wQlUeBup1mzhIsWXoBlsrnL7Omrc04rBDM6pZtDOIV46axBTEQQ7LSwH8I9Dtd0NRafYVT2vevLgJ1fDOIbLBqr-qI1QNzYyilsxLTc_7PlDHGCeoMTuwIJAsolx2_nd1ufcfVYE9UUo1eFzkjM0xn9cSDJqQR2Z6X8ofTJex7uZ33Sf8KIfR324aUMpj4RDSJcWukPrexwh44FUXqCpD1z6XHtitzn5MC_kSA-9TWc0sqTYu_K7EXKJg=w868-h525-no" alt="2-level Scheduling Infrastructure"></p>
<h4 id="Intra-Site-Protocol"><a href="#Intra-Site-Protocol" class="headerlink" title="Intra-Site Protocol"></a>Intra-Site Protocol</h4><p><img src="https://lh3.googleusercontent.com/Xjjdwmlt_bwtGLd42uGRk_3XMgUwnNjQfqaac0MdE564asUIsqzMuncrnCF_teqeI1xwbqEhMyssSPIBbmknnb6BSIwrse2B04XEqlCOy35KVn9DUvub_k0zoH0slsvXsHDjutXe0w6Q3ar8HZmAV6EsWthtHTiP61O8A9YEhI3sWN3Jo-12zjPEx7M0VTIb3Omu2neAa9D0E2Vt6n1fPaZWXE2aJEtsgeVo_FwyOOUSMvJnPFoc6kVnPZpHzSiUQ4Dl1htmS2shHBv1KxIOvjl9Xr1rxD7nZM9K0bj_aU97nTQsPpw-gt5mnBlmGkgjbuTV08PpMJTUliroONq-Ktmk0fRAKRRLrT4V5yugoQgxJ0kTYtkI3bXLFDf7okslSPv5Zmhe_Y1Gk9PDW1jSPYqwKxylHOR0Xzs_JJQutVDNGawSGL8Jy5zam4963RfzsgB1GoO4r_3wPoGWLsGR9mrpIFz-kDeiZFP7mukB5jPLIyTwN2sc5_A96MvQDhbzFv4MwDzNnmB_eqRXoS65eJZELzgBhOGGFU-vMb34cPRfSmd3YLdyO0QWNKL7p2_i_-kxHygI_TLUWYRZRUYHQ9Fo-hjOphubjlsrzIosBNBAd3w7ALpAiGcjpM8QT-bPfD-isSzzvTMIJDaf-2DWkrp1tqCFun3Qsa1Bf02oPw=w868-h528-no" alt="Intra-Site Protocol"></p>
<p><strong>Condor (Now HTCondor</strong>)</p>
<ul>
<li>High-throughput computing system from U. Wisconsin Madison</li>
<li>Belongs to a class of Cycle-scavenging systems</li>
</ul>
<p><strong>Such systems</strong></p>
<ul>
<li>Run on a lot of workstations</li>
<li>When workstation is free, ask site’s central server (or Globus) for tasks</li>
<li>If user hits a keystroke or mouse click, stop task<ul>
<li>Either kill task or ask server to reschedule task</li>
</ul>
</li>
<li>Can also run on dedicated machines</li>
</ul>
<h4 id="Inter-Site-Protocol"><a href="#Inter-Site-Protocol" class="headerlink" title="Inter-Site Protocol"></a>Inter-Site Protocol</h4><p><img src="https://lh3.googleusercontent.com/LXBWXvc2VBfFCN5J11ybV4Bd1yMt8qnw17t7fOwS4fA7nLFdP9sWws0jyvAtkPVv2bzjPenMnb4I3EpryDB3Q7lZheqIo_Uf7XPyAFQ9dycfpl4T-bqJB8KgLvTwM7rX5Br8fIVz5qnCVAPjGf0BXNKp9mm_Jfj-YS3FYIT9yj9Tv4QqmneuBErMFaa7EArFmeeb3Ie0gqUA8dqC78YgI3o55sLBiMrKGq9Aysj14KpFCkY6BIhadH0pOI8Jf3c8SDxpGwVurLTqM1OLX480QlkHbGe5KrXXt-ZqcS4B82bs0oOe5Iq21YJtgzu3ufmE4jMMgXA9zsMEPsRgn4PiWiwxY9wvrR9dV-fFxb4XrD9OnyJT02hJQcCVHKPnqMmDv5dDRN1e5xoARBksm50B-6wqQ4nUWom95OXAW3Yo8exa6er6bQLW8suPjdmaH1pAVtiNT2jcYtrcT6bB-iEiQTGMEi6EnLRMfDGCCVvnrfhmf_DUtMBNEKvco_qFnykNq1QLVh9RFjxoUYI3KqNelHBAfHPKI79-2QSIskURiE_t3DKJGNSJCcl94QtH2oHbQpYiFrGeqAwLNJW_hMYotj4HNaJQvS0EfVKEbmgjboE-ryEsvDEbV4HFdZBoLTNuaXHpZrHxVsodybEWLxmcG6YoKkn6k_Yq_3w588MCqQ=w868-h527-no" alt="Inter-Site Protocol"></p>
<p><strong>Globus</strong></p>
<ul>
<li>Globus Alliance involves universities, national US research labs, and some companies</li>
<li>Standardized several things, especially software tools</li>
<li>Separately but related: Open Grid Forum</li>
<li>Globus Alliance has developed the Globus Toolkit</li>
</ul>
<h4 id="Security-Issues"><a href="#Security-Issues" class="headerlink" title="Security Issues"></a>Security Issues</h4><ul>
<li><p>Important in Grids because they are federated, i.e., no single entity controls the entire infrastructure</p>
</li>
<li><p><code>Singe sign-on</code>: collective job set should require once-only user authentication</p>
</li>
<li><p><code>Mapping to local security mechanisms</code>: some sites use Kerberos, others using Unix</p>
</li>
<li><p><code>Delegation</code>: credentials to access resources inherited by subcomputations, e.g., job 0 to job1</p>
</li>
<li><p><code>Community authorization</code>: e.g., third-party authentication</p>
</li>
<li><p>These are also important in clouds, but less so because clouds are typically run under a central control</p>
</li>
<li><p>In clouds the focus is on failures, scale, on-demand nature</p>
</li>
</ul>
<h4 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h4><ul>
<li>Grid computing focuses on computation-intensive computing (HPC)</li>
<li>Though often federated, architecture and key concepts have a lot in common with that of clouds</li>
<li>Are Grids/HPC converging towards clouds?<ul>
<li>E.g., Compare OpenStack and Globus</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/13/workout1-rm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/13/workout1-rm/" class="post-title-link" itemprop="url">制定健身计划的必知概念 ---- RM</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2017-03-13 18:35:01 / Modified: 21:49:27" itemprop="dateCreated datePublished" datetime="2017-03-13T18:35:01-07:00">2017-03-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>系统化地健身训练是今年的年度目标之一，任何目标的实现都离不开一套科学有效的方法。作为健身系列的第一篇，就首先来谈谈RM的概念，以及如何选择和测量RM。</p>
<h2 id="什么是RM？"><a href="#什么是RM？" class="headerlink" title="什么是RM？"></a>什么是RM？</h2><p>RM的全称为Repetition Maximum（最高重复次数），是训练负荷的单位。意思是当你举某个重量的时候，能最多重复的次数，就是你对于这个动作，这个重量的RM。例如你100公斤卧推，只能做一个，那么你的100公斤RM就是1。同理，如果你80公斤下卧推能做10次，那么你的80公斤RM就是10。</p>
<h2 id="如何选择RM？"><a href="#如何选择RM？" class="headerlink" title="如何选择RM？"></a>如何选择RM？</h2><p>肌肉体积的增长主要来自于肌原纤维体积和质量增长，以及胶原蛋白含量的增加。而研究者认为，此现象是源于每一次训练诱导机体适应的积累结果。这里的积累，是特别强调了训练次数和训练组数的重要性。其次，肌肉体积增长的程度，与力量负荷强度相关，力量负荷强度越大，肌肉体积增长程度也越大。但是负荷存在一个阈值，当相对强度达到1RM的80%的时候，肌肉体积增大程度已接近最大，那么，再增加负荷也就没有了意义。</p>
<p>在健身训练中，根据健身目的的不同，对于RM的选择也是有所区别的。</p>
<p>对于增长肌肉来说，多数运动应该选择8-12RM的重量，也就是说8-12次刚好让你精疲力竭的动作，同时，训练组数应该为4-8组，即：<br><code>训练重量（80% max）* 训练次数（8-12个）* 训练动作组数（4-8组）h</code></p>
<p>对于力量增长来说，决定的因素是训练重量，比如说举重选手或力量举选手，他们就常常采用1-5RM的负荷来训练，有时只需完成1-3个动作即可。</p>
<p>对于普通人来说，可以两样都练，但应以第一类为主。</p>
<h2 id="RM的测量"><a href="#RM的测量" class="headerlink" title="RM的测量"></a>RM的测量</h2><p>虽然已经知道RM是什么，但真正测量还是应该遵循下面的几点：</p>
<ul>
<li>测量每个动作相应重量的RM值时，应该充分热身，让身体进入最佳状态；</li>
<li>测量RM时动作一定要标准，不要“借力”或使用身体晃动等不规范动作；</li>
<li>RM值是会变的，训练水平越高，同样RM值的重量越重，大概3个月可以重新测量一次；</li>
<li>做有必要的测量，例如卧推、深蹲、硬拉、推举、腿举等多关节动作都是要测量的动作；</li>
<li>测量极限重量（1RM）要充分热身，并且在有保护的情况下完成。</li>
</ul>
<p>此外，还可以通过以下表格来估算出最大RM。<br><img src="https://lh3.googleusercontent.com/SxfEHyuHxMnVCuBjMfB4oW3x6F7AkBEi8x9_Ie_2NW_iCdQOEyz2dTh5QsUFcMPkNZneSxQL4LMM8VeiFWLn5GCQjYP_L3VCLuBnjji9CulOE4rbw5s66vHQNrcVNvIi2j6PznHZtVlK6jfDchIUVMiBnwKIae317Gz6XlYeUQcyHXWSbb2LwQ-l88owslcvrS6FJxoaSYBE6WHkRSPQBgqwOVg8rub3CzOAEOQcQLg0qjwxeQS1o0VmHOQ-fJ4xsWFq6zA4TyjwX8FnLs18KS9otaEQb8d-mNFBbR2g8BuRc-jKzRVDFpzkNUT6QyoCNUYP4P1-NY7bDUxnyvC7ptNGBYetbKjAY-VoPDJhL6_NkeWR5070wiiMaekgOjp0nRESX_pL0z4kZsbQUGm10nGOX2YmR6_TAJjgMEuT1hV37mn8rmcYXlzN-QZd-g-EJKh04qvMGf9FlaFFFaI0NRDxxmOB8COqAbrh7Mwo3llUHl3BmgLJ9GPCw1PGZFu2QGRYXJ4Vx5MDBnKGxR1lPmm1ejOCPQqh2Fqplggxar7E6ffRB1d41-lo6XSNzt0d8ONesIP1j4vXqeYhqVXuLi2MjzYSsGnlxSw_DAx6hWcWVzEIKCSxwgh4ABVnhuMgJ359aedyr_PAG7GYfTSAJJrNhi7qhl5JYDFl6K3I1A=w265-h457-no" alt="个人最大力量百分比与重复次数之间的关系"><br>如果我做80公斤可以做10个，到第11个就动作变形了，那么根据表格，80公斤就是75%1RM。<br>据此可以算出，100%1RM为106.6公斤（宁舍不入）。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/11/2017BlogUpdate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/11/2017BlogUpdate/" class="post-title-link" itemprop="url">博客重大升级啦!</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2017-03-11 15:22:30 / Modified: 21:00:59" itemprop="dateCreated datePublished" datetime="2017-03-11T15:22:30-08:00">2017-03-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>喜大普奔，博客迎来重大升级啦！</p>
<h2 id="更换Next主题"><a href="#更换Next主题" class="headerlink" title="更换Next主题"></a>更换Next主题</h2><p>其实也还是挺喜欢原来<a href="https://github.com/tufu9441/maupassant-hexo" target="_blank" rel="noopener">maupassant</a>主题的极简风格的，不过同样是主打简约风格的<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">Next</a>主题对于文章内目录的支持上大大好过了maupassant, 同时Next还是hexo主题页中Star最高的，作者的配置说明也非常完善，因此最终决定转投Next。</p>
<p>具体的安装和使用说明<a href="http://theme-next.iissnan.com" target="_blank" rel="noopener">官方文档</a>已经写得很清楚了，在此就不再赘述。</p>
<h2 id="域名更新"><a href="#域名更新" class="headerlink" title="域名更新"></a>域名更新</h2><p>在使用了进一年的github默认域名后，想想还是打算申请一个个人的独立域名。</p>
<h3 id="购买域名"><a href="#购买域名" class="headerlink" title="购买域名"></a>购买域名</h3><p>关于在哪里购买域名便宜，知乎上专门有一篇文章<a href="https://www.zhihu.com/question/19551906" target="_blank" rel="noopener">现在去哪里买 .com 域名最便宜？</a><br>文中提到了一个在Reddit上很火的神器: <a href="https://www.domcomp.com" target="_blank" rel="noopener">Domain Price Comparison</a>，能够以最便宜的价格买到你需要的域名。</p>
<p>不过在这里为了方面我就直接在Google Domains购买了dannyzhang.run。</p>
<h3 id="更新Blog-Repository"><a href="#更新Blog-Repository" class="headerlink" title="更新Blog Repository"></a>更新Blog Repository</h3><p>首先在博客的Repository根目录创建一个新的CNAME文件，编辑并加入你的新域名。<br><img src="https://lh3.googleusercontent.com/NVYuwz9SZ1oGlLRbD7rlrd0rf14IV_nK6PxPDvWWgk4R68TSqZbIeSCRe0JYJfCRICEEiQpQ66ygcXS_dDPKny5cbVvRsgytM9W0ATLorCjatOpVnknxte96NS0JOgFz6c-0eK6ZPH_2VC0w9ilvv56AN2oB9-EGew8aJfclhq0BJ4XmZilkyb-nhrmFXYP6AOqR6KRdpl5nbZztimV20MuZmcpBJGWBa0w9t-BuSUNzBxe6VzeevbSOxikrFdGWJZk676TWWzMTfMX98tBTO8rneuk8TqlJomzeR_BIzQDOndlLta590FW9jdO5kTGyoiln-SdijHTEhwr53TNS8VFJECd7LHTJQUVHKVADcU5F-FfTXuRZaYRKKfpoSlt9ZD8W9N_JIYcJLDCCeHMalvKIgFzi1XCLDqcHkf68enbNa6DcX4SZ-2AzWpJBd0UDdp0Z6Du-rTalBi0lnc9vg2Z67VZ-B9z-PDrZOmabk_GxaNtFwtZ3OezIlygOwN2QRzji_LJi9p-ZSGV-HM9s-Q41H45K-7DNN17LmJDXQ7IivviUBCZVxsF6QR_K2nP8z_N0G_2IPD2yvix5azNemIvT6hQzcHrP-WdwxfAMwWTUW-SvQbA5Ha6xaevfEIFwXEgRGkeQYXXNUohut0THt0N3rP6Gq712lqmvJ1yLSQ=w1076-h265-no" alt="CNAME"></p>
<p>然后在博客的Repository Settings，在GitHub Pages一栏应该能看到如下状态。</p>
<p><img src="https://lh3.googleusercontent.com/JFS9JhaewhSBEQUeRk2MR7ZVKRE4KuhQGr6YoKygHR6oGsa2-Bx1vsR4cvJQPWbzTW-jiyQfURHiYAnOYfWT5l6BIKtf5GGleHPZwm-fkf7LSITlz5xGWW5ZhXgrjUx8HbwgSnHTZZcNxpBMs_A2zb4H2Rc_mHt114PcrM9_X6HI3HUGxuAfqcFqe4HqMlmfUIKVTwnseUF7ds2fzw1kj2W81cxqdDw2wabWoCflUmYWKHNlGH-t1KDXjz0emGKFMGfC2w7-yd5nzT6QRdf5dXeV-7HuF-lOIUAIrZOliSrcTXJM8s93ls923u_5eioTdQ_ORn7YeSRjT78zeskjP4rFO0Su_phT8cxCW43iUtx0zdYSfMiEm7XwnaIejDDnqSOHuzrrodcgnO9-ENTTlDULlGDkOJjeLzkC7hMOsccEnTJGDEBiq0iCqmGGdi201I2v8_kIFlxTHXIRyEylNV_yTdCra3R_CCquNofwy_kJo4ZrfcQIHM2fP8nDGw2SiClISBDeil-7tSVG6DN6e9KRmbdP7Nq70pPC_Jz2tm-f3xGqyabeYUMjOWFI0xa0JUOd3wh1ERtr2038FAfPCr0LpxRML0vQ-Hi6vD7jUe4aDTGQ8dUBAZslk2hdMcpIwnEULUp0PvDb7oy6NcCvZjfNuUKiyM_FMhyREkG6iA=w1076-h407-no" alt="GitHub Settings, GitHub Pages"></p>
<h3 id="配置Google-Domains"><a href="#配置Google-Domains" class="headerlink" title="配置Google Domains"></a>配置Google Domains</h3><p>登陆Google Domains, 找到刚才购买的域名项，点击DNS<br><img src="https://lh3.googleusercontent.com/0jjJcjXkiEpHkvnbW8v_XVmw5UdO3dxPqvuhtNC2gSPcnrpT2PiCNmGj7gxeEH9667_3s_0DfV3B_jDZpGcFZfw5Gm0ZXLf-PCXJnpvg_7pzt6PJ6SQe5Y4qUPl_2zvl0y8X7o35gv_pFDwROr5HLXvS5a1btmUrT3ZmUjR5yh2u-BAp7LQR42fLnuaw_gfoFknmdTFgquoS8Qu4gZ6NmS4EUaM-OpjZ-vHq56PbLv_mc79-g-E7mU8vtb4ZajqwhjzRSdlcJVlzy_-MGrrrj1D-mjXdJwcBevSsqFJR142mGWXGyNHP-a2bzhJrldfXdHWJaq5UPtu_L9uRJnyhS5Z9175ki1nd51gy9AM8bSOeBpsjd7mKzg1GMe4QSaqbSFDva2opkz7WIU-rhtfLakE5wKRNFeESzwiKdE7Chqcu-k7KLcaZBsq4HsmngQc8oW-7FNM5mczo6aZmPOyPQcvRUjfaenfT0GetFwwcW_UAYXsgVgCeL9oCmaecwQAU8n0DfHB0m2jWJFTT13HU_LLG08oh21K1zSzjtR8xssqnOXMtMcwVM4msMz6sAy8UMmX9l-pTn5N_ThqsdtpoB9tKOk8nsll9ur0cMwpn1FbdrDWnxVybhoT1sVXAG-OohvXFTX39XNSv4VbOqAzwljsnlgw05d-wnnaFCTcH_g=w1076-h150-no" alt="Goolge Domains"></p>
<p>在最低部的Custom resource records中新建三条记录，如下所示：<br><img src="https://lh3.googleusercontent.com/HBxiSgped6rF8RIhiMqF-QLaHykAV-m5eSD4dK1LtPs82O8RkTjMky0vqWMR6SjnYNJUTBHQP7Oyyz_zUrmxkvBgc6FUyuKyJh0zmlOIQgutV4ve32_70UfXzAw-nV7FHhG-Juds1yQ0yhxwYxL2doJSjUxywULSLYUNFxmfsQ_QyundfpyWwbunX4rWjoPM8WV_FS8jK61OO_NbJWoIcdkqe0KoyXZNf0db7WpUxI1qXyeSOs_8vq4wLgy4JBzJzjGRkaq4-ZQial3EoAxuavKtTOw4YD9MjsPLxxwNdac8s6mXciqgKi5hR_1LzUorUJMi2JUlBHiFUd-t37ZVFZnrDu3r_o1F7uBSnWXZ46TFWCWPKutv9gpYdSDLR3GtPDA4yBjVVVg7DfKDj1YiFX0_SwoD9gNrBAQgX3Ao88tmFo52dHMQ4A7GWUADVQ5kXZW6B8afLzNRPYo1zuRn4lIcYzntgc5Hg60W5f9B0vZgHcXZlNHAHGMVrIqrfgUO2dC5SEBfwDKplB8adN5bSG-egGRRqkcl_pZIVU1cW-p-vjJl8IyO3eW2ioRzA4F-Kb2qydEWZUuh70y793io-ItiuXTSMaIH_pXM8atkm15GtiyEe2rqNQk1vzLss0dylPJA_0LKOIEw8xJmNRfi56cu0EZnk7tgcsvLKgR87A=w1076-h378-no" alt="Custom resource records"></p>
<p>然后访问新域名，大功告成！<br><a href="http://www.curtismlarson.com/blog/2015/04/12/github-pages-google-domains/" target="_blank" rel="noopener">具体可参考: How to point a domain on Google Domains to GitHub pages</a></p>
<h2 id="板块更新"><a href="#板块更新" class="headerlink" title="板块更新"></a>板块更新</h2><p><strong>首页</strong> 和旧版一样，显示最新的博客文章；<br><strong>归档</strong> 是所有文章的时间线，一览博客的更新历史；<br><strong>四大分类：技术，随笔，读书，健身</strong> 目前能想到的主要会更新的类别，会不定期整理;<br><strong>标签</strong>：变成了单独一个页面，更方便按标签查找文章；<br><strong>关于</strong>：自我介绍</p>
<h2 id="新功能"><a href="#新功能" class="headerlink" title="新功能"></a>新功能</h2><h3 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h3><p>使用了多说的插件实现评论系统，欢迎留言。：）</p>
<h3 id="Baidu-Analytics"><a href="#Baidu-Analytics" class="headerlink" title="Baidu Analytics"></a>Baidu Analytics</h3><p>加入了Baidu Analytics，可以分析博客的访问信息。</p>
<p>除了评论系统和Baidu Analytics之外，Next主题其实还支持很多其他的插件，安装起来都不难，具体可参考<a href="http://theme-next.iissnan.com" target="_blank" rel="noopener">Next官方文档</a></p>
<h2 id="Hexo常见问题解决"><a href="#Hexo常见问题解决" class="headerlink" title="Hexo常见问题解决"></a>Hexo常见问题解决</h2><p>之前其实在更新博客后deploy到github的过程中都能在terminal中看到error，但因为不影响正常使用就没太管。结果今天在更新到Next后又看到了新的错误，并且直接导致了标签无法正常使用。最后发现其实Hexo出现问题时一般还是比较好解决的，因为他都是依赖其他模块的，只要根据error tracks定位到具体模块，然后卸载重装即可。</p>
<p>具体可参考如下文章：<br><a href="https://github.com/iissnan/hexo-theme-next/issues/1480" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next/issues/1480</a><br><a href="https://neveryu.github.io/2016/12/15/hexo-next-four/" target="_blank" rel="noopener">https://neveryu.github.io/2016/12/15/hexo-next-four/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Danny Zhang</p>
  <div class="site-description" itemprop="description">Blogger/Software Engineer/Fitness Enthusiast</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">47</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags">
          
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Danny Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
