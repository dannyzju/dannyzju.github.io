<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"dannyzhang.run","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Blogger&#x2F;Software Engineer&#x2F;Fitness Enthusiast">
<meta property="og:type" content="website">
<meta property="og:title" content="D.Z. Notes (Beta)">
<meta property="og:url" content="http://dannyzhang.run/page/3/index.html">
<meta property="og:site_name" content="D.Z. Notes (Beta)">
<meta property="og:description" content="Blogger&#x2F;Software Engineer&#x2F;Fitness Enthusiast">
<meta property="article:author" content="Danny Zhang">
<meta property="article:tag" content="Danny Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://dannyzhang.run/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>D.Z. Notes (Beta)</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">D.Z. Notes (Beta)</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Be insensitive, and keep a lifelong growth mindset.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section">Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section">Archives</a>

  </li>
        <li class="menu-item menu-item-technical">

    <a href="/technical" rel="section">technical</a>

  </li>
        <li class="menu-item menu-item-essays">

    <a href="/essays" rel="section">essays</a>

  </li>
        <li class="menu-item menu-item-readings">

    <a href="/readings" rel="section">readings</a>

  </li>
        <li class="menu-item menu-item-workout">

    <a href="/workout" rel="section">workout</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags" rel="section">Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about" rel="section">About</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/19/2017-weekly-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/19/2017-weekly-4/" class="post-title-link" itemprop="url">双面</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-19 22:19:53" itemprop="dateCreated datePublished" datetime="2017-04-19T22:19:53-07:00">2017-04-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-04-20 21:54:19" itemprop="dateModified" datetime="2017-04-20T21:54:19-07:00">2017-04-20</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/04/19/2017-weekly-4/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/04/19/2017-weekly-4/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p>这周利用早起的时间又回顾了下数据结构与算法方面的知识，并且通过了微软的在线评测，有幸受邀去参与微软总部的AI &amp; Research Event的机会，这正好是一个不错的实地造访下这家西雅图巨头的好机会，同时也将是我第一次真正去到西雅图这座城市，新的经历和体验总是会让人充满期待。</p>
<p>在公司工作方面，整周基本都是在为了产品的Release做准备，完成block shipping bugs的修复，不过整体节奏都还在掌控之中。下班之余依然是健身和充电，一直有在follow的萌姐在喜马拉雅的课程也接近尾声，开始了整门课程的梳理和总结课，归纳起来基本就是分成了输入，管理系统和输出三大部分。其实如果把人看做一个系统，很多人与人之间的差异就会变得很容易理解，也许最初大家都是处于同一起点，但因为输入系统，管理系统的不同，进而决定了输出的不同，日复一日，也就自然而然地反映出了整个系统效能。</p>
<p>托马斯·弗里德曼(Thomas L. Friedman)在《世界是平的(3.0版)》中提到过，现如今空前平坦的世界上极大程度地促进了人们在全球范围内的竞争与合作，给个体带来的挑战是，不仅仅要求人们掌握一定的技能，还需要人们在心理上有一定的适应力、自我激励和应变力。而且对于新兴中产阶级来说，想要不被世界平坦化所冲击，还特别需要具备三方面的技能，即如何成为一个伟大的合作者，复合型人才以及讲述者。因此，对于个体而言，有一套好的“系统”则是这一切的前提。</p>
<h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2><p>周末跟一群朋友去了Las Vegas，其实也只是第二次来Las Vegas, 上一次都已经是三年多之前的事儿了。想想这还真是个神奇的地方，在一片荒漠中突兀地存在着这么一个充斥着金钱，欲望，和荷尔蒙的繁华都市，就真的如同Downtown的一家酒店名字一般，the Mirage(海市蜃楼)。</p>
<p>这次来访最令人期待的就算是太阳马戏团Cirque du Soleil的Zumanity show了，之前在纽约有看过他们家正常的show，感觉无论是专业水准还是场面效果都令人印象深刻，而上次来Vegas看的Jubilee，第一次领教了什么叫作高端大气上档次的成人秀。这次的Zumanity则是两者的合二为一，尽管从规模上来说比起前两个都要小，但也是亮点不断，无论是杂技演员的专业功底，还是歌手的演唱水准，都是极好的。</p>
<p>除此之外，又故地重游了凯撒宫(Caesars Palace), 威尼斯人(The Venetian), 百乐宫(Bellagio), 看了火山秀和喷泉秀，尽管奢华依旧，但感觉这些已有多年历史的酒店无论是外观还是内部装饰都已经是颇具老态了，相比而言反而是更喜欢新开的Aria那种极具现代感的赌场酒店。</p>
<p>大家一起出来玩一定是少不了吃吃喝喝，第一站是在Yunnan Garden吃午餐，鸭脖辣鸡什么的凉菜都很正宗，各类米线诸如过桥，小锅也一应俱全，而且居然还看到了贵阳辣鸡粉，果断点了一份，不过做法和贵阳本地的还是略有差别，但总的来说味道也还算不错，能在Las Vegas吃到这些感觉还真是意外的惊喜。之后晚餐去了市区一家叫Mon Ami Gabi的法国餐厅，分量足，味道好，尤其是三文鱼和鳟鱼做的非常赞，让人意犹未尽。还有就是第二天在Bellagio的自助餐，Vegas的自助餐还是颇有名气的，在很多人心目中一次Vegas之旅必须要有自助餐才算足够完整，果然是老远就看见了排着的长长的队伍，不过真的进去之后感觉虽然种类还算不少，但食物本身也就是中规中矩，因此也就抱着旅途完整的态度吃个情怀了。</p>
<p>一直觉得能跟一群朋友出去旅行是一件幸运的事情，也是一段值得珍惜的经历。周六半夜因为受限于Dress code导致Clubbing未遂之后，大家干脆就回到了酒店大厅里开始了吃东西，喝酒，玩桌游，直到凌晨三点半方才尽兴，想想还真是很久没有玩到这么晚过了。当然，短暂的狂欢之后生活还是要回归正轨，毕竟早睡早起的规律生活才是王道。</p>
<p>还记得Zumanity里面有一段柔术的表演，台上的演员把自己的身体进行了令人发指的扭曲和弯折，却依旧泰然自若，气定神闲。对于普通人来说这简直是难以置信！但其实仔细想想，哪有什么人生来就不普通呢？一个人不是因为不普通而所想所做不同，而恰恰是因为所想所做不同，持之以恒，最终才变得不普通。</p>
<p>（初稿完成于04/19/2017）</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/11/2017-weekly-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/11/2017-weekly-3/" class="post-title-link" itemprop="url">白日莫空过，青春不再来</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-11 22:33:16" itemprop="dateCreated datePublished" datetime="2017-04-11T22:33:16-07:00">2017-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-04-13 07:18:57" itemprop="dateModified" datetime="2017-04-13T07:18:57-07:00">2017-04-13</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/04/11/2017-weekly-3/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/04/11/2017-weekly-3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>虽然在工作中其实经常用到JavaScript，但好像还真是很久没有系统地进行过梳理了，于是本着查漏补缺的心态，完成了Udemy的The Complete JavaScript Course基础部分的课程并且整理了笔记，过程中的确是发现了不少知识体系上的漏洞，也算是收获颇丰。</p>
<p>这周还顺带把笔记管理的软件替换成了iA Writer, 以前一直在用Evernote，但是对于Markdown的支持太鸡肋，反而有一堆不太用得上的杂七杂八功能，实在是显得冗余不堪。尝试了iA Writer之后发现这个软件完全走的是另一个路线，专业的Markdown支持，iCloud云备份，最重要的是其极简界面深得我心，多平台同步也是毫无压力，感觉接下来基本上可以抛弃Evernote了。</p>
<p>公司方面这两周都在搞Learn的Hackathon，因为Tap这边的也涉及到Learn的Feature, 因此上周也受邀参与了两天。这次Hackathon来得人还不少，不仅有湾区的同事，还有从德州，麻省，以及印度还有英国专程飞过来的，而且居然还意外看到了David Mason，当年一起做Phone Shell的时候可真是算难兄难弟了，虽然后面没有再合作，不过那段经历也真还是挺难忘。这次Hacathon是Jeff和Vitaly联合带队，若论起美国人的敬业精神，作为Learn Team Senior Director的Jeff就是一个活生生的例子，同时精于技术，管理，沟通，口才，领导力，而且工作起来精力极度旺盛。用一个美国同事的话说，Jeff是常年开启着N个克隆版本，带领着多个项目齐头并进，任何时候都属于高能状态。当初和Jeff工作的那段时间，有一次他一边高速上开着车，一边dial in到我们的scrum里面，而且遇到问题还指点着我们打开哪一个程序文件，然后去分析哪一段代码，简直是让人目瞪口呆。</p>
<p>不过说起敬业精神，也不得不提及日本这个民族。最近看了柳井正的《一胜九败》和稻盛和夫的《干法》，这两位卓越的企业家更是将日本人特有的那种专注，执着和敬业的精神发挥到了极致。稻盛和夫先生对于工作的态度给我留下了很深的印象，很多人工作不过是为了期盼假期，薪水和奖金，而稻盛和夫是发自内心地热爱工作，视工作为最佳的自我修炼方式。人生总是被“贪嗔痴”三毒所控制，要想减少这三毒，最好的方法就是“愚直地、认真地、专业地、诚实地”投身于自己的工作，工作就是万病的良药。</p>
<p>另外呢，这几个月通过GYL社群收获不少，通过早睡早起，使用效率手册，感觉时间的掌控能力好了很多。现在同时也开始承担了一定的GYL社群管理的工作，希望自己的坚持也能带动新加入的小伙伴们一起进步和成长。</p>
<p>柳烟侵御道，门映夹城开。白日莫空过，青春不再来。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/06/Advanced-JavaScript-Objects-and-Functions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/06/Advanced-JavaScript-Objects-and-Functions/" class="post-title-link" itemprop="url">Advanced JavaScript: Objects and Functions</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-06 17:29:12" itemprop="dateCreated datePublished" datetime="2017-04-06T17:29:12-07:00">2017-04-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-07-22 08:52:22" itemprop="dateModified" datetime="2017-07-22T08:52:22-07:00">2017-07-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/04/06/Advanced-JavaScript-Objects-and-Functions/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/04/06/Advanced-JavaScript-Objects-and-Functions/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-Everything-is-and-Object-Inheritance-and-the-Prototype-Chain"><a href="#1-Everything-is-and-Object-Inheritance-and-the-Prototype-Chain" class="headerlink" title="1. Everything is and Object: Inheritance and the Prototype Chain"></a>1. Everything is and Object: Inheritance and the Prototype Chain</h2><p><img src="https://lh3.googleusercontent.com/I0PB8RP7AO9LkCeT8eT6nVUMBSYDY2PyEfxlf_eum2bGhpxX_uy-S79Ork__5s57wNLgiz_s3WnltNj-te3j2av-KpJ2BjANLJh2IpST8waederhveRbfDqnAwQQgIPCQe6t3YFVXnG2nigrXIRz5Ph1QzSggrPrN-3HTP-NPfzHL6LbRWKhs0KwDDvF_FyXmn7o4Z-AwtK2PCf-8VdW_BktnK652XbVRnvRYKVnvYNhPmLH9Mu_X114V5Uw6HhflHTFy6WY3g4kQ7BzSfnM-jrSWVic9F8XHlUX_GXm5C6lpg3O7ATI31xuyIQuI6ElPIQ1fhJw3b9ZhJrtZworY8rSU7ESkSJoGt2O5C5LEaCcbiboKFcHlRlo7m1Tv63St7buD4IxPtQF1UZjXlU4mBnAw4nSBEXkt_r7v8jYCJZ_I3IyzNEZZcVWFpaNX5VWAbTKO77mXRikSSCR1FNBDdoPDQTFhnQXeqkJLZsHXLYXCi4c_QVSdeeoXJW990CoWB1rYFN3ZfQShvKxvL7sAJ8a_-HgRUguBXTBHHnrA2S4yWxiEv6oHC3u_mwLzuqKkLc_0rH_t4TAtdyAep3MpjIzeOh9-c72LGGjfEub1aiX9no-TbpB5OD82uPKhtKSywuOqZbCwvEwugp8fzKtI_Miah3Em9klXzMAPk6c2g=w759-h282-no" alt="Everything is and Object"></p>
<h3 id="1-1-Object-Oriented-Programming"><a href="#1-1-Object-Oriented-Programming" class="headerlink" title="1.1. Object-Oriented Programming"></a>1.1. Object-Oriented Programming</h3><ul>
<li>Objects interacting with one another through methods and properties;</li>
<li>Used to store data, structure applications into modules and keeping code clean.<br><img src="https://lh3.googleusercontent.com/JWGejWy-5UEIY4S3q6FNXkq3b7H0PbECFGRFiOlE3rDsvqY2c3yaTPwXxlhes7NNcz77vfBSs2nFME6GNEP9kDajiGD62-bjE3YxFQX2Jyr4Cs40IDTE4fNWFc9JHUfXgi_SbsHvCPEncJA1Fk_MH5rqCtMEEp-YIWFT2X5EBXAup910lnt_HqTB7MAR-Ipgx_gIN-WejB8q1p3x3goAK-fhykFYNnRvcLO0hJhQDb6niwYET13BlHgvehiFaESb9R9LJ4Uq_9iyaBrqisZBmWN45PIOggWbcqWiZf1tFo6_Ah-o00SAEey_MwdwpntmzZi7kBZA4gq2ibHmakHCq2t_i8760yenwMPPhrk7unDNiMHnqp3fYxjzOvNTc-NKxOl-1oJFbiwdyNU_TwccbfsGhCwtJg8tQmVbtTSdy_Vv-FUayhc0CPQiDHirDNwCkqRX5oWHkfcMfynVNyERU-weB-5J7ReTRUgWsfKe60BfQx1emhwjJ0wI_0rmlN4RN_2MjDEz3cwSUgVUmZw1z1JzYoHy8A0Uz_VWIi0Y59ysAnYXVekqwqp7jNtmsfMrtoemq1caDe7J4EQ3u8iVa5YbUk8d4ijud9e-AU1urV0EbFIn-xYrtIYZFWRf_yuK5Sqap7e89CiBd6tq9sHLteR3201C_Pcy0vsQmWwfZA=w759-h341-no" alt="Constructors and Instances in JavaScript"></li>
</ul>
<h3 id="1-2-Inheritance-in-General"><a href="#1-2-Inheritance-in-General" class="headerlink" title="1.2. Inheritance in General"></a>1.2. Inheritance in General</h3><p><img src="https://lh3.googleusercontent.com/pnHefeMqK3jMpAa0wTuxhgPzLPVHnuKXMPIRjRmDcjYJKU--kUg3sTx_uLi3qUsy9RVv3eTTOOdMiB820BPtAn6T8rG4XXQVgLnPVYVjyX_IgqS-RDt6gCH_HcLDP4SzkEfC8HUoJ2J0Ta6IxPNchYbVeYMInXzYQQv2bnnzURj4RCkAwKetJt7p04TAE-DEDHAincw5Uka5Lnay15UerYnTw4rglVn5s3anVJM5Hwy2PJ3VOY1M9RvxIJl1jgo1EvtoAkAAYaGHABIyoFARF6KfDWHFqxgM7N3WEzUDkaihSNBbHMloH3mDQHGyq5y7BJHBa9HUzwJgAbvrcPd53p22zPrFdTYn1YgQjFyc1mcf7Fv3I_cRptrG7JKHIxnvneF9-tkAXnAmvYiWd5tUJLN7ULre_GPj_G4kNh7qnk1hxocBXhao9p58bnJG7dPJdbyUZ98RXawaMoKZFDFlMxPu2r547fAgTUI8q1kV2JPw5dALyjU_HxE9auka0zvWebpQ3PCIEZJYLsVwVgPNW82-8t-LpIlIyuqv0xK7JfVoGanAc3T6ep3OuXg3P33S7U7MnOF9Qa9BF-ldGAhVNo9nxZBAfitFzTqwNcOJM7pgLbiOYhXDSkAEbPhwp3wrSk7FCpLnyjYjCXRjJS129YvZ4RcSaH75pE9wF-idPQ=w759-h351-no" alt="Inheritance in General"></p>
<h3 id="1-3-Inheritance-in-JavaScript-Prototypes-and-Prototype-Chains"><a href="#1-3-Inheritance-in-JavaScript-Prototypes-and-Prototype-Chains" class="headerlink" title="1.3. Inheritance in JavaScript: Prototypes and Prototype Chains"></a>1.3. Inheritance in JavaScript: Prototypes and Prototype Chains</h3><p>The inheritance in javaScript depends on “Prototype” property.<br><img src="https://lh3.googleusercontent.com/Ie7W5tqMOWICPnqSRIBksRmmfr8NGJbZ4r93oUGN_u-JxnJcFhQB60bDZDxV0gd9HdQpjSwq8XIcj8rXJrR6ivzc-Z1jsI-wljf873uGJONSe47-PkV1oB0C33ZF11yKkpIzyBhPFz4ZSWIED1w-VloXoafyxR5Xv0VL7TgmgRo9psFF1sI9oknV1qbPWNgrrvDjVJSholHkuCp5Cdnvj2t7xCLaChPFKe6wg7PsIJ58-RS_kHTBpR98XQvsPWhWTB7MVD9K8o5cw508Hcjvfgbl6RIpHCfYNOAz9DpWYyV0ekJX6oAt6hlL34OLoizipotSe2eWwz8B3EEd7YIYzmjEJW9ZfOMEkCPVTjYOnuF-RUvShhqwvV-yAcAwF2Y5LTyzoQnTt6VbxNT5lB5kH_gX3czTcxDa-BblwR_nL55_y8KiMU7SlV58VN3CFY4VC5oU9eeL9HlEmWDR7sZmPHEHxbEzTYiQqseE0_out0AbwO5KmfEN4X1Zw6NHvSoDyh1f3sa7mpyZBzBIxK5pvcQFQtvcRGySzrJYDZYmdGaIl53LfUhgpojZDLZNFFREJupIPtXVkqKkBI-LhlbmW6wW_xDlFcca9SNVWyrFSmd4Fw5qoQBFC-NuaF1HIeYZ8Sn0rYJ4n-16w-ShYkyPU3u59A7VmtTO_MevLdaZQQ=w759-h364-no" alt="Inheritance in JavaScript: Prototypes and Prototype Chains"></p>
<h3 id="1-4-Summary"><a href="#1-4-Summary" class="headerlink" title="1.4. Summary"></a>1.4. Summary</h3><ul>
<li>Every JavaScript object has a <strong>prototype property</strong>, which makes inheritance possible in JavaScript</li>
<li>The prototype property of an object is where we put methods and properties that we want <strong>other objects to inherit.</strong></li>
<li>The Constructor’s prototype property is <strong>NOT</strong> the prototype of the Constructor itself, it’s the prototype of <strong>ALL</strong> instances that are created through it.</li>
<li>When a certain method (or property) is called, the search starts in the object itself, and if it cannot be found, the search moves on to the object’s prototype. This continues until the method is found: <strong>prototype chain.</strong></li>
</ul>
<h2 id="2-Creating-Objects-Function-Constructors"><a href="#2-Creating-Objects-Function-Constructors" class="headerlink" title="2. Creating Objects: Function Constructors"></a>2. Creating Objects: Function Constructors</h2><p>The first way is to define all properties and functions in constructor:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Approach 1: only use constructor</span></span><br><span class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span>(<span class="params">name, yearOfBirth, job</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.yearOfBirth = yearOfBirth;</span><br><span class="line">	<span class="keyword">this</span>.job = job;</span><br><span class="line">	<span class="keyword">this</span>.calculateAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = <span class="keyword">new</span> Person(<span class="string">'John'</span>, <span class="number">1990</span>, <span class="string">'teacher'</span>);</span><br><span class="line">john.calculateAge();</span><br></pre></td></tr></table></figure>

<p>The alternative way is to use prototype property:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Approach 2: use prototype property</span></span><br><span class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span>(<span class="params">name, yearOfBirth, job</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.yearOfBirth = yearOfBirth;</span><br><span class="line">	<span class="keyword">this</span>.job = job;</span><br><span class="line">	<span class="keyword">this</span>.calculateAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.calculateAge =</span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Person.prototype.lastName = <span class="string">'Smith'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = <span class="keyword">new</span> Person(<span class="string">'John'</span>, <span class="number">1990</span>, <span class="string">'teacher'</span>);</span><br><span class="line"><span class="keyword">var</span> jane = <span class="keyword">new</span> Person(<span class="string">'Jane'</span>, <span class="number">1969</span>, <span class="string">'designer'</span>);</span><br><span class="line"><span class="keyword">var</span> mark = <span class="keyword">new</span> Person(<span class="string">'Mark'</span>, <span class="number">1948</span>, <span class="string">'retired'</span>);</span><br><span class="line"></span><br><span class="line">john.calculateAge();</span><br><span class="line">jane.calculateAge();</span><br><span class="line">mark.calculateAge();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(john.lastName);</span><br><span class="line"><span class="built_in">console</span>.log(jane.lastName);</span><br><span class="line"><span class="built_in">console</span>.log(mark.lastName);</span><br></pre></td></tr></table></figure>

<h2 id="3-The-Prototype-Chain-in-the-Console"><a href="#3-The-Prototype-Chain-in-the-Console" class="headerlink" title="3. The Prototype Chain in the Console"></a>3. The Prototype Chain in the Console</h2><p>In console, if we type in ‘john’, we can see the john object gets printed.</p>
<p><img src="https://lh3.googleusercontent.com/Q_0HsZL7t4aZMpmPfVEvvRWFZUqCQ8tZh7rAOLxM0oQ4Eg7urj4NxhKuwUq-b_8rwOVi21l__rgCx9pX8fW-YEkBFL1iT-sX_HMo_GQ6qibDHAwqF8tTl-FRz7pMtVllEzGN_-aKDGEYPVhzT7rrZhtzfV8biOAbiwIwP1AsPPCdTtxDxPsjqfj4lyb8_HW5vsAbOwJayWgSLYVkSAwi6PWoYQm3-OuLARqto7l4XHy6BqEFB4k8tgtXhtF4ldN1_YCYpuugETcSLh0cRoPDaAeFdgMw_GU-prQtU9k3g9BdHOmoG_Kvz9n_PcTu5B9YzKuut_B1Un0iCMGyqAQWRdLBsJaPJGPCsOmUAp5JUOCkmOpzS6IF4QxxPjZXAE4yA-bZMdw5-PQRALSiWJirQ5a1tZOgInWQCEgP6oO8mSpTss2V86-x315Aw4oT8LcVOxFTWp09bdHJi6REtWyOJUzanOBMbnhANlCRg0xRHkEuLhlNpFP3KdZ9wry9KcpoXQdgpU198CvQk3KyeFWC64t4ZtQZEFIracg310oNlL4swfmO7BtbF5JfIu9oVC401iCx9cO6YFAP2Ab0T9pdlLmsfwwjxB09PeiKaYNyYzrmqA2ghD1xPm3AQn2HJxQYS9fomjXondjoYWrXMXrpgKbyAUcl6US8UkpNEsmY7Q=w759-h415-no" alt="Person Object"></p>
<p>From the above screenshot, we can see Person’s prototype is an Object, and also</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john._proto_ &#x3D;&#x3D;&#x3D; Person.prototype &#x2F;&#x2F;Return true</span><br></pre></td></tr></table></figure>


<p><img src="https://lh3.googleusercontent.com/zVLqL7_JKgTh6VB-9-CrTa-dPWKk7RoI6ZX_k9FhwBpmF54dxI7TSXZ43k1veNWNkrcKjVfpcc1SV2UaQNYfQLQN1NxXM2Re41jBCbLvJsQ6v3QUtwJeEfUpydUzqle6Xr63zjuJtX7jgEXb4QwXviqB29y3eNbqmfGxpg-vwsvaKqADnYvlTATYoVv1XwB54dnyAFCsFTQyiEkMmaj1ejpu7raJbv-DMD4sfBKc2lY4562pU8EZo0J5u6XLNoYlVwvemDRQ2FmUl2ISeQeQaIE4QstfxuRaJdToX0KMvJ_Ce_2R6EC6p1FQJhVQ7KlD0s827XN2zE2SNwAlroYcriXYGiH63_JH2_rXSqgr8FTr55TzlwtYw-U2BT1jfP2pdfYqkJm_a0tRDsLniw12TEew0-eFm2LZc1jn92T11EvcEMafz0zXUn6b3rItk9lCHqMjGATr5FeYM8N6D9-US1sXgWV9Q9T0tzfe619JuvsLthVKX6Uva7CVzWc86aDX8RJFsdNBq6Jsy-26-mmf4VskLtFEh3DO7IqMx2m1r0dnBB7KvsSGPa7pF4XSu0zWsUHIWI1sVyL9FHVDeb71rZUG0oLwITS2jcRlHbAQweyAqRnLLZz1o69UaYvonxvAg8ISxWUpNe20WOtrY27KceFfi3Qn5ChCfEOesssHaA=w759-h588-no" alt="Screenshot 2"></p>
<p>From the second screenshot, we can see that because of the inheritance, the john object can call hasOwnProperty method. Obviously, <strong><em>job</em></strong> is john’s own property, but <strong><em>lastName</em></strong> is not.</p>
<p>Another method to know is <strong><em>instanceof</em></strong>, we can know john is an instance of Person object.</p>
<p>Here’s an additional example:</p>
<p><img src="https://lh3.googleusercontent.com/O0cEhZETj1K0l07nXPUJYM25MTcjuIqswjbxV52MPBNACSo8_Tbk92u6wz8Sdmcdf12rHeDOQ8VB3AWEtPEM2V_2nvRgaOkAU7Vnvtt2eCWCbZO9plRt8bRVI93L881u65p6Ua0DiADigwr1xvqnzOcE4xHsB34N23_AWYAwZ7GT4wkDWZL7USuBxYChE0B2bGbazuFMRuIvUQmEA0d1jD__xAiIrvcNiiP84YJ3l1Gny8WkffV3584AG5v0hria_7CwZrbdGCVqqPj0lcVEGxNOtF0A3eT37SRu6Z-nZ2yRRW7aJs564XgGjP0vm50w3htyytBo7KSAE2BNx97IIP0uJNxcZVZFsXWfqL7NS0W4EI_znZp7WRy2SWxs7CgF3om4orBxBzHEu4NZ9xXD8FGjXiPNYp-X4IbBaf1INIm3_54xyscIwnT4Abhun7jq3ad0mZ3adGorimhoLB2QOHzrSLCvDck0z6eMGW24mKOUomvoLkwK7VEsHXprNs1HiQ9n9ZZADk6ZEB3Rh_oMBuU6CAi-wagCA8ka9eo3Bf8t-w_aDP2tK2WCNgjHED4vsSMdnO50qU7BGzMjGjChwtyy4zKGI_Z8twLVttrsw15HvTYDDvnN-NseKKCig_wA9T9wRBOyDZ-AMTLaN6w37beltoHUEaMwfJPo9_2EaA=w759-h350-no" alt="Array Object"></p>
<p>By typing console.info(x), we can see this array object. If you click on the <strong><em><em>proto</em></em></strong>, you can see all methods available in array.</p>
<p><img src="https://lh3.googleusercontent.com/5NIUrcZs-QACaZ8ebMunMcCrWK_8HyObYoiXbUwt6T4S0PBdGgnQ6QhFDN9jcaOqvgzAsQcD9pCo-sFs5jqQBwciQkZN8eBCUqrD2Xu06UEbOAwRxQB-HYiKVWGdKwwLHtefUI0l58XXgh60lHN9DXd70q4agaXxHGdRN_usf27G3_c9_ein8ODosaQxa6lat5ZAEK3UVqJV_g1TIGTBqhATly0pHmlsI3qSxOKZTub8J0tpBWCf5AdQEIpWZDVmwlOrJlp4Af8GRkgx6pG7iRmDeY8AzSp2wbPsoIkpItZCY8wdRFDv3jvb_bIcuYPIph4bBd21RsBeMvCI6C8l8NJcTVicZnBnpsVzYkmb1lGprG_L5TIdgY2v_2hn8QBLgkatqnCY-nuEiE1fnPMUWFNjfFqgPsSnYJ9joQrGmVge1be9RiGoyuQ75wk0036gTS1E0Td5lP28NBYzHzYOMOvNwSLotM7SV4_4Xamx7I9z2dX7aoWpkNZ5S-NVJrS4rekeRU7KFErXtoAcXFuGnx3bpaPTdXtNCVDy9XCrKTblmwrQuGxCW3bk3iotfpJeQazYhS9MJxtxnkpHHL9Fcsy0JgnnsvA3Fu55wF4qRUfR09bK-EOdiq_oBPhnYCfw1MOCblNzQcrs6P5Jdbmo4587MydApziXt8zuFvJzXA=w759-h381-no" alt="Array Object 2"></p>
<h2 id="4-Creating-Objects-Object-create"><a href="#4-Creating-Objects-Object-create" class="headerlink" title="4. Creating Objects: Object.create"></a>4. Creating Objects: Object.create</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Alternative way to create object: Object.create</span></span><br><span class="line"><span class="keyword">var</span> personProto = &#123;</span><br><span class="line">	calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = <span class="built_in">Object</span>.create(personProto);</span><br><span class="line">john.name = <span class="string">'John'</span>;</span><br><span class="line">john.yearOfBirth = <span class="number">1990</span>;</span><br><span class="line">john.job = <span class="string">'teacher'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> jane = <span class="built_in">Object</span>.create(personProto,</span><br><span class="line">&#123;</span><br><span class="line">	name: &#123; <span class="attr">value</span>: <span class="string">'Jane'</span>&#125;,</span><br><span class="line">	yearOfBirth: &#123; <span class="attr">value</span>: <span class="number">1969</span> &#125;,</span><br><span class="line">	job: &#123; <span class="attr">value</span>: <span class="string">'designer'</span>&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<p>Object.create builds an object that inherits directly from the one that we passed into the firs argument.</p>
<p>While, on the other hand, the function constructor, the newly created object inherits from constructor’s prototype property.</p>
<p>Actually, one of the biggest benefits of object.create is that it allows us to implement a really complex inheritance structures in an easier way, because it allows us to directly specify which object should be a prototype.</p>
<p>Read more: <a href="http://stackoverflow.com/questions/4166616/understanding-the-difference-between-object-create-and-new-somefunction" target="_blank" rel="noopener">Understanding the difference between Object.create() and new SomeFunction()</a></p>
<h2 id="5-Primitives-vs-Objects"><a href="#5-Primitives-vs-Objects" class="headerlink" title="5. Primitives vs Objects"></a>5. Primitives vs Objects</h2><p>Variables containing primitives actually hold that data inside of the variable itself.</p>
<p>However, variables associated with objects do not actually contain the object, but instead, they contain a reference to the place in memory where the object is stored.</p>
<p>So again, a variable declared as an object does not have a real copy of the object, it just points to that object.</p>
<p>See the example</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">23</span>;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">a = <span class="number">46</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">	name: <span class="string">'John'</span>,</span><br><span class="line">	age: <span class="number">26</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = obj1;</span><br><span class="line">obj1.age = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj1.age);</span><br><span class="line"><span class="built_in">console</span>.log(obj2.age);</span><br></pre></td></tr></table></figure>

<p>In console, we can see the print out as follows</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">46</span><br><span class="line">23</span><br><span class="line">30</span><br><span class="line">30</span><br></pre></td></tr></table></figure>

<p>It shows that actually obj1 and obj2 are pointing to the same object, once obj1.age gets changed, it reflects to obj2.age as well.</p>
<p>Another example</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">27</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">	name: <span class="string">'Jonas'</span>,</span><br><span class="line">	city: <span class="string">'Lisbon'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">change</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	a = <span class="number">30</span>;</span><br><span class="line">	b.city = <span class="string">'San Francisco'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">change(age, obj);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"><span class="built_in">console</span>.log(obj.city);</span><br></pre></td></tr></table></figure>

<p>When we pass a primitive into a function, a simple copy is created. You can change a as much as you want, but it will never affect the variable on the outside.</p>
<p>For the object, instead of passing the object to the function, we just pass in a reference.</p>
<h2 id="6-First-Class-Functions-Passing-Functions-as-Arguments"><a href="#6-First-Class-Functions-Passing-Functions-as-Arguments" class="headerlink" title="6. First Class Functions: Passing Functions as Arguments"></a>6. First Class Functions: Passing Functions as Arguments</h2><h3 id="6-1-Functions-are-Also-Objects-in-JavaScript"><a href="#6-1-Functions-are-Also-Objects-in-JavaScript" class="headerlink" title="6.1. Functions are Also Objects in JavaScript"></a>6.1. Functions are Also Objects in JavaScript</h3><ul>
<li>A function is an instance of the Object type;</li>
<li>A function behaves like any other object;</li>
<li>We can store functions in a variable;</li>
<li>We can pass a function as an argument to another function;</li>
<li>We can return a function from a function</li>
</ul>
<p>Because of all above, we say that in JavaScript, we have <code>First-Class Functions</code>.</p>
<h3 id="6-2-Code-Example"><a href="#6-2-Code-Example" class="headerlink" title="6.2. Code Example"></a>6.2. Code Example</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> years = [<span class="number">1990</span>, <span class="number">1965</span>, <span class="number">1937</span>, <span class="number">2005</span>, <span class="number">1998</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">arrayCalc</span>(<span class="params">arr, fn</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> arrRes = [];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">		arrRes.push(fn(arr[i]));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> arrRes;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">caculateAge</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">2016</span> - el;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFullAge</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> el &gt;= <span class="number">18</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maxHeartRate</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (el &gt;= <span class="number">18</span> &amp;&amp; el &lt;= <span class="number">81</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">Math</span>.round(<span class="number">206.9</span> - (<span class="number">0.67</span> * el));</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ages = arrayCalc(years, calculateAge);</span><br><span class="line"><span class="keyword">var</span> fullAges = arrayCalc(years, isFullAge);</span><br><span class="line"><span class="keyword">var</span> rates = arrayCalc(ages, maxHeartRate);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ages);</span><br><span class="line"><span class="built_in">console</span>.log(fullAges);</span><br><span class="line"><span class="built_in">console</span>.log(rates);</span><br></pre></td></tr></table></figure>

<h2 id="7-First-Class-Functions-Functions-Returning-Functions"><a href="#7-First-Class-Functions-Functions-Returning-Functions" class="headerlink" title="7. First Class Functions: Functions Returning Functions"></a>7. First Class Functions: Functions Returning Functions</h2><p>Functions can also be returned from functions.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">interviewQuestion</span>(<span class="params">job</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (job ==== <span class="string">'designer'</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(name + <span class="string">', can you please explain what UX design is?'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (job === <span class="string">'teacher'</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'What subject do you teach, '</span> + name + <span class="string">'?'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Hello '</span> + name + <span class="string">', what do you do?'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> teacherQuestion = interviewQuestion(<span class="string">'teacher'</span>);</span><br><span class="line"><span class="keyword">var</span> designerQuestion = interviewQuestion(<span class="string">'designer'</span>);</span><br><span class="line"></span><br><span class="line">teacherQuestion(<span class="string">'John'</span>);</span><br><span class="line">designerQuestion(<span class="string">'John'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//An alternative way to call</span></span><br><span class="line">interviewQuestion(<span class="string">'teacher'</span>)(<span class="string">'Mark'</span>);</span><br></pre></td></tr></table></figure>

<h2 id="8-Immediately-Invoked-Function-Expressions-IIFE"><a href="#8-Immediately-Invoked-Function-Expressions-IIFE" class="headerlink" title="8. Immediately Invoked Function Expressions (IIFE)"></a>8. Immediately Invoked Function Expressions (IIFE)</h2><p>Here we use a silly game to demonstrate how IIFE works,</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> score = <span class="built_in">Math</span>.random() * <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(score &gt;= <span class="number">5</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">goodLuck</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> score = <span class="built_in">Math</span>.random() * <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(score &gt;= <span class="number">5</span> - goodLuck)</span><br><span class="line">&#125;)(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<p>IIFE can only be called once and has the advantage of data privacy, because unlike defining a function and assigning it to a variable, IIFE can not be reused elsewhere.</p>
<h2 id="9-Closures"><a href="#9-Closures" class="headerlink" title="9. Closures"></a>9. Closures</h2><h3 id="9-1-Code-Example"><a href="#9-1-Code-Example" class="headerlink" title="9.1. Code Example"></a>9.1. Code Example</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">retirement</span>(<span class="params">retirementAge</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> a = <span class="string">' years left until retirement.'</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">yearOfBirth</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> age = <span class="number">2016</span> - yearOfBirth;</span><br><span class="line">		<span class="built_in">console</span>.log((retirementAge - age) + a);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> retirementUS = retirement(<span class="number">66</span>);</span><br><span class="line"><span class="keyword">var</span> retirementGermany = retirement(<span class="number">65</span>);</span><br><span class="line"><span class="keyword">var</span> retirementIceland = retirement(<span class="number">67</span>);</span><br><span class="line"></span><br><span class="line">retirementUS(<span class="number">1990</span>);</span><br><span class="line">retirementGermany(<span class="number">1990</span>);</span><br><span class="line">retirementIceland(<span class="number">1990</span>);</span><br></pre></td></tr></table></figure>
<h3 id="9-2-Closures-Summary"><a href="#9-2-Closures-Summary" class="headerlink" title="9.2. Closures Summary"></a>9.2. Closures Summary</h3><p><code>An inner function has always access to the variables and parameters of its outer function, even after the outer function has returned.</code></p>
<h3 id="9-3-How-Closures-Work"><a href="#9-3-How-Closures-Work" class="headerlink" title="9.3. How Closures Work"></a>9.3. How Closures Work</h3><p><img src="https://lh3.googleusercontent.com/_lr3ZJ3wVRwrgDWcyInIPTNFGApLSYBWiSFcDPj73XFMmyr0RlEaSMUFr7INnkRwhVRHlX_VhiFci4DcUXRWWAiiLXh5zpBG93DxaXLmaCNGYorfBwqQ_nJYsuBPNzMmzMItQAeGWfQQp6GUbWiodzP8oYT7hHfC2NgqSFe7cioAEnh3WKBFIQ4ttY1B49-Dpj4TshizgMTMmabOmqi77ZDGVjDZyHkGD4_cc_6VFULKBPqOFjPGrwjlXPvK-MTrgsedUcgsB3CrW6L_6o7xdn9s9zcGtHu91cUl_QnTJ21gzau-qdKHN0-7nO18IAx-4nlNRAxuU9ehvXft4NrMLow7rOm5_VxUCpq8vPQ85MYO6QSoBygqgzptHYYF7YWRdCQGcWorpfQqroTqTq8Z3BPln354z260f0tko2N7ymdG_Oc0NUwrAMVKiymT6zoGoL-Fc05oABRAjSknQTBhSM_g9lIdgtIE2AAafIV_NFDx3LMTF_R4vMLrL23X3DxWpNGgW3cbHsYobXxOPVgon8TtbjNtQaAC2QxiNiHmksFk-Ce-JtzUV4coXHXZhve1__yJmCmu4Z5pWPjJXC1f2rUmPDWDwKNgPapP2JVjg3GHKnaiQJgNxnzg9-VzchSs9us1cuDg9WZMCH8A3_MXB9AZ4drDQaMUMlz3wcnlzg=w759-h334-no" alt="Closures Summary"></p>
<p>After the retirement function returns, the execution context of retirement function is gone from the Execution Stack. However, in the scope chain, the retirement function is still there and keeps working. Therefore, we can access the variables that we were created in the retirement function long after the function has completed execution, and after its execution context is gone.</p>
<h3 id="9-4-Rewrite-Interview-Question-Problem"><a href="#9-4-Rewrite-Interview-Question-Problem" class="headerlink" title="9.4. Rewrite Interview Question Problem"></a>9.4. Rewrite Interview Question Problem</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">interviewQuestion</span>(<span class="params">job</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (job ==== <span class="string">'designer'</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(name + <span class="string">', can you please explain what UX design is?'</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (job === <span class="string">'teacher'</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'What subject do you teach, '</span> + name + <span class="string">'?'</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Hello '</span> + name + <span class="string">', what do you do?'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interviewQuestion(<span class="string">'teacher'</span>)(<span class="string">'John'</span>);</span><br></pre></td></tr></table></figure>

<h2 id="10-Bind-Call-and-Apply"><a href="#10-Bind-Call-and-Apply" class="headerlink" title="10. Bind, Call and Apply"></a>10. Bind, Call and Apply</h2><h3 id="10-1-Examples-on-Bind-Call-and-Apply"><a href="#10-1-Examples-on-Bind-Call-and-Apply" class="headerlink" title="10.1. Examples on Bind, Call and Apply"></a>10.1. Examples on Bind, Call and Apply</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">	name: <span class="string">'John'</span>,</span><br><span class="line">	age: <span class="number">26</span>,</span><br><span class="line">	job: <span class="string">'teacher'</span>,</span><br><span class="line">	presentation: <span class="function"><span class="keyword">function</span>(<span class="params">style, timeOfDay</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (style === <span class="string">'formal'</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Good '</span> + timeOfDay + <span class="string">', Ladies and gentlemen! I\'m '</span> + <span class="keyword">this</span>.name + <span class="string">', I\'m a '</span> + <span class="keyword">this</span>.job + <span class="string">' and I\'m '</span> + <span class="keyword">this</span>.age + <span class="string">' years old.'</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (style === <span class="string">'friendly'</span>) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Hey! What\'s up? I\'m '</span> + <span class="keyword">this</span>.name + <span class="string">', I\'m a '</span> + <span class="keyword">this</span>.job + <span class="string">' and I\'m '</span> + <span class="keyword">this</span>.age + <span class="string">' years old. Have a nice '</span> + timeOfDay + <span class="string">'.'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> emily = &#123;</span><br><span class="line">	name: <span class="string">'Emily'</span>,</span><br><span class="line">	age: <span class="number">35</span>,</span><br><span class="line">	job: <span class="string">'designer'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">john.presentation(<span class="string">'formal'</span>, <span class="string">'morning'</span>);</span><br><span class="line"></span><br><span class="line">john.presentation.call(emily, <span class="string">'friendly'</span>, <span class="string">'afternoon'</span>); <span class="comment">// Call</span></span><br><span class="line"></span><br><span class="line">john.presentation.apply(emily, [<span class="string">'friendly'</span>, <span class="string">'afternoon'</span>]); <span class="comment">//Apply</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> johnFriendly = john.presentation.bind(john, <span class="string">'friendly'</span>); <span class="comment">//Bind</span></span><br><span class="line"></span><br><span class="line">johnFriendly(<span class="string">'morning'</span>);</span><br><span class="line">johnFriendly(<span class="string">'night'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> emilyFormal = john.presentation.bind(emily, <span class="string">'formal'</span>); <span class="comment">//Bind</span></span><br><span class="line">emilyFormal(<span class="string">'afternoon'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="10-2-Rewrite-the-Age-Calculation-Problem"><a href="#10-2-Rewrite-the-Age-Calculation-Problem" class="headerlink" title="10.2. Rewrite the Age Calculation Problem"></a>10.2. Rewrite the Age Calculation Problem</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> years = [<span class="number">1990</span>, <span class="number">1965</span>, <span class="number">1937</span>, <span class="number">2005</span>, <span class="number">1998</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">arrayCalc</span>(<span class="params">arr, fn</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> arrRes = [];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">		arrRes.push(fn(arr[i]));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> arrRes;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">caculateAge</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">2016</span> - el;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFullAge</span>(<span class="params">limit, el</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> el &gt;= limit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ages = arrayCalc(years, calculateAge);</span><br><span class="line"><span class="keyword">var</span> fullJapan = arrayCalc(ages, isFullAge.bind(<span class="keyword">this</span>, <span class="number">20</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ages);</span><br><span class="line"><span class="built_in">console</span>.log(fullJapan);</span><br></pre></td></tr></table></figure>


<h2 id="11-Code-Challenge：-Build-a-Fun-Quiz-Game-in-the-Console"><a href="#11-Code-Challenge：-Build-a-Fun-Quiz-Game-in-the-Console" class="headerlink" title="11. Code Challenge： Build a Fun Quiz Game in the Console"></a>11. Code Challenge： Build a Fun Quiz Game in the Console</h2><h3 id="11-1-Basic-Level"><a href="#11-1-Basic-Level" class="headerlink" title="11.1. Basic Level"></a>11.1. Basic Level</h3><ol>
<li><p>Build a function constructor called Question to describe a question. A question should include:<br>a) question itself<br>b) the answers from which the player can choose the correct one (choose an adequate data structure here, array, object, etc.)<br>c) correct answer (I would use a number for this)</p>
</li>
<li><p>Create a couple of questions using the constructor</p>
</li>
<li><p>Store them all inside an array</p>
</li>
<li><p>Select one random question and log it on the console, together with the possible answers (each question should have a number) (Hint: write a method for the Question objects for this task).</p>
</li>
<li><p>Use the ‘prompt’ function to ask the user for the correct answer. The user should input the number of the correct answer such as you displayed it on Task 4.</p>
</li>
<li><p>Check if the answer is correct and print to the console whether the answer is correct ot nor (Hint: write another method for this).</p>
</li>
<li><p>Suppose this code would be a plugin for other programmers to use in their code. So make sure that all your code is private and doesn’t interfere with the other programmers code (Hint: we learned a special technique to do exactly that).</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Question</span>(<span class="params">question, answers, correct</span>) </span>&#123;</span><br><span class="line">		    <span class="keyword">this</span>.question = question;</span><br><span class="line">        <span class="keyword">this</span>.answers = answers;</span><br><span class="line">        <span class="keyword">this</span>.correct = correct;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Question.prototype.displayQuestion = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.question);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.answers.length; i++) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(i + <span class="string">': '</span> + <span class="keyword">this</span>.answers[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Question.prototype.checkAnswer = <span class="function"><span class="keyword">function</span>(<span class="params">ans</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ans === <span class="keyword">this</span>.correct) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Correct answer!'</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Wrong answer. Try again :)'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q1 = <span class="keyword">new</span> Question(<span class="string">'Is JavaScript the coolest programming language in the world?'</span>,</span><br><span class="line">                          [<span class="string">'Yes'</span>, <span class="string">'No'</span>],</span><br><span class="line">                          <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q2 = <span class="keyword">new</span> Question(<span class="string">'What is the name of this course\'s teacher?'</span>,</span><br><span class="line">                          [<span class="string">'John'</span>, <span class="string">'Micheal'</span>, <span class="string">'Jonas'</span>],</span><br><span class="line">                          <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q3 = <span class="keyword">new</span> Question(<span class="string">'What does best describe coding?'</span>,</span><br><span class="line">                          [<span class="string">'Boring'</span>, <span class="string">'Hard'</span>, <span class="string">'Fun'</span>, <span class="string">'Tediuos'</span>],</span><br><span class="line">                          <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> questions = [q1, q2, q3];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> n = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * questions.length);</span><br><span class="line"></span><br><span class="line">    questions[n].displayQuestion();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> answer = <span class="built_in">parseInt</span>(prompt(<span class="string">'Please select the correct answer.'</span>));</span><br><span class="line"></span><br><span class="line">    questions[n].checkAnswer(answer);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h3 id="11-2-Expert-Level"><a href="#11-2-Expert-Level" class="headerlink" title="11.2. Expert Level"></a>11.2. Expert Level</h3><ol start="8">
<li><p>After you display the result, display the next random question, so that the game never ends (Hint: write a function for this and call it right after displaying the result)</p>
</li>
<li><p>Be careful: after Task 8, the game literally never ends. So include the option to quit the game if the user writes ‘exit’ instead of the answer. In this case, DON’T call the function from task 8.</p>
</li>
<li><p>Track the user’s score to make the game more fun! So each time an answer is correct, add 1 point to the score (Hint: I’m going to use the power of closures for this, but you don’t have to, just do this with the tools you feel more comfortable at this point).</p>
</li>
<li><p>Display the score in the console. Use yet another method for this.</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Question</span>(<span class="params">question, answers, correct</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.question = question;</span><br><span class="line">        <span class="keyword">this</span>.answers = answers;</span><br><span class="line">        <span class="keyword">this</span>.correct = correct;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Question.prototype.displayQuestion = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.question);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.answers.length; i++) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(i + <span class="string">': '</span> + <span class="keyword">this</span>.answers[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Question.prototype.checkAnswer = <span class="function"><span class="keyword">function</span>(<span class="params">ans, callback</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> sc;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ans === <span class="keyword">this</span>.correct) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Correct answer!'</span>);</span><br><span class="line">            sc = callback(<span class="literal">true</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Wrong answer. Try again :)'</span>);</span><br><span class="line">            sc = callback(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.displayScore(sc);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Question.prototype.displayScore = <span class="function"><span class="keyword">function</span>(<span class="params">score</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Your current score is: '</span> + score);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'------------------------------'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q1 = <span class="keyword">new</span> Question(<span class="string">'Is JavaScript the coolest programming language in the world?'</span>,</span><br><span class="line">                          [<span class="string">'Yes'</span>, <span class="string">'No'</span>],</span><br><span class="line">                          <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q2 = <span class="keyword">new</span> Question(<span class="string">'What is the name of this course\'s teacher?'</span>,</span><br><span class="line">                          [<span class="string">'John'</span>, <span class="string">'Micheal'</span>, <span class="string">'Jonas'</span>],</span><br><span class="line">                          <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> q3 = <span class="keyword">new</span> Question(<span class="string">'What does best describe coding?'</span>,</span><br><span class="line">                          [<span class="string">'Boring'</span>, <span class="string">'Hard'</span>, <span class="string">'Fun'</span>, <span class="string">'Tediuos'</span>],</span><br><span class="line">                          <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> questions = [q1, q2, q3];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">score</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> sc = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">correct</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (correct) &#123;</span><br><span class="line">                sc++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sc;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> keepScore = score();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">nextQuestion</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> n = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * questions.length);</span><br><span class="line">        questions[n].displayQuestion();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> answer = prompt(<span class="string">'Please select the correct answer.'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(answer !== <span class="string">'exit'</span>) &#123;</span><br><span class="line">            questions[n].checkAnswer(<span class="built_in">parseInt</span>(answer), keepScore);</span><br><span class="line"></span><br><span class="line">            nextQuestion();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    nextQuestion();</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/05/JavaScript-in-the-Browser-DOM-Manipulation-and-Events/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/05/JavaScript-in-the-Browser-DOM-Manipulation-and-Events/" class="post-title-link" itemprop="url">JavaScript in the Browser: DOM Manipulation and Events</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-05 06:44:25" itemprop="dateCreated datePublished" datetime="2017-04-05T06:44:25-07:00">2017-04-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-07-22 08:51:40" itemprop="dateModified" datetime="2017-07-22T08:51:40-07:00">2017-07-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/04/05/JavaScript-in-the-Browser-DOM-Manipulation-and-Events/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/04/05/JavaScript-in-the-Browser-DOM-Manipulation-and-Events/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-The-DOM-and-DOM-Manipulation"><a href="#1-The-DOM-and-DOM-Manipulation" class="headerlink" title="1. The DOM and DOM Manipulation"></a>1. The DOM and DOM Manipulation</h2><ul>
<li>DOM: Document Object Model;</li>
<li>Structured representation of an HTML document;</li>
<li>The DOM is used to connect webpages to scripts like JavaScript;</li>
<li>For each HTML box, there is an object in the DOM that we can access and interact with.</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/opF1GsIL8wI2VAPukMjRs_qVBbUa2SFB7IcszMYq4Y4Rhm31n4gtbs1dJZAwrziMJS4-wQn4OxbYBzN3_jLw8J7Fi4XG43rFJSnO6s1ODZG9r1vRMGqLybAWUzggx4lbGhzPJy_NZ6iwhv29W8Ko0mk-im0KsEg0ChQOH9Haxup8w-jkv2mRGqUQy01uUcWsEWU1SjMge3SqI3giiUh-0j9l2OVf8BDW6rKY6yvWyqeTdOYHnVma0D9MCuFcmJCInlpOAtaTXiiRkRJNuZAoVeOvSN0GsblKPvxS_lsoiJiA4WEnq-Y73Ud2OtGlC-_m0iE67Atr1i5Skm1x0kIVy-jpGxPFj0RKiVGlha2saK9izFfFK5-a0KSg_W0DxfjESVcSboe4xZO5JMeHdb6RnZIugIFRi2Q_UHxQtuqw5s3R7LXXRdQktEidCrIz3QnFGMm4D07Lx6fO6jKflunl30_do5_0aaOaitVKy_AV5EEc-luK8X5EAPyB8PzuWQaT_6rfdK7TbuRuob3JmrFzvBmxglZjxb6tY-LACSogxScpISC5MoYyUEP9HIzOkt-LprxJ0R19VN01FEyTrkpEU7TbX0D0qQwEDDGxb8tSnTBpdzUwzDfHUNMJijQjxlnfQ1HL8knMIyhz0ZPQoAmcrpARr1W9N9N5UkVMpv_kMQ=w1192-h1019-no" alt="DOM"></p>
<h2 id="2-DOM-Access-and-Manipulation"><a href="#2-DOM-Access-and-Manipulation" class="headerlink" title="2. DOM Access and Manipulation"></a>2. DOM Access and Manipulation</h2><p>To get a random number from 1 to 6:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dice = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">6</span>) + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>Select an element using query selector:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'#current-'</span> + activePlayer).textContent;</span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'#current-'</span> + activePlayer).innerHTML;</span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.dice'</span>).style.display;</span><br></pre></td></tr></table></figure>

<p>Select an element using getElementById: (faster!)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'score-0'</span>).textContent = <span class="string">'0'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="3-Events-and-Event-Handling"><a href="#3-Events-and-Event-Handling" class="headerlink" title="3. Events and Event Handling"></a>3. Events and Event Handling</h2><ul>
<li><strong>Events</strong>: Notifications that are sent to notify the code that something happened on the webpage;</li>
<li>Examples: clicking a button, resizing a window, scrolling down or pressing a key;</li>
<li><strong>Event listener</strong>: A function that performs an action based on a certain event. It waits for a specific event to happen.</li>
</ul>
<p>Add an event listener for an element:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.btn-roll'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//An anonymous function, which does not have a name, and can not be used elsewhere.</span></span><br><span class="line">	<span class="comment">//Do something.</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="4-DRY-Don’t-Repeat-Yourself-Principle"><a href="#4-DRY-Don’t-Repeat-Yourself-Principle" class="headerlink" title="4. DRY(Don’t Repeat Yourself) Principle"></a>4. DRY(Don’t Repeat Yourself) Principle</h2><p>For the same code used in different places, wrap it up with a function, like the init() and nextPlayer() in the project.</p>
<h2 id="5-State-Variables"><a href="#5-State-Variables" class="headerlink" title="5. State Variables"></a>5. State Variables</h2><p>In this example, use <code>gamePlaying</code> as a state variable to stop the game after a win.</p>
<h2 id="6-Complete-JavaScript-Code"><a href="#6-Complete-JavaScript-Code" class="headerlink" title="6. Complete JavaScript Code"></a>6. Complete JavaScript Code</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">GAME RULES:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">- The game has 2 players, playing in rounds</span></span><br><span class="line"><span class="comment">- In each turn, a player rolls a dice as many times as he whishes. Each result get added to his ROUND score</span></span><br><span class="line"><span class="comment">- BUT, if the player rolls a 1, all his ROUND score gets lost. After that, it's the next player's turn</span></span><br><span class="line"><span class="comment">- The player can choose to 'Hold', which means that his ROUND score gets added to his GLBAL score. After that, it's the next player's turn</span></span><br><span class="line"><span class="comment">- The first player to reach 100 points on GLOBAL score wins the game</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> scores, roundScore, activePlayer, gamePlaying;</span><br><span class="line"></span><br><span class="line">init();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.btn-roll'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(gamePlaying) &#123;</span><br><span class="line">        <span class="comment">// 1. Random number</span></span><br><span class="line">        <span class="keyword">var</span> dice = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">6</span>) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. Display the result</span></span><br><span class="line">        <span class="keyword">var</span> diceDOM = <span class="built_in">document</span>.querySelector(<span class="string">'.dice'</span>);</span><br><span class="line">        diceDOM.style.display = <span class="string">'block'</span>;</span><br><span class="line">        diceDOM.src = <span class="string">'dice-'</span> + dice + <span class="string">'.png'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. Update the round score IF the rolled number was NOT a 1</span></span><br><span class="line">        <span class="keyword">if</span> (dice !== <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//Add score</span></span><br><span class="line">            roundScore += dice;</span><br><span class="line">            <span class="built_in">document</span>.querySelector(<span class="string">'#current-'</span> + activePlayer).textContent = roundScore;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//Next player</span></span><br><span class="line">            nextPlayer();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.btn-hold'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (gamePlaying) &#123;</span><br><span class="line">        <span class="comment">// Add CURRENT score to GLOBAL score</span></span><br><span class="line">        scores[activePlayer] += roundScore;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Update the UI</span></span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">'#score-'</span> + activePlayer).textContent = scores[activePlayer];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Check if player won the game</span></span><br><span class="line">        <span class="keyword">if</span> (scores[activePlayer] &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">            <span class="built_in">document</span>.querySelector(<span class="string">'#name-'</span> + activePlayer).textContent = <span class="string">'Winner!'</span>;</span><br><span class="line">            <span class="built_in">document</span>.querySelector(<span class="string">'.dice'</span>).style.display = <span class="string">'none'</span>;</span><br><span class="line">            <span class="built_in">document</span>.querySelector(<span class="string">'.player-'</span> + activePlayer + <span class="string">'-panel'</span>).classList.add(<span class="string">'winner'</span>);</span><br><span class="line">            <span class="built_in">document</span>.querySelector(<span class="string">'.player-'</span> + activePlayer + <span class="string">'-panel'</span>).classList.remove(<span class="string">'active'</span>);</span><br><span class="line">            gamePlaying = <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//Next player</span></span><br><span class="line">            nextPlayer();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nextPlayer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//Next player</span></span><br><span class="line">    activePlayer === <span class="number">0</span> ? activePlayer = <span class="number">1</span> : activePlayer = <span class="number">0</span>;</span><br><span class="line">    roundScore = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'current-0'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'current-1'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-0-panel'</span>).classList.toggle(<span class="string">'active'</span>);</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-1-panel'</span>).classList.toggle(<span class="string">'active'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//document.querySelector('.player-0-panel').classList.remove('active');</span></span><br><span class="line">    <span class="comment">//document.querySelector('.player-1-panel').classList.add('active');</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.dice'</span>).style.display = <span class="string">'none'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.btn-new'</span>).addEventListener(<span class="string">'click'</span>, init);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    scores = [<span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line">    activePlayer = <span class="number">0</span>;</span><br><span class="line">    roundScore = <span class="number">0</span>;</span><br><span class="line">    gamePlaying = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.dice'</span>).style.display = <span class="string">'none'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'score-0'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'score-1'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'current-0'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'current-1'</span>).textContent = <span class="string">'0'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'name-0'</span>).textContent = <span class="string">'Player 1'</span>;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'name-1'</span>).textContent = <span class="string">'Player 2'</span>;</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-0-panel'</span>).classList.remove(<span class="string">'winner'</span>);</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-1-panel'</span>).classList.remove(<span class="string">'winner'</span>);</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-0-panel'</span>).classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-1-panel'</span>).classList.remove(<span class="string">'active'</span>);</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'.player-0-panel'</span>).classList.add(<span class="string">'active'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//document.querySelector('#current-' + activePlayer).textContent = dice;</span></span><br><span class="line"><span class="comment">//document.querySelector('#current-' + activePlayer).innerHTML = '&lt;em&gt;' + dice + '&lt;/em&gt;';</span></span><br><span class="line"><span class="comment">//var x = document.querySelector('#score-0').textContent;</span></span><br></pre></td></tr></table></figure>

<h2 id="7-Project-Demo"><a href="#7-Project-Demo" class="headerlink" title="7. Project Demo"></a>7. Project Demo</h2><p><a href="http://dannyzhang.run/projects/pigGame">Demo</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/03/How-JavaScript-works-Behind-the-Scenes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/03/How-JavaScript-works-Behind-the-Scenes/" class="post-title-link" itemprop="url">How JavaScript Works Behind the Scenes?</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-03 08:11:19" itemprop="dateCreated datePublished" datetime="2017-04-03T08:11:19-07:00">2017-04-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-07-22 08:51:01" itemprop="dateModified" datetime="2017-07-22T08:51:01-07:00">2017-07-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/04/03/How-JavaScript-works-Behind-the-Scenes/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/04/03/How-JavaScript-works-Behind-the-Scenes/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-What-Happens-to-Our-Code"><a href="#1-What-Happens-to-Our-Code" class="headerlink" title="1. What Happens to Our Code?"></a>1. What Happens to Our Code?</h2><p><img src="https://lh3.googleusercontent.com/O55ygo71OcIq1ZWkeq5MmJgJvngfikY68Y2u-P3HGg4JhMIQ_Nl4WA1LwQnpnartTQjnIrbanKGdCkUy8AUdY3nzu0qhpi_P7wZ0LOn_B8GF5Ot5PvxlP6IfR-OO4eCQhUHC6-MwQH1HL7gzV2JpmNSjT-D_8yrts5VVjXuuLItm5Rfm0bslWS2jZqIGJeuXg1Nd-eojrgVbMS3nL9P0R6uEbwpKXPrGu77WoTalhjbgKM-QLzdpsB0c7y9JqLHHobxqjrHI9Wogz0Szkcu0RfnB-1HryWlzsrollu8ncuzm8t730UV8GVNnviVSjWwlgEkeGPIDF1bonP1iFNLTVK7FdWtW11xxM2cuhjhdMp-jQnZjNpHoisOxEX0Kv7v81TOPQFukptupXiC42FuklYnqrUc1wLLhekUXwJSyKAxS93lvxSvxIWSuKJR9JjbgY3ZXwnst7K6A4YXwvqXoO2U71R6btXJK0YFiNN4coUO_VdDRqqq-EddpJrOzgUpf46BUlRhZ4S0HUbgfzFUbdhpllQrFC0kWQOwuYhVRHp7MASml8l6QsQsbPE1IFJ4u20yDwmuvA9g75i339JNGPKtmpo40tTA_Way8X434_oCKlUwx2JuAeBMLIF-2RIsOA-DPPniHT2HBp6uYQr9CvfsX1xVHQwOSqQKEP9cRFQ=w1440-h558-no" alt="What Happens to Our Code"></p>
<h2 id="2-Execution-Contexts-and-the-Execution-Stack"><a href="#2-Execution-Contexts-and-the-Execution-Stack" class="headerlink" title="2. Execution Contexts and the Execution Stack"></a>2. Execution Contexts and the Execution Stack</h2><h3 id="2-1-Execution-Context"><a href="#2-1-Execution-Context" class="headerlink" title="2.1. Execution Context"></a>2.1. Execution Context</h3><p><img src="https://lh3.googleusercontent.com/i7-xaGbNE0MKmlhdicghBytDi0k7AkekQBcPbc9HcXf2Lwn8cEx0Nr2UBQGlUVW1MUgzLsRt9o5KVeD7MIXPSIfEy33wWJSesaRJsJsgH6QBBKBNcl39YM75gMaT9XrQYbBDmyb4snP0d4Loz0Tpngo-BMLZ9jsVfzMTbXFww5f8PYHwFTJ7O5nB00sss588aILyLHQyps7mGpl_ZMSHL6Xkw3sWC-4Q1efkT-BGoSfkS8-swaE-Pm1AiH_5_OFThjcpobfh2pyOvDbs7Xb9sYmURhNuBBVsFSz5YUQtrb4jcL5tO6aUtQu6OYAhHVpk7Vf89JN2Iqxp7dGPIP9QPD-DOM-_mLAhvmUDWDeTMFyCQbTRweycYC-9EFlpaOcKLCuuTWQnqgynyaOFT59rO040W_-OvqnH1rIQli4TZxRGxJmTeU6EsTzUVq0t3p67AFMpEGJu-LHRB3_f7KcU-aqZOenwdIgj-6eNvWtTZzaDVOBD2O8MG8mB_Jdfh5cpruhWKDPdgYChfPyvba2PtVhgj4KRk8K-lWttQLrZexVC0OJR-sxtfZ8bCDNp4Z7TQbHI0zmKBS02sEa91ecrRr_2PnXLF3RgxR8AmxMNs-_cs2ZhFcM_tWqwkJlSdrIVLm7f1_2ZuKKnGhaCtgSOHDB1_7Sqa0SuD6n2Y_yiOw=w698-h838-no" alt="Execution Context"></p>
<ul>
<li>Code that is not inside any function</li>
<li>Associated with the global object</li>
<li>In the browser, that’s the window object</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lastName === <span class="built_in">window</span>.lastName</span><br></pre></td></tr></table></figure>

<h3 id="2-2-Execution-Stack"><a href="#2-2-Execution-Stack" class="headerlink" title="2.2. Execution Stack"></a>2.2. Execution Stack</h3><p>When executing the code inside a function, a new Execution Context will be created on top of the existing one.</p>
<p><img src="https://lh3.googleusercontent.com/Kslrk3U4J-QrkOX7zp3hUC2UIBxorVssUHX_ybRAUKELW8686sptO1exa9rM-87sI5A30N74aIQZh8NyCeqVQO1D469aNIbH8TwFFs1ybPcx1a0Xpg9_m84GrM3S6lkSgr3zWsN5KZrG3P34mWa_Zz_fWzz_7MFmjqsChDcrNLqazE8wkwGlbLt_bb_aaleUh26GEwCD_Wvgv5ijvPK2QwJnU6I2Wm-JMXZENdSxhPuijJD-6ve7T8MqlJ5H6Ufi1WuzXKSs-llulsMfBPkAz2LitwjGhKoPibij8ObYlgILT90EK6ZlR8qKbnCG193CJfG0EaO98UQaZ6ZHJBSDRW1C5gQEcAtYCSi5bM2RCcVFZAZV8zBEVwec4yfd0iQHlNGklpphLzwv7zPG3yhtwav9VWq-ORP0brJ2i7o3ISIKFT5IY8sO8NWNkzx9EN7jg2TEU58SSKNXatjG52l0bC-_rWuK4bXpennNZl142UzBkFGsRn6Rw89ePPQcyhlSA98gw3veq4DLjIufio3Oo6_jxdxP-MHP62W0_B5L81e8EqoNrbt_MO9XwZLJtKaamt_56_L3qe3L71mCmYVqAk0CoFLrn8qXF-_LQmRjWGNwGfOtgMlLeEKweqov4KTou7oPyZmIQ0WDyTDmK3O4rTLy3uAJXjhNMRBNqXAg0g=w1440-h805-no" alt="Execution Stack"></p>
<h2 id="3-The-Execution-Context-in-Detail-Creation-and-Execution-Phase-and-Hoisting"><a href="#3-The-Execution-Context-in-Detail-Creation-and-Execution-Phase-and-Hoisting" class="headerlink" title="3. The Execution Context in Detail: Creation and Execution Phase and Hoisting"></a>3. The Execution Context in Detail: Creation and Execution Phase and Hoisting</h2><h3 id="3-1-The-Execution-Context-in-Detail"><a href="#3-1-The-Execution-Context-in-Detail" class="headerlink" title="3.1. The Execution Context in Detail"></a>3.1. The Execution Context in Detail</h3><p><img src="https://lh3.googleusercontent.com/pf0WfjuVDh6ufRtT5lKLPEF0G5yAbSS_toYzm_HZh-dNcvEz8dadve0vF2j8P8ZUa7k0SIEjGHc4_qZXLPg8Yvs5Gb8QTKtKZRXgBmSdXNwASi4XUm4UmiDg4E6pVE0o2W_WoXhjeXp9tZByuTkGpTXV0Io_zR9f1gXkaszM2sAzjRkxOXN5AwoDR9NmUhkIaYa6_BF0_H7dpBlqOJO7GErgmE0-71a-mctQBR2dnRyO4nMcCB5KkYp-rNyZd-NESd8I_XMPWA1CtRpuJ9z0MNq4iXrlXt7FgmPD-iJ32Mx9xaLiwC778u_C1Os-sdVy_F65iUrtEqNXTekoQh16aVDcRF2bdPUX7Ph7WV3Bvl4M6TYg17PokRxg-YvVdT3SR4s0IcfjKCMwb49OIS3iHPFRv78qS_E8X1yv8XwXazEnqRSRSmCBk3Z_iFqPtEV5OOYo7wlMNnVBemhsZ7dMqPrpnMbJhRE5YvVp3k32gCEA5GTVtVoYXAUxcerwVQZRlonhnT6OXeDVrPXTRtqVS0nh84hx0TeLTsBzXdjkAKG0f4mBMC2_AWX0e9NeLWtTFLAIsXJl15xYGK9aiVm1d_VA2Z6D1mSB-BhPj5qpYS6zFQwWhhCD-JqbjJZG6ETL8_bpdmebNCFVNzcxk7WsR5LK8ySID_IecQJPn19TfQ=w453-h544-no" alt="The Execution Context in Detail"></p>
<ol>
<li>Creation phase<ul>
<li>Creation of the Variable Object(VO)</li>
<li>Creation of the scope chain</li>
<li>Determine value of the ‘this’ variable</li>
</ul>
</li>
<li>Execution phase<ul>
<li>The code of the function that generated the current execution context is ran line by line</li>
</ul>
</li>
</ol>
<h3 id="3-2-The-Variable-Object"><a href="#3-2-The-Variable-Object" class="headerlink" title="3.2. The Variable Object"></a>3.2. The Variable Object</h3><ul>
<li>The argument object is created, containing all the arguments that were passed into the function.</li>
<li>Code is scanned for <strong>function declarations</strong>: for each function, a property is created in the Variable Object, <code>pointing to the function</code>. [Hoisting]</li>
<li>Code is scanned for <strong>variable declarations</strong>: for each variable, a property is created in the Variable Object, and set to <code>undefined</code>. [Hoisting]</li>
</ul>
<h2 id="4-Hoisting-in-Practice"><a href="#4-Hoisting-in-Practice" class="headerlink" title="4. Hoisting in Practice"></a>4. Hoisting in Practice</h2><h3 id="4-1-Function-Hoisting"><a href="#4-1-Function-Hoisting" class="headerlink" title="4.1. Function Hoisting"></a>4.1. Function Hoisting</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">caculatedAge(<span class="number">1990</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculatedAge</span>(<span class="params">year</span>) </span>&#123; <span class="comment">//Function has already been available before executing</span></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">2016</span> - year);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The above code works because the function has already been available before executing.</p>
<p>However, for the following code, it’s not working, since retirement has been created, but just set to <code>undefined</code> before execution.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">retirement(<span class="number">1990</span>);</span><br><span class="line"><span class="keyword">var</span> retirement = <span class="function"><span class="keyword">function</span>(<span class="params">year</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">65</span> - (<span class="number">2016</span> - year));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-Variable-Hoisting"><a href="#4-2-Variable-Hoisting" class="headerlink" title="4.2. Variable Hoisting"></a>4.2. Variable Hoisting</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">23</span>;</span><br></pre></td></tr></table></figure>

<p>The above code only prints undefined, which is as expected.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">23</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> age = <span class="number">65</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(age);</span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br></pre></td></tr></table></figure>

<p>The results are:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">65</span><br><span class="line">23</span><br></pre></td></tr></table></figure>

<p>Because the first age is a local variable, but the second is a global one.</p>
<h2 id="5-Scoping-and-the-Scope-Chain"><a href="#5-Scoping-and-the-Scope-Chain" class="headerlink" title="5. Scoping and the Scope Chain"></a>5. Scoping and the Scope Chain</h2><h3 id="5-1-Scoping-in-JavaScript"><a href="#5-1-Scoping-in-JavaScript" class="headerlink" title="5.1. Scoping in JavaScript"></a>5.1. Scoping in JavaScript</h3><ul>
<li>Scoping answers the question “where can we access a certain variable?”</li>
<li><strong>Each new function creates a scope</strong>: the space/environment, in which the variables it defines are accessible.</li>
<li><strong>Lexical scoping</strong>: a function that is lexically within another function gets access to the scope of the outer function.</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/F4IJgAKT-DtOdIqxYEgCzS_im4MhDRX2VjF87eQkppiqA0jH2B-_ILhjtd5GmkmvOofxfcFvLvCIKOqyPJ9lkgHmYdPQvuCVHDxzUgQJKe5v81RMU_Gzbqe018Erp2Q6z9dDNwICMctzdJsYnv9YM3nLgg255Qr-6Ml9zoR1moGZjQEDTAlPFIUxioSS_GNm41KYGaBp7A03Hp745fKCPJJ6vtZ2ko0PbFfs_Imxgo8bvxwtC6wuw9IwfynWhwJHnPhyVYFL4KpmHbzWnlBVQU9du6gCElBNNQnUUOnSyYAyVNfiRPYd7ifb2Oj8KUwFl73bJqVQ1JQNhipx0qFwbDfUqSo7Z8aF9CxWLBFyPvd6lKaZyBTVcUvMAHd5J4Fp9W3mZWOopCKzrBQIrN6O4vW7peoZEgEc-027t1wpln7pQZ-4EUOTb7tRxF0qnLwcTPxzFNFjne2gLiL9oQeOG9Uta12St74BqUM9eDKFv7fvzfERLjmvVE6j4WD0LwXaWt2e_12qjU3A4l-9z4FfsGUbUlbY5M-xcPIkXSJJSEaG3s_H9TG4LB1FPrbJIvrWzB9dR0LUKMYt4W2lNRtbFQwdLjc7CNBF4Z1nv1s5m9xEOWNX5be7ZXEKgh10WMSaHF2sNOPnxuiE7y9eRjXFhMtQtNQUIxRydVum7N4dKg=w1440-h560-no" alt="Scoping in JavaScript"></p>
<h3 id="5-2-Execution-Stack-vs-Scope-Chain"><a href="#5-2-Execution-Stack-vs-Scope-Chain" class="headerlink" title="5.2. Execution Stack vs Scope Chain"></a>5.2. Execution Stack vs Scope Chain</h3><p>Though the stack and scope chain look similar, they are still different.<br><img src="https://lh3.googleusercontent.com/boB66Vu2o8EFG1Q8eWHzMDlCviauiFy2kX9ra0vi7TIg9-covb4qyOaz6sWgkukQlfhTl1eB-zeww6-wPd1aIhc6xdysxDFHeilC2VceCgfiPZfrhvvq7I4vErzy8kqbipEkFLRFH0w5jHseqzYpLf6dNJ5LZPNAv4FSrDSGMZ1Se1hHOP1xjfptBUqOANZjzgDqfSVNBjSzrxQIf7DJa25UUijwP24rZtxsVCU6gVO3qu1Z_KOzNsGMRKmL4SmAjW4DjtyBzCQEppanyCIJMubOtGZlQN3as2zZ2bDteFWtvJ_kKSMsRTP5Apu3W1bxEX0ABqy_POobuEsYCqKmlQyga6jt8ujUhFnpoQzJC_Gq4sdZ2-qAH4E5h48gUwFCS2HH-d1Q4zckCR4vs7C7EwGfrWVHYcaH0WUHnm43gav0xTenX_OwMKIHODWOkn76jJDdgMIHxSfIFJ_3vJPAe8sp_xp_KFQjwom9H5_s4Hk710hKjdaeyh_4mSrT2RVRZ1g5wUA2wO0d_DbKF-rlmt0qhPuO803sTzoIoPrAVcULzecG10ClbVSWhIh81IEkiZEXv-jCwuFt9UmpfjQlyTmiU7qeO1FRvUGC5294UGDtgNjCVpDbIPx8XbRsPHF2gr8ALfbkwVxIeqvamSjzzVD3eO47YX2n5tDTn1yIqg=w1440-h643-no" alt="Execution Stack vs Scope Chain"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'Hello!'</span>;</span><br><span class="line">first();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">first</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> b = <span class="string">'Hi'</span>;</span><br><span class="line">	second();</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">second</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> c = <span class="string">'Hey!'</span>;</span><br><span class="line">		third();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">third</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> d = <span class="string">'John'</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The execution result:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Uncaught ReferenceError: c is not defined.</span><br></pre></td></tr></table></figure>

<p>Because of the scope of the third function, it can only access variable a and d.</p>
<h2 id="6-The-‘this’-Keyword"><a href="#6-The-‘this’-Keyword" class="headerlink" title="6. The ‘this’ Keyword"></a>6. The ‘this’ Keyword</h2><ul>
<li><strong>Regular function call</strong>: the this keyword points at the global object, (the window object, in the browser).</li>
<li><strong>Method call</strong>: the this variable points to the object that is calling the method.</li>
</ul>
<p>The this keyword is not assigned a value until a function where it is defined is actually called.</p>
<h2 id="7-The-‘this’-Keyword-in-Practice"><a href="#7-The-‘this’-Keyword-in-Practice" class="headerlink" title="7. The ‘this’ Keyword in Practice"></a>7. The ‘this’ Keyword in Practice</h2><p><strong>Case 1</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">calculateAge(<span class="number">1985</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculateAge</span>(<span class="params">year</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">2016</span> - year);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//First 'this'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">	name: <span class="string">'John'</span>,</span><br><span class="line">	yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">	calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//Second 'this'</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">john.calculateAge();</span><br></pre></td></tr></table></figure>

<p>In this case, the first ‘this’ is the window object, and the second ‘this’ is the john object.</p>
<p><strong>Case 2</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">	name: <span class="string">'John'</span>,</span><br><span class="line">	yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">	calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//First 'this'</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">		<span class="function"><span class="keyword">function</span> <span class="title">innerFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//Second 'this'</span></span><br><span class="line">		&#125;</span><br><span class="line">		innerFunction();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">john.calculateAge();</span><br></pre></td></tr></table></figure>

<p>In this case, the first ‘this’ is the john object, however, the second object is  the window object. It’s because the second ‘this’ is inside a regular function call.</p>
<p><strong>Case 3 (Method Borrowing)</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">	name: <span class="string">'John'</span>,</span><br><span class="line">	yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">	calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">john.calculateAge();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mike = &#123;</span><br><span class="line">	name: <span class="string">'Mike'</span>,</span><br><span class="line">	yearOfBirth: <span class="number">1984</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mike.calculateAge = john.calculateAge;</span><br></pre></td></tr></table></figure>

<p>In this case, ‘this’ in calling john.calculateAge() is john object, and ‘this’ in calling mike.calculateAge() is mike object.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/04/02/Complete-JavaScript-Course-Basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/02/Complete-JavaScript-Course-Basics/" class="post-title-link" itemprop="url">Complete JavaScript Course: Basics</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-02 08:00:19" itemprop="dateCreated datePublished" datetime="2017-04-02T08:00:19-07:00">2017-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-07-22 08:49:44" itemprop="dateModified" datetime="2017-07-22T08:49:44-07:00">2017-07-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/04/02/Complete-JavaScript-Course-Basics/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/04/02/Complete-JavaScript-Course-Basics/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-What-is-JavaScript"><a href="#1-What-is-JavaScript" class="headerlink" title="1. What is JavaScript?"></a>1. What is JavaScript?</h2><p>JavaScript is a lightweight, cross-platform, object-oriented computer programming language</p>
<ul>
<li>JavaScript is one of the three core technologies of web development</li>
<li>JavaScript is most commonly used as a part of webpages</li>
<li>Today, JavaScript can be used in different places:<ul>
<li>Client-side: JavaScript was traditionally only used in the browser</li>
<li>Server-side: Thanks to node.js, we can use JavaScript on the server as well</li>
</ul>
</li>
<li>JavaScript is what made modern web development possible:<ul>
<li>Dynamic effects and interactivity;</li>
<li>Modern web applications that we can interact with.</li>
</ul>
</li>
</ul>
<h2 id="2-JavaScript-Basics"><a href="#2-JavaScript-Basics" class="headerlink" title="2. JavaScript Basics"></a>2. JavaScript Basics</h2><h3 id="2-1-Declare-a-variable"><a href="#2-1-Declare-a-variable" class="headerlink" title="2.1. Declare a variable:"></a>2.1. Declare a variable:</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'John'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lastName = <span class="string">"Smith"</span>; <span class="comment">//Both single quotes and double quotes work, but need to keep consistent.</span></span><br><span class="line"><span class="built_in">console</span>.log(lastName);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">26</span>;</span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fullAge = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.log(fullAge);</span><br></pre></td></tr></table></figure>

<h3 id="2-2-Primitive-Javascript-Data-Types-Variable-Mutation-and-Type-coercion"><a href="#2-2-Primitive-Javascript-Data-Types-Variable-Mutation-and-Type-coercion" class="headerlink" title="2.2. Primitive Javascript Data Types, Variable Mutation and Type coercion"></a>2.2. Primitive Javascript Data Types, Variable Mutation and Type coercion</h3><ul>
<li><strong>Number</strong>: Floating point numbers, for decimals and integers</li>
<li><strong>String</strong>: Sequence of characters, used for text.</li>
<li><strong>Boolean</strong>: Logical data type that can only be true of false</li>
<li><strong>Undefined</strong>: Data type of a variable which doe not have a value yet.</li>
<li><strong>Null</strong>: Also means ‘non-existent’.</li>
</ul>
<p><code>JavaScript has dynamic typing</code><br>We don’t need to define the variable type, Javascript will figure it out by itself.</p>
<p><strong>Variable Mutation &amp; Type coercion</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'Danny'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">27</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name + age); <span class="comment">//Type coercion: String + Number = String</span></span><br><span class="line">age = <span class="string">"twenty seven"</span> <span class="comment">//Variable Mutation: the data type can be changed for the same virable.</span></span><br><span class="line">consol.log(name + age);</span><br></pre></td></tr></table></figure>

<p><strong>Prompt &amp; Alert</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lastName = prompt(<span class="string">'What is the last name?'</span>); <span class="comment">//Allow user to type in.</span></span><br><span class="line">alert(<span class="string">'The last name is '</span> + lastName);</span><br></pre></td></tr></table></figure>

<h3 id="2-3-Operators"><a href="#2-3-Operators" class="headerlink" title="2.3. Operators"></a>2.3. Operators</h3><p>例子都很简单，在JavaScript中各种运算符的优先顺序可参考：</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="_blank" rel="noopener">Operator precedence</a></li>
</ul>
<h3 id="2-4-If-else-statements"><a href="#2-4-If-else-statements" class="headerlink" title="2.4. If else statements"></a>2.4. If else statements</h3><h3 id="2-5-vs"><a href="#2-5-vs" class="headerlink" title="2.5. == vs ==="></a>2.5. == vs ===</h3><p><code>==</code>: does type coercion<br><code>===</code>: does not do type coercion</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">23</span> == <span class="string">'23'</span>) &#123;</span><br><span class="line">	<span class="comment">//Result is true, javaScript transform 23 to string and compare with '23'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="number">23</span> === <span class="string">'23'</span>) &#123;</span><br><span class="line">	<span class="comment">//Result is false, to avoid bugs, it's more recommended to use ===</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-6-Boolean-Logic-and-Switch-Statements"><a href="#2-6-Boolean-Logic-and-Switch-Statements" class="headerlink" title="2.6. Boolean Logic and Switch Statements:"></a>2.6. Boolean Logic and Switch Statements:</h3><p>Too basic, and the same as Java</p>
<h3 id="2-7-Functions"><a href="#2-7-Functions" class="headerlink" title="2.7. Functions"></a>2.7. Functions</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculateAge</span>(<span class="params">yearOfBirth</span>) </span>&#123; <span class="comment">//Function with return value.</span></span><br><span class="line">	<span class="keyword">var</span> age = <span class="number">2016</span> - yearOfBirth;</span><br><span class="line">	<span class="keyword">return</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ageJohn = calculateAge(<span class="number">1990</span>);</span><br><span class="line"><span class="built_in">console</span>.log(ageJohn);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">yearsUntilRetirement</span>(<span class="params">name, yearOfBirth</span>) </span>&#123; <span class="comment">//Function without return value.</span></span><br><span class="line">	<span class="keyword">var</span> age = calculateAge(yearOfBirth);</span><br><span class="line">	<span class="keyword">var</span> retirement = <span class="number">65</span> - age;</span><br><span class="line">	<span class="built_in">console</span>.log(name + <span class="string">'retires in '</span> + retirement + <span class="string">'years.'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">yearsUntilRetirement(<span class="string">'John'</span>, <span class="number">1990</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-8-Statements-and-Expressions"><a href="#2-8-Statements-and-Expressions" class="headerlink" title="2.8. Statements and Expressions"></a>2.8. Statements and Expressions</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Function Statement</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">someFun</span>(<span class="params">par</span>) </span>&#123;</span><br><span class="line">	<span class="comment">//code</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Function Expression</span></span><br><span class="line"><span class="keyword">var</span> someFun = <span class="function"><span class="keyword">function</span>(<span class="params">par</span>) </span>&#123;</span><br><span class="line">	<span class="comment">//code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Difference:</p>
<ul>
<li>Function expression produces a value and outcome</li>
<li>Statement just performs an action</li>
</ul>
<h3 id="2-9-Arrays"><a href="#2-9-Arrays" class="headerlink" title="2.9. Arrays"></a>2.9. Arrays</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">'John'</span>, <span class="string">'Jane'</span>, <span class="string">'Mark'</span>];</span><br><span class="line"><span class="keyword">var</span> years = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1990</span>, <span class="number">1969</span>, <span class="number">1948</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(names[<span class="number">0</span>]);</span><br><span class="line">names[<span class="number">1</span>] = <span class="string">'Ben'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(names);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = [<span class="string">'John'</span>, <span class="string">'Smith'</span>, <span class="number">1990</span>, <span class="string">'designer'</span>, <span class="literal">false</span>];</span><br><span class="line"></span><br><span class="line">john.push(<span class="string">'blue'</span>); <span class="comment">//Add an element to the end</span></span><br><span class="line">john.unshift(<span class="string">'Mr.'</span>); <span class="comment">//Add an element to the beginning</span></span><br><span class="line">john.pop(); <span class="comment">//Remove an element from the end</span></span><br><span class="line">john.shift(); <span class="comment">//Remove an element from the beginning</span></span><br><span class="line">john.indexOf(<span class="string">'Smith'</span>); <span class="comment">//Return the index of an element</span></span><br><span class="line"><span class="built_in">console</span>.log(john);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (john.indexOf(<span class="string">'teacher'</span>) === <span class="number">-1</span>) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'John is NOT a teacher.'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-10-Objects-and-Properties"><a href="#2-10-Objects-and-Properties" class="headerlink" title="2.10. Objects and Properties"></a>2.10. Objects and Properties</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">		name: <span class="string">'John'</span>,</span><br><span class="line">		lastName: <span class="string">'Smith'</span>,</span><br><span class="line">		yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">		job: <span class="string">'teacher'</span>,</span><br><span class="line">		isMarried: <span class="literal">false</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(john); <span class="comment">//Print out all properties</span></span><br><span class="line"><span class="built_in">console</span>.log(john.lastName); <span class="comment">// Print out specific property</span></span><br><span class="line"><span class="built_in">console</span>.log(john[<span class="string">'lastName'</span>]); <span class="comment">// Print out specific property</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xyz = <span class="string">'job'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(john[xyz]);</span><br><span class="line"></span><br><span class="line">john.lastName = <span class="string">'Miller'</span>;</span><br><span class="line">john[<span class="string">'job'</span>] = <span class="string">'programmer'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(john);</span><br><span class="line"></span><br><span class="line"><span class="comment">//A different way to create object</span></span><br><span class="line"><span class="keyword">var</span> jane = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">jane.name = <span class="string">'Jane'</span>;</span><br><span class="line">jane.lastName = <span class="string">'Smith'</span>;</span><br><span class="line">jane[<span class="string">'yearOfBirth'</span>] = <span class="number">1969</span>;</span><br><span class="line">jane[<span class="string">'job'</span>] = <span class="string">'retired'</span>;</span><br><span class="line">jane[<span class="string">'isMarried'</span>] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(jane);</span><br></pre></td></tr></table></figure>

<h3 id="2-11-Objects-and-Methods"><a href="#2-11-Objects-and-Methods" class="headerlink" title="2.11. Objects and Methods"></a>2.11. Objects and Methods</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">		name: <span class="string">'John'</span>,</span><br><span class="line">		lastName: <span class="string">'Smith'</span>,</span><br><span class="line">		yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">		job: <span class="string">'teacher'</span>,</span><br><span class="line">		isMarried: <span class="literal">false</span>,</span><br><span class="line">		family: [<span class="string">'Jane'</span>, <span class="string">'Mark'</span>, <span class="string">'Bob'</span>],</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		calculateAge: function() &#123; //Function Expression</span></span><br><span class="line"><span class="comment">				return 2016 - this.yearOfBirth;</span></span><br><span class="line"><span class="comment">		&#125; */</span></span><br><span class="line">		calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Function Expression</span></span><br><span class="line">				<span class="keyword">return</span> <span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(john.family);</span><br><span class="line"><span class="built_in">console</span>.log(john.family[<span class="number">2</span>]);</span><br><span class="line"><span class="comment">//console.log(john.calculateAge(1990));</span></span><br><span class="line"><span class="built_in">console</span>.log(john.calculateAge());</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> age = john.calculateAge();</span><br><span class="line">john.age = age;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(john);</span><br><span class="line"></span><br><span class="line"><span class="comment">//v2.0</span></span><br><span class="line"><span class="keyword">var</span> john = &#123;</span><br><span class="line">		name: <span class="string">'John'</span>,</span><br><span class="line">		lastName: <span class="string">'Smith'</span>,</span><br><span class="line">		yearOfBirth: <span class="number">1990</span>,</span><br><span class="line">		job: <span class="string">'teacher'</span>,</span><br><span class="line">		isMarried: <span class="literal">false</span>,</span><br><span class="line">		family: [<span class="string">'Jane'</span>, <span class="string">'Mark'</span>, <span class="string">'Bob'</span>],</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		calculateAge: function() &#123; //Function Expression</span></span><br><span class="line"><span class="comment">				return 2016 - this.yearOfBirth;</span></span><br><span class="line"><span class="comment">		&#125; */</span></span><br><span class="line">		calculateAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//Function Expression</span></span><br><span class="line">				<span class="keyword">this</span>.age = <span class="number">2016</span> - <span class="keyword">this</span>.yearOfBirth;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">john.calculateAge（）；</span><br><span class="line"><span class="built_in">console</span>.log(john);</span><br></pre></td></tr></table></figure>

<h3 id="2-12-Loops-and-Iteration"><a href="#2-12-Loops-and-Iteration" class="headerlink" title="2.12. Loops and Iteration"></a>2.12. Loops and Iteration</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//for loops</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> names = [<span class="string">'John'</span>, <span class="string">'Jane'</span>, <span class="string">'Mary'</span>, <span class="string">'Mark'</span>, <span class="string">'Bob'</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; names.length; i++) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(names[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = names.length - <span class="number">1</span>; i &gt;=<span class="number">0</span> ; i—) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(names[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; names.length) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(names[i]);</span><br><span class="line">	i++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(i);</span><br><span class="line">	<span class="keyword">if</span> (i === <span class="number">3</span>) &#123;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">	<span class="keyword">if</span> (i === <span class="number">3</span>) &#123;</span><br><span class="line">		<span class="keyword">continue</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-History-and-Versions"><a href="#3-History-and-Versions" class="headerlink" title="3. History and Versions"></a>3. History and Versions</h2><h3 id="3-1-A-Very-Short-History-of-JavaScript"><a href="#3-1-A-Very-Short-History-of-JavaScript" class="headerlink" title="3.1. A Very Short History of JavaScript"></a>3.1. A Very Short History of JavaScript</h3><ul>
<li><strong>1996</strong>: Changed from LiveScript to JavaScript to attract Java developers. <strong>JavaScript has almost nothing to do with Java</strong>.</li>
<li><strong>1997</strong>: ECMAScript 1 became the fist version of the JavaScript language standard:<ul>
<li>ECMAScript: The language standard;</li>
<li>JavaScript: The language in practice.</li>
</ul>
</li>
<li><strong>2009</strong>: ECMAScript 5 (ES5) was released with logs of new features.</li>
<li><strong>2015</strong>: ECMAScript 2015 (ES2015) was released: <strong>the biggest update ever</strong>.</li>
<li><strong>2016</strong>: ECMAScript 2016 (ES2016) was released with minor changes only.</li>
</ul>
<h3 id="3-2-JavaScript-Today"><a href="#3-2-JavaScript-Today" class="headerlink" title="3.2. JavaScript Today"></a>3.2. JavaScript Today</h3><ul>
<li><p><code>ES5</code></p>
<ul>
<li>Fully supported in all modern browsers;</li>
<li>Ready to be used today (2016).</li>
</ul>
</li>
<li><p><code>ES6/ES2015</code></p>
<ul>
<li>Only partial supported in modern browsers, no support in older browsers;</li>
<li>Can’t use it in production today (2016).</li>
</ul>
</li>
<li><p><code>ES2016</code></p>
<ul>
<li>Almost no support in modern browsers;</li>
<li>Can’t use it in production today (2016).</li>
</ul>
</li>
</ul>
<h3 id="3-3-Why-We’re-Using-ES5-in-This-Course"><a href="#3-3-Why-We’re-Using-ES5-in-This-Course" class="headerlink" title="3.3. Why We’re Using ES5 in This Course"></a>3.3. Why We’re Using ES5 in This Course</h3><ul>
<li>ECMAScript 2015 still has very incomplete browser support today.</li>
<li>Almost all tutorials and code you find on the web today is till in ES5</li>
<li>When working on older codebases, these will be written in ES5.</li>
<li>It’s easier to learn ES5 and then update to ES6/ES2015.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/28/2017-weekly-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/28/2017-weekly-2/" class="post-title-link" itemprop="url">Learn without limits</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-28 23:03:49" itemprop="dateCreated datePublished" datetime="2017-03-28T23:03:49-07:00">2017-03-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-03-29 10:20:12" itemprop="dateModified" datetime="2017-03-29T10:20:12-07:00">2017-03-29</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/03/28/2017-weekly-2/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/03/28/2017-weekly-2/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>这周按部就班趁早起的时间完成了Cloud Computing Concepts第三周的课程学习，主要是在讲P2P Systems, 虽然说云计算的概念最近几年才开始火热，但其实云计算无非是分布式系统的一个比较Fancy的名字而已。当年使用种子(BitTorrent)下各种资源的时候其实背后的原理就是分布式系统，而且其中用的很多技术原理和当今的云计算都是一脉相承的，不过云计算的名字确实听起来比较酷:)</p>
<p>前几周去上过两次CrossFit的课程，累得简直不行，然后才意识到其实之前自己在家练Keep的运动量其实太有限了。于是这周继续练习Keep的时候开始有意识地加大运动负荷，主要集中在HIIT燃脂强化的训练课程，难度是K4(Keep上仅有一组K5的课程，是《地狱Burpees挑战》，包含100次变式Burpees，想想都头大，因此K4的难度已经算不简单了)，每次做完都是累趴，找回了点被教练带着练CrossFit的感觉，并且隔天肌肉会有隐隐的酸胀感，说明负荷也应该算是够了。此外，想着既然博客已经开了健身板块，那我也就干脆每次完成健身之后都在博客上打卡统计，并且接下来每隔一段时间（比如一个月）进行一次体能测试进行反馈，以此来衡量之前健身的安排是否达到了效果，也算是一个的健身方面的观察实验，同时可以为接下来优化健身计划提供数据支持。</p>
<p>另外呢，最近因为《乌合之众》这本书偶然了解到了其背后的作者古斯塔夫·勒庞，在很多人印象中他只是一个心理学和社会学领域的大师。但这实际上并不准确，Wikipedia上对他的定义是 ———— A French polymath(<a href="https://en.wikipedia.org/wiki/Gustave_Le_Bon" target="_blank" rel="noopener">参考链接</a>)。</p>
<p>何谓Polymath? 其实就是指那些在很多不同领域都有很高造诣的人，用今天流行的话来说就是一个大师级的斜杠青年。勒庞并不是学心理学或者社会学出身，他早年是在巴黎大学学医并获得了医学博士学位(MD)，首先是一位医学方面的专家。毕业四年之后普法战争爆发，他又作为后勤和医疗团队的成员随军上了前线，他亲历了那种在战争中被彻底击溃的最坏遭遇，并用文字一一记录下了他真实的观察与反思，包括了当时军队表现出的纪律，领导力，以及人们在极大精神压力和痛苦之下的行为模式等，勒庞的这些记录受到法国军方高层的赞赏，并且后来被用于包括圣西尔军校（法国最顶尖的军校，在国际上与西点军校齐名，戴高乐将军就毕业于此）在内的多所法国军校的教学之中。同时他在语言学习方面也有极大的兴趣和造诣，一度通过阅读莎士比亚的著作来完成了自学英文和德文。与此同时，勒庞一生中还有着非常丰富的游历经历，足迹遍布欧洲，亚洲，美洲，并且在此期间写了多本游记。此外，勒庞对于人类学，社会学，心理学都有着极大的兴趣和研究，《乌合之众》仅仅是他在社会和心理学方面著作中的一本。</p>
<p>最最让人不能接受的是勒庞还是一个物理学家，他在家里有个物理实验室，因为他在物质和物质放射性方面的发现，竟然在1903年被提名了当年的诺贝尔物理学奖，1905年勒庞出版的《物质的进化》(The Evolution of Matter)中就已经预测到了质能方程的存在，这也正是后来被爱因斯坦在相对论中证明的E = mc^2。</p>
<p>这样的人生是不是感觉开了挂？其实正如查理·芒格所提倡的理念那样，人本来就不应该把整个人生限定在某一个特定的专业或是职业上，多读读不同领域的书，发展些不同领域的兴趣和爱好，去解决实际问题的时候思维其实也更容易被打开。</p>
<p>P.S. 这周末意料之外地又去了趟Hiking, 在Union City的Dry Creek Pioneer Regional Park。现在真算是在湾区Hiking的好时候，到处都绿意盎然，能在周末闲暇里短暂地回归自然，感觉真好：）</p>
<p><img src="https://lh3.googleusercontent.com/HHWNvZxMankC2EczNEzuNqgkJ6y5rFQAHn772c5JRbhzc6al1ZKEHBOGDfhRPcWXsPkb9X8kzfHGpCG16P3bqPtpTy46fXgOfYgmRSHgC3R13RdXXvvVfJ_Jx79jDlmZmz-0ZhoQafZkABnzFYQ3HlFY3NWCi92MdgO9rPvsyiN8dxBWZ4Iop3mkrP_6bT4M3kv6kCpOGvFz9b_kUNq9iylkOIMDqeue9lgDMgy7AQWRYl5jvwEIKT1IiawlKW1rFWcRTJ3H8lFJANw8gPOq_HG8VNUf8CUxBkiUXO683T2Insv4RNce9GErvQd5aicjPymWPif8iXBMhnHilD_pqmEqlgVZkM3-iX3bIRlcaiUAHtMIbtM0NQ8E5O4aVTDLleNmNV9lvOlwBf2TztgTAqNMlypAyeugpSUDjmuj0q-s9DxHYyngykGANWKDPd3rxDvMIK7nLLE1BN4d2uaTsG0bD23thGiWnytzR5kXktgEVDzO28Ws1CZ_GQdwnNMmKuEtQW0I0gQkx4JfntBNUcbKgB0oTpN0FANxVIpWp4fyDmB4J1EznHxbYwq4Bze9fAgPg-rpOI9VmF3XUgMScp3AuEUUVpVWbFCC4mdwbjBUXsGgvhyACK51o2tX6_7yj834aQwZ-ah7nI6JEQtMYdNRAOI5cMVr_mISbS2vyw=w1760-h1320-no" alt="周末Hiking"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/27/AIToolKits/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/27/AIToolKits/" class="post-title-link" itemprop="url">人工智能(AI)简明工具箱</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2017-03-27 08:02:45 / Modified: 08:11:52" itemprop="dateCreated datePublished" datetime="2017-03-27T08:02:45-07:00">2017-03-27</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/03/27/AIToolKits/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/03/27/AIToolKits/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="人工智能，机器学习和深度学习的关系"><a href="#人工智能，机器学习和深度学习的关系" class="headerlink" title="人工智能，机器学习和深度学习的关系"></a>人工智能，机器学习和深度学习的关系</h2><p>人工智能(Artificial Intelligence)是一个最广泛的概念，人工智能的目的就是让计算机这台机器能够象人一样思考。</p>
<p>机器学习(Machine Learning)是人工智能的分支，专门研究计算机怎样模拟或实现人类的学习行为，以获取新的知识或技能，使之不断改善自身的性能。</p>
<p>深度学习(Deep Learning)是一种机器学习的方法，它试图使用包含复杂结构或由多重非线性变换构成的多个处理层（神经网络）对数据进行高层抽象的算法。</p>
<p><img src="https://lh3.googleusercontent.com/QyJ1Gb1EOtFUsuvU6iTGLTvVDx1f1EEy5peJ236jTFoREH-RbpCxxK2WRt1t4HeXoU3z-_jMuVV983653NVfSHfOzq-Yx8giTBCRM6RP0nFcecggPfyRl5hTEtu0hULWc-eNZNo4T4n7HUhtijw0JyBe5uSf0sm3upFOI8mB-ukLrcJIxnKdIhqwryr5CKRfj1KB12VBBiv6-0FwTZYwgdELcz3VlCztPVjiPrqKuR6KTgArExTY3gt73p4_SDE5hebKJ_IJQ5U0ADTwwfkr17-xLr5fjOBTPDS-UrkWDuM8PHd5lXCEdCdaK3iaqOL_RenOUIC2i-YXCos1wIF7XdERAZ0yb6CYD74LPApKUlJiGSCrZ7ylj4lWLAdUos3Kre34dOoR4O_hAKYfEDQUtaGV_JQyck2DRVsfFtklMSpGKx4uFM-bLcwUZ9wdJWdRzMi6xxkTk4O9S5-tv14l_mRaqFgpS0NjsL3QTxPQlCiQ_k-9PmPkiFSYk9w1ysqnucZ4keIPOdSUEBbAtXqdvHGYka4duH5IzvToU8hpn0g9YY9Rodg87_hpJgFu4tooBHM5Roa1ojDiuPRzt_VlPLojD0pzHk7IwqAlVQtm5UuGaDxk9cy70itlf_n3i6GTjsGeAW0QJNYVwvesRHQBvVDVZ4AeUarGKh05Ss15mA=w773-h481-no" alt="What is AI/ML/DL"></p>
<h2 id="主流的深度学习框架"><a href="#主流的深度学习框架" class="headerlink" title="主流的深度学习框架"></a>主流的深度学习框架</h2><ul>
<li><a href="http://caffe.berkeleyvision.org/" target="_blank" rel="noopener">Caffe</a>   由Berkeley提出</li>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="noopener">TensorFlow</a>  由Google提出 (Apache 2.0)</li>
<li><a href="http://torch.ch/" target="_blank" rel="noopener">Torch (BSD License)</a>,  facebook是主要使用者</li>
<li><a href="http://mxnet.io/" target="_blank" rel="noopener">MXNet</a> 一个相对中立的机器学习框架(Apache 2.0), 被Amazon AWS使用</li>
<li><a href="https://github.com/Microsoft/CNTK/wiki" target="_blank" rel="noopener">CNTK 2</a> 由Microsoft提出 (MIT License)</li>
</ul>
<h2 id="全球主要人工智能公司"><a href="#全球主要人工智能公司" class="headerlink" title="全球主要人工智能公司"></a>全球主要人工智能公司</h2><p>福布斯关注的50家人工智能公司<br><img src="https://lh3.googleusercontent.com/C8CIJkcvh40KQcWMZu9nT0xbf069tlQlwmuBJdRtKyWsgRXbNrJ3HIpR17cG0mGHaIbh3r3cf5CAKDF_O2V1ba0h1QxVt7lSLfyJ1L9fNFYalrE3H26N80DoNIGlAlqLc9NHX0eGLvbnVNBT3Nm9sq1aZKJpHyUvEsjD3f2MxmwfKp75GSDi2alk5P-YSt6ukTctACu8ozSCy6gohpXaQ0hQTiFbYa39GEeFe7gb2Sjpp6QRX49laXhytwe9JGsHiHfsUvW7iZT6NnPY_ReR41vM-5tAOJFH0nLSvJN5NKlcg1Tg29xIwspO5V0ox6MSPKzwuoPcHOXNMO61rAvxhje1uZn52m5S8i9X8YUiQHL1Lxea1uI5NAxVQLX9-b-q3jw5fak2oT17udnjZTdpCQCkL2-DBrZlIs9yraI2CHFJ1aH8EetCWaVq4uq-IsSfctEP9ZZ6t9AwlfET9s8IDYuLKm184VKY3teJlkKBoWU5uNdK5VeidCiGSXT67ZCMhoIWTX_3fxBn18x6S1sQIVJkm5raTvm-BiXMhtVs5TyzvTngkJ4nZIyacE3FQh9lJde3NrO3VZ3a-NggVVoKmu8jIo4_8c3P55aUs7LdpYWBlQfz9couOf-XFxFu6Bqx_QHe6R8RzA3jU5a24t_tQto67LAjMtqzS24NSkyt5w=w773-h1022-no" alt="福布斯关注的50家人工智能公司"></p>
<p>融资最多的人工智能初创公司(2011-2016)<br><img src="https://lh3.googleusercontent.com/cYBAjVrWqmCVlOHk5cABSl_Vm_OCNmnWouHp7uG7Qy0aVOkzZ5WNXZ_IaJs6pUyDOtDE3bPAX9tBwkJzbpivmGOh0Sk7wg9xRfHin6LtpjdKM1djy1UMQQGwvxfBXSNu4HKPd_mi0eULXZdylccwNlO25nxNO48qA0g9PUM0HipMIC1lBOAzwkalc4oxlu3qASyqnvkuWSRmajRIDgeBU9MdZ4AANPcPust-xbsHJX6v6Btd72OP2VC42Rlf52un4KbhVLmwXJX3N1fjpaSppxI4CfK0r1_pEK3cLRrQwYpz-TpEeFhLqUqQrZzRtWq93w7MocOQwwR6Pg1XOE1AyWThh5Ce2IPW2wpq_xgZBbE4qC6_9yaC79EmaTK9rzId321snm-VRjD0kT5qd64Y5ASVsL_453FwFHZJKiRbP8q26VavZFiG22WMCF0DfJJFM3xTug54qai4tH0jxNdTdjeY20wZ2XV0fwb1iqRHpL0BRuyA4kc95_aBcJdt7z_HNmAQipmvCEWWZLlLg42tM1vxeJHMZucCcG-qg7cmP2gr5YmBfw_SrCpHetW47GjFUME6gl03AKv6KAoTupVPx80S2lK-aCuaWVaZ3-y-a1l1hNBpMeRaUFmDJNoPoVR4XfUeQ0NEMhbFiGHwaWBmKLpflpJYzo4swgJoKVYy0Q=w773-h559-no" alt="融资最多的人工智能初创公司(2011-2016)"></p>
<p>Sentient Technologies：使用先进的人工智能技术，大规模分布式计算和科学的方法来验证新发现的策略，Sentient Technologies为各种领域中的复杂问题提供了新的解决方案。</p>
<p>Ayasdi：机器学习平台，数据可视化，分析，金融技术，医疗保健代理系统：</p>
<p>Vicarious: 这是一家神秘的人工智能公司,Vicarious的目标定位于“建立下一代的人工智能算法”。并且声称要构建“像人类一样思考的软件”，实现“人脑级别的视觉、语言和自动控制系统”，致力于研究通用人工智能，目前他们的研究重点是实现人工视觉识别系统。</p>
<p>Context Relevant：Context Relevant通过使用机器学习驱动的自动化数据科学平台，来解决一些世界上最棘手的大数据，预测和行为挑战 - 比任何其他解决方案更快更有效。</p>
<p>Cortia：Cortica的技术模拟人类皮层，以便以最高的精度理解和识别图像。</p>
<p>Workfusion：WorkFusion是全球运营的完整自动化解决方案，将您需要的复杂业务流程数字化所需的核心功能整合到一个平台中：业务流程管理（BPM），机器人过程自动化（RPA），劳动力编排和机器学习提供的认知自动化。</p>
<p>RapidMiner：开源预测分析平台，使企业能够在业务流程中包括预测分析</p>
<p>Digital Reasoning Systems：确保合规性，保持安全性，并快速准确地分析信息。</p>
<p>H2O.ai：H2O是世界领先的开源深度学习平台。 H2O被超过80,000个数据科学家和超过9,000个组织使用。</p>
<p>Viv Labs：Viv在开发语音智能助理，已被三星收购。</p>
<h2 id="人工智能相关课程"><a href="#人工智能相关课程" class="headerlink" title="人工智能相关课程"></a>人工智能相关课程</h2><ul>
<li><a href="https://www.coursera.org/learn/machine-learning" target="_blank" rel="noopener">Machine learning</a> by Stanford University, 大名鼎鼎的Andrew Ng</li>
<li><a href="https://www.udacity.com/course/deep-learning--ud730" target="_blank" rel="noopener">Deep Learning</a> by Udacity &amp; Google</li>
</ul>
<h2 id="更多参考"><a href="#更多参考" class="headerlink" title="更多参考"></a>更多参考</h2><ul>
<li><a href="http://mp.weixin.qq.com/s/b3MjRLT1sImTcNlQid00kA" target="_blank" rel="noopener">如何区分人工智能、机器学习和深度学习？</a></li>
<li><a href="http://blog.jobbole.com/109352/" target="_blank" rel="noopener">普通程序员如何转向人工智能方向？</a></li>
<li><a href="http://www.voidcn.com/blog/passion18/article/p-4281386.html" target="_blank" rel="noopener">对于机器学习的入门和进阶，您有哪些好的建议？</a></li>
<li><a href="https://www.google.com/about/careers/students/guide-to-technical-development.html" target="_blank" rel="noopener">Google Careers: Technical Development Guide</a></li>
<li><a href="https://github.com/SyncedAI00/AI00" target="_blank" rel="noopener">AI00——机器之心百家影响人工智能未来的公司榜单</a></li>
<li><a href="https://www.zhihu.com/question/30156262" target="_blank" rel="noopener">知乎：国内有哪些人工智能领域的创业团队或创业公司？</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/25/Cloud-Computing-Concepts-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/25/Cloud-Computing-Concepts-3/" class="post-title-link" itemprop="url">P2P Systems</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-25 15:19:10" itemprop="dateCreated datePublished" datetime="2017-03-25T15:19:10-07:00">2017-03-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/03/25/Cloud-Computing-Concepts-3/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/03/25/Cloud-Computing-Concepts-3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Peer-to-Peer Systems is important because it is a precursor to today’s cloud computing.</p>
<p>What will be covered in this chapter:</p>
<ul>
<li>Unstructured p2p systems, e.g., Gnutella, Napster, etc.</li>
<li>Structured p2p systems, e.g., Chord, Pastry, etc.</li>
<li>Latter is a pre-cursor to key-value/NoSQL storage systems (which comes in next chapter)</li>
</ul>
<h3 id="P2P-Systems-Introduction"><a href="#P2P-Systems-Introduction" class="headerlink" title="P2P Systems Introduction"></a>P2P Systems Introduction</h3><p>Why Study Peer to Peer Systems?</p>
<ul>
<li>First distributed systems that seriously focused on scalability with respect to number of nodes</li>
<li>P2P techniques abound in cloud computing systems<ul>
<li>Key-value stores (e.g., Cassandra, Riak, Voldemort) use Chord p2p hashing</li>
</ul>
</li>
</ul>
<p>A Brief History</p>
<ul>
<li>[06/1999] Shawn Fanning (Freshman Northeastern U.) releases Napster online music service</li>
<li>[12/99] RIAA sues Napster, asking $100K per download</li>
<li>[03/2000] 25% UWisc traffic Napster many Universities ban it</li>
<li>[2000] 60M users</li>
<li>[02/2001] US Federal Appeals Court: users violating copyright laws, Napster is abetting this</li>
<li>[09/2001] Napster decides to run paid service, pay % to songwriters and music companies</li>
<li>[Today] Napster protocol is open, people free to develop open nap clients and servers <a href="http://opennap.sourceforge.net" target="_blank" rel="noopener">http://opennap.sourceforge.net</a><ul>
<li>Gnutella: <a href="http://opennap.sourceforge.net" target="_blank" rel="noopener">http://www.limewire.com</a>(deprecated)</li>
<li>Peer to peer working groups: <a href="http://p2p.internet.edu" target="_blank" rel="noopener">http://p2p.internet.edu</a></li>
</ul>
</li>
</ul>
<p>What We Will Study</p>
<ul>
<li>Widely-deployed P2P Systems<ul>
<li>Napster</li>
<li>Gnutella</li>
<li>Fastback (Kazaa, Kazaalite, Grokster)</li>
</ul>
</li>
<li>P2P Systems with Provable Properties<ul>
<li>Chord</li>
<li>Pastry</li>
<li>Kelps</li>
</ul>
</li>
</ul>
<h3 id="Napster"><a href="#Napster" class="headerlink" title="Napster"></a>Napster</h3><h4 id="Napster-Structure"><a href="#Napster-Structure" class="headerlink" title="Napster Structure"></a>Napster Structure</h4><p><img src="https://lh3.googleusercontent.com/1xUO2uOVFcxMrRtxu5aPHmaYQ0ki5OurLTb6V_vKHhbxqYKWpDgkmlU4F0C1UwdMJ81HNdW44B5FFKR5H9dx6bTJOGFCky1rQTQWjh9juN0J3sYQtjMOeLA21cjEVoPH4Tr1B-EXkrxR6X3QaJJg-HWGj6_EaJKhle0v7JfLLLRKlwDHclNUIgwpQl10KLTKsLKpEALbl7uDpLI2oiaTrKCgiwiWftBO_9lEiargpxg3kaFSZZaLjy1q1H8J9aGYBM-XffE3BOpSPLWiS88Mf9TbBvbBtwOv1z-8uh59auq2_Hj67JOjcCxZE6oAhhdpa7Eu_GOlXieOY6JyPCYq1vfi94fVMjUgitYejNV3UlnRKHtyh0DDhKSP49hsd02llPToYiqZQQf2TcsOz1cXTpbrJAObAxdw2omyEjQCOvY3kTZ4BBfScGnGefcykyIU5l9nlkOyivRzwgtl-6HgqT7xsMrIi6mB9MqAvYMh2ynpA0-06nBHfDpjmIFLvRVGlgPL0r73i47_FsWmy82yXCCDv2EHAlPmhXxKhrphs675t0rmDLCNyJE3WHNcqPB_RZoOrbHjTLvfFn1Y8xTpbjmEgZf9tgxGbrGqoKYDn46088PdDONgPjK3S9UMsw3GCtYO39CCrC06xPzgaqMe_mKsKbMAG37HOE8gedc8Nw=w993-h624-no" alt="Napster Structure"></p>
<h4 id="Napster-Operations"><a href="#Napster-Operations" class="headerlink" title="Napster Operations"></a>Napster Operations</h4><p>Client</p>
<ul>
<li>Connect to a Napster server<ul>
<li>Upload list of music files that you want to share</li>
<li>Server maintains list of &lt;filename, ip_address, portnum&gt; tuples. <strong>Server stores no files</strong>.</li>
</ul>
</li>
<li>Search<ul>
<li>Send server keywords to search with</li>
<li>(Server searches its list with the keywords)</li>
<li>Server returns a list of hosts -&lt;ip_address, portnum&gt;<br>tuples - to client</li>
<li>Client pings each host in the list to find transfer rates</li>
<li>Client fetches file from best host</li>
</ul>
</li>
<li>All communication uses TCP (Transmission Control Protocol)<ul>
<li>Reliable and ordered networking protocol</li>
</ul>
</li>
</ul>
<h4 id="Napster-Search"><a href="#Napster-Search" class="headerlink" title="Napster Search"></a>Napster Search</h4><p><img src="https://lh3.googleusercontent.com/nEPVln8yqe-XrB9M5K1QfFfJdEYL-zmtFAJhmr28YFUBttMqHuI2kdejhh4Xd24KTEO2anFMrz-NA0v5X-5QPsx7t6-Vzs_TdwTyvqrL1yFjSamzQ5fbmIkw4TH1zlSyEM8MLiFnoW_VzGZ0IFb0mE1ptrp_cFfxh83Y7wJv-uVyhQj5hDceBpPEwI3LZ94wfgIOV1PA2NxytgsIHwnD6pHRtYqwvJkCn-0ovsx8RCvpeCqSuTmyrfq8-LbSEMg1r54EJqnlEFMbXiGjpTIoQSzV-QwvhIjPGMLPdqM8bGwhZdSJGb_9T-LEboMyKGlm_8rL-2yTEJD52qBeUriUFZn_pc5nX2WAvgrU1Gu0h0_osotM1xDwpzJpv9eam_hXr40b-s5AUubAk1CDgVEn1SluDNZ4zNiB1iJmQVu2-jakCfpE1541CI6QeAWuk48vraUNSq4JiJF67x9UvcvW4sf3si1Zcx-RfdkdldFKcL-tr7RwFdbYh6NelgUve29Z2x0WwxfmNDwWV9jf8IkiklflvFc3Ft2EjRBukMU6aIvnYy7NLAoLuw3mtFycdZjGh-up0MhFlcBtYfskopuZQVaABbCM0I5vtGfAH3JtFO6eNausAOUOTPGYeRg_NZMFL-1CFKmgQTuYi4_-De2HSBnOHx0rRN01GMvP21TW_w=w997-h622-no" alt="Napster Search"></p>
<h4 id="Joining-a-P2P-System"><a href="#Joining-a-P2P-System" class="headerlink" title="Joining a P2P System"></a>Joining a P2P System</h4><p>Can be used for any p2p system</p>
<ul>
<li>Send an http request to well-known url for that P2P service - http:<a href="http://www.myp2pservice.com" target="_blank" rel="noopener">www.myp2pservice.com</a></li>
<li>Message routed (after lookup in DNS = Domain Name System) to introducer, a well known server that keeps track of some recently joined nodes in p2p system</li>
<li>Introducer initializes new peers’ neighbor table</li>
</ul>
<h4 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h4><ul>
<li>Centralized server a source of congestion</li>
<li>Centralized server single point of failure</li>
<li>No security: plaintext messages and passwords</li>
<li>napster.com declared to be responsible for users’ copyright violation<ul>
<li>“Indirect infringement”</li>
<li>Next system: Gnutella</li>
</ul>
</li>
</ul>
<h3 id="Gnutella"><a href="#Gnutella" class="headerlink" title="Gnutella"></a>Gnutella</h3><h4 id="Gnutella-1"><a href="#Gnutella-1" class="headerlink" title="Gnutella"></a>Gnutella</h4><ul>
<li>Eliminate the servers</li>
<li>Client machines search and retrieve amongst themselves</li>
<li>Clients act as servers too, called <strong>servants</strong></li>
<li>[03/2000] release by AOL, immediately withdrawn, but 88K users by 03/2003</li>
<li>Original design underwent several modifications.</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/E-oSzLcIcVVpqK35ox8bgJQZU3zjNy5KjII_RJTR8BgxYFTE6AfNrEUxLIOt8neXcd7nC8gqq3Rk4oBwwUlfFk7QMN9pM1dVQ2lv47IPfT41vcHh7K_TWt0taRgK8Akst4AMdXAG_jUUrUJmT1Xh4dKpkSzi9CrDf2rM_cAh9QY69bOe_GUyOKRLJbie5t6rgx3GlRSmbdctSZk9zxiYJlN1xuXVWvIAFjZBhu4iTbkfwiLnxcKK2YaZfuVoA_ZesWiH013IY1qD4LGHYN6wH9i7IgfDgx9nh53NZeO3YD4wttMlV29t2B6hQdkzkU6Jq33TPsT4IuUwEep2iUQdPl0RNrOBVxe3ktsbetRIFBfI8hxcLV40Rg-vftCKL44C8fyxkJJ-ZsJaG_fPodNpcTujRq8i7EukE9J6qpk3i8-3ClYTuTWNbT0XMVEz14hZXzO0UDVdm74ukSXmCjTW-EP2ZnrsMFWTzNFP04Z9auPnSN0af2ziNZh2YOwHBEx28VI0jwImzSwU6HAv_OxVL9LBfKQbSzwf6Q8eaNuay9B8aabfgWuIsWC-FRLG8_9GXabh4RuSWSZibvsbwcKxTOEISit4CbGDxTi2xSbF-UigZyS6dl8tsdiGCaP4j0QMBockuc1cp2CA2qZJjxbVfAJCkTdRyC16ljWZo07dEA=w1136-h737-no" alt="Gnutella"></p>
<h4 id="Gnutella-Search"><a href="#Gnutella-Search" class="headerlink" title="Gnutella Search"></a>Gnutella Search</h4><ul>
<li>Gnutella routes different messages within the overlay graph</li>
<li>Gnutella protocol has 5 main message types<ul>
<li><code>Query</code> (Search)</li>
<li><code>QueryHit</code> (response to query)</li>
<li><code>Ping</code> (to probe network for other peers)</li>
<li><code>Pong</code> (reply to pong, contains address of another peer)</li>
<li><code>Push</code> (used to initiate file transfer)</li>
</ul>
</li>
<li>We’ll go into the message structure and protocol now<ul>
<li>All fields except IP address are in little-endian format</li>
<li>Ox12345678 stored as 0x78 in lowest address byte, then 0x56 in next higher address, and so on.</li>
</ul>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/LRSsbshjeCTQPD269zVh2vqZ3BLohu1StylZ35qPyTGHMMh2loNAMf2439lKocqGJ9fcGvhA42tu7abahe5miRGhJJAdcF4qsftmPYkzEHg6tbl3kRuhdVzQi3MobJTvYxiClf2Kp9IkaaW_LN37i-Yb-r9kEASk2GHHJM78xIzSCH402nX17YYXamRFn9HJAyzPygXwjqpT8rGNzJM17S9kismQI9lMzrVyJ4C_6ENPDzvzOLxz2FKNWNLWIPccrsy_clqIf8i6O04ljmvcJy7KfFEy_QCvFam10h6KNKUPflBIb7JXFol-ELG9QSUSai87TkpM2hZ2cw04pdq-jdj-iGbPNyDOTkTeQqi4Q3tBbeM8_sBGtbQXGPdeQuItodGCRRs87mie-HVSw0vn_KvFqqwHZ8PzecYHof24PY1RpgxawCsm-H7szc4Wp5EoxM5vtbYzhQwmyAniq6ruJlhzCfcAz4qu_b7Hb7au3jXl7L-9H-hj-V3okA1bcUZUMctO9LSGO95Y79GngeSodywmp60HmyNrWMRdoQjF-FDfnA5dp6jzWIPDmb75DVBc3cuv7kCmVInR72MbLodURPem3ryJCKQfg16ZnyXprA5tpM9x_lVr0MSC0p0VxzQbwpl5ZaxSeRLLa_GqoOsTb6eAgsH3PhrDhdErsiCf-g=w1199-h545-no" alt="Gnutella Message Header Format"></p>
<p><img src="https://lh3.googleusercontent.com/t5DT0ws6785AzmBtbTxfZ_Evm5Me8GehCp8A64fsfxg6agC2y1W1tSUjt7z7pf5YGsD4fjGvMfvHuwtD_1pJ2-moc3w8eWm5j43_eiOZDvlKfQoNrHx3aTfZbCLFhSEBAbi5U7MHinRGill2qS1KERb7dXEW0DfAOCKvcEPrlyj1-uGGazcHAO4sKTI-0Ns_p7Qz9NGmIVs5IKqAMLCFPlX6btZsSdyoJ0jgLiojFBiugr12W9YOvygzHjO4jJL-C-SEOWN_Diat1Z1FOl8K1A1qpDOmAxXIKTpVvlH8Xy3aF7onZ7QCIBGt51ysVG1iXS44UffoB5dTAJRwkLd5SLPv8f6Sv6k6qJT21LYdCcZGejxf6U1JflMgEYURDllqp24GjmCvOWz5u_7Fm_i8IWUg_Sx9D07kT3XN-gyYkjtJcCvRKnCDp328Zyj_mHjnH8CJ2x3C7bx7Osufp0AQSku5Le9EdHLqFcQ4GYHyWAHqC21MOVuG82zgk0qg3ul8qBwol2xu9LczhN5qqwawtVSpT2FhzwT0yyD8kKsKePS8gzVw1ULH_Nrb6_AqOt6gxypYVYLuUHgEH5U7Fe8VT9SKNCFGQYRv67UTjD3OOm8Cn0iLYm5_-vaUmVopnUR2jRo8nSbn3q3xyzFWhPBOF7z7LFDrh2N1x5TulxPTAA=w1131-h610-no" alt="Payload Format in Gnutella Query Message"></p>
<p><img src="https://lh3.googleusercontent.com/WL2uOCLMOsYsv9N9x5O_nQbFWiDWARQ0OzzXMlKXJoUybULNqltEP8F_Hy3WNZsx-Zh_S8D4xQKKNtDnXZJUlY3uMoJYrvA59qW-tLcuhsTe_bUd2c4otsAojchZwAzoMORqjWQGHLbAwKMVnJ8RZ2oh3knh8xU7m83vES3HpDs7O_MLn2QDmcsn7MbJri3-SyjUq1myzz9Mhd5AB_bqMIaKMc5iMvn_LnUclVdXcAUyKLrrc9ZwODrfaS5Cieh9Owhgoq8tt3vdwkB7bqMGudIsx4eZDIoc20grYpA1XruiDIxS3fpWEKw7xzTqd7N7SgMlfY3ANhL1eAjkIFgVLVqT5mZTP2PuT3ndbyQ6ILKhQOBxDfXLYCTTR0znYEurJLb5fJwQndyTO7swvufZQ1GSeXL7EwK52rbHDb4X0yVhFKLqOYyctQXlSnCXkGPhMGWCZ6_xXWLC1mSzXPrR_02wpexhLHWfuE7sCDmsweKOSA1JZ6JVJUoEjPtBql25XXPJU9U7Mlc2NaLKQ8LvmdKQvus3k_D2h1Gwu1SShBLNfFZotIWFKzTZuez2ZSxAn055WCeoWmvNRMgQ8CckFQZ2OqckljVtIEdwpZVxY3_3Ip5CPYiTuTwpluLTr7Pr_9ERAFUyCXixr472GFJt1bgTXfQeRmREY_jTpIeQGQ=w1161-h733-no" alt="Query"></p>
<p><img src="https://lh3.googleusercontent.com/c911jczEQAMunfIYehuINIsTa2wHqstosXDE_dWzalq_mnBlouQ9qixr_1vhIsk6fjdP1IPsW3BYrKYjmf5WyWS8uWoOD-eWo6oBD4DhHpcWeXFergI4BEylp7LBHLZvula6gw955_wnTWiPmuRvHQ6EBR_1v_-4J8cGUXUwFd5veVtrt7n0AUza4BcaroG9hMUVg-u7Yt4LHorWy9Mkyts5NGeEDF6R8zIvKFqY4Q7-uyzrauU5B4KCWNEFWMwhE58-zRIdLibhlSzlnYmMjo9tbEtUaNdzWmsW51tTxZXFdFL7QPGWXZPMUf8QZ2M46YXR1l5giKb6ey0HH78lcyAiwG3O31gvzgUIRNGyFWVtL_7q9_Ibx1vO1y86ZGhstrbDmcc8g4pUvw16t6Oz6ZWD7s4mvgfljLhBAqIfgnZ5sOHAvBiy-EmWnruRNHQ9sPqGx_0WBxScZwPnNdrfnkNgxGvopOAD-oEf98vFSi5cRSMww5mBVYKsOX5DbbBu5roU0GCzVzcz-bw8XbwMNVzmAGieCGFe8KqRJCVZhILZC2XTNJxD771VApTINguhNOROxcISHuU58IQO7vDzVWwar4ndBpboUbsIOyR3UT9T4279_m3n-xcwkoZtg3CB9qvTqABj-CKvRACcHHp8grvzV0EgeW03iaNwDXcyDA=w1199-h593-no" alt="Payload Format in Gnutella QueryHit Message"></p>
<p><img src="https://lh3.googleusercontent.com/Yea7x5cEVn3Hz1emPWPwXXlG_FXayMCiUBcSLKNKfcug4uYQytFUCW4blH_ihu7ICna1lqlFQw8uw3bNf4obpaD78M4TJNy2V5l460Cepdr65VqWflZTgZ5yY05KgIRdunxSAvOUcnr89DsreJ2Ae9LhBH3H_7zjsRpej1NUIYKBSptY5MLkyQRGzI4ZWtnzBudtspCZR9tZyVfJUC-bHTfEg23uZqo8YZEQ3VIAs4SL679Y_UJefozibd54UPy6FoXQfCC23Lc2RN9sFONBzXVIsCcF3jBCa217rkeHkTGAKXV0bsnhsC6Sc0tRLd4LZwy-abX_k9Tee0Og2-HCia5QI3IMIlMO8vLhnreQbkix8XB_0iz-eM558g4aMLHdYyee2wNYOAvMqj-73ZMBwZQTLvamMOkgJXLDXY2FOsXu5QtMtRSDKN7AClIW_mPDm0dl_CCOv8HSKJgmykui-GGVeINBUHyxXM-fTdf6Iv6_-2PbIlC6_Q9PgCwSPxkLXG3xKQNZTkZ2X1nh4_9m4PB5eWeokVzF3Id0cfLiy2WXJ5oV37NXFrpMqTLwkdIXBFbhKMdJU7Uj1FhBJm9Kx01RXXmhtpmaAzUbAquBURHtR1HRF8brlTyhTuZFPRDN722uwXvs44TyW8faBN51LoR9JguppmI_JRky9_UjmQ=w1170-h734-no" alt="QueryHit"></p>
<h4 id="Avoiding-Excessive-Traffic"><a href="#Avoiding-Excessive-Traffic" class="headerlink" title="Avoiding Excessive Traffic"></a>Avoiding Excessive Traffic</h4><ul>
<li>To avoid duplicate transmissions, each peer maintains a list of recently received messages</li>
<li>Query forwarded to all neighbors except peer from which received</li>
<li>Each Query (identified by DescriptorID) forwarded only once</li>
<li>QueryHit routed back only to peer from which Query received with same DescriptorID</li>
<li>For flooded messages, duplicates with same DescriptorID and Payload descriptor are dropped</li>
<li>QueryHit with DescriptorID for which Query not seen is dropped</li>
</ul>
<h4 id="After-Receiving-QueryHit-Messages"><a href="#After-Receiving-QueryHit-Messages" class="headerlink" title="After Receiving QueryHit Messages"></a>After Receiving QueryHit Messages</h4><ul>
<li><p>Requestor chooses “best” QueryHit responder</p>
<ul>
<li>Initiates HTTP request directly to responder’s ip + port<ul>
<li>GET: get/<File Index>/<File Name>/HTTP/1.0</li>
<li>Connection: Keep-Alive</li>
<li>Range: bytes=0</li>
<li>User-Agent: Gnutella</li>
</ul>
</li>
</ul>
</li>
<li><p>Responder then replies with file packets after this message:</p>
<ul>
<li>HTTP 200 OK</li>
<li>Server: Gnutella</li>
<li>Content-type: application/binary</li>
<li>Content-length: 1024</li>
</ul>
</li>
<li><p>HTTP is the file transfer protocol. Why?</p>
<ul>
<li>Because it’s standard, well-debugged, and widely used.</li>
</ul>
</li>
<li><p>Why the “range” field in the GET request?</p>
<ul>
<li>To support partial file transfers</li>
</ul>
</li>
<li><p>What if responder is behind firewall that disallows incoming connections?</p>
</li>
</ul>
<h4 id="Dealing-With-Firewalls-—-Push"><a href="#Dealing-With-Firewalls-—-Push" class="headerlink" title="Dealing With Firewalls — Push"></a>Dealing With Firewalls — Push</h4><p><img src="https://lh3.googleusercontent.com/dmLEy0BDI4v-jvB5RwPOcfI-FPtwOKTPNekn5IuiHzmmeNV7F-BgEROc5lmKAcRafXj9Ke_HAiQ8C1jSAj9N-UzVNN5ynX1o8863DYTgwlqXdVrP2-zHhVUVm9CiRyKQKbwukRucefS1WAuyIhReR07tfhO8_QTSPY4YMkkkOAo4MGtnfjR3C_EuCZmMdUmpFPQX78Yq2RUVKdUXlXBjUkL64JJ0D5Vie0XIhxe8B-QBO4VYKoHPSTIAqnt1SUFyqgpmUoN73J8qXdLtC5fBZ5t43Dc3nj2zRP9Ho8cVTga_BO3p_bw1YFkjAIzAE25njMQWfLJGM8AVXb-O1vlHBd7ibDy8NPbJb-b8yVDOMk6KnwIckhi9_rqdTVk5Kx6fd9OGbX-y_gEWBlkwuLKRSZfXEK2TNYAnRoTSWQj05Gi4LHT_AIHtI7e_rgptjlKV-O5Dx0LtXDZzRudG2YC8DyeM_epis5pmiCCAv5YpQkjQRUb1ctHWIjVAQ4kqYnEZq5xY7_lSAs6DCPiPUL1Ul1KaDP9-oiyr-htcSESTF9FKKGSfK9N1jOEqk40EdxEaasKKaIBywaUOVLGUWimcMYi7hxyDJWM-jDIWiwHR4ca7MxNA04WS8TQ7MspttqP2fcKL9k_S79q27S-D804EoVNl35-5nz8ZYonpgd4PDg=w1199-h698-no" alt="Dealing With Firewalls"></p>
<p><img src="https://lh3.googleusercontent.com/fl2Y1TR9pGUndWM2tcK4tBGHTipAP45fsusvV51v2yIvbOC4ozmDHO8MZNzOCQnJfYF9qzLRD6aRFWnbXVko20lsfUHbsUSZEFYgeYDjPnUAz1VhMf4pRewMvkpGgEysvpBOvYojmPSq-CfvMMxGC2e78lvTyt99_aDxJiZ5JIE2iSl15HHhaYUfS2tcjOrsUsasmcvK2xqOjQw1rn70yXu5Ut_brqHNnqE_VtPOZZARyVAIM-nxl1eQTe5nfn7OMMQsEJpNzXGhWXcA4Z8SROeXoQQKZ1ZYjD21ku15iiALdebmuGoGDOoQl8moMhH6tETfpYXN-VbZCZgm27CT6ZSVEk1uHb4N3wy-tbmYZk6hqjZoAY_8THjg39dqsKrp6tUIBHT-KlbHtqaDijz3bzD4XfpNOV5amMa3ZkBBki8TNC5k2SMSXiT9EHIrr4fsKM_nKS5p_Tn3U51e9E30G6P0IvVDNCJgryF0eXXPR6X1uEEKngkQ0-j8IVXRdqJCxdbGdQh5DVL7tjhBWA-DQaknLj4DZSVGSPh9ryMjUta6fu363_nki8C7b1V9h1fm_RfKslrVz3ucxBxE4crJImuzAuC7QPcpr62vp6a2EJWRbTpOKOwjKwS5a1I3h7V5t_T8kuMj-deQ5KYTeaqSTZd9QlCsYVpRUrxhMv7moQ=w695-h459-no" alt="Push"></p>
<ul>
<li>Responder then sends GET to responder (as before) and file is transferred as explained earlier</li>
<li>What if requestor is behind firewall too?<ul>
<li>Gnutella gives up</li>
<li>Can you think of an alternative solution?</li>
</ul>
</li>
</ul>
<h4 id="Ping-Pong"><a href="#Ping-Pong" class="headerlink" title="Ping-Pong"></a>Ping-Pong</h4><p><img src="https://lh3.googleusercontent.com/y0GASC1IUZFxTcmX0ax2rM6YZ4uKFeBwiVOxDQp8GA4BQUugzv2lanoUKklDahD3NBNLIX7BeRwlZooFWBaVf_W4w2EAC4hnP5J6WUAe2yX-d1Cwv5DcGQkx9XYuNqT__bfjK1mHDSllTZJ5E0MPRZjaJKWDKHZW7KBiS0X-eVDr0auI5eIqQokA5gPfNcEtbnyWbsJzQktceFPBhGCsrWpSRaB06716kGjw1JQGXVd3bJkizskJRq5tmRu6SULzeqWQdzt4FZWCpm7AYDGTRXBMVBbq-QgRj6tIDAj2c2f0xPmWzPMCVa8CMQnJJ70u15nX8KozUo8eQ27WfhtsAycetF-dFaIc3BYtVB4o8JEhWXbLyR30cgVoJc_RuGBM4TD4ScOrM6R2IoukKYMP7cUkGO8GqBk-f8XfmzxqVQNRnvmE92kbWEmuDvNp2IArPQpnGvVMbq57tSwUjPITblwDqphl7sFR-LzlKvERLPfN4E1B-HAiUG2fdSpWLa08rLd3r_2I_OGqxPGXfOBvBtOmmAIWrNIlQLX-xEP1dqufE8i_dxgrLSXyK2I4H_lrI05O9LGz5ggzhRzUq4egt2xYGDaKaA2gASAwcg4-NBrllfZovxX5wuye4oHdxo7GN4nWts8ljSTRLRsA77uiSOwAMQLESTmGdho2Me3vCg=w855-h262-no" alt="Ping-Pong"></p>
<ul>
<li>Peers initiate Ping’s periodically</li>
<li>Ping’s flooded out like Query’s, Pong’s routed along reverse path like QueryHit’s</li>
<li>Pong replies used to update set of neighboring peers<ul>
<li>To keep neighbor lists fresh in spite of peers joining, leaving and failing</li>
</ul>
</li>
</ul>
<h4 id="Gnutella-Summary"><a href="#Gnutella-Summary" class="headerlink" title="Gnutella Summary"></a>Gnutella Summary</h4><ul>
<li>No servers</li>
<li>Peers/servants maintain “neighbors”, this forms an overlay graph</li>
<li>Peers store their own files</li>
<li>Queries flooded out, tel restricted</li>
<li>QueryHit(replies) reverse path routed</li>
<li>Supports file transfer through firewalls</li>
<li>Periodic Ping-Pong to continuously refresh neighbor lists<ul>
<li>List size specified by user at peer: heterogeneity means some peers may have more neighbors</li>
<li>Gnutella found to follow <code>power law</code> distribution: P(#links = L) ~ L(-k), (k is a constant)</li>
</ul>
</li>
</ul>
<h4 id="Problems-1"><a href="#Problems-1" class="headerlink" title="Problems"></a>Problems</h4><ul>
<li>Ping/Pong constituted 50% traffic<ul>
<li>Solution: Multiplex, cache and reduce frequency of pings/pongs</li>
</ul>
</li>
<li>Repeated searches with same keywords<ul>
<li>Solution: Cache Query, QueryHit messages</li>
</ul>
</li>
<li>Modem-connected hosts do not have enough bandwidth for passing Gnutella traffic<ul>
<li>Solution: use a central server to act as proxy for such peers</li>
<li>Another solution:<ul>
<li>FastTrack System (soon)</li>
</ul>
</li>
</ul>
</li>
<li>Large number of <em>freeloaders</em><ul>
<li>70% of users in 2000 were freeloaders</li>
<li>Only download files, never upload own files</li>
</ul>
</li>
<li>Flooding causes excessive traffic<ul>
<li>Is there some way of maintaining meta-information about peers that leads to more intelligent routing?<ul>
<li>Structured Peer-to-Peer systems, e.g., Chord System (coming up soon)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="FastTrack-and-BitTorrent"><a href="#FastTrack-and-BitTorrent" class="headerlink" title="FastTrack and BitTorrent"></a>FastTrack and BitTorrent</h3><h4 id="FastTrack"><a href="#FastTrack" class="headerlink" title="FastTrack"></a>FastTrack</h4><ul>
<li>Hybrid between Gnutella and Napster</li>
<li>Takes advantage of “healthier” participants in the system</li>
<li>Underlying technology in Kazaa, KazaaLite, Grokster</li>
<li>Proprietary protocol, but some details available</li>
<li>Like Gnutella, but with some peers designated as <code>supernodes</code></li>
</ul>
<p><img src="https://lh3.googleusercontent.com/APqwNhTcyx54MT62fS1Es7uE3-vP3wQpO_8RkPfy5x_Hg4R4SpBJYOl_S2HUXvfHXdgs4G4_Sf5f7cfVNUXCSosoxODs1f3_0VZZfn2-zyk4VFhtnXn980hNrXavYyPZaecNr3xRzKsj-hNKr9Av46e7rhro95OfwrmJ6zXL46yHPdJGbndsnjbR1hN-ICwtdSOCozX-HVUALGOu7L-vv7cXm3rAlhBdOtxhnd0I9Pb-iV01dVHjMm9j9yRdIHN9YSOhOfcgX7v6sQPpN0dS206Di1eGG2B-3BNXCAjDOZ5gEspP0vEocO3BIP706q_rkguuNddSq1jUMni7kNWTBWSlyv-RnuPaFlleFuvTGVBtj6mJ6M18KwLOMxEcrwP7hWzSAW-tweuGYUZg2xaiqcnNrgLswabE_7NT2mVB3HOnm33LbFxITrx-cHEi1-rPmGEMk3jsnry15-KWIUbc4BrFhN152UZkGu2pPm9IvFju_Qx7jrvWijK_hHtzlev2Pgd8zE_Hu89qq9D2NwQNDUkzE6r1YB-ZUKuix0uG4nFypUCud_uwcI-3L2rTmfviGqqq1C5ZtWD08f6-G6H5F8q8zEKpg42faVMmeQ6jIj7Ke_UK1iifch_MukWYAvAaV6fI0Dl938qBme7xqt2AxfLPGKEwvPn2ljiKNHOaCA=w824-h496-no" alt="A FastTrack-Like System"></p>
<ul>
<li>A super node stores a directory listing a subset of nearby (&lt;filename, peer pointer&gt;), similar to Napster servers</li>
<li>Supernode membership changes over time</li>
<li>Any peer can become (and stay) a supernode, provided it has earned enough <em>reputation</em><ul>
<li>Kazaalite: participation level (=reputation) of a user between 0 and 1000, initially 10, then affected by length of periods of connectivity and total number of uploads</li>
<li>More sophisticated Reputation schemes invented, especially based on economics (See P2PEcon workshop)</li>
</ul>
</li>
<li>A peer searches by contacting a nearby supernode</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/FZgdQchpi7QmQDH-I6al0PVvKYPdfCUghCGEo2HGQnKZaFZzO50CRHO5PeKXQd6LbFgsuNMI6DHr94sxODjVULnEI_3cHHkPZAZUrCSkQrvbtefFkq8c9TXm9c6DDU0VH_DIhBmH1QhK2PeueV4GSIqDw75Lin7NzKr_WQiS8-7y1JS0LImy-iwqJ8YHgLhrRWY4LFjVOVBDX20J5yv4D11ZTLC0IJEk63GnIMPIgbzX7UGAl0rHJzIBFBUf_GuuMj2HRuLbPQb6qytNeyM3sCD3MYvqJJO2K8L4Su2pRAw5qp06p6iNVoLgJvYZzHFWKBFXBj2JEoknQPuh98ONlkjpj747Q7D9dBwdJyj9e65f9dnsVnWL0HydPSvQje7qviobbRTFmimq5DK6BayUqTnMxLP8E0VsDrupXRAQQxckQQ5J7BdV6nTuW7BSbBgoNHrYdXUCwVRVxl8f0XRHcwdr7rQRp9vi6U5KN1DKrO_Gkw-DOwV5ButB030D4yelinbYZLQlZ5mKD9DDWRNJxoWW7b-QxTKT42tyNlqhNXAkjGPwsXntfieT7cxRN_VRNaaJo02Put--uaX6LvCec9doBEwuaW9NVCmVQuLnlgSHkKy2LRTAFAb6TB90-40oWvrPsvxP73Y7uI-BEecAHQfETLCS2Ok_Jajhg1lfKw=w824-h500-no" alt="BitTorrent"></p>
<ul>
<li>File split into blocks (32KB - 256 KB)</li>
<li>Download <code>Local Rarest First</code> block policy: prefer early download of blocks that are least replicated among neighbors<ul>
<li>Exception: New node allowed to pick one random neighbor: helps in bootstrapping</li>
</ul>
</li>
<li><code>Tit for tat</code> bandwidth usage: Provide blocks to neighbors that provided it the best download rates<ul>
<li>Incentive for nodes to provide good download rates</li>
<li>Seed do the same too</li>
</ul>
</li>
<li><code>Choking</code>: Limit number of neighbors to which concurrent uploads &lt;= a number(5), i.e., the ”best” neighbors<ul>
<li>Everyone else chocked</li>
<li>Periodically re-evaluate this set (e.g., every 10s)</li>
<li>Optimistic uncheck: periodically (e.g., ~30s), unchoke a random neighbor - helps keep unchecked set fresh</li>
</ul>
</li>
</ul>
<h3 id="Chord"><a href="#Chord" class="headerlink" title="Chord"></a>Chord</h3><h4 id="DHT-Distributed-Hash-Table"><a href="#DHT-Distributed-Hash-Table" class="headerlink" title="DHT = Distributed Hash Table"></a>DHT = Distributed Hash Table</h4><ul>
<li>A hash table allows you to insert, lookup and delete objects with keys</li>
<li>A distributed hash table allows you to do the same in a distributed setting (objects = files)</li>
<li>Performance Concerns:<ul>
<li>Loading balancing</li>
<li>Fault-tolerance</li>
<li>Efficiency of lookups and inserts</li>
<li>Locality</li>
</ul>
</li>
<li>Napster, Gnutella, FastTrack are all DHTs (sort of)</li>
<li>So is Chord, a structured peer to peer system that we study next</li>
</ul>
<h4 id="Comparative-Performance"><a href="#Comparative-Performance" class="headerlink" title="Comparative Performance"></a>Comparative Performance</h4><p><img src="https://lh3.googleusercontent.com/Q8mF1tb6uR4nCwOFDDvDJZS4eNH78zpW4g93MHEVQ7AWEb9LJuBzexJpoPJbOG3lXeV0kRxtwKz8y_ZX3UVOru1JXr577dL9Sr-CgJAqWQOWA31noCpWp49Iovz4XwQ-r1Q7ZzGt59lUolMHFZe3Gp-LDzTnk5nBRTYJdx63qQbPqA6DaaBdCk-iVUvooYNEn6b83dxH8sfJBeDYQ-yxRN8mfa2VjhcaKA-J70yYnPeTHQArw_lhl_mYItp1r6WBNyMhlVLig_8Hr7QKPjSHqBma23BQmCAcKCw9JcpMPTNFlMYUZy2hPzURL0sopE2ysXtIAH1KNCh56x4NK4NfuXedO1YRjftybt97sJOiX56V9FVlDQdm69Y36fv5cV4TeFS709v19X6qVPoL1XRgKDnHmhOv1Kj9BUExYGlpizN7v9NiappcUN216jlholoL-62YzfCFfvrL3snnINspSVRkv7tH3d_1o9YLiX31MARFTpX36NUQB415oNmNGQroYxHgbY0l1m3x8d50bxi0VadkXMiX74wGi-0x_pxMbNe2C89VzX-vSUX_VTIu9HmQarlPi-54eL0gTYiWLob5s1GNXAxV7IXED8kh6HU3rm1QJh_p6vPVVALuXtyEcFesXCl2R1oc0nfVNTJy0WwNASoz6GPqDXaictow-O2HRg=w1006-h558-no" alt="Comparative Performance"></p>
<h4 id="Chord-1"><a href="#Chord-1" class="headerlink" title="Chord"></a>Chord</h4><ul>
<li>Developers: I. Stoica, D.Karger, F.Kaashoek, H. Balakrishnan, R. Morris, Berkeley and MIT</li>
<li>Intelligent choice of neighbors to reduce latency and message cost of routing (lookups/inserts)</li>
<li>Uses Consistent Hashing on node’s (peer’s) address<ul>
<li>SHA-1(ip_address, port) -&gt; 160 bit string</li>
<li>Truncated to m bits</li>
<li>Called peer id(number between 0 and 2^m - 1)</li>
<li>Not unique but id conflicts very unlikely</li>
<li>Can then map peers to one of 2^m logical points on a circle</li>
</ul>
</li>
</ul>
<h4 id="Peer-Pointers-1-Successors"><a href="#Peer-Pointers-1-Successors" class="headerlink" title="Peer Pointers (1): Successors"></a>Peer Pointers (1): Successors</h4><p><img src="https://lh3.googleusercontent.com/WT623T_MCVdUxDTx_WV1adLWQLWGxhGao1nTzPnD3gURsPnV4Iw8ib-ghmAG0MGJucDMOpjuT8qnVJBxeUcNaMhn-eM5nS80TFU5CO89qtxDKSLNfhJCXeuzlGarFzRuNFR7YzVry5FkdUGJVqPZnI_MYsYFecgHoEEizntjDrdB5sVaIqV9bNVKcDwJ6gTItYss6PNIla0oE8RthL2LfvbQKdrrFPT-hP4FdEp1DXmSIgdZ2WG6SqmsIJnri-EqdLZEn-uZ4rwEF7Mtez6092zvjok9eaYqol7-BAmJCuxkhDDSm2eh2D3xSQDnGnLjCl4I4-plh5FamYuvO4mIL1J85mD8hi4HALqZxdN90tpn8pypZOahqegX6bSvZ2ZwEHT_OusC529Rs7W-b0Ys0eCtw_yVWh7Sz0EO3W76NVuLCpY8m9CeLMbTvlu6otu6dbaAomvCmb6mC4Ax-BgwRUVbchmBYpWtqu5HJjtvhLrTVnERFOw7fDlySOJEaFv0p8XnEQ9D5G6VI9KdWsdYPVKOg6vhN5nz3gPeEHXbDselbwIg7ATDTy_59QaOqX2LHmDbxMB7vfMIBHL0golwAnGUZhTCsI_kgmmQ14Jb7x09jw0FUGqUAt-WTkX8bGufQiKFc9fIOuEb7HgytQ2OnJznnSXP095oEpPu7d8BaQ=w1005-h575-no" alt="Successors"></p>
<h4 id="Peer-Pointers-2-Finger-Tables"><a href="#Peer-Pointers-2-Finger-Tables" class="headerlink" title="Peer Pointers (2): Finger Tables"></a>Peer Pointers (2): Finger Tables</h4><p><img src="https://lh3.googleusercontent.com/RMfXjJem5R88pR5LOVEgc4mphhLbb-KE0in0Y0MLnnSYkIQgnvMuCfmlnihBdqkpW_L8hKqIDTJftG3xzKi-m6zS4H9KE-fDNymLTO77u7yGHyeTKU4ySzY6ODj0oRaW7n3ejPI1TxTtNdAwfR-O1Uv_4VIeQrDClOQP-VWHpiQJ-4cX2GG9hebTK8aSyEFUgMJwE3sj-fssGsMyMTBIZkkrhs2JR15tgO7OdsxAnuJRSkAOqnFMfpwt90XDkoMUgjQ8OKBCRQZtRkRhUXfCYPVImt8MOrIO0CMVz9IL08enopedI-HZEz3EyWhKkFwfTUfZmbisgNIIvI6ox4pJ6hESBedJMxGMYQ0bv3A5n19bjv_IVmO0_xQ7S04guoFaEgHbQaX9hG5QM95QGKWdQ6C5u9I3IQQYIUezIv5AiMXYLcIeIW-GStFsX3yJKkOTVhBBHkuXH1Ig0J0Lf8DmFJ9T_9CUI4H_1EBEh0YwBraE83ASEuzXNfSyBqJq7LNd7XsGvuZG_McxhYjSCaNWG4_XfI_P66B0FzWlEa59KpBuGMeItRfUX-LfpSaf9aLaSjV-pcAhmfRHeRqEZGZ3VtmOXZbTmXkxd2x5-oonpH-A7cSJd_VEMedAiRPeWnz99nlZmoWzPKPvCB_onE4UPoArQsOOsBVnOSMIOykWoA=w990-h517-no" alt="Finger Tables"></p>
<h4 id="What-about-the-files"><a href="#What-about-the-files" class="headerlink" title="What about the files?"></a>What about the files?</h4><ul>
<li>Filenames also mapped using same consistent hash function<ul>
<li>SHA-1(filename) -&gt; 160 bit using string(key)</li>
<li>File is stored at first peer with id greater than or equal to its key (mode 2^m)</li>
</ul>
</li>
<li>File <code>cnn.com/index.html</code> that maps to key K42 is stored at first peer with id greater than 42<ul>
<li>Note that we are considering a different file-sharing application here: <code>cooperative web caching</code></li>
<li>The same discussion applies to any other file sharing application, including that of mp3 files</li>
</ul>
</li>
<li>Consistent Hashing =&gt; with K keys and N peers, each pear stores O(K/N) keys. (i.e., &lt; c.K/N, for some constant c)</li>
</ul>
<h4 id="Search"><a href="#Search" class="headerlink" title="Search"></a>Search</h4><p><img src="https://lh3.googleusercontent.com/q4flxQoXToWb4t--H_gn_He68mofaCISK4p-vrGi0jgsFrNY3xtIzsaACg8I9Rk-wmpim6PJ5LFoaNkMjWifxV2l0ahMDXT0jmBtf_Nr-xSuM4gw-ez-Q8_vo1ex4iWu-nmv539ykuWSJD5u8RE68KLNsB9ZcZR5ElODTgLWa_vqMP0f7iVDMf7L4GtAvsdVFABfblcA3hHG5PtNBt5h_KBxQ6KGmLHFs9QWmigr_bTURI77d4V_9Qw9xRM6RckupzzAXrYGnOwWDmA2VEdgtoKe_RUFY63suVd6O55IZgdw6pxSJWedtnUCZvSE8vnjfpXwi364fyVcKk-caWvT0O-dn_lli9E5YgxXsUKIapQkynXvefm36uShd3QnM_p0CJBP4sh5tQSABDgqrlUHv1UlIrw3cX51E2cobS64XQWewAviPJF6lfcbMzUsFaoMDRacVY_d2_BhmL0o7MnTUuOXYqGUGfqgc7LNJH57Aw3kOU7ZhCd2vBoS0LZjqBfS2X2-I_wMNrvHgCAHtBgfp2rhO-yzOiwNImNvV-uVWK1skjSuCz7xWOdIzuBhnBV4tfDu27UQkMzqSUqI8lMY6_rncRwC3eKkK1CU2z4a23kgwI-SJQyi9uDabihh-CXLX_TTql5Nb3_om3BC09b_bwrHjSVjWhhWbgAw5Np9HA=w1005-h430-no" alt="Search"></p>
<h4 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h4><p><code>Search takes O(log(N)) time</code></p>
<p><strong>Proof</strong></p>
<ul>
<li>(Intuition): at each step, distance between query and peer-with-file reduces by a factor of at least 2</li>
<li>(Intuition): after log(N) forwarding, distance to key is at most (2^m) / (2 ^ log(N)) = (2 ^ m) / N</li>
<li>Number of node identifiers in a range of (2 ^ m) / N is O(log(N)) with high probability (why? SHA-1! and “Balls and Bins”)<pre><code>So using successors in that range will be ok, using another O(log(N)) hops</code></pre></li>
<li>O(log(N)) search time holds for file insertions too (in general for routing to any key)<ul>
<li>“Routing” can thus be used as a building block for<ul>
<li>All operations: insert, lookup, delete</li>
</ul>
</li>
</ul>
</li>
<li>O(log(N)) time true only if finger and successor entries correct</li>
<li>When might these entries be wrong?<ul>
<li>When you have failures</li>
</ul>
</li>
</ul>
<h3 id="Failures-in-Chord"><a href="#Failures-in-Chord" class="headerlink" title="Failures in Chord"></a>Failures in Chord</h3><h4 id="Search-Under-Peer-Failures"><a href="#Search-Under-Peer-Failures" class="headerlink" title="Search Under Peer Failures"></a>Search Under Peer Failures</h4><p><img src="https://lh3.googleusercontent.com/qKpwgq3yOFazF2YkC3KlZa-DhA43KxSQrOWSgGg8a0ZFgs1-u1iJZ3AbBYiQqUjF1LZGtOoL3HG_YT_PtNqX8mJsWBtd8eliU6HzIgMcj3V1D1bjmnLHbYvZXw57IIZ6SpSktVjvvwJBQaGNfbCQQw79EvU5bFga0SaSkE9ALUVTIlVYqdi1Syy_0EoTnx5khdzrwgt33cnmb-AVJlE44wKmfQCqsBurl9l0kdaajOkgIE3-aE6nViyTuA5Bla1K8dIr68UmxIKm3kN6yzY_NdTOb6LNWhetGPKHldTZUuN-TYu6MHOE97uKsPUtsE8ZW6p8JQOp-ZugSRwZIPYHDqAiqJlCdRMh6-lWoyJ7m5r2h4LMfQp9I2ZrgeelHaiplhzsMCTFfVZM4uYDYBX0j14pErxHmd5d1nY5MYAxFY_KKkCO7W0JuykFEk--0duBlRQ6L3_pB5ayJvqtBzwS_BoyU_kK4PalzphazYfV4gpRUc3a-KrWHAzwoZvLicCeBPBFgYfousF3bXTiKuG_JrQsoO2OVMZDNv6XBNrdmMSxpIDtsh_erXMkApboeotwtxxS2DMinGzNcn1atbp8gbU-hdu8s1ACzeEOB_i_0dDphqEtE2cWR2_A4ubX40wCvFERLp0IvCUnFBkqsTMpNZuk3WKFFM-77SZRvGmi1A=w774-h472-no" alt="Search Under Peer Failures"></p>
<p><code>One solution: maintain r multiple successor entries in case of failure, use successor entries.</code></p>
<p><img src="https://lh3.googleusercontent.com/hELVxi5XY2h-3Cw6fHVeZvKG__temY7lJrFUQcm4jd0zQF6JeM8A73lXIs7ANpVH-T2s2blF1GQpIuXHd2_NQdc9xHyoAVErpic2Kvpu890B3iUkMiJi8uTxOxh570PL49he0h1QbFTUdF-UMMYXvN9HKADK8SNdn4hoouf0WEZAIlb8W6G1RQYOX3zH26ButO5I38zJRSYqaPnOg7SucXFvIye3xuNlp3K4hvC1eMGJtcts93xB_-WlVyw_Y6GE-QdS54pU-DOitXKl0SQqm-gEgWeOw9wgAH3MU6-4YeU93_wcp0xo1Lzxs4a5iIVmTac4FVoW2oR9B23kJWnwUSD9GaGlE3lyH44xZK2COk_26KRD7TI71PlIQ-r6jTKtPMUtCRL8wc2ax7_kTX2aWoH6bAS5Qd-GVLZ9ETs8kkfXFh0KGmhFmGNqQ8bsKIcdV3LV2CNUAX4ASYCpek55unLzApucUW_p4t_8ReGbc6pDKTsqUgWGyxqSBMKC0c30FDbMtxcKO7hyZHMUVe7VmwSJYGY4n58RSLjVCj-NmsZKU7PL-SLn-YUB-YAGPoQyFhyVfOJPh52vyLaHY1QF6pGwIHl5McoFnQOTQ2WQTcSdHDFkx-xbsEHtKArXcN0mWLuy8HTVkiF8XMHJ_DkE8muWeZjvJfUp0EYdWNKCAA=w773-h458-no" alt="Search Under Peer Failures 2"></p>
<p><img src="https://lh3.googleusercontent.com/Bg9E7h2kb7E5BaSAl-NYr61NGzJ6bXTMud6uB8bM6x6urzXHSQ1B7hcGQ8AEoYFK69Gmu5WHawEmuchvRCiQWlyaCoLg81DCGGd3QDp0P91GKLsRO2gpJ-TApbpvcdI_yEW7FcIOPGeJsupdL1FDmfZeejqYc0lCpC37rLL8cnl-aYW_veUAAKXtW8sOXuzyD6P68RVfju5r7ilyKYJCG8DhVPS_1lM42J_4ZSm-6P1W00HxksUKM6zn-Vhnhw-_M3-zAr1rXiTIjo5pDc57MPhXch9J-D5Hy5O6RgY29rLHvopf7-rpF7hlLnVB1XxCkIQA0IUg5pbyqtUAu-rBo2CN7TkBoAoudiE-F5NNPIU2ZDcsxKATTnl8TKu2bFRSK9UZVo2hPv1HK6AMufXFodAevwLUJktlrBraH1pTHretl-Lq4dG0lsVm8cgnhSuliM92Exx8BzU7fq_aS12Uw44FJfAG_gXY4DcP8Ga6Ktz2ZYJZhOQPEbuEyq_6bhH4QxxZeCFsQ0EB5WoICV1oiYB8HDBZOovkYsuaX-Iyb9iU0p1rC3Qo8DE32w5bfBodvyvDTGzbvc_CCT_Cg9zjRrryLdqyQJDzaCWxB0zz5kaRYMRaaxYvoCol_aEqpQtE0BjeGEULYdFuJh5ihRtX-xk5u-n3pJc9zNg_8oXHCg=w372-h207-no" alt="Search Under Peer Failures 3"></p>
<p><img src="https://lh3.googleusercontent.com/7Z2y7Mv2SmncJND1eXX6NiZlUyujHSZjl3_FI3u65RLisUEhFGRhuIsh1_0DMFr_y0TOIL8BwI2EHLhxFlfxTesXb82cH3R_sgOgnqLJjDWNmu3_-QyVQy_B9p9yeJqCPQApBIX_BLW59_maSrAkECSpFG6HexVvTq7soZtvwPslaVAGFuqNNlf6g_rL3h8oi15ccS_qU4r2IC4gJvBEfUuApDz-DEK5ZSNrGGMkSctbQNn5ycj53gGH27XVw6VeetXR8TSs5U33e7wzEXhN9K5dAzesMz-kkfFcGC-6cuWhFWTjaJ-BJ1nYWaZ6JgB64S2pc0D7OjfHZDSJ8DolmjQwyBdDo40mFIUXgKkgM4_5QLTzkd3T3-ARIHedE601RtF_cUr-8dXpGHsoYNbI6Q-ltSsEdpsb62b_qz8tc63VZWr1AneY-SIqGav-FF0UaY-onYuZ5qJQMSIkoY1MvcxG47fGGDnhQCrZRHcH3h_9477AI-ZTbIxv1fLAXeWL7SDgc19GwEyI6x1Q_lQro2q4Gzc-dxLTQ8uyfWj-FPo_TyPp_4kNxdbrYui33aCzBSGp6y7SY2iLm4PpcjgRUaHLIY2hL_Fszo6sbse425MQ0h2qegpHqgJXvlvi7iQVvNJxSOQNAgu3iMllrLeRcGa1ZuPlb8m6Ip0LD2tiqw=w773-h443-no" alt="Search Under Peer Failures 4"></p>
<p><code>One solution: replicate file/key at r successors and predecessors</code></p>
<p><img src="https://lh3.googleusercontent.com/fCrDcjBZLDvqRY4-BdjWxKlxbKazX7wl_kaOWgN2pO618eT3zY4uRKqT_iZWOFyBbJc2dnjvD6AA7_HnxBI5TvQ9xXDsCUoNo4_EVwm_jZIFiKpoE3ncuVXeNXmyP9O2wRKJx1xI3XYlRD5WsyE4fKPSOV-i_z5vfKwmzPuOWziHW9mhmcKRZhmIR0A8gcSaRUo9TNvxB-GqzJzl0KDD4KA75bBtqAvDYP9yprmmxnzIzWqdwYXwFQ5VFYWcwiaX3KxuusO9HtkO4X3LOEgMPMdTszBml9DgxK57MAfh0teZ5tnlHcj9Opb7lpMN_27CLqzWPaDI13VvBVqZH-aRL9Ncyb8oFUx9YH6hh3MybEjNfKyqbDIJ7--D5mgTTNCOlpsZ4kVMKaIz7_HXeZLa10jMHuFJ21x4JR55_b7R8NjFijZCnP2bV0EEC9Y5RGSamHqHT4AvT7_y1wu5V_Z2YvZ8fq80PKsfIMgN4OxBWjJeXMf3_l8c8Qut0601HXeSFBiXMpt4AZfYL6lkb_Jv6DpfUNQUlWsj4aY4CKuuOhTMroCYE2K3QBC0O7RSYntYe95g3AvCSuwzvCKivAFCKHA5J98KzSWySD3ydmc83rWHZQZVkBEQ3gJ_2EfANjVas3sTbkcadIbO_tSsgGH0pOm6ph-01HIpWuxmsHdIog=w774-h443-no" alt="Search Under Peer Failures 5"></p>
<h4 id="Need-to-Deal-with-Dynamic-Changes"><a href="#Need-to-Deal-with-Dynamic-Changes" class="headerlink" title="Need to Deal with Dynamic Changes"></a>Need to Deal with Dynamic Changes</h4><ul>
<li>Peers fail</li>
<li>New peers join</li>
<li>Peers leave<ul>
<li>P2P systems have a high rate of churn (node join, leave and failure)<ul>
<li>25% per hour in Overnet(eDonkey)</li>
<li>100% per hour in Gnutella</li>
<li>Lower in managed clusters</li>
<li>Common feature in all distributed systems, including wide-area (e.g., PlanetLab), clusters (e.g., Emulab), clouds (e.g., AWS), etc.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>So, all the time, need to update successors and fingers, and copy keys.</p>
<h4 id="New-Peers-Joining"><a href="#New-Peers-Joining" class="headerlink" title="New Peers Joining"></a>New Peers Joining</h4><p><img src="https://lh3.googleusercontent.com/jcNJUPI5iLuGObCyRzDY1MgpcMrv-uJwX_uJsry0EKo-rntC9dJnJTMFtt7oLtlgfAduL3-cElzpgs_zyqSW2c3g7-4FEnCQMZg2ulXmlEccftogOZ7kCSiKgoJp441lGplWNtSq6jsNyCx5sXGHtIOHED2NGWJZAo1c71I0JhTOhO16XN6LduanhF6Bjfv3F9aldRbKEJd9o6ret1qzwqfQwCBZZ9ZR280dlNL1VOi6GCF8w4pcBWETPJq05h5EpbJWqKng1Eq_gRv7ES-o-FT0TaaKaXi83_HZQGg9ykz84LzN0Oep958oUPzzSHep28NxO3ZFyjQFBl2lSCflpRPhxiOiCK3NfaVRlzCEdAo6rPW_yjrU2WPKSEQC4Ywi0UB25yfjyV52UgXjxN1NRoUzu4mhT-1kCW-QQy5j_marRss_3zdDr2554t8-6Y1jnIbhKEiNynqiEN_H9VqfqHUJSstBlg5J6T711eBMjgBOapDITYOsV4_vU5_86X5W5Qw7WyjIBV1kRsgdAyie1SGanVEuGU8Eg6K7DUSJ5v5_wOVYtIb3UFHTkw4-m3ZOKmqh9IN1n0CUDuEAqtUx3I45Eo3BtHOH-h1GKiy2x0_4GF63rxHWrZ54sdS8s-VfenAL8NBTL-0DWgXfPmHSZRRPOLSGi39DfEECAlarOg=w774-h496-no" alt="New Peers Joining"></p>
<p><img src="https://lh3.googleusercontent.com/p5YBAqg8u_2YgNOtjghPjqU7kbfBhY9nbxoj81_WZ5EmLDTEM3nGyQalWfPw2oH8YjSTQF81U4UprThaLoLsr0IQFOof9h3kuzej5nP1aTW25TqSxkW9HoHcn2rTarkgOb2pq57Zxjt9Sj31A0n2pwzeyI8YJz6A8nWWNOFyKDAVCHPwrjU8aoffGRYMbK5Ph-lL32RNV19TI6fsnByIVR5MekOsDRGi_IFUlfFlN6vlEGasqY0m7ZiX1qCeusf-Zfu8Y9G-ERtlwOE1MMPBc3RlcNAXrE3n3ZxhKttlrMmtoyUADBzEoeuze2i4S6nOnNh0jx2AMRINGH_JU9ULvgf8C-Rpx7EEoioemoXZgsHiGu2CmA9WvpfonpZlQJOUMSeS6tIo4g9pRnMrQtCwQUknk-Pb-x1H2Eq2ph496Qz7T9k_8zqUVuISKjK_WrYBljQFainVjpNiUpY-2V7pBQ02I9vxxZJ6cZBZMZ3eeJ3wKi_z5r1PHxQ3FFDQU1wHBUFtDzG0Dr_l71axtmrzQdOchCaXFOEwbbQVpKK-u_oj40TzKshg8J-uYpf7YrFWQ47jT54Pob37ZGDXjeQBvw74mPXacWeq2k-5oeAZB6oyqHFC3CgjrbV2_cybkEOpLtzyYBz44utXG55Q6zUEtsIgY2tcvRs-NXSRKJb5ug=w773-h481-no" alt="New Peers Joining2"></p>
<ul>
<li>A new peer affects O(log(N)) other finger entries in the system, on average[why?]</li>
<li>Number of messages per peer join = O(log(N) * log(N))</li>
<li>Similar set of operations for dealing with peers leaving<ul>
<li>For dealing with failures, also need failure detectors (we’ll see these elsewhere in the course!)</li>
</ul>
</li>
</ul>
<h4 id="Stabilization-Protocol"><a href="#Stabilization-Protocol" class="headerlink" title="Stabilization Protocol"></a>Stabilization Protocol</h4><ul>
<li>Concurrent peer joins, leaves, failures might cause loopiness of pointers, and failure of lookups<ul>
<li>Chord peers periodically run a stabilization algorithm that checks and updates pointers and keys</li>
<li>Ensures non-looniness of fingers, eventual success of lookups and O(log(N)) lookups w.h.p.</li>
<li>Each stylization round at a peer involves a constant number of messages</li>
<li>Strong stability takes O(N^2) stabilization rounds</li>
<li>For more see [TechReport on Chord webpage]</li>
</ul>
</li>
</ul>
<h4 id="Churn"><a href="#Churn" class="headerlink" title="Churn"></a>Churn</h4><ul>
<li>When nodes are constantly joining, leaving, failing<ul>
<li>Significant effect to consider: traces from the Overset system show hourly peer turnover rates (churn) could be 25-100% of total number of nodes in system</li>
<li>Leads to excessive (unnecessary) key copying (remember that keys are replicated)</li>
<li>Stabilization algorithm may need to consume more bandwidth to keep up</li>
<li>Main issue is that files are replicated, while it might be sufficient to replicate only metal information about files</li>
<li>Alternatives<ul>
<li>Introduce a level of indirection (any p2p system)</li>
<li>Replicate metadata more, e.g., Kelps (later in this lecture series)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Virtual-Nodes"><a href="#Virtual-Nodes" class="headerlink" title="Virtual Nodes"></a>Virtual Nodes</h4><ul>
<li>Hash can get non-uniform -&gt; Bad load balancing<ul>
<li>Treat each node as multiple virtual nodes behaving independently</li>
<li>Each joins the system</li>
<li>Reduces variance of load imbalance</li>
</ul>
</li>
</ul>
<h4 id="Wrap-up-Notes"><a href="#Wrap-up-Notes" class="headerlink" title="Wrap-up Notes"></a>Wrap-up Notes</h4><ul>
<li>Virtual Ring and Consistent Hashing used in Cassandra, Riak, Voldemort, DynamoDB , and other key-value stores</li>
<li>Current status of Chord project:<ul>
<li>File systems (CFS, Ivy) built on top of Chord</li>
<li>DNS lookup service built on top of Chord</li>
<li>Internet Indirection Infrastructure (I3) project at UCB</li>
<li>Spawned research on many interesting issues about p2p systems</li>
</ul>
</li>
</ul>
<h3 id="Pastry"><a href="#Pastry" class="headerlink" title="Pastry"></a>Pastry</h3><h4 id="Pastry-1"><a href="#Pastry-1" class="headerlink" title="Pastry"></a>Pastry</h4><ul>
<li>Designed by Anthony Rowstron (Microsoft Research) and Peter Druschel (Rice University)</li>
<li>Assigns ids to nodes, just like Chord (using a virtual ring)</li>
<li><code>Leaf Set</code> - Each node knows its successor(s) and predecessor(s)</li>
</ul>
<h4 id="Pastry-Neighbors"><a href="#Pastry-Neighbors" class="headerlink" title="Pastry Neighbors"></a>Pastry Neighbors</h4><ul>
<li><code>Routing tables</code> based prefix matching<ul>
<li>Think of a hypercube</li>
</ul>
</li>
<li>Routing is thus based on prefix matching, and is thus log(N)<ul>
<li>And hops are short (in the underlying network)</li>
</ul>
</li>
</ul>
<h4 id="Pastry-Routing"><a href="#Pastry-Routing" class="headerlink" title="Pastry Routing"></a>Pastry Routing</h4><ul>
<li><p>Consider a peer with id 01110100101. It maintains a neighbor peer with an id matching each of the following prefixes (* = starting bit differing from this peer’s corresponding bit)；</p>
<ul>
<li>*</li>
<li>0*</li>
<li>01*</li>
<li>011*</li>
<li>…0111010010*</li>
</ul>
</li>
<li><p>When it needs to route to a peer, say 01110111001, it starts by forwarding to a neighbor with the largest matching prefix, i.e., 011101*</p>
</li>
</ul>
<h4 id="Pastry-Locality"><a href="#Pastry-Locality" class="headerlink" title="Pastry Locality"></a>Pastry Locality</h4><ul>
<li>For each prefix, say 011*, among all potential neighbors with a matching prefix, the neighbor with the shortest round-trip-time is selected</li>
<li>Since shorter prefixes have many more candidates (spread out throughout the Internet), the neighbors for shorter prefixes are likely to be closer than the neighbors for longer prefixes</li>
<li>Thus, in the prefix routing, early hops are short and later hops are longer</li>
<li>Yet overall “stretch”, compared to direct Internet path, stays short</li>
</ul>
<h4 id="Summary-of-Chord-and-Pastry"><a href="#Summary-of-Chord-and-Pastry" class="headerlink" title="Summary of Chord and Pastry"></a>Summary of Chord and Pastry</h4><ul>
<li>Chord and Pastry protocols<ul>
<li>More structured than Gnutella</li>
<li>Balck box lookup algorithms</li>
<li>Churn handling can get complex</li>
<li>O(log(N)) memory and lookup cost<ul>
<li>O(log(N)) lookup hops may be high</li>
<li>Can we reduce the number of hops?</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Kelips"><a href="#Kelips" class="headerlink" title="Kelips"></a>Kelips</h3><h4 id="Kelips-A-1-Hop-Lookup-DHT"><a href="#Kelips-A-1-Hop-Lookup-DHT" class="headerlink" title="Kelips - A 1 Hop Lookup DHT"></a>Kelips - A 1 Hop Lookup DHT</h4><p><img src="https://lh3.googleusercontent.com/nQBrB7OpWiWRNfSWgWmLoguYYXdQfRoPlk5dg4ld3alwUUqMwJWdkzJt-Ilh1hYWmIBAhH1D2D4-wIp-BQtYJ4X2TY8dSW7IEJGsY6mX7l81Qmgr6h1KXq5AHuuSKU9dY9Tbg9l5KOS9bslaFVOQjrB8d3aSwRq9RQlgyzcU4fgv7EGUTINgJAd0o9TqnMLobI3PuGpyfHSNdg_RjG6ShDRJgPr0Pqmg7E0UGW62UDwZqMchwnf1nWnTLEKc3U27j7vcQWo3476UlYS5TL6yRUwRRh-irKj7ECB8J7CCDFCNUE1VzPhlqJpbpFfZCYyAPBq_UjO9ydtmeO0RjaXyps9qSZRLLdq1q4nZO50dmHuBgVeK-Gdzh6dYzyATWZWEoL1CMwfc1x3jq-pDIKqiQIfIxhRZfzBfPO_VLpB1QKOzejtNGaIVerCbFHWLVFwYPeJa21EWGXOsHdh5wyw1e9NLQkfD0CNPTDXc1LrFCb8qHZ575LtLof7Ws91IeWcsiGxn-vdl9wr-CUOkgr9i3erngUOxwZSL8AiUZCQh8bzQeEf26W7dJSDVbyyMPKw-8yO6D8xT7qm2cme0iUErHucZsqKxTVk9GX09ZgYpEHUh7y-cy1qOa1Q88cWgNyM0jNoiNIanU1LUhEyeAWb85UUIq680GMx8Oj5u4yNHiA=w773-h485-no" alt="Kelips"></p>
<ul>
<li><p>File can be stored at any (few) node(s)</p>
</li>
<li><p>Decouple file replication/location (outside Kelips) from file querying (in Kelips)</p>
</li>
<li><p>Each filename hashed to a group</p>
<ul>
<li>All nodes in the group replicate pointer information, i.e., &lt;filename, file location&gt;</li>
<li>Affinity group does not store files</li>
</ul>
</li>
<li><p>Lookup</p>
<ul>
<li>Find file affinity group</li>
<li>Go to your contact for the file affinity group</li>
<li>Failing that try another of your neighbors to find a contact</li>
</ul>
</li>
<li><p>Lookup = 1 hop (or a few)</p>
<ul>
<li>Memory cost O(N^(1/2))</li>
<li>1.93 MB for 100K nodes, 10M files</li>
<li>Fits in RAM of most workstations/laptops today (COSTS machines)</li>
</ul>
</li>
<li><p>Membership lists</p>
<ul>
<li>Gossip-based membership</li>
<li>Within each affinity group</li>
<li>And also across affinity groups</li>
<li>O(log(N)) dissemination time</li>
</ul>
</li>
<li><p>File metadata</p>
<ul>
<li>Needs to be periodically refreshed from source node</li>
<li>Times out</li>
</ul>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/ar6rT0PG-tFxrdSSnWiKsxS82MLrhrMg7XX-KceL6YSRyr5WcXQBo-daxuHYXdF3Ol7jCFmJgW0XDn-MZYestCAW2OttxAzD2SBtHoOMVngWgGRtBw6I4vQB6ZYQP-ervSHpv5Ye3nJuZFnb4IBJ8Akm9brEkY_p8KrPQGXMCE1TE_UlY5q2odY7FBB07vQLdZWFbuOJFYFhH7pa44WWBvYIZxvGhsPY6xkcjcoCwFJVHzb6LlX5xCoszL3mgm0U05fp98g6GV1RWiG_P6_YTrC1E2nMEQwFie6wrf9pP-nLuHw4B8loN55deDllRoO6i7k399UQIk47RA5NsiMDTRqJy2C0RDdQnLkwO-isvlqHJpye65KYpsGJHydzgZboC7TpKt4HSzoZEe6T5efx6gWB0UGdhBOUnssKeKQjS2D1ULivhA9Pdv0NdArbdKHoEG8ligJXPO04kvzfuPUTc_8FWzFQ0qs4zEdiakatD_rWGBd8Cu4MDI-HzKrD0xlBtrSnDWX7R0WidcvEZSujr5va6g-lDMmHo8Reozqif3OnbTcRUCp-ErChHXHkFp2gIbKRmap1CYdrjw-psiIFd9Jg496r4-giI1-NJKeki9Obn4cpDHUIAQxSdYKuwe1UcMaH_aFz54G3Uxlb8GDYmyT2Xn6IB4Adp-MjgjEy0A=w685-h762-no" alt="Kelip"></p>
<h4 id="Chord-vs-Pastry-vs-Kelips"><a href="#Chord-vs-Pastry-vs-Kelips" class="headerlink" title="Chord vs. Pastry vs. Kelips"></a>Chord vs. Pastry vs. Kelips</h4><ul>
<li>Range of tradeoffs available<ul>
<li>Memory vs. lookup cost vs. background bandwidth (to keep neighbors fresh)</li>
</ul>
</li>
</ul>
<h4 id="What-We-Have-Studied"><a href="#What-We-Have-Studied" class="headerlink" title="What We Have Studied"></a>What We Have Studied</h4><ul>
<li>Widely-deployed P2P Systems<ul>
<li>Napster</li>
<li>Gnutella</li>
<li>Fasttrack (Kazaa, Kazzalite, Grokster)</li>
<li>BitTorrent</li>
</ul>
</li>
<li>P2P Systems with Provable Properties<ul>
<li>Chord</li>
<li>Pastry</li>
<li>Kelips</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/20/2017-weekly-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/20/2017-weekly-1/" class="post-title-link" itemprop="url">好久不见的周记君</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-20 22:47:23" itemprop="dateCreated datePublished" datetime="2017-03-20T22:47:23-07:00">2017-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-03-21 08:57:55" itemprop="dateModified" datetime="2017-03-21T08:57:55-07:00">2017-03-21</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/03/20/2017-weekly-1/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/03/20/2017-weekly-1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>周末和不同的三拨朋友有了不同的三场聚会，主题也是各不相同，分别是Hiking, 生日趴以及给已经回国，短期过来开会的学长接风聚餐 + 桌游，感觉还真是很久没有同一个周末参加这么多聚会了，和大家在一起非常开心，有幸能和这么多优秀的人在一起，也是激励自己继续努力的动力。</p>
<p>除去聚会之外，这周继续完善了博客的方方面面。先是给不同的版面都加上了索引页，借此机会也对之前文章进行了分类和整理。在接下来的更新中，相应的内容也会被整理到对应的板块分类，一来方便了文章查找，另一方面也可以让接下来的博文更新更有针对性。</p>
<p>虽然说目前自己还是挺有意愿坚持博客写作的，觉得这是一个非常好的记录和促进自己学习和思考的方式，不过三分钟热度这样的事情实在是屡见不鲜了。于是呢，决定在博客名后加入(Beta)，也就是试行版的意思。能有Beta版推出至少代表了一个好的开始，任何产品的不都是始于Beta的么？坚持做下去，什么时候当写博客能够真正成为自己的习惯时，那就什么时候升级为正式版。</p>
<p>从某种程度上来说，写博客其实很像计算机算法里的Dynamic Programming, 当你学到或者想到什么东西时，记下来，下次再遇到同样的问题，就很容易快速提取。Life is short, so I need dynamic programming.</p>
<p>此外呢，这周利用早起的时间继续学习Cloud Computing Concepts的内容，每天学一点，一周下来也顺利完成了一周要求的课程量，并且已经把笔记以博文的形式发布了。自今年年初第一次尝试早睡早起开始，到现在已经坚持两个多月了，经过这一段时间的体验，真的发现生活规律了很多，也能更从容地安排学习和生活了。很庆幸自己在2017年伊始有了这一次尝试，如同写作一样，接下来依然是贵在坚持。</p>
<p>最后爆几张周末聚会照吧：）</p>
<p><img src="https://lh3.googleusercontent.com/gVLOLVPPe09wyoiQtQ-XK7T5N_JL5Wv_QP43BXtMgdf6kyXcUmtBzddsLVYiLtCXIEdj57u_5kx2mGqvBmkTVpKJJO55b_FsAwGcf_lfe0Gsm3MZqICo5Ob1TWvmRHfdAbQNH2vm2a6f6AhROksAitsqGfL_KQAiVUIrDlCxGrSGksqH2jaLZzsAwDBlXAeKFaQ21INlXyA2ayIYPww_TASJCvnf3dA7oX1ZRIhE8xzV_G093kZbq404VR1mfIDWiteCeBMEamtk0uN65_uQMDCgA0h1OEQwWJ4tlOWo6QIq1xs50yPuK7qJj-PKUx0bX4cocGALB-kF53ZhqrEkkggXqkY4R9kJI2pjBuJ7Y6kKyPSUxlqmd1sJVF9D2hlyVYdOsh2h32o2KKb73jZc0MLS7m4pWJBnjKaOVXePQ9sQPn7Z1Jt8qkgrTzGRbBgBEQYgIFvqmVOQXjygM55dtlGoOu11ZP5dDsCaN6b0wZW7JQt32_nsSP1-x_aH2jTJXUvc3PHsFw2IPhK770NV3_22OC6Y8SvZu7zEpHHjiuhsfC2pBOoSS9KaDgzWtQBMJfuDNpS4rCkt-mKyCXvubK5H5RfluuLfY6EaQqsyYP_aIHaCwXWZFqBwRIHfTs32631ibj3wz8mCdVPbwVijbduNNU5plzQyZtB0x3hziQ=w388-h1356-no" alt="周末照"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Danny Zhang</p>
  <div class="site-description" itemprop="description">Blogger/Software Engineer/Fitness Enthusiast</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">50</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags">
          
        <span class="site-state-item-count">68</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Danny Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://dannyzhang-run.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
