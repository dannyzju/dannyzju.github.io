<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"dannyzhang.run","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Blogger&#x2F;Software Engineer&#x2F;Fitness Enthusiast">
<meta property="og:type" content="website">
<meta property="og:title" content="D.Z. Notes (Beta)">
<meta property="og:url" content="http://dannyzhang.run/page/4/index.html">
<meta property="og:site_name" content="D.Z. Notes (Beta)">
<meta property="og:description" content="Blogger&#x2F;Software Engineer&#x2F;Fitness Enthusiast">
<meta property="article:author" content="Danny Zhang">
<meta property="article:tag" content="Danny Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://dannyzhang.run/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>D.Z. Notes (Beta)</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-93834804-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-93834804-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?cf34824826b242e2f2924ceffd8bb1fb";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">D.Z. Notes (Beta)</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Be insensitive, and keep a lifelong growth mindset.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section">Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section">Archives</a>

  </li>
        <li class="menu-item menu-item-technical">

    <a href="/technical" rel="section">technical</a>

  </li>
        <li class="menu-item menu-item-essays">

    <a href="/essays" rel="section">essays</a>

  </li>
        <li class="menu-item menu-item-readings">

    <a href="/readings" rel="section">readings</a>

  </li>
        <li class="menu-item menu-item-workout">

    <a href="/workout" rel="section">workout</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags" rel="section">Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about" rel="section">About</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/20/2017-weekly-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/20/2017-weekly-1/" class="post-title-link" itemprop="url">好久不见的周记君</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-20 22:47:23" itemprop="dateCreated datePublished" datetime="2017-03-20T22:47:23-07:00">2017-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-03-21 08:57:55" itemprop="dateModified" datetime="2017-03-21T08:57:55-07:00">2017-03-21</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/03/20/2017-weekly-1/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/03/20/2017-weekly-1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>周末和不同的三拨朋友有了不同的三场聚会，主题也是各不相同，分别是Hiking, 生日趴以及给已经回国，短期过来开会的学长接风聚餐 + 桌游，感觉还真是很久没有同一个周末参加这么多聚会了，和大家在一起非常开心，有幸能和这么多优秀的人在一起，也是激励自己继续努力的动力。</p>
<p>除去聚会之外，这周继续完善了博客的方方面面。先是给不同的版面都加上了索引页，借此机会也对之前文章进行了分类和整理。在接下来的更新中，相应的内容也会被整理到对应的板块分类，一来方便了文章查找，另一方面也可以让接下来的博文更新更有针对性。</p>
<p>虽然说目前自己还是挺有意愿坚持博客写作的，觉得这是一个非常好的记录和促进自己学习和思考的方式，不过三分钟热度这样的事情实在是屡见不鲜了。于是呢，决定在博客名后加入(Beta)，也就是试行版的意思。能有Beta版推出至少代表了一个好的开始，任何产品的不都是始于Beta的么？坚持做下去，什么时候当写博客能够真正成为自己的习惯时，那就什么时候升级为正式版。</p>
<p>从某种程度上来说，写博客其实很像计算机算法里的Dynamic Programming, 当你学到或者想到什么东西时，记下来，下次再遇到同样的问题，就很容易快速提取。Life is short, so I need dynamic programming.</p>
<p>此外呢，这周利用早起的时间继续学习Cloud Computing Concepts的内容，每天学一点，一周下来也顺利完成了一周要求的课程量，并且已经把笔记以博文的形式发布了。自今年年初第一次尝试早睡早起开始，到现在已经坚持两个多月了，经过这一段时间的体验，真的发现生活规律了很多，也能更从容地安排学习和生活了。很庆幸自己在2017年伊始有了这一次尝试，如同写作一样，接下来依然是贵在坚持。</p>
<p>最后爆几张周末聚会照吧：）</p>
<p><img src="https://lh3.googleusercontent.com/gVLOLVPPe09wyoiQtQ-XK7T5N_JL5Wv_QP43BXtMgdf6kyXcUmtBzddsLVYiLtCXIEdj57u_5kx2mGqvBmkTVpKJJO55b_FsAwGcf_lfe0Gsm3MZqICo5Ob1TWvmRHfdAbQNH2vm2a6f6AhROksAitsqGfL_KQAiVUIrDlCxGrSGksqH2jaLZzsAwDBlXAeKFaQ21INlXyA2ayIYPww_TASJCvnf3dA7oX1ZRIhE8xzV_G093kZbq404VR1mfIDWiteCeBMEamtk0uN65_uQMDCgA0h1OEQwWJ4tlOWo6QIq1xs50yPuK7qJj-PKUx0bX4cocGALB-kF53ZhqrEkkggXqkY4R9kJI2pjBuJ7Y6kKyPSUxlqmd1sJVF9D2hlyVYdOsh2h32o2KKb73jZc0MLS7m4pWJBnjKaOVXePQ9sQPn7Z1Jt8qkgrTzGRbBgBEQYgIFvqmVOQXjygM55dtlGoOu11ZP5dDsCaN6b0wZW7JQt32_nsSP1-x_aH2jTJXUvc3PHsFw2IPhK770NV3_22OC6Y8SvZu7zEpHHjiuhsfC2pBOoSS9KaDgzWtQBMJfuDNpS4rCkt-mKyCXvubK5H5RfluuLfY6EaQqsyYP_aIHaCwXWZFqBwRIHfTs32631ibj3wz8mCdVPbwVijbduNNU5plzQyZtB0x3hziQ=w388-h1356-no" alt="周末照"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/14/Cloud-Computing-Concepts-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/14/Cloud-Computing-Concepts-2/" class="post-title-link" itemprop="url">Gossip, Membership, and Grids</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-14 08:23:37" itemprop="dateCreated datePublished" datetime="2017-03-14T08:23:37-07:00">2017-03-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-03-21 08:58:14" itemprop="dateModified" datetime="2017-03-21T08:58:14-07:00">2017-03-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/03/14/Cloud-Computing-Concepts-2/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/03/14/Cloud-Computing-Concepts-2/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Class notes 2 for Cloud Computing Concepts by Indranil Gupta @ Coursera</p>
<p>(更新于 03/19/2017)</p>
<p>This chapter mainly introduces the following two building blocks for distributed system (in the cloud)</p>
<ul>
<li>Gossip or Epidemic Protocols</li>
<li>Failure detection and Membership Protocols</li>
</ul>
<h2 id="Gossip"><a href="#Gossip" class="headerlink" title="Gossip"></a>Gossip</h2><h3 id="Multicast-Problem"><a href="#Multicast-Problem" class="headerlink" title="Multicast Problem"></a>Multicast Problem</h3><p>What is multicast?</p>
<ul>
<li>Sending information to other nodes in the group;</li>
<li>Opposed to broadcast, multicast is more restricted and only sends info to a particular group of nodes, instead of everyone.</li>
</ul>
<p>What are the requirements for multicast protocol?</p>
<ul>
<li>Fault tolerance</li>
<li>Scalability</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/L_7hHFT-OEtwK3K6GAUqBGWVo3ND1lFM--mUzCCy4-iTYq78jDX_7HkAAK4-b4kQttoshXc9T1QTsUQcO0dp1gDatZPXMo50tIHIZCIH9p7-0WF2zGMZpJK7vZk9XFMfErhccaeQtvYEgc1r8IB_ah68oFqv7-gIvlqOtKCHGgAsOcp1IS4N7xbx9RPxEJZ84hBAjoPX7hdHtjLIA6-e5spMtx8oBmmAU7DuCqJGuVhtoG_L6mXUkvWd_S9wqhd4PiNtpT8kxJ92MoyK1EtxiFqFsFm0TqUzkss_EnlfAZkDxeG9FPSwxDqj13CifzooL5cHfYXxpCptv16uVUYg1rMo2ul6EdXxGDX9Zpd1v_O_x0sTAmZfXgu0RjF4cQBMQ8I0_X68FKkFkGWNsW6rfk7KnJRepiGhq19CE-Ncf-TRDwKxDJ4FAjTVLQh31cU_Eu8Y77kePgZYk4ZmlAX0mmsmVfYwyxfP3HreYJnPWH2z29jU2Mer0ChsY2FYJKLNBcG11Pi5pEzAybRdUnSoJ_13V1a5zt53gIlwQiiktK2ZWSUC-nIr5q4eK0UKxnoOFBsOVawgpQ-41n07oAT8PI_FlvApJm_DIaPob7i3-yTdhRhl2dbyZJhnaD7xzIExhOtt1FEB4Nn_PYJnhGQ_zJuTZ4Q6h4SlgqyhqQrv3Q=w969-h509-no" alt="Fault-Tolerance and Scalability"></p>
<p>One of the simplest ways of doing multicast is a centralized approach.<br><img src="https://lh3.googleusercontent.com/iGKGaDBr6k3b0lN5284Yh6zFnl6mH0ixIYZvq9uun3xY71FsTWOXapeRhExf3z4jVTOinKWEgDkpBoe71QbU16b_oMP-q6Opzd9mkyaznd-9rzNIcljp9UKG1EuqH8IUtEc1SVGUmsEmrZkT_WBkSXk0mjb66UNjDAaMutXJiAoU_w8kvTusuHG1rWth-FrkxHq5DJPiMDGeMMJgTeSbwiRvL7KEZUWU79G9BNdVbNu9RP53WATxL_e6bOOfqqxGkzQowEbsPU8gPZdNbTiQpCar_IOt43TtHJmBgqMeDZZCqmgeXW-WUqfIkiNyiB5wUztlflE5rlz_7tOQwOvLbVzMksY8chJjTIwIt9AmsK4vhl4hdpNLB8Wn0z5W96awlNfyYlEUpSaCuPBoc7g8bfGTBMLZvZlPmlwnkUy4UuXjMTjQsQK0Qa2urNahOqTMtU7_NOfO_uJSLfYpNt7PszecpkFCj9GSNbxnxZlTFhhpvC-TqHxcYnm5ptCu0dyyMVAqnQWywb8XGWe3sdVHR8iwwB4WtrISehy0mWeT09qWwdkba-U1Ux4dX1YgzwJ7r91-fTVvhZ0j5VdKl3CtiR54pwKzYpGn8qtle7sfYyFjY6Wod8BvPUUfV3gCke9CoWPfpsTvZpyCgsWdUgtSC-rmQRNWNTI5BqtfsmiAyg=w934-h491-no" alt="Centralized Multicast Protocol"></p>
<p>Problems with centralized approach:</p>
<ul>
<li>Fault tolerance: if senders fails, all rest fails;</li>
<li>Overhead is high, O(N) time complexity.</li>
</ul>
<p>A better approach, Tree-Based Multicast Protocols<br><img src="https://lh3.googleusercontent.com/a-zPrhEuMA4jMnaYOGfg3dMgB6DnsPoUk0yn2dZ_kBlldDFj8cwRf2t6CZ-SXgoFKusheiHq3nHJq8enf2EwIdjUSFDsJfhKuHYB7k2ot19jPunVAaHjKs9FDvfuveaYrm0sfUzcJBvbZme7g6em6eQwSb9Hf1icCOiTORD5xMu1BEWqt_hz80YDniukw4Fc-4IMPDy-L5bAfuAAsERi0UCpzEUhKDP_d3n70Eph6NximkNKFdwNB_UTLkuA7mjVfsyVMbQgArUxhwWO03rYLwSQ_tsPdXeYxo4YyNvvwWakHpwBcDLnTXbOG0dpGnuPJlyRvNwHfEwUJAwI-tdWOI-orHHcNvy0FjXb-rGaFO49Hke1tpfYAKwadAQttDvkxbeRM3YXDN3zX6GeKWo4Et9NbASsRRV1tBXyk9Ztu3YC9VmhHR399-SkfUb0cOCD8KC_ktFl2oXktg7gsPXXam9_FWG7p4oJgZZq_hLdAOSV7EcGP0VnKb7mo1_81rjb6lmRM6xaFLouAnfb6IpdnR_bBL2H-lk0-bIkt5ndY_aVwZmkq0HhbdJN3-3YBDCDTsXdknyr6NbfajxNDXuELg_d6p-g2iBPFC67qcnW3Iwr-gix7vZ8cs75waEfZxh1uh_rnpmfr8whwBRhjJx85SROUloi1DiHaqaEMwndHw=w1086-h604-no" alt="Tree-Based Multicast Protocol"></p>
<p>Tree-Based Multicast Protocols</p>
<ul>
<li>Build a spanning tree among the processes of the multicast group</li>
<li>Using spanning tree to disseminate multicasts(Latency reduced to O(log(N)))</li>
<li>Use either acknowledgements (ACKs) or negative acknowledgements (NAK) to repair multicasts not received</li>
<li>SRM (Scalable Reliable Multicast)<ul>
<li>Use NAKs</li>
<li>But adds random delays, and uses exponential back off to avoid NAK storms</li>
</ul>
</li>
<li>RMTP (Reliable Multicast Transport Protocol)<ul>
<li>Use ACKs</li>
<li>But ACKs only sent to designated receivers, which then re-transimit missing multicasts</li>
</ul>
</li>
<li>These protocols still cause an O(N) ACK/NAK overhead</li>
</ul>
<h3 id="The-Gossip-Protocol"><a href="#The-Gossip-Protocol" class="headerlink" title="The Gossip Protocol"></a>The Gossip Protocol</h3><p>A gossip protocol is a style of computer-to-computer communication protocol inspired by the form of gossip seen in social networks.</p>
<p>Periodically, a sender will select b random nodes from the group, and sends them copies of the gossip. B is a gossip parameter, and typically is a very small number, e.g., 2.</p>
<p><img src="https://lh3.googleusercontent.com/EbrnuPa6Uyoyf8UFdii-RaYIS3Sq3cSDN6aRPKiRJYRNw1KX0e1oObPHv4xlAJ1piYE00V5Nz-GvN_kFbF8GIwpKsD5_fFhr0aoVL3EAZ4QmZgu53eMYXAi9Cj48TBki7eHrb6iKdPaNYkdAqO31RTi6-2epDYdN5_dWy2Wbet82CIIWVSK-d_H87V_u7q4YZR9t9emQZSDQIkzBmctkzwduBwbzH30mMf_CYSAyduXs38LtqQ8LyukG469CxWUNar4rSlovLAUEGrckrHAB6qj1CbtQlTypZiS7KDT_2tZDdob1pxMPE0G1ciq7E5tUkSxgFL3M3Qh1k0ziMZgRY-NQMJN-JdKuX7PKe_CDp2gRX03xK1dz02JLM_EN1R6DR7nIdkNvwVlfDBz5cGBtF89p4_KawaGb4XDMidUzpfv30liynnFB-GRu1QjhzzUVT6JuNHVmiJz_V-N_W5KvQmAkhBp8jcZCAAVQwxtNR8QVEx7wCvsgbGMlcU41Pmj0FzJqEZSZRZhDB7iUjq1T3lbCl-DBTpVh-7OBJvzfyvagQkvYDVSyth4vhe3hcSMS7Ro9ZtcEBsnMgKv5dOBjwMeOVqUfRIZgnV3tToiv4Lb4w8L-GOjJd2CzIKZtaHiiBZY0boWJ6_3Kqfv350pa_Xcruqp4QTsCKL3zuxTp4w=w690-h415-no" alt="Gossip Protocol"></p>
<ul>
<li>“Push” Gossip:<ul>
<li>Once you have a multicast message, you start gossiping about it.</li>
<li>Multiple messages? Gossip a random subset of them, or recently-received ones, or higher priority ones.</li>
</ul>
</li>
<li>“Pull” Gossip:<ul>
<li>Periodically poll a few randomly selected processes for new multicast messages that you haven’t received</li>
<li>Get those messages</li>
</ul>
</li>
<li>Hybrid variant: Push-Pull<ul>
<li>As the name suggests</li>
</ul>
</li>
</ul>
<h3 id="Gossip-Analysis"><a href="#Gossip-Analysis" class="headerlink" title="Gossip Analysis"></a>Gossip Analysis</h3><p>Claims of the simple Push protocol</p>
<ul>
<li>Is lightweight in large groups</li>
<li>Spreads a multicast quickly</li>
<li>Is highly fault-tolerant</li>
</ul>
<p>From old mathematical branch of Epidemiology</p>
<ul>
<li>Population of (n + 1) individuals mixing homogeneously</li>
<li>Contact rate between any individual pair is β</li>
<li>At any time, each individual is either uninfected (numbering x) or infected (numbering y)</li>
<li>Then, x0 = n, y0 = 1, and at all times x + y = n + 1</li>
<li>Infected-uninfected contact turns latter infected, and it stays infected.</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/NpSovr4yV8-wykhh47j8mcgef9GOfHY_75tUxslOq3evkiDrarZbGwK4JpEo2dZXmL4vYR5gn33yuhMgwLX5uYHQdirtn7y08sa40FaFEmkXFJdAMWcDAsK-1IYOZmop-O7cpx9MomEAbatE6jX4Xifh1b1Xb-vZqEt7SUTvinHs6wu_3hRrvmMMbe_Qrk6E6_nJmNZ7mZ1zJX04IQ22i-55fPFbaKi4ToDlkH9tDGwM-kurVc1I5wklWXTjOB8k78n0EdffUG_UNxxtNq8qH-3OlM-_S14ibMZvGt7hPCU0qKlR5oYECBA3zbPj4cDYVsYpzKIyDimE4zoN4BvYXN5eOR5az5NDgr-0J-hmNeYOP9SrDaMv7592_kZTpiLc-lrQDc9MXxQHrL8oC7mFRBk533r8yXQCph5Ez02Wjx-7DzflLGzyQjxdECSJS9OVk7RpTdtKHvEn79lBvgcdogHzI1seqmnTmp_CMfP7jf1SBDcAScmkst6ZRSIthA3_37l5V5bqrqz5NGceVRsrnySqsZguJUyCtm_ZpXavjlOQ4ltRMd78JgcqphQWz0gKF80iVzCYXFjgeGMOuCgaRyrMP72JJuYQa2xIVNBMrpYFxPo7RPqAHPthY36t4DYDMB7PFmA6NH9rQaxI9d195mrF7GEpUA6dbwqkB9AqYw=w1504-h644-no" alt="Analysis"></p>
<p>xy represents all possible infected-uninfected pairs.</p>
<p><img src="https://lh3.googleusercontent.com/CwP-Z-ArAtD8P7SSnsOsvnXeerZbagIEpUWwMAlD_0VlwT97n-wo4F6ukD3q8zkt-adBoc4YBm6rRMGknJGbZNDNGQY_DudDW5XoIQUOJ0QpGO_sSxsNtRd5bBIVELuHa3FdhwqVj_EY0gPmMZxVubddQCmrzFLdLp1PBrBwtW1ekIXNpjbShAdlbZJjC_cvSWHeTwURFppogOdYaD_V8EhucYad85YZMqRlEA-iHXXwJwN2SJfjPnv3DUTxDYyHkqIKv6gIm7NEOcDqyJOKGLz3buCWgvYqjdHPmR9NiBcT18eoJ-Vnl8sv8UtVC6ZbWZ33QYlGjx8lygIwjG6Fu5fWSQnEcDctyUw0aRf5z829w3Kr5KlvchExYhre-QfZvEaQseHXKuYo1DTUmMeTVUF2s-EhPt53d15gShk-FNEiZjZNF-VuhpCobBeatR3ocOpDcGv7sb_fRW2MLyQVlmwCfo804rMnxu939CpQwMO_pCS9_f4uYI7WYsssUG0C4jj45or2OrZAZjyOtKg5qhrkbmUJGe9mQp8zk-fQ-Iw21MV1HL0nEylnie91VluRC190gU_L_cqltXaN64lZKVqOy11R9gNpTVp_ODXucJcA1fV00ILyyo856CYRx0plo6hc2F9dfLD2BvzT0M6jJcZ-dZGUkGYR2GytZhg9kg=w1387-h603-no" alt="Analysis 2"></p>
<ul>
<li>Log(N) is not constant in theory</li>
<li>But pragmatically, it is a very slow growing number</li>
<li>Base 2<ul>
<li>Log(1000) ~ 10</li>
<li>Log(1M) ~ 20</li>
<li>Log(1B) ~ 30</li>
<li>Log(all IPv4 address) = 32</li>
</ul>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/4kNgYoaJajllNlsq9oq_Uw2JP3wdj3WXBymX4oh_rkr_nyO6YsMcWBmiDkK8zGsTOHPIKN9yU0XkmpAAEyWCRjtmIh4HeY-CEOO-aJzR352ZAA7mQd-TWRkuw53QCi2KrWxMUshYcYLYwXLQUpKncnOkW4kvH9z0DKdfid4npnSEGARY5jVfRgbpS5yKJpf9XCVWk7vk0BcN-OwFFXM6mbx3htfP1J2q3QW6RXoxJWJ69HxHwlb4NNA0CYmT4AFsaENvfoAXF2kEhesI6Ndr0_Y0tlDX12ahA8u6AcaYQ0jTQPpLs7fl7-245W1I5utaTq3KiOdrhB9XkJ7AMjYuuWklj6c5oFwhI-5xEhd0j2Xaige5QkaVIcyG-dF_fGpg2Oh-3QcJq-LNa5OLSy4jHQqrTh7_Unwo8rXvN3cJtWWqGR9gi43yxvGhM41HnoJbao2tJME5NY3tNGkJRh2kRJ03NgdydYmmce5pro--R3aIj0BZxJGDIuzlCNNgY3QDhQMTxQwl4NdqZgMmoQw5ZAqNE2xBjby_yZl2hOxjBxq4iu8eUD5443lqhWAV7SSwXVJcdce16uZs6kUigxvGksn-Sy3btZp3B2ZWCf0oX_ItXljyoQeJfkmkJKvYEKdbXi-99w-IgOdXGujCHEfTLAKNFmndbvM5Ox0kKed4cw=w1161-h525-no" alt="Analysis 3"></p>
<p><strong>Fault-Tolerance</strong></p>
<ul>
<li>Packet loss<ul>
<li>50% packet loss: analyze with b replaced with b/2</li>
<li>To achieve same reliability as 0% packet loss, take twice as many rounds</li>
</ul>
</li>
<li>Node failure<ul>
<li>50% of nodes fail: analyze with n replaced with n/2 and b replaced with b/2</li>
<li>Same as above</li>
</ul>
</li>
</ul>
<p><code>With failures, it is possible, but improbable that the epidemic will die out quickly.</code></p>
<p><strong>Pull Gossip: Analysis</strong><br><img src="https://lh3.googleusercontent.com/-bS_pDxZcAn2KdGdGlI-fhesApSpI0m4IbxMoxi5uAFAu6q2lkIw8MUsbrRhpzFocmWIea-ZawHbcug-D8nfClxzs-82ZBK9e7HAGg9UzPg-RgH_IKyaWN-SPsjORVOQkaqq_Fot1FEfhnSyYP_Ecu4Df7DmNmy9ivGB08G36nA0PKReExwz0ncdx_gMLnDNuWzyE8JHJ_8lX0FeYhEoPDN9LwD9qWHvLXjmXUXhPUIE_o5sDC2xx_-jwb-G-9NdltWa2sG3rFr0dFz1PbwjL7ySdPzG_ZvL62g6UW2HXA9fSHnlxMB6GgBWPOrjPN12brrU8J_IW5_C1uWMb2oU4apmQI8xe-aLYZUEscnN-x59pmYD6m8aQSUnA2YvSK9ApZX3lCP069Qadc_qTFm_TQ5mnNgtSJt2ezDymV191oyke-csSeF6rx00WIMVqIrApeeFFEy4cBcVExsdBgTngVBUAqmEv19DpyAp9fsSOLWUDi7sM7eyL64fWTibR6r-EOZRgDxcNC-lo5fjxOCbTAPSpMLXAHaqWdTLsE_BuLhpfto5GsNrsr5l3TlByEYu5LIaRxFPWlwQDoLXDyyMeQflwCD1zQt97S6LeR54375RhdJXqZmU8i3cZuMATIhyn1pX8Ihe9zY9mVtbiSBHInTO9GyFKE4ofwYVkTL8Qg=w1039-h620-no" alt="Pull Gossip"></p>
<p><img src="https://lh3.googleusercontent.com/YdpmtEundS6HNVvq3IX8DGRvgw-mx0xsSkCBLVl5IlxjDmQsFadWYjaYlpkbwhLOG8zK2SSkhnglKCMUY3ejAs7YLajdQsaa7WEkE67l6xRRi2xZVd2o6Ixq_rl1J3lQsJdM1BL1HRlmWyAEupW2TVEhNNPfEZLZS0KjnuwPB_2Jkzusbo-H8IwvIcN-PjZ-fjlttMCOMwDE6hQtlp7LoGRYuyMRMTcSvWBKp8UDKGI16oh0Pjsb7ibIXnrnHRIoE88Z2MzjGKHLUAcDVXEGd6Iy21o-F9Gp4cdjScKp7sat_rQBXGmzqZlbdqf1QdOBaQlIs52X4huWhKBlLZAeH-opmZi6hcIhMgo0PmCGMdRTUviNIWeY3fc5K3wi-dfuN4GDBJlErR8Oy2kcriborK0M9LcLkhkO1P4waWPh2C7-yu1RFQ9OLLihH2FXFXtfWjsGMi8cqdPClWylL6BDz1FA9fOkyDM7uOXm8vrbqbeMaX96zt6bIJV2Cn4NHF76wu73IS-jl9r6xYsw7H7Fd0D3FmnyvnWZLfn40vALco3GpNNmFnVS2nk7FEtjEWJr7fshWW_tM8sm0XdrRrdJ2_TRagx61Ws93nNQJ7dOe-ssDIso4rS5HQU35z7L0cRcFKKyN2Erspvdf63tzC-w7Z6YkNIW30D_jGHo0uuYhA=w1034-h634-no" alt="Pull Gossip 2"></p>
<h3 id="Gossip-Implementations"><a href="#Gossip-Implementations" class="headerlink" title="Gossip Implementations"></a>Gossip Implementations</h3><p>Some Implementations:</p>
<ul>
<li>Clearinghouse and Bayou projects: email and database transactions</li>
<li>refDBMS system [PODC ’87]</li>
<li>Binodal Multicast [ACM TOCS ’99]</li>
<li>Sensor networks [Li Li et al, Infocom ’02, and PBBF, ICDCS ’05]</li>
<li>AWS EC2 and S3 Cloud (rumored). [‘00s]</li>
<li>Cassandra key-value store (and others) use gossip for maintaining membership lists</li>
<li>Usenet NNTP (Network News Transport Protocol) [’79]</li>
</ul>
<p>NNTP Inter-Server Protocol</p>
<ul>
<li>Each client uploads and downloads news posts from a news server</li>
<li>Server retains news posts for a while, transmits them lazily, deletes them after a while.<br><img src="https://lh3.googleusercontent.com/Jxz9cSmiucf1j2CQMPfZ3CKVZF1oGZvI02y2rOblcAeiI1DBn5Plo_q6fl28SlPmImdV63VdEy1xjlnmc6FWpio90Le63iO579tQpwoBpliH5PJ22rsnAcBVbImas_kf3yoL1s1Vwd_tH7-YVYgwYwp8NybAGo604LTuXHMLNM1thfFn4-u0TkQBSv030O5PtKRJsohTWeFDrYOpxMJ0Y2AMU-lcx1f5cZdeYv_6mgJEDM4Uppyee8OkhbGAhbpKKL1Fx7qyhNOXAC0BcpsGo_1lMA6pNnHuoWeDaVWeIg88Ism3ZAvazxWLamEiOI9KDUd_kLwDmkq82wnez7d_yyQSvqkHuxeHvvrSRrHScFeCKdgA2O7okDPuX8P7AVErMSbYam34dqF-LfFBF5wClsk6LwF2doTz0vol2jAZGghXjG4NjfwcvMymd227EoWIxOjDFtqUDjp5yTyT4zgb2hG3tJkfX8NxpnJvhI-tyBfvynrGEYKFu82zLsOhpBDmOI-EOBl-KSRxzeU-xpprKfGMGhPtxrk3ZvnaZEbGYUAYp-oPRsfODxTVSKookhWckbelnpnAqfq3TjQhXm6epWj9xYpIC6tQYkbfRaXinT4k_PqaEpV8ehopGLRveGxyJwWCxzBTb5Fuh8TiwGhTJmXvsbiXPV6LyI6w5gW3-Q=w1552-h531-no" alt="NNTP Inter-Server Protocol"></li>
</ul>
<p>Summary</p>
<ul>
<li>Multicast is an important problem</li>
<li>Tree-based multicast protocols</li>
<li>When concerned about scale and fault-tolerance, gossip is an attractive solution</li>
<li>Also known as epidemics</li>
<li>Fast, reliable, fault-tolerant, scalable, topology-aware.</li>
</ul>
<h2 id="Membership"><a href="#Membership" class="headerlink" title="Membership"></a>Membership</h2><h3 id="What-is-Group-Membership-List"><a href="#What-is-Group-Membership-List" class="headerlink" title="What is Group Membership List?"></a>What is Group Membership List?</h3><p><strong>Failures are the norm</strong></p>
<ul>
<li>Say, the rate of failure of one machine (OS/Disk/motherboard/network, etc.) is once every 10 years (120 months) on average.</li>
<li>When you have 120 servers in the DC, the mean time to failure (MTTF) of the next machine is 1 month.</li>
<li>When you have 12,000 servers in the DC, the MTTF is about once every 7.2 hours!</li>
</ul>
<p><strong>Group Membership Service (Membership Protocol</strong>)<br><img src="https://lh3.googleusercontent.com/0lSZMTpCdbfukb0W2qy3gVf93baG9mzQrBll_VjXTJ8Td_8yQZSSRL80-L-aHLLSSmZonepBXLwEkdCbXA0MDcIxxCq-Mbb-0mpkWD8QZNhIgEbjud-Y3IdecPryk27KJpTiXyq0gPyTu5ci2HGcsRaZgW2mKlRdqfDjjEvVyabxcsQriV563lVAyUgIBHf9qEQOkn1oxcbT4Q_XLrysHJ-QXbaK1R2RlpmMjt4VFoRSgvrGkqsLmonJMcC8Plt0ganAs_lFdGqls_dSHJysDpsCqOWJpquRUhCAJDixwnAfzC_-h0hFcKxd4vLVaI2Vw1br7Wd7IpIulpbX7HKlHGY8BTOGVCwUUPUw3wQMcAQ15fk0X5_wJqN3rCxwjADA93D1tWhS14SxsmtJjLQ2kJaQXm-WHtGybPfxuyJbL5XpLTkuhyJBrFGJx1heuUmnTVuEwUEid_s5FI2_AzsT_ryvWYl-Xx4WIEYw1e1XcPrEm1MgzXu5N6x1yOdej6eT6bH1-caw6swkIJQeev6adPOYsBbjSpenN_FIykb6u3YdTEuiiHR1jDjT1HmJlenHVE8fGRkN1Qi1oJV6eI_snPiNMIeu1pnusz7LDVkO89W0EuSUDqZDYN4lrZqzmxY78LzRfs0UsJBd0uNwXRHsbeJpMP8hSr8OiVbvO8cbPQ=w990-h328-no" alt="Group Membership Service"></p>
<ul>
<li>In each application process <em>pi</em>, there is a membership list that maintains a list of most, or all of non-faulty processes.</li>
<li>The membership list is a <em>Almost-Complete list(weakly consistent)</em></li>
<li>Two sum-protocols<ul>
<li>Failure detector: a mechanism that detects failures.</li>
<li>Dissemination: disseminates information about these failures after detection to other processes in the system.</li>
</ul>
</li>
</ul>
<p><strong>The flow of failure detection and dissemination</strong><br><img src="https://lh3.googleusercontent.com/yI2nCBtceXUVH4jDI2ZojE4T4O4GBT2mNztSehJsaG252JhtlSC8VF7WPA3gn5dKGJh155coxkHXX6i7pr7JkVC1ehMLs0fJFxGI2QN7_IhwBH366sSNWgopjOc7NSJD6rLwnhdY13bn8mtzyDkNiqPHqlEvbc0dk5rYzECxZl0xf2PvxVIqrtoAWhZzPDMwMT11mgCMWMR7j3O7ltxMuhGxfPe4t_0SoUZTE3DexPbogQjIaaEP95Fy7fuWU5UBaf_lCCzdDRSz5gNAIszcmlYETvllFZgSqQrCH5-06ZUkTEMrN-AIx-TO2G_7wslInPNNQmZPaqONMICDJMTWbDF9gn3WlINMR7wIpvclg-GYA2W8ZQ9JHy9pucm_J2mk7qco7GaXwbmq8t_5KdS42eGfUA92EwuIVZrEqcMmHsGmxAQ1u9R22YAi4U2SivrMLDWZD_JjNTSo2WLtV_f08xOKtI5nEEU6TQEJzoybpjmbBQivFSd3Fy4K38Dggf-r-WGgym8jHI8ek12VhqK2nNDTSDmiQb8qITIfPLa_e5zutFKlip-lkuX-hWmohDU5ZqpTtA0FJCbHg1GWvwFrtOF0RK9iF6RAV3J4hFSWEPZsyDmnkSi6SnQOQYHyjf601EWPJDJ7K2IPg6XSOODs7NTKkqlcpBxLaGy4wCYe6Q=w990-h566-no" alt="Failure Detection and Dissemination"></p>
<h3 id="Failure-Detectors"><a href="#Failure-Detectors" class="headerlink" title="Failure Detectors"></a>Failure Detectors</h3><p><strong>Distributed Failure Detectors: Desirable Properties</strong></p>
<ul>
<li>Completeness: each failure is detected</li>
<li>Accuracy: there is no mistaken detection</li>
<li>Speed: Time to first detection of a failure</li>
<li>Scale:<ul>
<li>Equal Load on each member</li>
<li>Network Message Load</li>
</ul>
</li>
</ul>
<p><code>Completeness</code> and <code>Accuracy</code> are impossible together in lossy networks [Chandra and Toueg], if possible, then can solve consensus!</p>
<p>In real world, <code>Completeness</code> is always guaranteed, and <code>Accurary</code> is partial/probabilistic guaranteed(almost 100%, but not exactly). Because when you have a failure, you definitely want to be able to detect it, recover from it, and make your data consistent again. You don’t want to miss any failures. However, if you mistakenly detect a failure, it’s fine for you to ask that poor and victim process to leave the system and rejoin again, perhaps at a different identifier. The overhead of doing that is less than if you do the reverse.</p>
<p>Here are three failure detection protocols.</p>
<h4 id="Centralized-Heartbeating"><a href="#Centralized-Heartbeating" class="headerlink" title="Centralized Heartbeating"></a>Centralized Heartbeating</h4><p><img src="https://lh3.googleusercontent.com/EnWz7E6gfc_ozDudBKkrKqduZGC2TohywwywXXts03hWhUsJNzzowXd6sLQpw33VeLIhI-JaaOCUt959lcIHMG8FMPiaiFLngZWghn73zWZNYBfkjjxFw7qN1Yjq83C2znsnHfBH0OnfzOVm2AaWZ1cop__B8quvavAjd4sba7oqafZ1oI9X1zlHMJ655wDE5tK7RvV81Dy7PjbeFNjxW7JRRCOvbAnm8JIl06faSQJxq7-jBg_hUkyyOI4VS4CeiGMr6g-ICkX6UBKh7GIDaa5hAdah9x_b8F3wVBLRoX3VOv0HSHC-n-vStKENbNwH7XanKeLPaOVZ-sozSxICB4UQIi9Pa0KGDJhM98M2xkhKwM_YGgRRJiuJ5i1nVuNs7dULF_rvx0HVQ74Fd9xpHhsDj23s6P7b6xEh3pv8Z9lFuH5kabGt-cSD_gYgi5q254CgzR0NZ6sNqOoxlhzdEgLhUzpAaPVdN5LWPBr3vsQMuyxT2lgsbJ4uZGg-nTH3BVS9b0pS5QfUJXfIWgSzikM4sDKzDoQmIns3f8s1Ojhk0sfYqD7BGxAalz8w3ChqrI2bkAlFA10on_piugYsLC--JgpgKGzqfVS4jd7B1nFVJ9mb-WbcUfJMb9i7-LHrAHJuv7NcSWjvxrhLf3ipoMLVpTAD34Ck7mZf181Qbw=w1249-h522-no" alt="Centralized Heartbeating"></p>
<p>Cons:</p>
<ul>
<li>When <em>pj</em> fails, there is no guarantee about who detects its failure</li>
<li>Overloaded, hotspot issue.</li>
</ul>
<h4 id="Ring-Heartbeating"><a href="#Ring-Heartbeating" class="headerlink" title="Ring Heartbeating"></a>Ring Heartbeating</h4><p><img src="https://lh3.googleusercontent.com/3Tqbd9Ph6sWH0mIl1CsWUm7xze3dP4EszbEJ8oZDwd9nV-QzFOD3hdPV9cUk9VA-zpQmhiHl2Cye84rg8YogXdwC4SOoHo-5IlMAxYWrSudRcfTqefhmC9PxYGvJ1MMdyZZf2YI7LdOm5mje9OhbjGhtJQHFu6kvD_p4ZVaLrwbjhjaoL3_Be2MjMXevSyRwoNd7OiIL0yzyeDUuLzrRwqjdJYXuaZhvbP3_RoL6I47APMc8i5_A0I4GwoR7fJgstSRUyKlE7ppyKTB2KumeLA79c_IeU5ra7CR9UdQ2nMDw10pmINTyfnWe48c98Lj9uCDpiAKp1Z8GlZBuN0R4Kk9EacwRnwQEVSfJBJ4JTXt-XmGqK3iAbMWaHPSV7bIxyNe31SpcU0Keu_hfMuDB9tXUA6Ai3hVALsFYMFO4AaYmnmLnep_Pg_xFTmo4nCuxK3xoYBTu645eKN15dym0Q7B4tpx4Pb-NH3AhcwKEDLMu7u5pEdxS91XLYJkdHRTpvree1Jy24ieopHqovPW32Fv1yOs3m4k-RDahljnuaq3vRRY3Kz--KEm0UomCtmxtcGVyGjAT7YKzq_QD7hTwg-fY7OQ5inZzykzhXWce5EEdTEywGQ950bPzSvfDrJWG9vZjjdbhe8TK-vxN4EkRaClA8IeDS7eyO9H9OHmogw=w1249-h517-no" alt="Ring Heartbeating"></p>
<p>Pros:</p>
<ul>
<li>Avoid a hot spot, better than the centralized approach;<br>Cons:</li>
<li>Might still have some failures undetected when you have multiple failures, e.g., both pi’s neighbors fail</li>
<li>Repairing the ring is also another overhead.</li>
</ul>
<h4 id="All-to-All-Heartbeating"><a href="#All-to-All-Heartbeating" class="headerlink" title="All-to-All Heartbeating"></a>All-to-All Heartbeating</h4><p><img src="https://lh3.googleusercontent.com/KfoZUNOg4xYnr1fwebulo6X80KmEf1aobujAP_VP0pJBTWbFHuMyuXpNjsVun9-reIbeJNPSNfFCW5AuqKR7EpI-tvdt7lFmRLWWlFqBlHVKKwhtGd2Mno-yMpQ6wEUhFNb9wWgvihMS1g4Vv6uTx03q59wZYe0vyUv2s6gSG95mjBIl6YB-FfPGbuMDFmhOHPLnjMUSQvYzizHYzeZPrdIpkGNP9SDWpqBx8C409qwEnxj3oBUJQqmMp56B83qd11kNl5KVLkw1u4lCl6r_Z6cCGjs1LjRLYG6Qh3f-x7y6t-9NFiX4AhduPtSN2aBOsSw_YKJXxx5OdAxpJusYMYmkvzJK37UmTSgxzBCJ83JX5LQuewhmKZXFeFNwBZM5wf_q-tEU7ah9wKVgOsxVSRF2izskO3pBn5SepggfwSefboVu3uYi4wCdGUW8Fu38EMpiSSrdb6RJgG8zcFvyBqx2WHDD1zqihDHfMPL4_g7PAFVwVTZ5bCZhRTEXxGuTpsZ5dhlQqdqzueqBvh58aj-iXUtQUamWUnbZVQNB6TsdW4HWSiA2WIYLcoINCI34FNSdYdKx7kWYim4aObiChUr3nFWpaYkczpJd3G-3jPqNKbq6UwLopjnVT3lWf0GDXseHZljyp6ptEkI2U7cNqiwm_d-8IaTbxILV7_yBlQ=w1249-h578-no" alt="All-to-All Heartbeating"><br>Each process pi sends out heartbeat to all the other processes in the system.<br>Pros:</p>
<ul>
<li>Equal load per member, well distributed across all. (The load looks high, but tactually be not so bad)</li>
<li>The protocol is complete, if pi fails, as long as there is at least one other non-faulty process in the group it will detect pi as having failed.</li>
</ul>
<h3 id="Gossip-Style-Membership"><a href="#Gossip-Style-Membership" class="headerlink" title="Gossip-Style Membership"></a>Gossip-Style Membership</h3><p><img src="https://lh3.googleusercontent.com/-I-ViG1FQQVya5UK1Wm8Dd5M6zAF1-OZb1tBpY-0zOc5XcpHpwri_11qQ6xWXz8DS02haSQEobVSjXxpNY9tC0KXgdisn4-N_fdJL6HEO9kQK8Q_Ykf_f2UgXUjgz-IUhQ-Z0foqxJo1Xd0YzxIqy5is0VUhttbf76nquNVyRGElmORxu4nZeObEPyE1sJgb5i-88OQss0qOfSPDBxnGDcjOU6sg8GIu_XlFZ9ycw-JnEs96disdl8PKzgDp7pHo93o_yeamQ08ih8GGl1vsIyjUhgBoqO5x90qXBbQEgTbKHmPhbdIB-P3SZyZ59szOG0CaJvh1K5prQz0yxKrfyJvfg2c0a_y89Y7VqKlFJ0W5PlOmA3vj1exObJwQj9-KuHv6M2WhuE0EVbPxw0QK2EqSRoELKmKCiTlPwOk4rXDkkVZqmvhIAp8g6KVNus8HbcfNUZt-0Q28Cjl43AkqipDuh8SqIFEByv6cjqEGzCdFyd9RXPJJPS0Sqns5MpmAjMc-TMGlsT9kvqY09GEBVmIWcLNBruR5u2RRWodDrXhIYFa1lN4WbJpp9dGMRpAzCvu1OuUyNsXHYzctJ2TM5hFDzIW4ubvt4FKd4CwkrbCu9-1g0oL14WOvY261qtymXBY9dr5xcvw6GXGgK0Dg9CViGR-3MAgWdInZrsoTfQ=w1105-h466-no" alt="Gossip-style Heartbeating 1"></p>
<p><img src="https://lh3.googleusercontent.com/3epbIenhHzsTU_UBrTeQuTDTckh3Aq_N8dQTQxGFlq08K5n0a6cH4MhfeI0DEo5Vu9BgcdafEUYNwmP5gW6S-vFuL3A6In7yJFPgZWpfNmwkVtbi8OShgp7gFZ8PsUY3zjqkccm_fzMP6h7AP96La4mTbaTxx54sHSQgD1M2aKtxKt3m0SU89aZFake6jNGe0wdMhEBjxqH1ZF5rxqhG4-f6Jq66CmuMuQLxk3ufUWSNohctvooXfUd1JXfwk6bXb49xaqX91sX-QH36oeZQMTE14VttxWihbfQAbW_YCuikSFR0fsckdCcmtTwF_K4q9kEFKj5iaRuqWxV6RVerQJKK2gvt7iQ6XquB7aE6JowhlaIBvt2zatzQeQKPKsUog93qx6BZ3sLLBqj6gqH6TxqvTok2tZh0ff7PM72FOuIBqR61NNuCj4K0RUriWHz43SHe5JMQznebAU3tMec2SpnmQgNyMnY3Y5GWcBO0WnWkpXO62g9ajnyzlcxuCQ8z5ATOdE0GO7yT23vODTbmny2QH0pBrXzhHUx4gcOghjF0elqCMN9-N_-peTVc3pyUXzv-Av1ZNN8He2S8iH5natrZw8oh_7xrU1LeU7eJGJmOHzZv3LuVwJNyRtxQQybBhRdSC_T3y3SE0xAgWnb6g4L5fY8hdpQ5bh4n1gFHkw=w1105-h463-no" alt="Gossip-style Heartbeating 2"></p>
<p>Gossip-style Failure Detection</p>
<ul>
<li>If the heartbeat has not increased for more than T(fail) seconds, the member is considered failed.</li>
<li>And after T(cleanup) seconds, it will delete the member from the list.</li>
<li>Why two different timeouts?<ul>
<li>If you delete the member right away where an entry might never go away.</li>
<li>For instance, if process 2 has an entry just failed, and deletes it. Then process 1 may have the same entry not failed yet, and sends it to process 2, the process 2 may consider it as a new entry and add it back with the new local time. With the ping pong behavior of gossip, this entry may never go away from the system.</li>
</ul>
</li>
</ul>
<h3 id="Which-is-the-best-failure-detector"><a href="#Which-is-the-best-failure-detector" class="headerlink" title="Which is the best failure detector?"></a>Which is the best failure detector?</h3><p>Optimal is derived from the main properties:</p>
<ul>
<li>Completeness: Guarantee always</li>
<li>Accuracy: Probability PM(T)</li>
<li>Speed: T time units<ul>
<li>Time to first detection of a failure</li>
</ul>
</li>
<li>Scale:<ul>
<li>Equal Load on each member</li>
<li>Network Message Load</li>
</ul>
</li>
</ul>
<h4 id="All-to-all-Heartbeating-Load-Analysis"><a href="#All-to-all-Heartbeating-Load-Analysis" class="headerlink" title="All-to-all Heartbeating Load Analysis"></a>All-to-all Heartbeating Load Analysis</h4><p><img src="https://lh3.googleusercontent.com/O-l6oxNOi0qQM_vMdfRIIBc43dX-8h1yR8J4lijgl256f3jxLasA-2343VzE8kb9FX9FhVaAC8GGL3qQ3HByo15_8n27mXzYH7ciKhsloVS9o3oKld5aOHJA3E6vHe9-jD4o7a8inaKzbBIWGkF1iza-YZC-MluM1Mg1RUhd85ML2P1m0JOFooSl4qd9U9brBrqQmSrhXYhDbw3otRUbMphY7MnCdVJQh_qdJPNu43oAZQuTRW1zkhROlufqPa4ZpFZsBcJDGfMCvv7uKHDNh8YRXdbGYgAZirUGKdRGshrdR_gvjx6PsEn_KaxhdnPXzOIuVgyA0_cW5BGJW-hMky5-wLLwKZsZvnKXtmmEX27fsCEvmxLrDkAFSFEsZPIaJ-oeeZD3tLuYZoNfIRb0q8irc8d_waqEk6YYVvtB-YSCAIoqgsxTeQ6c873PXU3Yp2dgA6mO2a_vqOEB-ZSPu0Mct78Y00Mn-UBs5Q0VaopDmu1Vwqyy6ZZmyFICTVQGMzhcoenrNNM-uyOLFv2wfSHIprWN8GL6N5SFW8RhBTDWcmkrrFOGPosPKGxcdSmdsF1mdkJalqPVhBsSJD7vy1g0hp-IkvLG6kXEJCxO12BsbbfkZ4KXLgCVtppmvA7GVwOTeNBb2Z0DX-D-I-lqaKP_fwyvgl78943v2DcFUQ=w828-h347-no" alt="All—to-All Heartbeating Load Analysis"></p>
<h4 id="Gossip-Heartbeating-Load-Analysis"><a href="#Gossip-Heartbeating-Load-Analysis" class="headerlink" title="Gossip Heartbeating Load Analysis"></a>Gossip Heartbeating Load Analysis</h4><p><img src="https://lh3.googleusercontent.com/7voCt5CxStRmleomYLpCH7Droe4bi-imoFLTXDzsyd528Q0LubHAZF_kciHF6PPCIHo4Tu66G8pT7VGNVqJhvgwtPYfNy5Jd5JfZn9InszpkOWnQLt7Tiwc7ntm3-8C8L58SV47L4zFLfyvNZeiNGU_1ZteWTJbt9IwfTtwsdnuc3qfhuAjqhmkdJXqEV7Xh7pqA6BRofFkTya7bgVoTzdnOwOGR5wRXkZ7EAeuPL-FrHT0ZkxY2pM2KekZuOkPu7JspDDm9LiFCUMwoQ5GoQbCRrhUvcShxlqKkQm4pw2ATwBJYvfGLJPnPoCvX8pMKqWimdQpsDrHtL-PHmSb5IS4FLN82nQYAhQ0799_7q-KbJKrW2U1JI7NIMtQR1JJrt9x7NLwQcSFosioznCj_niI1IAiMNTR35FM2VBj9w2pdHa_oGMA4ajpLVUulluy5RNDoFTQ4Hh-UzXFyRjVX_jK1Z8jWkHVYDtQ38x8jwDsft9xO3x1QCVCjw-Frkl6KflBIYYrHDL31XyDrCcPMgnlei3Y3UEtQdZlsOi15b80MsQ4U5M0li7PLp9kwvkQlwCJ3zVbObGXVUsfhmeK988xd-l9HHeSiU3fuDQ07UoNpBBZy56YQbFIOWOVy9att60UguJ2kW7_CpKQvxvSsvYp9mzuO0fH01faTm7L6tA=w828-h347-no" alt="Gossip Heartibeating Load Analysis"></p>
<p><strong>Conclusion</strong>: Gossip-based heartbeating protocol has a higher load than the all-to-all heartbeating, it’s because gossip is trying to get a slightly better accuracy by using more messages.</p>
<h4 id="What’s-the-best-optimal-we-can-do"><a href="#What’s-the-best-optimal-we-can-do" class="headerlink" title="What’s the best/optimal we can do?"></a>What’s the best/optimal we can do?</h4><p><strong>Worst Case Load</strong><br><img src="https://lh3.googleusercontent.com/rhAw6FGaWhUHR1bYYNA1A2IBkbZFCZdLAQb8cvrl9JtVZLyOUkrcS3JgiKuZOkSiWqw4l9T-bOc9f7I39xQZH1V5QzOwYjbTnt1m74yJeheqtZGbpELByIqEtlVgSroRnrsgtqC8pPOP2yHnKn32u8NN6vCHqK-HCeQqCogyWurv6li4K7KI9n_C-ICKpvjJMa3nVBi6K1vKnNsTj8jeSmT6FfZj2MBWSW76nIw9nhp97pgyDC8THe6wngbvn_yjhhOZb7d3FmKtJ2t7apG7Ib7j1bMFoyTKFJcBBp2sqKOIXEZqK_kc69d6Hpu_byZs9vhHT4wgL-VqEMhMn_UtEKKOtChJ580Sjaos8Ziv3lwIGjplS-vm-dchTOMHSRw_kSxMxyWvcSxckbc_WTepyN7HU-23xPeX3mU3MAtECNHeOkH3Ox31aCP87VFcpj77SFqL8ymx6SX-RvAZl_yOKKFpzcv_IzD2gziItCzWCP9cV_nH_WjlwoQQXS0U3wuhzluK50xqwzsOpvQy9VjZXpsJOtvm8qk9r65EYln3CkTl-QsV1wgnlgWnKtsSG2JGFL5I6NKIj7ODQnpCYF2jl2BWOd5z7rLVstZkryKYswtE_bMcI5ad_2OO9-hB1lFM5BjKG2GrGUZq5XjaeCIGEe3qCDap5j5Y604lzuJR-w=w828-h355-no" alt="Worst Case Load"></p>
<p><strong>Optimal Case Load</strong><br><img src="https://lh3.googleusercontent.com/U4Onb3oayMfPRSjA2Os49lp9gQkW9b45PmC9jzUzwr6upIJHvRCj1ySLEd7XGQOHU5Xa-vmJizsVBq0YnyDhTUc1zu6jMryWXEFkM6On7HAMJO_eODifxPaJadgiv7yghk56I9ip50PEau5IMJiBSkpdqOKTUFpX_IsBQ7A2IzvUpJKZOoiGMLOHVTr3ceMvgWwAiF9GD3xxC1vTnRp_vvZoXvCUgfd-69DY2Rd_a6hqJr5CkBm8PD78StVpJhf9yBxuR4fVgdSwAJZNvGoJyvDJNgvYB3GjtCXvnZeSd8Pji_vNJE7cSr5lCm6UdQsQzdThV3EX1oBN7EfKXZjIo6Y7AhrwbCmFUtiFkVfuqEj12vXhYRNDJL5Va3e3O-scxfC65OgOTPYQ5qL7RCtzfb0xDvh-Xvlw7eiLRC0AtjpSfNO7F_grtZbAKMljteDsz28QFoExJgCfkh8Otfuqa2VJkvPGDAqEGaKOduFdOx95oKs7k6qQnb7mPp1NbAFVCpyiopCMOr9wRhu2wuRBGQcJptgrql__fb2be1PWnYe12sOKTm-FVQCvHCsLx3w6cZ746uztJWQuyq4-JreVcBpoIV8QxjJHcf3f2mAJCmIStIPZf3Q8N8eUezw9jDdNC9DAlcTXgutxOyGc-H8APsSgQ9dXwWRmYqYh8cxAbQ=w828-h543-no" alt="Optimal Case Load"></p>
<h3 id="Another-Probabilistic-Failure-Detector"><a href="#Another-Probabilistic-Failure-Detector" class="headerlink" title="Another Probabilistic Failure Detector"></a>Another Probabilistic Failure Detector</h3><h4 id="SWIM-Failure-Detector-Protocol"><a href="#SWIM-Failure-Detector-Protocol" class="headerlink" title="SWIM Failure Detector Protocol"></a>SWIM Failure Detector Protocol</h4><p><img src="https://lh3.googleusercontent.com/39oV7t3ZOD7xAumWYGetDu7SLu93znYs7Bzk4MLKXjoFhMFbIh1G8SnLnaRR0v9YdzKiYcXLNCCFtvzvMOKiVb7SS5uud4s5daHSErLCvSvJz354MK5JGG_mlyeMsTdt4ShVIdTzhqm5TUFnOGiL7RItVMiORZ4sZsq-wIJ4upHT7awNxUXhXqZfhdYwksYakTok9rRl0K7qZY1wna2PbnxBI0_JgIHFG8LJeR7070gkLYrX71ueswXl1g_H7OQkfUq7AJrOdj1hJbh8jt8e3phNwUlGCEsEjJi9SC3pZRedcS8lWEUWCbZo8gHqXXALBY9hXUD7tOsPjYR6WO8FW6NcyZOIxPczBb4Y__lkuPujiCxHymoGCTmeIXj2YqsyQf_I6BtXQu-2LHVzHg8n-deCdQ2bmJUJHIzTclYYrPBboJ1WrkqvB6gIJS8-L_WvRPdw9LwUmKITnnjs71BNNM8Srlb6xGUhg97FqxJjbmQsVGFy09vOlokCZvPXbTyRVvHHZTWD_mEyCq1pyM2w8TB7ei0p8tZp13CRfE9360uiTj6wPT_wp2HONXV9Txlzs3aryGlJB7YkeXSyHBKMgdZ-enOH6ZC00OJ06fsEheWnAW1syuWNUyoLRxq3iMV0VLA6Pd4rvcC9R9yIXi9_yWKjTvV2afzLLZALfOGKCw=w761-h318-no" alt="SWIM Failure Detector Protocol"></p>
<h4 id="SWIM-Versus-Heartbeating"><a href="#SWIM-Versus-Heartbeating" class="headerlink" title="SWIM Versus Heartbeating"></a>SWIM Versus Heartbeating</h4><p><img src="https://lh3.googleusercontent.com/Bepw0l52MMlCi1Zw5dwuFeyPjVwI7jDTeFYUlvgAw8UJBF6BDhx0y7CUCrf8OvJOvQAaF4vvGYyochL-KF8jCtkPljv9YAQ6hBWUyW4Zaa_7dN2sQR1k9K-j59e1G-7-zlTqKHN1dOKnEOwmks_mrqdwmy4Xvf0HW3VZ9SzdhhjdnAdlgD0Nwt9OSaf6PjprzQl4iDL4L9BZkulWX66W2YwMtCmBYlket9zF0kHhnzKFtchDWzF37afKQMmPeKvKJtzBlr47VnOkalTKUO3n6YxkUumaVkrVhzFssFmFub6Sd8FukZ9_g8DpwL7Vfh6rUgz08Ex3eY1TqALU1YmYatQoFKEzCM22cIa6CCHfeLLN5db_-SSspLWJsBcd7au_OR-dTlM0eJxsoDEhYX9-WDWBgiZjclIpyefZXn0aE7PBOMMnHPGSinQfRMyrgUpcTmIG1A27DJPhNuUmS7cxFO2l0q_rpv9lNwY9lsR9aw9kKBAJJaCMwigONm5ID5FN2f15N9sSp7xsWpnqU7j0EJoxrtzBCWP9BDS24-e-Lqo9dr-11nYM04jeg-SV2UpPX3sLvkox-7ZgKMwNLXYhGEUMkVvrhidMz1B2zQjHrNnLePxtqdIlWehR01VaMKnnsrTfJoeoPjXl2PHj8V7JwuWyGoQNwJA0CkC7IVj54Q=w891-h377-no" alt="SWIM vs Heartbeating"></p>
<h4 id="SWIM-Failure-Detector"><a href="#SWIM-Failure-Detector" class="headerlink" title="SWIM Failure Detector"></a>SWIM Failure Detector</h4><p><img src="https://lh3.googleusercontent.com/N4gLqzn3s3qV1FwRC4vV3jpR7vtGzwrHPIVhbyRMBER_yaC2To8Dgfzs9TwcR8lqwuifNgrnJDIpD5O7beNNIKIwzrlI3x11L2V2tw8pwcmJy_fB2BgmRy-igoDQ4OjHmJIaXwq_AQZ_TUobkNuJUSrQ7nDmV-tyFvi9UtN9coN8MNLns0flOXOa9wix_Rx3BDt7mLRx8mB50rkBMCt6jBcdDCEIF0fr_fsM8JyG0an509gEHlHlOI5LOTGlT2DDuKbd3FLJajuGDco8B0ZDPHTp5uSRjCMln-n-e9q4FT86n_5J9_kBTvhW6CjeEiEhmKLWR_oxDXauMrGJpWltkTZRJ50ov5GRKyGP6Ok_yC9U30OizjaNAZdsp7qYBM9xu6-iAnITHkMtQlEkKlbbcGS9-v6x86NQdwdoirWBQsKtaY70Jr5qZNxKWoKbAB0bRkGkDC1vePMoKl9kWcWmKiBvc8sBXVC16eyDj_6ezFg2qgw32VG2ekP9M4teiK_fojha_UfedfXGkevtJynAEoidYy6vmucK4DTzHI5chvz4cc6YA_jT23mJjPbWX5DqEfkFLXfZ6JfqNu8ers2MuwPqEHv7vwesbJFQwA7U8SpNSsNt94oCKMKvta6sQ-I5gNNyjn1TdURS-MZaBiXJvUOOrJSLiQ4Ll1NjfIwoNA=w891-h594-no" alt="SWIM Failure Detector"></p>
<p><strong>Accuracy, Load</strong></p>
<ul>
<li>PM(T) is exponential in -K. Also depends on pml (and pf)</li>
<li>See paper</li>
</ul>
<p>L/L* &lt; 28, E[L]/L* for up to 15% loss rates</p>
<p><strong>Detection Time</strong></p>
<ul>
<li>Prob. of being pinged in T’ = 1 - (1 - 1/N)^(N - 1) = 1 - e^(-1)</li>
<li>E[T] = T’ e / (e - 1)</li>
<li>Completeness: Any alive member detects failure<ul>
<li>Eventually, every other non-faulty process that has this failed process in this list, will pick it as a pinged target.</li>
<li>By using a trick, within worst case O(N) protocol periods</li>
</ul>
</li>
</ul>
<p><strong>Time-Bounded Completeness</strong></p>
<ul>
<li>Key: select each membership element once as a ping target in a traversal<ul>
<li>Round-robin pinging</li>
<li>Random permutation of list after each traversal</li>
</ul>
</li>
<li>Each failure is detected in worst case 2N-1 (local) protocol periods</li>
<li>Preserves FD properties</li>
</ul>
<h3 id="Dissemination-and-suspicion"><a href="#Dissemination-and-suspicion" class="headerlink" title="Dissemination and suspicion"></a>Dissemination and suspicion</h3><p><img src="https://lh3.googleusercontent.com/dogZe4DEAHoMWXOaQ7r7iOAh3BtnyZCd4VFI2JBZVDMerUNatygWo1ua7BIWOQrL0GrzCMDKGbNDswBY6-pyT2FcwwAXHSnJ-Ccsq-ZsiSBDF9OykA0EXU1QA5yiwOHX1abCfGtf5T4-MNgkBjPuukd_5A6mo2cO23lFvTygdWw5vVGoz9SRXNqiMzwi26uYzgeSMBROxggLPkcvDdrZSpjkFm0XeWvKDZgvLd3vRtwf5p30UM-_PUfwo_P0UlS1pNF3THzqWiIIJYyOg_4eo6-T76yrCMYUz75Vn6nD1yo04MNTEkX5nGD1pIjRyrp8rSePS5WxrEuGBLaY9LNHaMNES69VvkjNRYSx8jaT_3SljH_KzSJ6XFYRS6beP6sKz_QSyq0QlfZ7KoWuWj-46_2WKYROTTgbNDf79jZKfGNXzIKCUcB6G8WcN9dQqazdsE8F1pH8TBd0D9GMoOAY-WfnmtJB6cOiwCCLUQs8IYLDrWMnFj4AubJJkntUZXYCoYb8bquQBFXiggphKzAv0H8CSbCVgXl8tlo6T3befhuIhvrQkyui0VE64OM4cCBfx48NKjymRrrwWcqWo-AhPkAJwpBwaj5rWE7nxGShkUMfR_yoTpn5Tkq-swPOc3A5bg6de4m-ceKwx0jymf7yiWxeTOYHcxEH3k1UPN9a3Q=w868-h518-no" alt="Dissemination"></p>
<h4 id="Dissemination-Options"><a href="#Dissemination-Options" class="headerlink" title="Dissemination Options"></a>Dissemination Options</h4><ul>
<li><p>Multicast (Hardware / IP)</p>
<ul>
<li>Unreliable</li>
<li>Multiple simultaneous multicasts</li>
</ul>
</li>
<li><p>Point-to-point (TCP / UDP)</p>
<ul>
<li>Expensive</li>
</ul>
</li>
<li><p>Zero extra messages: Piggyback on Failure Detector messages</p>
<ul>
<li>Infection-style Dissemination</li>
</ul>
</li>
</ul>
<p><strong>SWIM Failure Detector Protocol</strong></p>
<h4 id="Infection-Style-Dissemination"><a href="#Infection-Style-Dissemination" class="headerlink" title="Infection-Style Dissemination"></a>Infection-Style Dissemination</h4><ul>
<li>Epidemic style dissemination<ul>
<li>After λlog(N) protocol periods, N^(-(2λ - 2)) processes would not have heard about an update</li>
</ul>
</li>
<li>Maintain a buffer of recently joined/evicted processes<ul>
<li>Piggyback from this buffer</li>
<li>Prefer recent updates</li>
</ul>
</li>
<li>Buffer elements are garbage collected after a while<ul>
<li>After λlog(N) protocol periods, this defines weak consistency</li>
</ul>
</li>
</ul>
<h4 id="Suspicion-Mechanism"><a href="#Suspicion-Mechanism" class="headerlink" title="Suspicion Mechanism"></a>Suspicion Mechanism</h4><ul>
<li><p>False detections, due to:</p>
<ul>
<li>Perturbed processes</li>
<li>Packet losses, e.g., from congestion</li>
</ul>
</li>
<li><p>Indirect pinging may not solve the problem</p>
<ul>
<li>e.g., correlated message losses near pinged host</li>
</ul>
</li>
<li><p>Key: <strong>suspect</strong> a process before <strong>declaring</strong> it as failed in the group</p>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/m_pzGtPdmyCiYLM6B_Xj_hxgCgZ2MxBHsJcOW5WHuFc5xNCplSRZUvxbPfjS2Wcw5t_mvOhyxsvzTUK4xDR7SPuPYozaQ8JJnR65UUc8LClsIyFD1fHElwaOVJO_TPkdKpbibhM4C0ACwwXVtTzeDvTYl4RVacnwAZLzmzyRQtLsalPpbvMwPRze5ki_v1o1wQ5n5YcG7MguXFzYO_ylL225iCHmVw-9I48ewd1e7GGAr7ucoS_S04Vz3tz7eyaF8lyqmcurqpU7gj4edPutsbknIteyu0eqLttWQBu2m_5B4zMrCTqXQ_H2DADuIrxj92r5Ho01WMDtLjP150LtFCL8qZ5iJ3TGUl01BYSANnAsjqaH1XNgSqIsStg0rQLPq_TFwxHqQqCq3hLF1mnqPBPZFwE5v0jwd0SeIWHrM-ImlOdvMDhaNuJcMGn94aFp-v-vvv5fZTu0qniZZ0rvJ8YGvNlRoE5JZAJlghdWbZxBnx0bWnUq3t2awAqFnF5EI-pvEZTi9Tk-osRFafzVpTHYY7Ar5EvIMaceVjjfpzj0_nfNmDLPwL9TepVExfDlpIkmCYySfsXni7yS3DTumvKBQFO6bbNqV4iQHiW0tWs4e74o7DDw1sjkU-GnM6QLA1FpYRECvSWH0RF_M78C9235-dUWBLYtlF6K5oziiA=w868-h362-no" alt="Suspicion Mechasnism"></p>
<ul>
<li>Distinguish multiple suspicions of a process<ul>
<li>Pre-process incarnation number</li>
<li>Inc # for pi can be incremented only by pi<ul>
<li>Typically Pi does this when it receives a suspect Pi message.</li>
</ul>
</li>
<li>Somewhat similar to DSDV (a routing protocol that is used in ad hoc networks)</li>
</ul>
</li>
<li>Higher inc# notifications over-ride lower inc#’s</li>
<li>Within an inc#: (Suspect inc #) &gt; (Alive, int #)</li>
<li>(Failed, inc #) overrides everything else</li>
</ul>
<h4 id="Wrap-Up"><a href="#Wrap-Up" class="headerlink" title="Wrap Up"></a>Wrap Up</h4><ul>
<li>Failures the norm, not the exception in datacenter</li>
<li>Every distributed system uses a failure detector</li>
<li>Many distributed systems use a member ship service</li>
<li>Ring failure detection underlies<ul>
<li>IBM SP2 and many other similar clusters/machines</li>
</ul>
</li>
<li>Gossip-style failure detection underlies<ul>
<li>Amazon EC2/S2 (rumored!)</li>
</ul>
</li>
</ul>
<h2 id="Grids"><a href="#Grids" class="headerlink" title="Grids"></a>Grids</h2><h3 id="Grid-Applications"><a href="#Grid-Applications" class="headerlink" title="Grid Applications"></a>Grid Applications</h3><h4 id="Example-Rapid-Atmospheric-Modeling-System-ColoState-U"><a href="#Example-Rapid-Atmospheric-Modeling-System-ColoState-U" class="headerlink" title="Example: Rapid Atmospheric Modeling System, ColoState U"></a>Example: Rapid Atmospheric Modeling System, ColoState U</h4><ul>
<li>Hurricane Georges, 17 days in Sept 1998<ul>
<li>“RAMS modeled the mesoscale convective complex that dropped so much rain, in good agreement with recorded data”</li>
<li>Used 5 km spacing instead of the usual 10 km</li>
<li>Ran on 256+ processors</li>
</ul>
</li>
<li>Computation-intensive computing (or HPC = High Performance Computing)</li>
<li><code>Can one run such a program without access to a supercomputer?</code></li>
</ul>
<h4 id="Distributed-Computing-Resources"><a href="#Distributed-Computing-Resources" class="headerlink" title="Distributed Computing Resources"></a>Distributed Computing Resources</h4><p><img src="https://lh3.googleusercontent.com/wJkApIlpQHJxeKok6fK9Xl81M0QegAwkNUJ2sS1bw6Xxhh61ZoJbhOFqz273BvHSWR8SrA2wsa1w8uN8x3gPLbwzgEBto0ZKeWmz7u5vTAHxEqB6P3XTxGRoS5h5qUPDQDjXSW2eUsyaqUi5zyBmKYnwtwcmCPH4Jzw_iIzFh2HIfwwECkGuf5hHVcJmuCHVq01leDK4gyzBY-czPGgB6KrbQegDCUrrXZe1kFejRsD5nmHQxph54oOMUVwUarKHJwJ6IaaCskLtUJm2XS-G-RgMTG58Ujy2c9s6q3uBoAlfuOuhff-4IsDIAlFiiivEeWRXW9jwRW5XVyv_5_jqZvoUsq1p7L9wVqsm1Tt9fiEqNvduRZAjdXiD30omU30OR-ocO3eXVHs17n1SnfUcRb9nHJ2SgwcWlNqSCDhftzCMzZaUEflkm0PhNLwMjpLsvZs6RnEavR6l6A4Qq3CcS-VRtXyI7yEmvtc03ZzHg_aHVPAW3Ngk7j6f2kOhp97Tsicu5J7X-UwFRvBIiZwQDrUbbvg8OkBaoYSCPQCOFcc_4S2VS_VwDLrz-OEYpCpDZuLW7tX9d408E49zkE7bxFmII6BX_R2dhc5vedvdBs736Wgq99x7HHwQEk0kFLf47OzL1oN4H69dxl9Fyxq0fDHMw6g2Z0ZBt2v0Y45hRg=w868-h507-no" alt="Distributed Computing Resources"></p>
<p>For example, at certain times of the day, the work stations/clusters at Madison, MIT and NCSA are free and available for running your application.</p>
<h4 id="An-Application-Coded-by-a-Physicist-Biologist-Meteorologist"><a href="#An-Application-Coded-by-a-Physicist-Biologist-Meteorologist" class="headerlink" title="An Application Coded by a Physicist/Biologist/Meteorologist"></a>An Application Coded by a Physicist/Biologist/Meteorologist</h4><p><img src="https://lh3.googleusercontent.com/dh74d-bz_NYQwpp2T1GOQ1VpLk6wIkUVvF79tWzuXVt5hdOkaX3G2gxCSFlweNepdCV4cyrQanqdgYrsDynQvgrG7uhRQv3Ih6fbxgIcjwTIxY5EgEfeAC8nCMANtmoffV3nbamqnvjwoTWuhjDaTNiQV6uWTJUw6qeZCCnLaFPNEnaucwDJkuWV_fSx5kD4Fxq2OXkXk1-hlE8QbUY0hL_xQbkmzdcAOtgBkW0lv6F2F7EZ-B8ONVkOxOgeSkLlvQC-xaRIKZJzSwOF0kJS-cyEmuMlaRGR9WzZ5rvb-lhw-PsWH-m6DhwJlI2kukokLW8G_55qlatD5fcGck1mK1IcDsrbxkcqozweZurI3gHX6HKByQpJP5BmeU60kN5SlzEq-jMLAplgHI6M0KFj4KIXUJr7XcydZ1a8ur9wAYRbX2rjm7U03GNVUHmiU-yXlcEIzTnS5w0T8uUyQ6sQqjKvtj3ZtwSJddkLnRZvasIBQO4FDf1TFeq3DoDVjdk3jV97m1hgcC0W6goMUwMJ1-LGoKCedV6sFdA89pW1AE9ToQyNHNaCleYt100hWbvlBwkXCuvRc-D6zP5hQ8OtlTTcqQIkMdaf2kpsIvi_YMgf4Lm-KAnLppV5wI8bLwgj_KojAm9nJ8nqlRBJl1HlQhJTT5geMtC1aKR1uXHwIQ=w868-h511-no" alt="An Application Coded by a Physicist/Biologist/Meteorologist 1"></p>
<p><img src="https://lh3.googleusercontent.com/hd1V_S85bk2M_PTHJ8TZH3WKHDC33DjlJs6FiqqCyhfZne_iDB1UnKjRm4U9PQfOXy-P_KlVNN4uYU9QQaIOkCH0CMh_AstBLXm8m3Ku1XFy6EgyKip1lQ61oIeXzfGxoiSR4KlcEu7saiPpV0L7mbVp2rot3piDunQ4XVHLWHbEmNUxt_nMIz_ZL1mwhVUu4dTcd7nCsuxCbqw_lhznsPByxwSdb5b3n60L3D9FNWWrXPaClzk5hvdBHRM2nN1GurPEFvFCqdnpgaMC1jmS7AOmDBA76X_IIqA46qQOeAVCRZf3x-FB4WwP5Dw7c0JOa3ZhKxddTmHscI3Fj2VOSRbazxAa0G0bnG3HIWVT30Edd3F6cjYV7uExD8JL5IeD3zk7Soyf6-bXqh-GeYoGnYyDo5HPfZAgQ8EIf1DyKxppmbT25wQlUeBup1mzhIsWXoBlsrnL7Omrc04rBDM6pZtDOIV46axBTEQQ7LSwH8I9Dtd0NRafYVT2vevLgJ1fDOIbLBqr-qI1QNzYyilsxLTc_7PlDHGCeoMTuwIJAsolx2_nd1ufcfVYE9UUo1eFzkjM0xn9cSDJqQR2Z6X8ofTJex7uZ33Sf8KIfR324aUMpj4RDSJcWukPrexwh44FUXqCpD1z6XHtitzn5MC_kSA-9TWc0sqTYu_K7EXKJg=w868-h525-no" alt="An Application Coded by a Physicist/Biologist/Meteorologist 2"></p>
<p>So how do we schedule the jobs?</p>
<h3 id="Grid-Infrastructure"><a href="#Grid-Infrastructure" class="headerlink" title="Grid Infrastructure"></a>Grid Infrastructure</h3><h4 id="Scheduling-Problem-2-level-Scheduling-Infrastructure"><a href="#Scheduling-Problem-2-level-Scheduling-Infrastructure" class="headerlink" title="Scheduling Problem: 2-level Scheduling Infrastructure"></a>Scheduling Problem: 2-level Scheduling Infrastructure</h4><p><img src="https://lh3.googleusercontent.com/hd1V_S85bk2M_PTHJ8TZH3WKHDC33DjlJs6FiqqCyhfZne_iDB1UnKjRm4U9PQfOXy-P_KlVNN4uYU9QQaIOkCH0CMh_AstBLXm8m3Ku1XFy6EgyKip1lQ61oIeXzfGxoiSR4KlcEu7saiPpV0L7mbVp2rot3piDunQ4XVHLWHbEmNUxt_nMIz_ZL1mwhVUu4dTcd7nCsuxCbqw_lhznsPByxwSdb5b3n60L3D9FNWWrXPaClzk5hvdBHRM2nN1GurPEFvFCqdnpgaMC1jmS7AOmDBA76X_IIqA46qQOeAVCRZf3x-FB4WwP5Dw7c0JOa3ZhKxddTmHscI3Fj2VOSRbazxAa0G0bnG3HIWVT30Edd3F6cjYV7uExD8JL5IeD3zk7Soyf6-bXqh-GeYoGnYyDo5HPfZAgQ8EIf1DyKxppmbT25wQlUeBup1mzhIsWXoBlsrnL7Omrc04rBDM6pZtDOIV46axBTEQQ7LSwH8I9Dtd0NRafYVT2vevLgJ1fDOIbLBqr-qI1QNzYyilsxLTc_7PlDHGCeoMTuwIJAsolx2_nd1ufcfVYE9UUo1eFzkjM0xn9cSDJqQR2Z6X8ofTJex7uZ33Sf8KIfR324aUMpj4RDSJcWukPrexwh44FUXqCpD1z6XHtitzn5MC_kSA-9TWc0sqTYu_K7EXKJg=w868-h525-no" alt="2-level Scheduling Infrastructure"></p>
<h4 id="Intra-Site-Protocol"><a href="#Intra-Site-Protocol" class="headerlink" title="Intra-Site Protocol"></a>Intra-Site Protocol</h4><p><img src="https://lh3.googleusercontent.com/Xjjdwmlt_bwtGLd42uGRk_3XMgUwnNjQfqaac0MdE564asUIsqzMuncrnCF_teqeI1xwbqEhMyssSPIBbmknnb6BSIwrse2B04XEqlCOy35KVn9DUvub_k0zoH0slsvXsHDjutXe0w6Q3ar8HZmAV6EsWthtHTiP61O8A9YEhI3sWN3Jo-12zjPEx7M0VTIb3Omu2neAa9D0E2Vt6n1fPaZWXE2aJEtsgeVo_FwyOOUSMvJnPFoc6kVnPZpHzSiUQ4Dl1htmS2shHBv1KxIOvjl9Xr1rxD7nZM9K0bj_aU97nTQsPpw-gt5mnBlmGkgjbuTV08PpMJTUliroONq-Ktmk0fRAKRRLrT4V5yugoQgxJ0kTYtkI3bXLFDf7okslSPv5Zmhe_Y1Gk9PDW1jSPYqwKxylHOR0Xzs_JJQutVDNGawSGL8Jy5zam4963RfzsgB1GoO4r_3wPoGWLsGR9mrpIFz-kDeiZFP7mukB5jPLIyTwN2sc5_A96MvQDhbzFv4MwDzNnmB_eqRXoS65eJZELzgBhOGGFU-vMb34cPRfSmd3YLdyO0QWNKL7p2_i_-kxHygI_TLUWYRZRUYHQ9Fo-hjOphubjlsrzIosBNBAd3w7ALpAiGcjpM8QT-bPfD-isSzzvTMIJDaf-2DWkrp1tqCFun3Qsa1Bf02oPw=w868-h528-no" alt="Intra-Site Protocol"></p>
<p><strong>Condor (Now HTCondor</strong>)</p>
<ul>
<li>High-throughput computing system from U. Wisconsin Madison</li>
<li>Belongs to a class of Cycle-scavenging systems</li>
</ul>
<p><strong>Such systems</strong></p>
<ul>
<li>Run on a lot of workstations</li>
<li>When workstation is free, ask site’s central server (or Globus) for tasks</li>
<li>If user hits a keystroke or mouse click, stop task<ul>
<li>Either kill task or ask server to reschedule task</li>
</ul>
</li>
<li>Can also run on dedicated machines</li>
</ul>
<h4 id="Inter-Site-Protocol"><a href="#Inter-Site-Protocol" class="headerlink" title="Inter-Site Protocol"></a>Inter-Site Protocol</h4><p><img src="https://lh3.googleusercontent.com/LXBWXvc2VBfFCN5J11ybV4Bd1yMt8qnw17t7fOwS4fA7nLFdP9sWws0jyvAtkPVv2bzjPenMnb4I3EpryDB3Q7lZheqIo_Uf7XPyAFQ9dycfpl4T-bqJB8KgLvTwM7rX5Br8fIVz5qnCVAPjGf0BXNKp9mm_Jfj-YS3FYIT9yj9Tv4QqmneuBErMFaa7EArFmeeb3Ie0gqUA8dqC78YgI3o55sLBiMrKGq9Aysj14KpFCkY6BIhadH0pOI8Jf3c8SDxpGwVurLTqM1OLX480QlkHbGe5KrXXt-ZqcS4B82bs0oOe5Iq21YJtgzu3ufmE4jMMgXA9zsMEPsRgn4PiWiwxY9wvrR9dV-fFxb4XrD9OnyJT02hJQcCVHKPnqMmDv5dDRN1e5xoARBksm50B-6wqQ4nUWom95OXAW3Yo8exa6er6bQLW8suPjdmaH1pAVtiNT2jcYtrcT6bB-iEiQTGMEi6EnLRMfDGCCVvnrfhmf_DUtMBNEKvco_qFnykNq1QLVh9RFjxoUYI3KqNelHBAfHPKI79-2QSIskURiE_t3DKJGNSJCcl94QtH2oHbQpYiFrGeqAwLNJW_hMYotj4HNaJQvS0EfVKEbmgjboE-ryEsvDEbV4HFdZBoLTNuaXHpZrHxVsodybEWLxmcG6YoKkn6k_Yq_3w588MCqQ=w868-h527-no" alt="Inter-Site Protocol"></p>
<p><strong>Globus</strong></p>
<ul>
<li>Globus Alliance involves universities, national US research labs, and some companies</li>
<li>Standardized several things, especially software tools</li>
<li>Separately but related: Open Grid Forum</li>
<li>Globus Alliance has developed the Globus Toolkit</li>
</ul>
<h4 id="Security-Issues"><a href="#Security-Issues" class="headerlink" title="Security Issues"></a>Security Issues</h4><ul>
<li><p>Important in Grids because they are federated, i.e., no single entity controls the entire infrastructure</p>
</li>
<li><p><code>Singe sign-on</code>: collective job set should require once-only user authentication</p>
</li>
<li><p><code>Mapping to local security mechanisms</code>: some sites use Kerberos, others using Unix</p>
</li>
<li><p><code>Delegation</code>: credentials to access resources inherited by subcomputations, e.g., job 0 to job1</p>
</li>
<li><p><code>Community authorization</code>: e.g., third-party authentication</p>
</li>
<li><p>These are also important in clouds, but less so because clouds are typically run under a central control</p>
</li>
<li><p>In clouds the focus is on failures, scale, on-demand nature</p>
</li>
</ul>
<h4 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h4><ul>
<li>Grid computing focuses on computation-intensive computing (HPC)</li>
<li>Though often federated, architecture and key concepts have a lot in common with that of clouds</li>
<li>Are Grids/HPC converging towards clouds?<ul>
<li>E.g., Compare OpenStack and Globus</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/13/workout1-rm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/13/workout1-rm/" class="post-title-link" itemprop="url">制定健身计划的必知概念 ---- RM</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2017-03-13 18:35:01 / Modified: 21:49:27" itemprop="dateCreated datePublished" datetime="2017-03-13T18:35:01-07:00">2017-03-13</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/03/13/workout1-rm/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/03/13/workout1-rm/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>系统化地健身训练是今年的年度目标之一，任何目标的实现都离不开一套科学有效的方法。作为健身系列的第一篇，就首先来谈谈RM的概念，以及如何选择和测量RM。</p>
<h2 id="什么是RM？"><a href="#什么是RM？" class="headerlink" title="什么是RM？"></a>什么是RM？</h2><p>RM的全称为Repetition Maximum（最高重复次数），是训练负荷的单位。意思是当你举某个重量的时候，能最多重复的次数，就是你对于这个动作，这个重量的RM。例如你100公斤卧推，只能做一个，那么你的100公斤RM就是1。同理，如果你80公斤下卧推能做10次，那么你的80公斤RM就是10。</p>
<h2 id="如何选择RM？"><a href="#如何选择RM？" class="headerlink" title="如何选择RM？"></a>如何选择RM？</h2><p>肌肉体积的增长主要来自于肌原纤维体积和质量增长，以及胶原蛋白含量的增加。而研究者认为，此现象是源于每一次训练诱导机体适应的积累结果。这里的积累，是特别强调了训练次数和训练组数的重要性。其次，肌肉体积增长的程度，与力量负荷强度相关，力量负荷强度越大，肌肉体积增长程度也越大。但是负荷存在一个阈值，当相对强度达到1RM的80%的时候，肌肉体积增大程度已接近最大，那么，再增加负荷也就没有了意义。</p>
<p>在健身训练中，根据健身目的的不同，对于RM的选择也是有所区别的。</p>
<p>对于增长肌肉来说，多数运动应该选择8-12RM的重量，也就是说8-12次刚好让你精疲力竭的动作，同时，训练组数应该为4-8组，即：<br><code>训练重量（80% max）* 训练次数（8-12个）* 训练动作组数（4-8组）h</code></p>
<p>对于力量增长来说，决定的因素是训练重量，比如说举重选手或力量举选手，他们就常常采用1-5RM的负荷来训练，有时只需完成1-3个动作即可。</p>
<p>对于普通人来说，可以两样都练，但应以第一类为主。</p>
<h2 id="RM的测量"><a href="#RM的测量" class="headerlink" title="RM的测量"></a>RM的测量</h2><p>虽然已经知道RM是什么，但真正测量还是应该遵循下面的几点：</p>
<ul>
<li>测量每个动作相应重量的RM值时，应该充分热身，让身体进入最佳状态；</li>
<li>测量RM时动作一定要标准，不要“借力”或使用身体晃动等不规范动作；</li>
<li>RM值是会变的，训练水平越高，同样RM值的重量越重，大概3个月可以重新测量一次；</li>
<li>做有必要的测量，例如卧推、深蹲、硬拉、推举、腿举等多关节动作都是要测量的动作；</li>
<li>测量极限重量（1RM）要充分热身，并且在有保护的情况下完成。</li>
</ul>
<p>此外，还可以通过以下表格来估算出最大RM。<br><img src="https://lh3.googleusercontent.com/SxfEHyuHxMnVCuBjMfB4oW3x6F7AkBEi8x9_Ie_2NW_iCdQOEyz2dTh5QsUFcMPkNZneSxQL4LMM8VeiFWLn5GCQjYP_L3VCLuBnjji9CulOE4rbw5s66vHQNrcVNvIi2j6PznHZtVlK6jfDchIUVMiBnwKIae317Gz6XlYeUQcyHXWSbb2LwQ-l88owslcvrS6FJxoaSYBE6WHkRSPQBgqwOVg8rub3CzOAEOQcQLg0qjwxeQS1o0VmHOQ-fJ4xsWFq6zA4TyjwX8FnLs18KS9otaEQb8d-mNFBbR2g8BuRc-jKzRVDFpzkNUT6QyoCNUYP4P1-NY7bDUxnyvC7ptNGBYetbKjAY-VoPDJhL6_NkeWR5070wiiMaekgOjp0nRESX_pL0z4kZsbQUGm10nGOX2YmR6_TAJjgMEuT1hV37mn8rmcYXlzN-QZd-g-EJKh04qvMGf9FlaFFFaI0NRDxxmOB8COqAbrh7Mwo3llUHl3BmgLJ9GPCw1PGZFu2QGRYXJ4Vx5MDBnKGxR1lPmm1ejOCPQqh2Fqplggxar7E6ffRB1d41-lo6XSNzt0d8ONesIP1j4vXqeYhqVXuLi2MjzYSsGnlxSw_DAx6hWcWVzEIKCSxwgh4ABVnhuMgJ359aedyr_PAG7GYfTSAJJrNhi7qhl5JYDFl6K3I1A=w265-h457-no" alt="个人最大力量百分比与重复次数之间的关系"><br>如果我做80公斤可以做10个，到第11个就动作变形了，那么根据表格，80公斤就是75%1RM。<br>据此可以算出，100%1RM为106.6公斤（宁舍不入）。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/03/11/2017BlogUpdate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/11/2017BlogUpdate/" class="post-title-link" itemprop="url">博客重大升级啦!</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2017-03-11 15:22:30 / Modified: 21:00:59" itemprop="dateCreated datePublished" datetime="2017-03-11T15:22:30-08:00">2017-03-11</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/03/11/2017BlogUpdate/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/03/11/2017BlogUpdate/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>喜大普奔，博客迎来重大升级啦！</p>
<h2 id="更换Next主题"><a href="#更换Next主题" class="headerlink" title="更换Next主题"></a>更换Next主题</h2><p>其实也还是挺喜欢原来<a href="https://github.com/tufu9441/maupassant-hexo" target="_blank" rel="noopener">maupassant</a>主题的极简风格的，不过同样是主打简约风格的<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">Next</a>主题对于文章内目录的支持上大大好过了maupassant, 同时Next还是hexo主题页中Star最高的，作者的配置说明也非常完善，因此最终决定转投Next。</p>
<p>具体的安装和使用说明<a href="http://theme-next.iissnan.com" target="_blank" rel="noopener">官方文档</a>已经写得很清楚了，在此就不再赘述。</p>
<h2 id="域名更新"><a href="#域名更新" class="headerlink" title="域名更新"></a>域名更新</h2><p>在使用了进一年的github默认域名后，想想还是打算申请一个个人的独立域名。</p>
<h3 id="购买域名"><a href="#购买域名" class="headerlink" title="购买域名"></a>购买域名</h3><p>关于在哪里购买域名便宜，知乎上专门有一篇文章<a href="https://www.zhihu.com/question/19551906" target="_blank" rel="noopener">现在去哪里买 .com 域名最便宜？</a><br>文中提到了一个在Reddit上很火的神器: <a href="https://www.domcomp.com" target="_blank" rel="noopener">Domain Price Comparison</a>，能够以最便宜的价格买到你需要的域名。</p>
<p>不过在这里为了方面我就直接在Google Domains购买了dannyzhang.run。</p>
<h3 id="更新Blog-Repository"><a href="#更新Blog-Repository" class="headerlink" title="更新Blog Repository"></a>更新Blog Repository</h3><p>首先在博客的Repository根目录创建一个新的CNAME文件，编辑并加入你的新域名。<br><img src="https://lh3.googleusercontent.com/NVYuwz9SZ1oGlLRbD7rlrd0rf14IV_nK6PxPDvWWgk4R68TSqZbIeSCRe0JYJfCRICEEiQpQ66ygcXS_dDPKny5cbVvRsgytM9W0ATLorCjatOpVnknxte96NS0JOgFz6c-0eK6ZPH_2VC0w9ilvv56AN2oB9-EGew8aJfclhq0BJ4XmZilkyb-nhrmFXYP6AOqR6KRdpl5nbZztimV20MuZmcpBJGWBa0w9t-BuSUNzBxe6VzeevbSOxikrFdGWJZk676TWWzMTfMX98tBTO8rneuk8TqlJomzeR_BIzQDOndlLta590FW9jdO5kTGyoiln-SdijHTEhwr53TNS8VFJECd7LHTJQUVHKVADcU5F-FfTXuRZaYRKKfpoSlt9ZD8W9N_JIYcJLDCCeHMalvKIgFzi1XCLDqcHkf68enbNa6DcX4SZ-2AzWpJBd0UDdp0Z6Du-rTalBi0lnc9vg2Z67VZ-B9z-PDrZOmabk_GxaNtFwtZ3OezIlygOwN2QRzji_LJi9p-ZSGV-HM9s-Q41H45K-7DNN17LmJDXQ7IivviUBCZVxsF6QR_K2nP8z_N0G_2IPD2yvix5azNemIvT6hQzcHrP-WdwxfAMwWTUW-SvQbA5Ha6xaevfEIFwXEgRGkeQYXXNUohut0THt0N3rP6Gq712lqmvJ1yLSQ=w1076-h265-no" alt="CNAME"></p>
<p>然后在博客的Repository Settings，在GitHub Pages一栏应该能看到如下状态。</p>
<p><img src="https://lh3.googleusercontent.com/JFS9JhaewhSBEQUeRk2MR7ZVKRE4KuhQGr6YoKygHR6oGsa2-Bx1vsR4cvJQPWbzTW-jiyQfURHiYAnOYfWT5l6BIKtf5GGleHPZwm-fkf7LSITlz5xGWW5ZhXgrjUx8HbwgSnHTZZcNxpBMs_A2zb4H2Rc_mHt114PcrM9_X6HI3HUGxuAfqcFqe4HqMlmfUIKVTwnseUF7ds2fzw1kj2W81cxqdDw2wabWoCflUmYWKHNlGH-t1KDXjz0emGKFMGfC2w7-yd5nzT6QRdf5dXeV-7HuF-lOIUAIrZOliSrcTXJM8s93ls923u_5eioTdQ_ORn7YeSRjT78zeskjP4rFO0Su_phT8cxCW43iUtx0zdYSfMiEm7XwnaIejDDnqSOHuzrrodcgnO9-ENTTlDULlGDkOJjeLzkC7hMOsccEnTJGDEBiq0iCqmGGdi201I2v8_kIFlxTHXIRyEylNV_yTdCra3R_CCquNofwy_kJo4ZrfcQIHM2fP8nDGw2SiClISBDeil-7tSVG6DN6e9KRmbdP7Nq70pPC_Jz2tm-f3xGqyabeYUMjOWFI0xa0JUOd3wh1ERtr2038FAfPCr0LpxRML0vQ-Hi6vD7jUe4aDTGQ8dUBAZslk2hdMcpIwnEULUp0PvDb7oy6NcCvZjfNuUKiyM_FMhyREkG6iA=w1076-h407-no" alt="GitHub Settings, GitHub Pages"></p>
<h3 id="配置Google-Domains"><a href="#配置Google-Domains" class="headerlink" title="配置Google Domains"></a>配置Google Domains</h3><p>登陆Google Domains, 找到刚才购买的域名项，点击DNS<br><img src="https://lh3.googleusercontent.com/0jjJcjXkiEpHkvnbW8v_XVmw5UdO3dxPqvuhtNC2gSPcnrpT2PiCNmGj7gxeEH9667_3s_0DfV3B_jDZpGcFZfw5Gm0ZXLf-PCXJnpvg_7pzt6PJ6SQe5Y4qUPl_2zvl0y8X7o35gv_pFDwROr5HLXvS5a1btmUrT3ZmUjR5yh2u-BAp7LQR42fLnuaw_gfoFknmdTFgquoS8Qu4gZ6NmS4EUaM-OpjZ-vHq56PbLv_mc79-g-E7mU8vtb4ZajqwhjzRSdlcJVlzy_-MGrrrj1D-mjXdJwcBevSsqFJR142mGWXGyNHP-a2bzhJrldfXdHWJaq5UPtu_L9uRJnyhS5Z9175ki1nd51gy9AM8bSOeBpsjd7mKzg1GMe4QSaqbSFDva2opkz7WIU-rhtfLakE5wKRNFeESzwiKdE7Chqcu-k7KLcaZBsq4HsmngQc8oW-7FNM5mczo6aZmPOyPQcvRUjfaenfT0GetFwwcW_UAYXsgVgCeL9oCmaecwQAU8n0DfHB0m2jWJFTT13HU_LLG08oh21K1zSzjtR8xssqnOXMtMcwVM4msMz6sAy8UMmX9l-pTn5N_ThqsdtpoB9tKOk8nsll9ur0cMwpn1FbdrDWnxVybhoT1sVXAG-OohvXFTX39XNSv4VbOqAzwljsnlgw05d-wnnaFCTcH_g=w1076-h150-no" alt="Goolge Domains"></p>
<p>在最低部的Custom resource records中新建三条记录，如下所示：<br><img src="https://lh3.googleusercontent.com/HBxiSgped6rF8RIhiMqF-QLaHykAV-m5eSD4dK1LtPs82O8RkTjMky0vqWMR6SjnYNJUTBHQP7Oyyz_zUrmxkvBgc6FUyuKyJh0zmlOIQgutV4ve32_70UfXzAw-nV7FHhG-Juds1yQ0yhxwYxL2doJSjUxywULSLYUNFxmfsQ_QyundfpyWwbunX4rWjoPM8WV_FS8jK61OO_NbJWoIcdkqe0KoyXZNf0db7WpUxI1qXyeSOs_8vq4wLgy4JBzJzjGRkaq4-ZQial3EoAxuavKtTOw4YD9MjsPLxxwNdac8s6mXciqgKi5hR_1LzUorUJMi2JUlBHiFUd-t37ZVFZnrDu3r_o1F7uBSnWXZ46TFWCWPKutv9gpYdSDLR3GtPDA4yBjVVVg7DfKDj1YiFX0_SwoD9gNrBAQgX3Ao88tmFo52dHMQ4A7GWUADVQ5kXZW6B8afLzNRPYo1zuRn4lIcYzntgc5Hg60W5f9B0vZgHcXZlNHAHGMVrIqrfgUO2dC5SEBfwDKplB8adN5bSG-egGRRqkcl_pZIVU1cW-p-vjJl8IyO3eW2ioRzA4F-Kb2qydEWZUuh70y793io-ItiuXTSMaIH_pXM8atkm15GtiyEe2rqNQk1vzLss0dylPJA_0LKOIEw8xJmNRfi56cu0EZnk7tgcsvLKgR87A=w1076-h378-no" alt="Custom resource records"></p>
<p>然后访问新域名，大功告成！<br><a href="http://www.curtismlarson.com/blog/2015/04/12/github-pages-google-domains/" target="_blank" rel="noopener">具体可参考: How to point a domain on Google Domains to GitHub pages</a></p>
<h2 id="板块更新"><a href="#板块更新" class="headerlink" title="板块更新"></a>板块更新</h2><p><strong>首页</strong> 和旧版一样，显示最新的博客文章；<br><strong>归档</strong> 是所有文章的时间线，一览博客的更新历史；<br><strong>四大分类：技术，随笔，读书，健身</strong> 目前能想到的主要会更新的类别，会不定期整理;<br><strong>标签</strong>：变成了单独一个页面，更方便按标签查找文章；<br><strong>关于</strong>：自我介绍</p>
<h2 id="新功能"><a href="#新功能" class="headerlink" title="新功能"></a>新功能</h2><h3 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h3><p>使用了多说的插件实现评论系统，欢迎留言。：）</p>
<h3 id="Baidu-Analytics"><a href="#Baidu-Analytics" class="headerlink" title="Baidu Analytics"></a>Baidu Analytics</h3><p>加入了Baidu Analytics，可以分析博客的访问信息。</p>
<p>除了评论系统和Baidu Analytics之外，Next主题其实还支持很多其他的插件，安装起来都不难，具体可参考<a href="http://theme-next.iissnan.com" target="_blank" rel="noopener">Next官方文档</a></p>
<h2 id="Hexo常见问题解决"><a href="#Hexo常见问题解决" class="headerlink" title="Hexo常见问题解决"></a>Hexo常见问题解决</h2><p>之前其实在更新博客后deploy到github的过程中都能在terminal中看到error，但因为不影响正常使用就没太管。结果今天在更新到Next后又看到了新的错误，并且直接导致了标签无法正常使用。最后发现其实Hexo出现问题时一般还是比较好解决的，因为他都是依赖其他模块的，只要根据error tracks定位到具体模块，然后卸载重装即可。</p>
<p>具体可参考如下文章：<br><a href="https://github.com/iissnan/hexo-theme-next/issues/1480" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next/issues/1480</a><br><a href="https://neveryu.github.io/2016/12/15/hexo-next-four/" target="_blank" rel="noopener">https://neveryu.github.io/2016/12/15/hexo-next-four/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/02/25/Cloud-Computing-Concepts-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/02/25/Cloud-Computing-Concepts-1/" class="post-title-link" itemprop="url">Orientation, Introduction to Clouds, MapReduce</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-02-25 21:21:37" itemprop="dateCreated datePublished" datetime="2017-02-25T21:21:37-08:00">2017-02-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-03-21 08:57:46" itemprop="dateModified" datetime="2017-03-21T08:57:46-07:00">2017-03-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/02/25/Cloud-Computing-Concepts-1/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/02/25/Cloud-Computing-Concepts-1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Class notes 1 for Cloud Computing Concepts by Indranil Gupta @ Coursera</p>
<p>(初稿完成于 02/25/2017)</p>
<h2 id="Pre-Requirements"><a href="#Pre-Requirements" class="headerlink" title="Pre-Requirements"></a>Pre-Requirements</h2><h3 id="Basic-Data-Structures"><a href="#Basic-Data-Structures" class="headerlink" title="Basic Data Structures"></a>Basic Data Structures</h3><ul>
<li><p>Queue: First-in First-out</p>
</li>
<li><p>Stack: First-in Last-out</p>
<h3 id="Process-A-Program-in-Action"><a href="#Process-A-Program-in-Action" class="headerlink" title="Process: A Program in Action"></a>Process: A Program in Action</h3><h3 id="Computer-Architecture-Simplified"><a href="#Computer-Architecture-Simplified" class="headerlink" title="Computer Architecture (Simplified)"></a>Computer Architecture (Simplified)</h3><p><img src="https://lh3.googleusercontent.com/GMfMsR3vkGyXLt45RnixisMvF_Ye2G23wlVecbaInkuFRZ3kBjQR6JgAdbllBIRzEBIPtrEWLBjVNfQ1jHR92PZ4TuSN9gz99H3P3GCPEiulcbjmTcsmJmlS5E8VPNnoKPnUtWvgJ8XNQPJ6l37_Ml6_jevJMrfOPSjM1dpYxKCLexbEUp80vtJG72QhcHlKVdrr6STCmlcBhz3I5oqnm89Yzyf2XWxvj3cguIL3Gw4XFE2z6oyps5lIu9ZhJycag2H1W1j9AYXwJYSPF-v3rjamBOK8pMuOYNSHEDyNc5lThL09dnp_D_nKFoUBQYinj67R0H33Sc3jsRaZi8f65sPcFu-DvL2tQ2A8FmWmQg4yoSkXtZJ3ilkmfZ4NkFErQXOWMJREyG1SZFI4zjTnS0_Ve22dlxoXPNmixIH59ZBLmEndkR65ET45fpvkuiHpyoDCuUaNW_eAeEkKSaoTZDMLxUGaksmm62K9XU_lWHEiR1YwVW24V_vDYXH-Shmhpnt_qzDnBYF9NJXb321wmNmIEatmQMoc6vNXHHkNqpvEtMUiXlXEWCwrpK3_AdyOI9sCRyXL47jswkxCCANfwW3MKHppX3kHJLRJd19qrQSh5RlJ11k8eYnbZCwopaDWVjM3pbgPoXog56JSLNEKALGsUu2fUW9hbzx_aCj3EQ=w792-h798-no" alt="Simplified Computer Architecture"></p>
</li>
<li><p>A program you write (C++/Java etc.) gets compiled to low-level machine instructions</p>
<ul>
<li>Stored in file system on disk</li>
</ul>
</li>
<li><p>CPU loads instructions in batches into memory(and cache, and registers)</p>
</li>
<li><p>As it executes each instruction, CPU loads data for instruction into memory (and cache, and registers)</p>
<ul>
<li>And does any necessary stores into memory</li>
</ul>
</li>
<li><p>Memory can also be flushed to disk</p>
<h3 id="Big-O-Notation"><a href="#Big-O-Notation" class="headerlink" title="Big O() Notation"></a>Big O() Notation</h3></li>
<li><p>One of the most basic ways of analyzing algorithms</p>
</li>
<li><p>Describes <strong><em>upper bound</em></strong> on behavior of algorithm as some variable is scaled(increased) to infinity</p>
</li>
<li><p>Analyzes run-time (or another performance metric)</p>
</li>
<li><p>Worst-case performance</p>
<h3 id="Basic-Probability"><a href="#Basic-Probability" class="headerlink" title="Basic Probability"></a>Basic Probability</h3><h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3></li>
<li><p>Domain Name Service</p>
</li>
<li><p>Collection of servers, throughout the world</p>
</li>
<li><p>Input to DNS: a domain name, e.g., coursera.org</p>
</li>
<li><p>Output from DNS: IP address of a web server(that hosts that content)</p>
</li>
<li><p>IP address may refer to either</p>
<ul>
<li>Web server actually hosting that content, or</li>
<li>An indirect server, e.g., a CDN(content distribution network)server, e.g., from Akamai<h3 id="Graphs"><a href="#Graphs" class="headerlink" title="Graphs"></a>Graphs</h3></li>
</ul>
</li>
</ul>
<h2 id="Introduction-to-Clouds-MapReduce"><a href="#Introduction-to-Clouds-MapReduce" class="headerlink" title="Introduction to Clouds, MapReduce"></a>Introduction to Clouds, MapReduce</h2><h3 id="Introduction-to-Clouds"><a href="#Introduction-to-Clouds" class="headerlink" title="Introduction to Clouds"></a>Introduction to Clouds</h3><h4 id="Why-Cloud"><a href="#Why-Cloud" class="headerlink" title="Why Cloud?"></a>Why Cloud?</h4><p>Two Categories of Clouds</p>
<ul>
<li>Public Clouds: provides service to any paying customer<ul>
<li>Amazon S3(Simple Storage Service): store arbitrary datasets, pay per GB-month stored</li>
<li>Amazon EC2(Elastic Compute Cloud): upload and run arbitrary OS image, pay per CUP hour used</li>
<li>Google App Engine/Compute Engine: develop applications within their App Engine framework, upload data that will be imported into their format, and run</li>
</ul>
</li>
<li>Private Clouds: accessible only to company employees</li>
</ul>
<p>Customers save time and money by using clouds.</p>
<h4 id="What-is-a-Cloud"><a href="#What-is-a-Cloud" class="headerlink" title="What is a Cloud?"></a>What is a Cloud?</h4><p>Cloud = Lots of storage + compute cycles nearby</p>
<ul>
<li>A single-site cloud (aka “Datacenter”) consists of<ul>
<li>Compute nodes (grouped into racks)</li>
<li>Switches, connecting the racks</li>
<li>A network topology, e.g., hierarchical</li>
<li>Storage (backend) nodes connected to the network</li>
<li>Front-end for submitting jobs and receiving client requests</li>
<li>Software Services</li>
</ul>
</li>
<li>A geographically distributed cloud consists of<ul>
<li>Multiple such sites</li>
<li>Each site perhaps with a different structure and services</li>
</ul>
</li>
</ul>
<h4 id="Introduction-to-Clouds-History"><a href="#Introduction-to-Clouds-History" class="headerlink" title="Introduction to Clouds: History"></a>Introduction to Clouds: History</h4><p>Trends: Technology</p>
<ul>
<li>Doubling periods - storage: 12 months, bandwidth: 9 months（Moore’s law）</li>
<li>Then and Now<ul>
<li>Bandwidth<ul>
<li>1985: mostly 56Kbps links nationwide</li>
<li>2012: Tbps links widespread</li>
</ul>
</li>
</ul>
</li>
<li>Disk capacity<ul>
<li>Today’s PCs have TBs, far more than a 1990 super computer</li>
</ul>
</li>
<li>Biologists<ul>
<li>1990: were running small single-molecule simulations</li>
<li>2012: CERN’s Large Hadron Collider producing many PB/year</li>
</ul>
</li>
</ul>
<p>In 1965, MIT’s Fernando Corbato and the other designers of the Multics operating system envisioned a computer facility operating “like a power company or water company.”</p>
<p>Plug your thin client into the computing utility and play your favorite Intensive Compute &amp; Communicate Application</p>
<ul>
<li>Have today’s clouds brought us closer to this realty? ：）</li>
</ul>
<h4 id="Introduction-to-Clouds-What’s-New-in-Today’s-Clouds"><a href="#Introduction-to-Clouds-What’s-New-in-Today’s-Clouds" class="headerlink" title="Introduction to Clouds: What’s New in Today’s Clouds"></a>Introduction to Clouds: What’s New in Today’s Clouds</h4><p><img src="https://lh3.googleusercontent.com/_klWna3gomnU7K_kdB-ZgaVgvJVJ5Fd4GxFPO6RykM7Gci83sUHWyZx_u3q0hbAbLsRIOmJjQTmfiwirgvUdR2BB5GY1bt0BVmX8n4WYzTU9Q3oDGtT6RZW0WCtvxeckOclLu9_VGWcD_0oM7UARN0kYFWNBTS7lV5ego1jyvS6hKheFJMOEHawHPDv5JtqBnE-Zy4T5OaOTqSnGhMa30TxMgtDrt-AyIg_nM4lF39dVEbHRX3xI7k1U80KU3GUXe3p7kXjMgXNmXh9VJhf8ybmuckFivZp8AVbV1cc876SHIcOSwseFuLZkgX7A2zPgyF-r9h29pwTKZl6jAe82zXr5XLSbVr6l9m2axZTOd7dwRWG-3aGSxoQexEfw8x7l9JszreA8HQyfN0VhWNt3hEqUCP1fjpr5LUVcO-p0l82mHug3wT3gDI5q7CXpWwA6HbggJjUx79dedUHM9AcNWL14VtUo81X8Q3gWnxAF86HkyZMSeF6Q_SGz9EyTyv6gaJhs6koP0NsrTyVso8cVp2YN6X-M1nD6sVrjMxhfiiSpUhnAdl_tZTZ1f0POZVEk_path5pCMNjswTkn-A-u5JemaImNoT4Mxb3NdUj4p4N4HQwZ6sRPiIiUAK_YY9otUl_dzvtT0SmK3ZrnXPrWKCeTqMYT8e5vHT6xIUkkaw=w915-h516-no" alt="A Cloud History of Time(1)"></p>
<p><img src="https://lh3.googleusercontent.com/3qBz0i1ihRrboZWMiF0JXRt1OnW6G8sObd6p8n3v5fbTWQ7vgcuVNkCYXBWhxeGHvmG4ahd7VR_c_YnBpfDXjv5x_fflfzUCI9Um01TLRt0G_x6jPThN6drwTUHQGM88lsdxx3h28ef3fxrZTJUAzk-lKImn84ENuACf6Rh-Z8TEvyjDa1btfQzIONnSOGJJBiW52eQKmmZqfFgZpBqBZRd-0eRuK80h0kTNwgUJSe5xWDJf8D1tkfaeNCxM8I34QVY826nz58MRD3kmiQSnCht8QQdN92atO89h_uoyu8v8bMnvChVpn_KGGRNbGy99SGdulBcY5I8BquYMa4VBJsZ0vO5wrriIPmVS9Z0IkHQqER5fbWo7t95HLZmhzJhmFRsDylXuWHq22jBjIqUvutGRU_TYKivQ3mEmiaQbFZtO_xHC0V-omd49UTeRbWd2V1UbNhMTbMy9f8fpPwO_PvjHp3ENEMGFBjoNTbR4X2lWvlvF4qOsIE0F45dFZch-2SSkKX3jRH75BcnLVLZ1vYeUjYZM16JXV-2L6n8yWh7vDmbqjm_4bG70gYmIrAY_6Cd21IQvhZ9Qf5S48Es9WUv7P5xz9sFhEjSe7o9HUBXFS9XfjVnJnX5B01dfRd4G-FKDH9Sq9e3EOKvdXII-ibZbuKrth_etQWSWjAyjMA=w915-h428-no" alt="A Cloud History of Time(2)"></p>
<p>Four Features New in Today’s Clouds</p>
<ol>
<li><strong>Massive Scale</strong></li>
</ol>
<ul>
<li>Facebook servers[GigaOM, 2012]:<ul>
<li>30K in 2009 -&gt; 60K in 2010 -&gt; 180K in 2012</li>
</ul>
</li>
<li>Microsoft[NYTimes, 2008]:<ul>
<li>150K machines</li>
<li>Growth rate of 10K per month</li>
<li>80K total running Bing</li>
</ul>
</li>
<li>Yahoo![2009]:<ul>
<li>100K</li>
<li>Split into clusters of 4000</li>
</ul>
</li>
<li>AWS EC2[Randy Bias, 2009]<ul>
<li>40,000 machines</li>
<li>8 cores/machine</li>
</ul>
</li>
<li>eBay[2012]: 50K machines</li>
<li>HP[2012]: 380K in 180 DCs</li>
<li>Google: A lot</li>
</ul>
<ol start="2">
<li><strong>On-demand access</strong>: Pay-as-you-go, no upfront commitment</li>
</ol>
<ul>
<li>Anyone can access it</li>
</ul>
<ol start="3">
<li>Data-intensive Nature: What was MBs has now become TBs, PBs, and XBs.</li>
</ol>
<ul>
<li>Daily logs, forensics, Web data, etc.</li>
<li>Humans have data numbness: Wikipedia (large) compress is only about 10GB!</li>
</ul>
<ol start="4">
<li>New Cloud Programming Paradigms: MapReduce/Hadoop, NoSQL/Cassandra/MongoDB and many others</li>
</ol>
<ul>
<li>High in accessibility and ease of programmability</li>
<li>Lots of open-source</li>
</ul>
<h4 id="Introduction-to-Clouds-New-Aspects-of-Clouds"><a href="#Introduction-to-Clouds-New-Aspects-of-Clouds" class="headerlink" title="Introduction to Clouds: New Aspects of Clouds"></a>Introduction to Clouds: New Aspects of Clouds</h4><p><strong>On-Demand Access: *AAS Classification</strong></p>
<ul>
<li>On-demand: renting a cab vs (previously) renting a car, or buying one. E.g.:<ul>
<li>AWS Elastic Compute Cloud(EC2): a few cents to a few $ per CPU hour</li>
<li>AWS Simple Storage Servie (S3): a few cents to a few &amp; per GB-month</li>
</ul>
</li>
<li>HaaS: Hardware as a Service<ul>
<li>You get access to barebones hardware machines, do whatever you want with them, Ex: your own cluster</li>
<li>Not always a good idea because of security risks</li>
</ul>
</li>
<li>IaaS: Infrastructure as a Service<ul>
<li>You get access to flexible computing and storage infrastructure. Virtualization is one way of achieving this (what’s another way, e.g., using Linux). Often said to subsume HaaS.</li>
<li>Ex: Amazon Web Service (AWS: EC2 and S3), Eucalyptus, Rightscale, Microsoft Azure.</li>
</ul>
</li>
<li>PaaS: Platform as a Service<ul>
<li>You get access to flexible computing and storage infrastructure, coupled with a software platform(often tightly)</li>
<li>Ex: Google’s AppEngine (Python, Java, Go)</li>
</ul>
</li>
<li>SaaS: Software as a Service<ul>
<li>You get access to software services, when you need them. Often said to subsume SOA (Service Oriented Architectures)</li>
<li>Ex: Google docs, MS Office on demand</li>
</ul>
</li>
</ul>
<p><strong>Data-Intensive Computing</strong></p>
<ul>
<li>Computation-Intensive Computing<ul>
<li>Example areas: MPI-based, High-performance computing, Grids</li>
<li>Typically run on supercomputers(e.g., NCSA Blue Waters)</li>
</ul>
</li>
<li>Data-Intensive<ul>
<li>Typically store data at datacenters</li>
<li>Use compute nodes nearby</li>
<li>Compute nodes run computation services</li>
</ul>
</li>
<li>In data-intensive computing, the focus shifts from computation to the data: CPU utilization no longer the most important resource metric, instead I/O is (disk and/or network)</li>
</ul>
<p><strong>New Cloud Programming Paradigms</strong></p>
<ul>
<li>Easy to write and run highly parallel programs in new programming paradigms:<ul>
<li>Google: MapReduce and Sawzall</li>
<li>Amazon: Elastic MapReduce service(pay-as-you-go)</li>
<li>Google(MapReduce)<ul>
<li>Indexing: a chain of 24MapReduce jobs</li>
<li>~200K jobs processing 50PB/month (in 2006)</li>
</ul>
</li>
</ul>
</li>
<li>Yahoo!(Hadoop + Pig)<ul>
<li>WebMap: chain of 100 MapReduce jobs</li>
<li>280TB of data, 2500 nodes, 73 hours</li>
</ul>
</li>
<li>Facebook(Hadoop + Hive)<ul>
<li>~300TB total, adding 2TB/day(in 2008)</li>
<li>3K jobs processing 55TB/day</li>
</ul>
</li>
<li>Similar numbers from other companies, e.g., Yieldex, harmony.com, etc.</li>
<li>NoSQL: MySQL is an industry standard, but Cassandra is 2400 times faster!</li>
</ul>
<h4 id="Introduction-to-Clouds-Economics-of-Clouds"><a href="#Introduction-to-Clouds-Economics-of-Clouds" class="headerlink" title="Introduction to Clouds: Economics of Clouds"></a>Introduction to Clouds: Economics of Clouds</h4><ul>
<li><p>Two Categories of Clouds</p>
<ul>
<li>Private clouds are accessible only to company employees</li>
<li>Public clouds provide service to any paying customer</li>
</ul>
</li>
<li><p>Singe Site Cloud: To Outsource or Own?</p>
<ul>
<li>Medium-sized organization: wishes to run a service for M months<ul>
<li>Service requires 128 servers(1024 cores) and 524 TB</li>
<li>Same as UIUC CCT cloud site</li>
</ul>
</li>
</ul>
</li>
<li><p><code>Outsource</code> (e.g., via AWS): monthly cost</p>
<ul>
<li>S3 costs: $0.12 per GB month. EC2 costs: $0.10 per CPU hour (costs from 2009)</li>
<li>Storage = $0.12 x 524 x 1000 = $62 K</li>
<li>Total = Storage + CPUs = $62K + $0.10 x 1024 x 24 x 30 = $136 K</li>
</ul>
</li>
<li><p><code>Own</code>: monthly cost</p>
<ul>
<li>Storage ~ $349 K / M</li>
<li>Total ~ $1555K / M + 7.5K(includes 1 sysadmin / 100 nodes)<ul>
<li>Using 0.45:0.4:0.15 split for hardware:power:network and 3 year life time of hardware</li>
</ul>
</li>
</ul>
</li>
<li><p>Breakdown analysis: more preferable to own if:</p>
<ul>
<li>$349 K / M &lt; $62 K (storage)</li>
<li>$1555K / M + 7.5 K &lt; $136K (overall)</li>
</ul>
</li>
<li><p>Break even points</p>
<ul>
<li>M &gt; 5.55 months (storage)</li>
<li>M &gt; 12 months (overall)</li>
</ul>
</li>
<li><p>As a result</p>
<ul>
<li>Startups use clouds a lot</li>
<li>Cloud providers benefit monetarily most from storage</li>
</ul>
</li>
<li><p>Summary</p>
<ul>
<li>Clouds build on many previous generations of distributed systems</li>
<li>Especially the timesharing and data processing industry of the 1960-70s.</li>
<li>Need to identify unique aspects of a problem to classify it as a new cloud computing problem<ul>
<li>Scale, On-demand access, data-intensive, new programming</li>
</ul>
</li>
<li>Otherwise, the solutions to your problem may already exist!</li>
</ul>
</li>
</ul>
<h3 id="Clouds-are-Distributed-Systems"><a href="#Clouds-are-Distributed-Systems" class="headerlink" title="Clouds are Distributed Systems"></a>Clouds are Distributed Systems</h3><h4 id="A-cloud-is-a-Distributed-System"><a href="#A-cloud-is-a-Distributed-System" class="headerlink" title="A cloud is a Distributed System"></a>A cloud is a Distributed System</h4><ul>
<li>A cloud consists of<ul>
<li>Hundreds to thousands of machines in a datacenter (server side)</li>
<li>Thousands to millions of machines accessing these services (client side)</li>
</ul>
</li>
<li>Servers communicate amongst one another -&gt; Distributed System</li>
<li>Clients communicate with servers -&gt; Also a distributed system!</li>
<li>Clients also communicate with each other<ul>
<li>In peer-to-peer systems like BitTorrent</li>
<li>Also a distributed system!</li>
</ul>
</li>
</ul>
<p><strong>Four Features of Clouds = All Distributed Systems Features!</strong></p>
<ol>
<li>Massive Scale: many servers</li>
<li>On-demand nature: access (multiple) servers anywhere</li>
<li>Data-Intensive Nature: lots of data =&gt; need a cluster (multiple machines) to store</li>
<li>New Cloud Programming Paradigms: Hadoop/Mapreduce, NoSQL all need clusters</li>
</ol>
<p><strong>Cloud = A Fancy Word for a Distributed System</strong></p>
<ul>
<li>A “cloud” is the latest nickname for a distributed system</li>
<li>Previous nicknames for “distributed system” have included<ul>
<li>Peer-to-peer systems</li>
<li>Grids</li>
<li>Clusters</li>
<li>Timeshared computers (Data Processing Industry)</li>
</ul>
</li>
<li>Nicknames come and go, but the <code>core concepts</code> underlying distributed systems stay the same<ul>
<li>And they are used decide after decade<ul>
<li>E.g., Lamppost Timestamps were invented in the 1970s, and they are used in almost all distributed/cloud systems today</li>
</ul>
</li>
<li>This course is about these distributed systems concepts</li>
</ul>
</li>
<li>A few years from now, there may be a new nickname for distributed systems<ul>
<li>The core concepts will remain the same, and they will continue to be used in real systems</li>
</ul>
</li>
</ul>
<h4 id="What-is-a-Distributed-System"><a href="#What-is-a-Distributed-System" class="headerlink" title="What is a Distributed System?"></a>What is a Distributed System?</h4><p><em>A distributed system is a collection of entities, each of which is <code>autonomous</code>, <code>programmable</code>, <code>asynchronous</code> and <code>failure-prone</code>, and which communicate through an <code>unreliable</code> communication medium</em>.</p>
<p>Distributed System = Many Processes Sending and Receiving Messages through Unreliable Communication Network</p>
<p>A range of interesting problems for distributed system designers</p>
<ul>
<li>P2P systems [Gnutella, Kazaa, BitTorrent]</li>
<li>Cloud Infrastructures [AWS, Azure, Google Cloud]</li>
<li>Cloud Storage [Key-value stores, NoSQL, Cassandra]</li>
<li>Cloud Programming [MapReduce, Storm, Pregel]</li>
<li>Coordination [Paxos, Leader Election, Snapshots]</li>
<li>Managing Many Clients and Servers Concurrently [Concurrency Control, Replication Control]</li>
<li>(and many more that you’ll see in this course!)</li>
</ul>
<p>Challenges in solving these problems</p>
<ul>
<li><strong>Failure</strong>: no longer the exception, but rather a norm</li>
<li><strong>Scalability</strong>: 1000s of machines, Terabytes of data</li>
<li><strong>Asynchrony</strong>: clock skew and clock drift</li>
<li><strong>Concurrency</strong>: 1000s of machines interacting with each other accessing the same data</li>
</ul>
<h3 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h3><h4 id="MapReduce-Paradigm"><a href="#MapReduce-Paradigm" class="headerlink" title="MapReduce Paradigm"></a>MapReduce Paradigm</h4><ul>
<li>Terms are borrowed from Functional Language(e.g., Lisp)</li>
<li>Sample Application: <code>Wordcout</code></li>
<li>Map:<ul>
<li>Parallelly Process a large number of individual records to generate intermediate key/value pairs.</li>
</ul>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/DfWUkmMQ79PNd6tZDsgblL-iHF3qVFJr1hKI5yBDiGP_1274BtvxE8RhZsR9oGrDe93rNP_fR2YexJtw6iWb4ZlX6DVNBoiqPmZNVrNa6WLYGNnDZuRBXDHX8bqtDdqJrJYD0j0IdHiDwZNDd9rV7fscbWLaaVg75RSDJSb9c5uTlwDrqsV-Zod4JALW5ePcGKvpthf_paxOeK9Ahk6-d-IZma2SELKmSBp_5H1c64WU_dI-D91x1ddBUE7tl36ZlrYyKOp-u-PQkIF3wWszZEq7tls7RKaJ0CONDsf0s9uuD4rikXoTqPECkelROgRat3Ott1iT0Q-F4blAuHkR67CrsnUmqcdhSQ0xB_u2UNXGLpwPmAB_5rHDlwq1hJDel4GeoMNcg00e2Z_iNSMMBer11Rxw5Ho5qPn2LYA_4t2etHNMvUgcDI0CZ6ZjUYeFFxTP5gDi4nJ78yPLlQD8KpsHtJffIU7pcRPJlRqNtdix26rBj4vpOhtsdUvo5X6yzUj_RZbYfc2CxPFX3Wxdx9GjIYvIrNCaRrXY37FEUsPdAN6mKr-Z3mJK1gv7_lP2NdHy_ICQwZPA_EkxdGq39tFied4C6gRn51ijaek0CP5xO-16rjTufMNXYky8vH8117P4cWJ9YbtwbyBeCFvFaeqb5oDiy_Ei2lANSPsbMQ=w515-h221-no" alt="Map Task"></p>
<p><img src="https://lh3.googleusercontent.com/Zzn05SvIEdGVi_2XrtRDz5y_znvh2fBbBUpif2gDg3-OiAW1f2kEBEgOBXon2j5zfYx44BIzMA-0-cfsQPQlBObbaguZp5HZnC5prLDDZ06U-JS-9kXT458I0SjNdRW_dvlTh8aV5Enlk1THmR9lyUlFcMomAL4UWhMiBVH9JdHvxYaPGSWkN2ZUH24NJXAf0ehDVtSTggcI_igtR9zJ2q4ktj5W12BxmTf6KAvpP8P37xKnO6NdubZDQbjQ7s5izpmXOMU3N8MY1BN3R6HEv6HkLW2Pw9CNhCDfQg21ETyPTTKMMZW5jEw6l_J1-K1U5OiW6ihns6zBSVogPslfkks2eVt68HegruksFs_0OUw6ZIYJ0ifwAF3Qegf4pMJgVduETukuFSv9yiVVskNR4QXDwQWfyyqsqQXIcyQ9QU2eoAHOUdbY6_dfa28oYz50XnnGsq74meNo7X0JovLI0t5bHya1Wo9gGuscMR2WBNdyvwS3zYMNOtBjoofuT4sVAI0-s1_BAlGlmoDrabZhMEIdV69QEVcLdA_-pGC1QwLRdw_T9YhMTNEUOeKnZ3MYzZQxGjiJY6wYHu1HUg_Y7ukj3mBZKW_xuJxlYtsClRR89WF6GPwwUX_-wtA1rq_2jc2APmzoMQ0rcFpP76oqv03kvyKe44Z42vC5wcQXzg=w550-h230-no" alt="Two Map Tasks"></p>
<p><img src="https://lh3.googleusercontent.com/oIFVIxsAc2O8FUBhHcM53R_CbBjDvh_SuUJ2G_w3UGK1Jw-7vs6GnDlSRzpfeDt-kIplYHviiWvk19FtIjbTUBRQVd0MNkQsk-uw_OwyFPNFHrn1LrsTaQtNSqaRJLj4WE2jWrXiesYd3JHdZp3ZuKFYammv2KnCFgtD2VpA_TyrqmsT76-x9qZ5RlkGDJesQABTCgTzxQx0vCkaBtvl2dBb8ReNI9BeU0f1XUNaadXmYXUxU6x8cxpQGPPXJGy9CG1IXvI8a3CJpaqy9hxqNwvK-qTK0c5WONNF7BVzkOwHxFZvq4qBC8V5gm9gxxmyKBMZoeeRjC-vuYkF77nuU30-0B9PfNSz92i1xaNz0QzcT6sipacAzFmyXdxz4dBdLHriaiX8pZ3VSsHrIBQj8YxRcUWgdxSeAcnfCFyCs5Sjo7WfodDSFoz_Ow_0f7e2NurgmCQUP2jFk7wIRrqUls8cNsFcAZnfxrpnLplgnk-97U7kWK9IThQKvav8ugcFLcgReslCD0dZTZZQjHm3BxcQG9Lg0tcnMGGC2bp3cPG-KX85UlCs0rU5hQZCh9wykDwG80WDTcZb9tUVKK4_o_NORSZR7FFA-mrsz9sW5xjxMWcWLbjmZnT3ds29fYSyECWpgnupHTKQoR6BQ21lQHFnjZnzHewc6tFn62_YXA=w554-h211-no" alt="Many Map Tasks"></p>
<ul>
<li>Reduce:<ul>
<li>Processes and merges all intermediate values associated per key</li>
<li>Each key assigned to one Reduce</li>
<li>Parallelly Processes and merges all intermediate values by partitioning keys</li>
<li>Popular: Hash partitioning, i.e., key is assigned to reduce #= hash(key)% number of reduce servers</li>
</ul>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/mWsFpursi24LyePN_HIZ7LGSgLhYgwsDqyFV1-wVtAwszGvPCGs8f-oDjISRGMEqP_kzxM9SmTcB2wiC-gp5ThjbzuKi1a-kGZ5IBUogIMqfXUKqaRtd3XJOs8unXx10PoFCOGVhP4xgFtSqJ5xg5oGQl7cazW_Zn7sUhhnMoDK90sLKcE_ldYaXI9n_cIC3YxECaXVmRwWdPsro1m5ntflm0vth9-XnO8ILIUn-YgeC_jU1b9ucNY9t2pZAy6TpgTaf6ZU3y7LXpEyeJEtHVzYegqjfORaRVlri1_t9OL1O3Aft8AIgSK9w6cLcoQJAtiW6zizkke8OXkHrYuP-BDaJzzdiB_-NlNxZeGsHoIsGLkobJkLyLvJv6W9NQFdNTD3RN4dVpE0hcfDKWi1ofFo9FepvX_I0wZ6Ko0YZa8s8hpUDvJaqMiDKNGYJ1t_mmxwJyybSPBcKlnfIBENUjT2EUkZf27TH0qMHVoZfIWhpGSyz9ihN0pa6CYuEBIwjpMhDZY95vfnd_Qb-geNKFXkgeXvS5BcOK3Taw8Ah_Jy62ylqbWQ81gM726xQboMnuXaYW1ffGqRMB-wKkn9FIPWUXzurLfiwzOBHRaWLKLTvZQ0KaF6f9S9gLb3epaUbNQYzs7qXz8vQi2UBw_pGhVzLrx4ehrTX_M5nNC7zrA=w493-h214-no" alt="Reduce Task"></p>
<p><img src="https://lh3.googleusercontent.com/YO_-BhfPsNjjotY8XInGVzHyqEt-r5n4wIuERO2L4eX1D-5cKBJd1A0Uw-XDIh7PRBqwijyQXcN0gj8Y69Bdkh1RXfNTjL58qgez1yCakVbr6Im-1dhHHWK-ooI5HPflgKi2JCULU7RHRFSpZzzzEGLnFQFxck9Gs57-s-ClWQbwTXUIDcbtmoVY3eG28fISvvLYu2H0Ix3zYudDOqaeoZW9T8ulLu8UDnv6QBFfx8qdKx_9cKqEdzjyiWyJ8Ta6JdbEVLiXeSSv2AjpDQBbttNrrDVr4UYZW-J26wX18UrwIXLVR-8Kze0Co1uDYSf4ty7hJ3NbSafsujDNLx4i8xJFprRzXAZGmfjloC9TOsSgKJkcyMnAISLUQZR05sOcrEimTXcsmaGjykh-j05ifeKFPxNYYr_DXVdo0PkfqHoM8KnqVEFV85LelPJJMUlYHre-FO7A416WdYF2QmwcggA1bouufP-mIVmuFAUKeGLdevIw8ZnDb9KmRL03wQPeoIhA1atABp27YBB4i-BHzF8MQkrp9CK6tGFkuBiK41z4JEKPgL_j6lQZ0delBfTGFDHfCNWLNg0l-yYkwn8s2D6JOUQE9IR1Z2UEFxmBX3cfEfcu7LVLGoaiuZ0kaS8_RHSLbCVGuccUKnWDCB63iasqFvcHcc31_rrGLHR05Q=w526-h155-no" alt="Two Reduce Tasks"></p>
<h4 id="MapReduce-Examples"><a href="#MapReduce-Examples" class="headerlink" title="MapReduce Examples"></a>MapReduce Examples</h4><p>Distributed Grep</p>
<ul>
<li>Input: large set of files</li>
<li>Output: lines that match pattern</li>
<li>Map: Emits a line if it matches the supplied pattern</li>
<li>Reduce: Copies the intermediate data to output</li>
</ul>
<p>Reverse Web-Link Graph</p>
<ul>
<li>Input: Web graph: tuples(a, b) where (page a -&gt; pageb)</li>
<li>Output: For each page list of pages that link to it</li>
<li>Map: process web log and for each input &lt;source, target&gt;, it outputs &lt;target, source&gt;</li>
<li>Reduce: emits &lt;target, list<source>&gt;</li>
</ul>
<p>Count of URL access frequency</p>
<ul>
<li>Input: Log of accessed URLs, e.g., from proxy server</li>
<li>Output: For each URL, % of total accesses for that URL</li>
<li>Map: Process web log and outputs &lt;URL, 1&gt;</li>
<li>Multiple Reducers : Emits [URL, URL_count]<br>(So far, like Wordcount. But still need %)</li>
<li>Chain another MapReduce job after above one</li>
<li>Map: Process &lt;URL, URL_count&gt; and outputs &lt;1, (&lt;URL, URL_count&gt;)&gt;</li>
<li>1 Reducer: Sums up URL_count’s to calculate overall_count.<ul>
<li>Emits multiple &lt;URL, URL_count/overall_count&gt;</li>
</ul>
</li>
</ul>
<p>Sort<br>Map task’s output is sorted (e.g., quicksort)<br>Reduce task’s input is sorted (e.g., mergesort)</p>
<ul>
<li>Input: Series of (key, value) pairs</li>
<li>Output: Sorted <value>s</li>
<li>Map: &lt;key, value&gt; -&gt; &lt;value, _&gt; (identity)</li>
<li>Reducer: &lt;key, value&gt; -&gt; &lt;key, value&gt; (identity)</li>
<li>Partitioning function - partition keys across reducers based on ranges<ul>
<li>Take data distribution into account to balance reducer tasks</li>
</ul>
</li>
</ul>
<h4 id="MapReduce-Scheduling"><a href="#MapReduce-Scheduling" class="headerlink" title="MapReduce Scheduling"></a>MapReduce Scheduling</h4><p>Externally: For user</p>
<ul>
<li>Write a Map program (short), write a Reduce program(short)</li>
<li>Submit job, wait for result</li>
<li>Need to know nothing about parallel/distributed programming!</li>
</ul>
<p>Internally: For the Paradigm and Scheduler</p>
<ul>
<li>Parallelize Map</li>
<li>Transfer data from Map to Reduce</li>
<li>Parallelize Reduce</li>
<li>Implement Storage for Map input, Map output, Reduce input, and Reduce output</li>
</ul>
<p>(Ensure that no Reduce starts before all Maps are finished. That is, ensure the <strong><em>barrier</em></strong> between the Map phase and Reduce phase)</p>
<p>For the cloud:</p>
<ul>
<li>Parallelize Map: easy! each map task is independent of the other!<ul>
<li>All Map output records with same key assigned to same Reduce</li>
</ul>
</li>
<li>Transfer data from Map to Reduce<ul>
<li>All Map output records with same key assigned to same Reduce task</li>
<li>Use partitioning function, e.g., hash(key) % number of reducers</li>
</ul>
</li>
<li>Parallelize Reduce: easy! each reduce task is independent of the other!</li>
<li>Implement Storage for Map input, Map output, Reduce input, and Reduce output.<ul>
<li>Map input: from distributed file system</li>
<li>Map output: to local disk (at Map node); uses local file system</li>
<li>Reduce input: from (multiple) remote disks; uses local file systems</li>
<li>Reduce output: to distributed file system</li>
</ul>
</li>
</ul>
<ul>
<li>local file system = Linux FS, etc.</li>
<li>distributed file system = GFS (Google File System), HDFS (Hadoop Distributed File System)</li>
</ul>
<p>The YARN Scheduler</p>
<ul>
<li>Used in Hadoop 2.x +</li>
<li>YARN = Yet Another Resource Negotiator</li>
<li>Treats each server as a collection of <em>containers</em><ul>
<li>Container = some CPU + some memory</li>
</ul>
</li>
<li>Has 3 main components<ul>
<li>Global Resource Manager (RM)<ul>
<li>Scheduling</li>
</ul>
</li>
<li>Pre-server Node Manager(NM)<ul>
<li>Daemon and server-specific functions</li>
</ul>
</li>
<li>Per-application (job) Application Master (AM)<ul>
<li>Container negotiation with RM and NMs</li>
<li>Detecting task failures of that job</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/_ggVQZTdJbYM9gypXn9lHrTL8ZuPSZc0m8XYAlwrZjwWzXjwXw3A2cfV11Zd3bFFHukHOyb2smo48yF6GLUBMB0O8FBIjJhvK4ewck6JXqj4t-7YtNPDwvYIygzwk_disv1n_cG0P-W8BmIk7Tl0R0nzrM6noBYVzV35P5MQ1LV_Wrml1ZUGnCWjs2Q0j-AZDSDEAGqEJMqj5jBQ8oQH0g0pdZGtZ_HrIt4zUxiUIwAJa4Hy2j78zydM_e6WB3bELNWwmYlU2EXqMPRaWz8luLejzmXoDB2wOFuTZD0M3-fgdMijGeHXBQWAc61oA1YlquU4ZHGruG9BLSRwYvdAufhJ0_x6BjTpsMcikGQGpUO8keVgGoEfxC6AssRIEp4wwEaqWTWk-OqKLuvuXzSXx4nhHMPYGYPHbR7WNtuY6ouEdBUWjOkD7h4xXJUVamO0tdCPhxdqgZOBIxsqPpEeqdoRE9N10_wx_7P3m8iSO3I7NK0od5IhYYrbUOOdsslQsZrDoWgB2se_cZywbKH6_UhOsb4EZKTxPOalb9l5AD0S3-9cs5wdR-i6trIRgbwWnIjU2MNFXcl4UBvd13bvkfvGMZk2aduRwmJJAnZk9gxNUgLSnA4vsN_9yreclNl8Ur2rp9XfqKEz7PkUX7I33LpVKd3de3FuD9p9ZbMNzg=w1237-h765-no" alt="How a Job Gets a Container"></p>
<h4 id="MapReduce-Fault-Tolerance"><a href="#MapReduce-Fault-Tolerance" class="headerlink" title="MapReduce Fault-Tolerance"></a>MapReduce Fault-Tolerance</h4><p>Fault Tolerance</p>
<ul>
<li>Server Failure<ul>
<li>NM heartbeats to RM<ul>
<li>If server fails, RM lets all affected Ams know, and Ams take action.</li>
</ul>
</li>
<li>NM keeps track of each task running at its server<ul>
<li>If task fails while in-progress, mark the task as idle and restart it</li>
</ul>
</li>
<li>AM heartbeats to RM<ul>
<li>On failure, RM restarts AM, which then syncs up with its running tasks</li>
</ul>
</li>
</ul>
</li>
<li>RM Failure<ul>
<li>Use old checkpoints and bring up secondary RM</li>
</ul>
</li>
<li>Heartbeats also used to piggyback container requests</li>
</ul>
<p>Stragglers (slow nodes)</p>
<ul>
<li>The slowest machine slows the entire job down (why?)</li>
<li>Due to Bad Disk, Network Bandwidth, CPU, or Memory</li>
<li>Keep track of “progress” of each task (%done)</li>
<li>Perform backup (replicated) execution of straggler task: task considered done when first replica completed. Called <code>Speculative Execution</code>.</li>
</ul>
<p>Locality</p>
<ul>
<li>Since cloud has hierarchical topology (e.g., racks)</li>
<li>GFS/HDFS stores 3 replicas of each of chins (e.g., 64 MB in size)<ul>
<li>Maybe on different racks, e.g., 2 on a rack, 1 on a different rack</li>
<li>Mapreduce attempts to schedule a map task on<ul>
<li>a machine that contains a replica of corresponding input data, or failing that.</li>
<li>on the same rack as a machine containing the input, or failing that.</li>
<li>Anywhere</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Summary</p>
<ul>
<li>Mapreduce uses parallelization + aggregation to schedule applications across clusters</li>
<li>Need to deal with failure</li>
<li>Plenty of ongoing research work in scheduling and fault-tolerance for Mapreduce and Hadoop</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2017/02/18/%E8%87%AA%E6%88%91%E6%88%90%E9%95%BF%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%89%93%E5%BC%80%E6%96%B9%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/02/18/%E8%87%AA%E6%88%91%E6%88%90%E9%95%BF%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%89%93%E5%BC%80%E6%96%B9%E5%BC%8F/" class="post-title-link" itemprop="url">自我成长的正确打开方式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-02-18 15:36:07" itemprop="dateCreated datePublished" datetime="2017-02-18T15:36:07-08:00">2017-02-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-03-23 16:48:06" itemprop="dateModified" datetime="2017-03-23T16:48:06-07:00">2017-03-23</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/02/18/%E8%87%AA%E6%88%91%E6%88%90%E9%95%BF%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%89%93%E5%BC%80%E6%96%B9%E5%BC%8F/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/02/18/自我成长的正确打开方式/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近看了Susan Kuang的新书，还有渡边淳一的《钝感力》，感觉在对待自我成长上有了更深刻的认识，于是有了这篇文章，一方面是总结在书中所得到的领悟，另一方面这本身也是一个小小的自我成长过程。</p>
<h3 id="不快乐的事实"><a href="#不快乐的事实" class="headerlink" title="不快乐的事实"></a>不快乐的事实</h3><p>中国一直有句古话，叫作“吃得苦中苦，方为人上人。” 也就是说要实现凌驾于他人之上的人生目标，就得依靠比他人经历更多的痛苦来获得。不难注意到，这里无论是努力的过程还是最终要实现的结果，其实都是建立在与他人的对比之下。</p>
<p>从小时候开始，我们就开始被拿来和“别人家的孩子”做比较，到了中学，更是开始了拼分数、拼排名，进了大学，进而拼绩点、拼实习，开始工作后，又开始拼薪水、拼职位。当我们追求不再是优秀，而是比别人优秀时，我们开始习惯性地与他人攀比，并依赖外部环境的反馈作为自我评判的标准。这一定程度上激励了人们去努力奋斗，但同时也会让人过于在意外界的看法，引起一些消极的后果。</p>
<p>以我自己为例，在上大学之前一直是处于一个只要正常努力基本就能名列前茅的状态。结果刚进大学时，面对来自全国各地的优秀学生，突然间发现自己好像再怎么努力也无法做到出类拔萃，于是乎自信心受到打击，并且经常性地产生焦虑和自卑的负面情绪，总是觉得自己不够好，害怕失败以及别人异样的眼光。由于这样心态的存在，反而更加抑制了进步和成长的空间，如果不及时调整，很可能会陷入恶性循环。</p>
<p>这样的经历也许听起来并不陌生，不少人一定都会有类似的经历，那我们应该如何面对这样的问题呢？</p>
<h3 id="罪魁祸首"><a href="#罪魁祸首" class="headerlink" title="罪魁祸首"></a>罪魁祸首</h3><p>1967年，美国心理学家马丁·赛里格曼（Martin Seligman）在研究动物时，用狗做了一项经典实验。实验是这样的：把一条狗关在笼子里，只要蜂鸣器一响，就对狗施以难以承受的电击。狗因为躲避不了，于是就在笼子里狂奔，惊恐地哀嚎。多次实现之后，当蜂鸣器再次响起时，狗便不再狂奔或者寻找逃避机会了，而只是趴在地上无奈地哀叫。即便在实验的最后，实验者在电击前把笼门打开，狗也不选择逃跑，而是没等电击出现，就倒地呻吟和颤抖。</p>
<p>通过这个实验，马丁·赛里格曼提出了一个著名的心理学概念叫做习得性无助。习得性无助是指，在先前的经历中，发现自己努力了很久，却始终不能达到预期效果，于是便获得了一种“自己的行为无法改变结果”的感受，并因此变得消极被动，形成了一种对现实无望和无可奈何的心理状态，即使置身于可自主的新环境中，也不再选择尝试。</p>
<p>习得性无助很好地结识了包括过去的我在内的很多人的心理状态和行为模式。我们对于自我的认知很大程度上取决于外在世界给我们的反馈，当一个人获得的大部分反馈都是负面和消极的时，他也更容易变得被动消极，因此获得成就的可能性就会越低，这又会进一步强化了他的“我不行”的信念。</p>
<p>因此，对于我们个人来说，要想实现自我突破，获得自己想要的人生，我们就必须除掉那个限制我们的“罪魁祸首”，也就是我们消极被动的心态。</p>
<h3 id="根治之道：-钝感力"><a href="#根治之道：-钝感力" class="headerlink" title="根治之道： 钝感力"></a>根治之道： 钝感力</h3><p>日本作家渡边淳一写过一本书叫做《钝感力》(The Power of Insensitivity)，书里有这样一个例子。</p>
<p>有一个暂且可以成为小K的白领，在公司里既谈不上优秀，也不算差，属于表现平平的职员，又一次因为一时疏忽，他在工作上出了个差错。更倒霉的是刚好又碰上上司心情不爽，于是小K在众人面前被上司恨恨地责骂了一顿。当时在场的同事都对上司的怒骂感到非常震惊，他们十分同情小K，都觉得刚才那顿臭骂有些太过火了。甚至有人担心说，小K会不会情绪低落，明天不再来上班了。<br>可是和同事们的预料正好相反，第二天早上，小K和往常一样，按时出现在大家的面前，并且满面笑容地向众人道早安。似乎昨天挨骂的事他已经忘得一干二净了。此时此景，使同事们都觉得白白替他担心了一场。</p>
<p>往好处讲，被上司如此劈头盖脸臭骂一顿，小K却毫发无损，依然精神抖擞，他可以算得上内心强大的典型了。但话又说回来了，上司那么严厉的斥责，对小K都毫不起作用，他也真称得上是个“迟钝的家伙”，这也就是渡边淳一先生所认为的钝感力。</p>
<p>与小K相比，另一个白领小N,在同样被上司怒骂了一顿之后，他却不能像小K那样迅速改换心情，回到家之后，仍然没完没了地沉浸在个人的烦恼和思虑之中，不断自责甚至钻牛角尖。第二天，小N也许就不去上班了。接下来，他一直摆脱不了这件事的阴影，一而再，再而三地休息，这样拖延下去的结果，恐怕最后就会辞职。</p>
<p>把顿感的小K和敏感的小N放在一起对比，占绝对优势、值得信赖的还是钝感的一方。今后无论发生什么事情，若是小K的话，他都可以十分顽强地闯过难关，说不定将来还会成为公司的骨干。可是敏感的小N，在以后的生活中，就会连接不断地遇到挫折，他的朋友们也将渐渐地和疏远起来。</p>
<p>“钝感力”作为一种为人处世的态度及人生智慧，相比敏感和玻璃心而言，更容易在竞争激烈的现代社会中免遭习得性无助的困扰，因而也更容易取得成功，并同时求得自身内心的平衡及与他人和社会的和谐相处。</p>
<h3 id="两种思维模式"><a href="#两种思维模式" class="headerlink" title="两种思维模式"></a>两种思维模式</h3><p>斯坦福大学的心理学教授卡罗尔·德韦克（Carol Deck）在她的 《Mindset: The New Psychology of Success》（中文译本名：看见成长的自己）中，阐述了在人们的成长道路上相互对立的两种思维模式：僵固型思维模式（Fixed Mindset）和成长型思维模式（Growth Mindset）。</p>
<p>僵固型思维者的特点是，他们认为聪明才智是一个人固定不变的特质，因此他们永远处于一个要“证明自己”而非“发展自己”的心态中。僵固型思维者会过于在意别人的评价，为了获得赞扬和认可，他们会努力掩饰自己的缺陷和不足，并总是通过回避挑战来避免失败，以此维持自信。于此同时，若他们一旦觉得不如他人时，便可能会深深陷入自我怀疑和否定的消极情绪。</p>
<p>成长型思维者则恰恰相反，他们认为能力是通过学习不断发展而来的，因此他们的关注点不在于“证明自己”，而在于“发展自己”，他们不会因为失败或者负面评价而开始自我怀疑和否定，而总是勇敢、大方地承认自己的无知、不足和不完美，并且把它们看作自我提升的机会。即使面对自己不擅长的事情，他们也能全身心地投入和坚持，不会为了获得鲜花和掌声而有所遮掩，更不会把当前的不足与自我价值等同起来。因为他们相信人的能力是动态发展的，并且享受成长带来的快乐。</p>
<p>显而易见，成长型思维很好地突破了个人和周围环境带来的各种限制，可以让我们在不断挑战舒适区的过程中获得持续性自我成长。但不幸的是，社会上僵固型思维者的数量远远多于成长型思维者。这一方面可能与人的本能有关，但另一方面，现有的过于注重结果而非过程的教育体制和文化氛围毫无疑问进一步强化了人们的僵固型思维。因此，我们需要通过后天的不断努力来习得成长性思维。</p>
<h3 id="什么才是正确的奋斗目标？"><a href="#什么才是正确的奋斗目标？" class="headerlink" title="什么才是正确的奋斗目标？"></a>什么才是正确的奋斗目标？</h3><p>尽管那些急功近利的所谓成功学已经被诟病多年，但类似这样的标题，我们应该都不会陌生：《如何快速成为文案高手》、《21天学会手绘》、《一天看完20本书是怎样的体验》、《从月薪三千到月薪三万》、《普通人如何利用碎片化时间学5门语言还出一本书》。这类文章在我们的日常生活中比比皆是，虽然没有赤裸裸的用名利作为诱惑，也没有标榜哪个知名的成功人士，但其本质和成功学并没有什么区别，核心特点都是通过急功近利式的模仿，以迅速达到某个目标。尽管这些目标看上去和名利没有太大关系，实则不然，他们要么与金钱挂钩，要么通过给人一种与众不同和超越平凡人的感觉是虚荣心得到极大满足，有时甚至还能引来他人的追捧。</p>
<p>成功学背后有两个重要假设：第一，成功可以复制；第二，只要努力就能成功。它的逻辑是这样的：有人成功了，那么我按照他总结出来的成功方法，就一定能够成功。而事实上，很多成功的故事里其实包含了一种叫做“幸存者偏差”的现象，由于日常生活中更容易看到成功的案例，而不是失败的案例，你就会因此大大高估了成功的希望，我们看到的那些所谓的创业成功故事都是被筛选和过滤后的，并不能反映真实的世界，然而真实的情况是，它的成功概率非常小。正如薛蛮子曾经所说的那样：“创业失败是必然的，成功才是偶然的。”</p>
<p>这个世界上存在着由客观规律决定的必然，但也存在着大量的偶然，正是这些偶然使得整个世界充满了不确定性，也让未来变得不可预知。那些幸运的成功者们很难意识到自己的成功可能只不过是一种概率现象，即使知道，他们也不会把成功归结于运气。而对于普通人来说，迷恋于成功学不仅容易让人因错估成功概率而变得盲目自信，更会因为这种错觉而让人变得急功近利。</p>
<p>哈佛积极心理学教授泰勒·本-沙在他的《幸福的方法》一书中就详细解释了这一点。他在书中指出人重点在于要拥有目标，而能否实现则在其次。目标能够给我们以方向感，不至于在人生的路途中感到迷失，并且不要把关注点放在当下，目标是意义而不是结局。心理学家大卫·沃森在他的积极情感作用的研究中，也强调只有追求目标，而不是达到目标，才是带来幸福和积极情感的要素。</p>
<p>因此，在选择目标时，以自我成长为主的内在目标会给人带来更多的幸福感和意义感，如果你的目标仅仅是要得到年薪100万元，或者每年读100本书，每天写1000个字，然后出一本书，那么它们给你带来的可能是更多的焦虑和难以熄灭的欲望，而非幸福；但如果你可以把这些外在的目标转化成内在的目标，例如让自己的能力达到年薪100万元的程度，通过读书来增长自己的知识和智慧，或者通过写文字和出书来分享自己的思想与价值观，那么它们便能让你在追求目标的过程中享受成长的快乐。</p>
<p>周国平在他的一次演讲中提到，年轻人在为自己设立人生目标时，应该把优秀当成第一目标，成功最多只是第二目标。他认为优秀是我们自己能够把握的，因此可以通过努力获得，而成功取决于很多外部因素。一个明智和理性的人应该把经理放在那些自己可以控制的事情上、那些真正可以给我们带来幸福的目标上。</p>
<h3 id="自我提升永远不晚"><a href="#自我提升永远不晚" class="headerlink" title="自我提升永远不晚"></a>自我提升永远不晚</h3><p>关于自我提升，我们总是会听到这样的疑问：“从现在才开始是不是已经晚了？” 实际上，这是一个毫无意义的问题，因为无论答案是什么，我们面临的选择都只有两种：开始提升和不提升。诚然，提早开始也许更好，但我们没有办法回到过去，我们拥有的只是现在，如果现在开始改变，那么不久的将来我们很可能会获得回报，生活或许也会变得因此不同，但如果不开始自我提升，那么我们就永远在原地踏步。因此，自我提升永远都不晚，关键在于行动和持之以恒的积累。</p>
<p>台湾有一位全民级偶像叫赵慕鹤，66岁退休，本到了安享晚年的时候，而他却开启了全新的逆生长模式。75岁那年决定出去走走，在不会外语，存款可怜的情况下独自穷游欧洲，86岁那年和孙子一起考大学，首年落榜，次年再战考上空中大学文化系。在91岁那年成为全班第一个顺利毕业的学生。 几年后，为了鼓励年轻人学习，96岁的赵慕鹤又来劲了，冲刺三个月顺利考上南华大学哲学所，两年后以一篇关于中国书法“鸟虫体”研究的论文获得硕士学位，并也因此创下了吉尼斯世界纪录，成为世界上年龄最大的研究生。而如今105岁的他正准备再报个博士班。年龄，对他来说从来就只是一个数字，因为从来不把“老”当回事儿，这位老先生做出了很多同龄人都不敢想，甚至让年轻人都自叹不如的事情。</p>
<p>我们还那么年轻，怎么可能太晚了呢？</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2049855-418028387b87bbad.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="自我成长的正确打开方式.jpg"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/12/17/soft-abilities-reading-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/12/17/soft-abilities-reading-notes/" class="post-title-link" itemprop="url">《软技能：代码之外的生存指南》读书笔记</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-12-17 14:54:38" itemprop="dateCreated datePublished" datetime="2016-12-17T14:54:38-08:00">2016-12-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-03-12 15:15:56" itemprop="dateModified" datetime="2017-03-12T15:15:56-07:00">2017-03-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/readings/" itemprop="url" rel="index"><span itemprop="name">readings</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/12/17/soft-abilities-reading-notes/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/17/soft-abilities-reading-notes/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>对于优秀的软件开发者来说，埋头写代码绝并不应该是工作的全部。这本书给出了很多非常好的建议，不仅仅“码农”们可以从中获益，还可以推而广之到很多其他的行业。</p>
<h3 id="I-职业"><a href="#I-职业" class="headerlink" title="I. 职业"></a>I. 职业</h3><h4 id="人际交往能力：远比你想象的重要"><a href="#人际交往能力：远比你想象的重要" class="headerlink" title="人际交往能力：远比你想象的重要"></a>人际交往能力：远比你想象的重要</h4><ul>
<li>如果你还是觉得自己的工作就是写写代码，那你最好要三思。作为一个软件开发人员，你的工作就是与人打交道（其实几乎所有的职业都是这样）。</li>
<li>如何学会与人打交道？<ul>
<li>每个人都希望感到自己很重要；</li>
<li>永远不要批评，用表扬代替批评</li>
<li>换位思考</li>
<li>避免争吵</li>
</ul>
</li>
</ul>
<h4 id="破解面试之道"><a href="#破解面试之道" class="headerlink" title="破解面试之道"></a>破解面试之道</h4><ul>
<li>通过面试的最快捷的方式是让面试官对你怀有好感，达成该目标有很多方法，其中大多数可以在面试之前完成。如了解面试官，之前就想办法和公司的人建立联系，如有自己的知名品牌/博客等。</li>
<li>别忘了时间，即便你现在对换新工作毫无兴趣，为了获得面试经验，你也要去面试。练习得越多，你在真正面试时也就越游刃有余。</li>
</ul>
<h4 id="职业选择"><a href="#职业选择" class="headerlink" title="职业选择"></a>职业选择</h4><ul>
<li><p>雇员：</p>
<ul>
<li>Pros: 稳定，从业之路比较轻松，带薪假期。</li>
<li>Cons: 缺少自由，收入封顶。</li>
</ul>
</li>
<li><p>独立咨询师</p>
<ul>
<li>Pros: 更大的自由度，可以持续做新项目， 赚钱潜力。</li>
<li>Cons: 但需要自己寻找业务，打理一切事物的开销，从“为一个老板服务”变成了“为许多老板服务”。</li>
</ul>
</li>
<li><p>创业者：</p>
<ul>
<li>Pros: 完全自由，巨大赚钱能力，做你想要的工作，没有老板</li>
<li>Cons: 风险很大，完全依靠自己，需要很多技能，可能需要长时间工作</li>
</ul>
</li>
<li><p>进化之路：雇员（学徒思维） –&gt; 独立咨询师/创业者</p>
</li>
</ul>
<h4 id="专业VS通才"><a href="#专业VS通才" class="headerlink" title="专业VS通才"></a>专业VS通才</h4><ul>
<li>在一个专业方向上拥有专长尽管选择面窄了，但其实往往更容易获得极好的机会。</li>
<li>走“专业化”道路与具备广泛的技能并不矛盾。</li>
</ul>
<h4 id="请勿陷入对技术的狂热中"><a href="#请勿陷入对技术的狂热中" class="headerlink" title="请勿陷入对技术的狂热中"></a>请勿陷入对技术的狂热中</h4><p>不拘一格是要点所在，没有理由去强烈坚持自己选择的技术就是最好的，而轻视甚至无视其他技术。保持开放的心态，你会发现更多机会为你敞开大门。</p>
<h3 id="II-自我营销"><a href="#II-自我营销" class="headerlink" title="II. 自我营销"></a>II. 自我营销</h3><h4 id="创建大获成功的博客"><a href="#创建大获成功的博客" class="headerlink" title="创建大获成功的博客"></a>创建大获成功的博客</h4><ul>
<li>打造成功博客的最大秘诀有且仅有一个: <strong>持之以恒</strong></li>
<li>如果每天写一篇博客且坚持好几年，想不成功都难。</li>
<li>强烈建议至少以每周一篇的速度更新博客。</li>
<li>除了持之以恒之外还应该确保你写的都是高质量内容。</li>
<li>别担心，不需要一开始就追求完美，起步的时候可能会很糟糕，但随着不断尝试贡献出优秀的内容（不是将自己脑子里的东西随意丢到网页上，不考虑格式和结构，且还有一大堆拼写错误），你的博客品质会越来越高。</li>
</ul>
<h4 id="博客写什么的终极问题？"><a href="#博客写什么的终极问题？" class="headerlink" title="博客写什么的终极问题？"></a>博客写什么的终极问题？</h4><ul>
<li>解决这个问题的最好办法是提前头脑风暴出各种不同的想法，随时更新可能的博客主题的清单，这样你总是保持一堆话题可供选择。</li>
<li>同时，不要太担心文笔如何，不要太在意别人的想法。有时候你只是要写一篇博客让自己的博客有内容，仅此而已。</li>
</ul>
<h4 id="核心目标：为他人提供价值"><a href="#核心目标：为他人提供价值" class="headerlink" title="核心目标：为他人提供价值"></a>核心目标：为他人提供价值</h4><ul>
<li>“如果你能帮助足够多的人们得到他们想要的东西，你就会得到自己想要的东西。”</li>
<li>如果你表达的和传递的信息不能帮到其他人，那么每个人都将会无视你。</li>
<li>把你的工作成果的90%都做成免费的，当你免费给人们提供实际价值时，回报更大。</li>
</ul>
<h4 id="善于运用社交媒体"><a href="#善于运用社交媒体" class="headerlink" title="善于运用社交媒体"></a>善于运用社交媒体</h4><ul>
<li>聚焦于构建稳定的受众群体，并逐步提升活跃度。</li>
<li>持续不断地在自己的社交媒体上给别人分享和提供有价值的内容，那你必定会赢得尊重和声誉。</li>
<li>使用诸如Buffer的社交媒体管理工具高效管理所有社交账号。</li>
</ul>
<h4 id="演讲，报告和培训"><a href="#演讲，报告和培训" class="headerlink" title="演讲，报告和培训"></a>演讲，报告和培训</h4><ul>
<li>公司内的机会</li>
<li>Code Camp/Meet up等相关团体的主题分享</li>
<li>进阶：开发者大会，做培训， YouTube, Udemy等</li>
</ul>
<h4 id="著书立说，吸引追随者"><a href="#著书立说，吸引追随者" class="headerlink" title="著书立说，吸引追随者"></a>著书立说，吸引追随者</h4><p>在有了足够的基础之后的进一步追求。一个人通过写书可以收获极大的信赖，如果你也想被看做业界值得信赖的人，你也应该写本书。</p>
<h4 id="百折不挠，越挫越勇"><a href="#百折不挠，越挫越勇" class="headerlink" title="百折不挠，越挫越勇"></a>百折不挠，越挫越勇</h4><p>收起自己脆弱的自尊心，勇敢走出去，你必须学会如何无惧自己被别人看做傻瓜，别害怕让自己出丑。</p>
<h3 id="III-学习"><a href="#III-学习" class="headerlink" title="III. 学习"></a>III. 学习</h3><p>如果你想学习一些东西，最好的方法就是付诸于实践。</p>
<h4 id="十步学习法"><a href="#十步学习法" class="headerlink" title="十步学习法"></a>十步学习法</h4><p><strong>1 ~ 6 是第一模块，只需做一次</strong></p>
<ol>
<li>了解全局： 这样你才能弄清自己到底要学什么，找出最好的学习方式。</li>
<li>确定范围： 将宏大主题缩小并聚焦到一个特定范围内，尽可能保持专注。</li>
<li>定义目标： 目标要具体化，比如可以利用C#语言的主要功能写出一个小的应用程序，我可以用HTML5 在网上为我自己创建一个主页，展示我的简历和我的代表工作。而不是”学习C#语言基础知识“，或者”知道如何使用HTML去构建一个网页“</li>
<li>寻找资源： 尝试收集到多种多样的资源帮助你学习，这在当下的互联网时代很容易做到。</li>
<li>创建学习计划： 比如可以参考在第4步中找来的图书的目录，循序渐进。</li>
<li>筛选资源： 浏览找到的全部资源，刷选出品质最高的。</li>
</ol>
<p><strong>7 ~ 10 是第二模块，需要循环往复</strong><br>7. 开始学习，浅尝辄止：既不要在知之不多的情况下就盲目开始，也不要在行动之前准备过多，行动太晚<br>8. 动手操作，边玩边学：无需了解全部内容，不用担心结果，勇敢探索吧！<br>9. 全面掌握，学以致用：在8的过程中积累了问题，再带着问题进一步深入理解主题。<br>10. 乐为人师，融会贯通：把知识交给别人，是唯一检验你确实掌握了知识的办法，同时也是查缺补漏的好方法。</p>
<h4 id="发现自己的知识短板"><a href="#发现自己的知识短板" class="headerlink" title="发现自己的知识短板"></a>发现自己的知识短板</h4><p>工作上遇到短板时，人会本能地倾向于掩饰自己的短板，而且我们又总是太忙，忙到无暇去填补他们，于是短板一直都在。长期下去往往导致为了掩饰短板我们反而花费了更多的时间和精力。<br>要学会及时找出自己的短板，并且刻意地通过努力消除短板。</p>
<h3 id="IV-生产力"><a href="#IV-生产力" class="headerlink" title="IV. 生产力"></a>IV. 生产力</h3><h4 id="一切始于专注"><a href="#一切始于专注" class="headerlink" title="一切始于专注"></a>一切始于专注</h4><p>缺乏专注，任务会被拖延很长一段时间。<br>在开始一项任务之前，确保你已经做好一切可以让自己免受干扰的措施，不管是内部干扰还是外部干扰。</p>
<h4 id="生产力提升计划"><a href="#生产力提升计划" class="headerlink" title="生产力提升计划"></a>生产力提升计划</h4><p>找到适合自己的方式制定季度计划，月计划，周计划和日计划，可以使用诸如Trello类似的软件。合理地安排休息和休假也是必不可少的。</p>
<h4 id="番茄工作法"><a href="#番茄工作法" class="headerlink" title="番茄工作法"></a>番茄工作法</h4><p>严格使用这一方法，高效地追踪自己一天内完成了多少个番茄钟，并未每天完成的番茄钟的数量设定目标，这样才能真正发挥番茄工作法的魔力。</p>
<h4 id="定额工作法"><a href="#定额工作法" class="headerlink" title="定额工作法"></a>定额工作法</h4><p>例如：</p>
<ul>
<li>每周跑步3次，</li>
<li>每周发布一篇博客，</li>
<li>每周完成50个番茄钟的工作。<br>一旦做出”承诺“，就必须不遗余力地完成自己设定的任务，除非身体丧失工作能力，否则没有任何情况可以阻止你去完成任务，这也是”定额工作法“的核心。</li>
</ul>
<h4 id="多任务并行"><a href="#多任务并行" class="headerlink" title="多任务并行"></a>多任务并行</h4><ul>
<li>为什么多任务并行一般都很糟糕？因为多任务并行时很容易打破专注力，而不在专注模式下时，很容易会拖延时间，结果反而降低了效率；</li>
<li>批量回复邮件，微信，短信，电话效率更高。</li>
<li>真正的多任务并行：将一项不费脑经的任务和需要精神专注才能完成的任务结合起来，如听着音乐打字，体育运动或开车时听Podcast。</li>
</ul>
<h4 id="时间是怎么被浪费掉的"><a href="#时间是怎么被浪费掉的" class="headerlink" title="时间是怎么被浪费掉的"></a>时间是怎么被浪费掉的</h4><ul>
<li>戒掉电视。</li>
<li>每天批量处理邮件和社交媒体活动。</li>
</ul>
<h4 id="分解任务：如何吃掉一头大象？"><a href="#分解任务：如何吃掉一头大象？" class="headerlink" title="分解任务：如何吃掉一头大象？"></a>分解任务：如何吃掉一头大象？</h4><ul>
<li>“要吃掉一头大象，每次吃一口。”</li>
<li>每个大型任务都可以分解成不计其数的更简单更小型的任务。比如写书时，无非就是把每篇拆分成很多小的章，每章也就1000 ~ 2000字。</li>
<li>同理，写一个大型的程序，无论多么庞大和复杂，都可以被分成一行行的代码，因此只要能写好单行代码，你就能写好任何应用程序。</li>
</ul>
<h4 id="努力工作的价值"><a href="#努力工作的价值" class="headerlink" title="努力工作的价值"></a>努力工作的价值</h4><p>如果真想富有成效，你就不得不学会工作的时候既聪明又努力。光有聪明是不够的，在所有的情况下，我们面对的现实就是，没有一件事情是轻而易举的，如果真想要成为成功人士，你就不得不在有些时候通宵达旦。 要想实现目标，要想发挥出自己的全部潜力，唯一的途径就是自愿咬紧牙关、硬着头皮、开始工作。</p>
<h4 id="任何行动都比不采取行动好"><a href="#任何行动都比不采取行动好" class="headerlink" title="任何行动都比不采取行动好"></a>任何行动都比不采取行动好</h4><p>还是那句话，”Done is better than perfect.“</p>
<h3 id="V-理财"><a href="#V-理财" class="headerlink" title="V. 理财"></a>V. 理财</h3><ul>
<li>要想在财务上获得成功，就必须学会如何投资，别无选择。</li>
<li>房地产市场是一个长期来说稳定且回报率较高的投资方向，值得好好研究。可以从较小的，低售价的公寓开始。</li>
<li>在同等收入的情况下，尽可能地减少开支，其实就相当于增加了收入。</li>
<li>在保证白天工作的同时尽可能地去寻找更多的实现被动收入的机会，早日实现更多的被动收入现金流。</li>
</ul>
<h3 id="VI-健身"><a href="#VI-健身" class="headerlink" title="VI. 健身"></a>VI. 健身</h3><h3 id="VII-精神"><a href="#VII-精神" class="headerlink" title="VII. 精神"></a>VII. 精神</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/10/09/reservoir-sampling/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/10/09/reservoir-sampling/" class="post-title-link" itemprop="url">Data Structure & Algorithms Notes: Reservoir Sampling</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2016-10-09 00:34:55 / Modified: 00:37:39" itemprop="dateCreated datePublished" datetime="2016-10-09T00:34:55-07:00">2016-10-09</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/10/09/reservoir-sampling/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/10/09/reservoir-sampling/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在一个给定长度的数组中随机等概率抽取一个数据很容易，但如果面对的是长度未知的海量数据流呢？蓄水池采样(Reservoir Sampling)算法就是来解决这个问题的, 它在分析一些大数据集的时候非常有用。</p>
<h2 id="1-算法描述"><a href="#1-算法描述" class="headerlink" title="1. 算法描述"></a>1. 算法描述</h2><ol>
<li>先选取数据流中的前k个元素，保存在集合A中；</li>
<li>从第j（k + 1 &lt;= j &lt;= n）个元素开始，每次先以概率p = k/j选择是否让第j个元素留下。若j被选中，则从A中随机选择一个元素并用该元素j替换它；否则直接淘汰该元素；</li>
<li>重复步骤2直到结束，最后集合A中剩下的就是保证随机抽取的k个元素。</li>
</ol>
<h2 id="2-算法证明"><a href="#2-算法证明" class="headerlink" title="2. 算法证明"></a>2. 算法证明</h2><p>算法的证明可以参照: <a href="http://sobuhu.com/algorithm/2012/11/01/reservoir.html" target="_blank" rel="noopener">蓄水池抽样算法证明</a></p>
<h2 id="3-LeetCode例题"><a href="#3-LeetCode例题" class="headerlink" title="3. LeetCode例题"></a>3. LeetCode例题</h2><h3 id="3-1-Linked-List-Random-Node"><a href="#3-1-Linked-List-Random-Node" class="headerlink" title="3.1. Linked List Random Node"></a>3.1. Linked List Random Node</h3><p>Given a singly linked list, return a random node’s value from the linked list. Each node must have the same probability of being chosen.</p>
<p><strong>Follow up:</strong><br>What if the linked list is extremely large and its length is unknown to you? Could you solve this efficiently without using extra space?</p>
<p><strong>Example:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Init a singly linked list [1,2,3].</span><br><span class="line">ListNode head &#x3D; new ListNode(1);</span><br><span class="line">head.next &#x3D; new ListNode(2);</span><br><span class="line">head.next.next &#x3D; new ListNode(3);</span><br><span class="line">Solution solution &#x3D; new Solution(head);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; getRandom() should return either 1, 2, or 3 randomly. Each element should have equal probability of returning.</span><br><span class="line">solution.getRandom();</span><br></pre></td></tr></table></figure>
<p>利用蓄水池采样原理，无需事先计算list长度即可求解，具体代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    Random r;</span><br><span class="line">    ListNode head;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Solution</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.r = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="keyword">this</span>.head = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRandom</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">        ListNode nodeVal = head;</span><br><span class="line">        ListNode curr = head;</span><br><span class="line">        <span class="keyword">while</span> (curr != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (r.nextInt(count++) == <span class="number">0</span>) &#123;</span><br><span class="line">                nodeVal = curr;</span><br><span class="line">            &#125;</span><br><span class="line">            curr = curr.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nodeVal.val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="3-2-Random-Pick-Index"><a href="#3-2-Random-Pick-Index" class="headerlink" title="3.2. Random Pick Index"></a>3.2. Random Pick Index</h3><p>Given an array of integers with possible duplicates, randomly output the index of a given target number. You can assume that the given target number must exist in the array.</p>
<p><strong>Note:</strong><br>The array size can be very large. Solution that uses too much extra space will not pass the judge.</p>
<p><strong>Example:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">int[] nums &#x3D; new int[] &#123;1,2,3,3,3&#125;;</span><br><span class="line">Solution solution &#x3D; new Solution(nums);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; pick(3) should return either index 2, 3, or 4 randomly. Each index should have equal probability of returning.</span><br><span class="line">solution.pick(3);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; pick(1) should return 0. Since in the array only nums[0] is equal to 1.</span><br><span class="line">solution.pick(1);</span><br></pre></td></tr></table></figure>
<p>若采用常规算法，我们需要用HashMap把对应的数值及所处的位置一一关联，这样则违背了题目的空间限制。使用蓄水池采样则避免了这个问题。具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] nums;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Solution</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nums = nums;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">pick</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] == target) &#123;</span><br><span class="line">                <span class="keyword">if</span> (random.nextInt(count++) == <span class="number">0</span>) &#123;</span><br><span class="line">                    index = i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/08/30/RxJavaIntro/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/08/30/RxJavaIntro/" class="post-title-link" itemprop="url">RxJava极简入门</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2016-08-30 01:02:51 / Modified: 01:11:26" itemprop="dateCreated datePublished" datetime="2016-08-30T01:02:51-07:00">2016-08-30</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/08/30/RxJavaIntro/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/30/RxJavaIntro/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>RxJava是在Android开发者中非常热门的函数库。刚上手会感觉比较难理解，但一旦理解了它，你会感觉开启了一扇全新的大门。网上关于RxJava的文章很多，这里也只是略窥门径，对其有个最最基本的概念。</p>
<h3 id="1-RxJava是什么"><a href="#1-RxJava是什么" class="headerlink" title="1. RxJava是什么?"></a>1. RxJava是什么?</h3><p>先来看看别的开发者怎么说的：</p>
<blockquote>
<p>“RxJava is a library of code used to handle data using a push and pull mechanism. Just like a notification on your phone, some data will be pushed to a receiver of that data. It’s a different way to think about existing coding patterns you know.” </p>
</blockquote>
<p>RxJava官网上的定义:</p>
<blockquote>
<p>A library for composing asynchronous and event-based programs using observable sequences for the Java VM.</p>
</blockquote>
<h3 id="2-RxJava基本模型"><a href="#2-RxJava基本模型" class="headerlink" title="2. RxJava基本模型"></a>2. RxJava基本模型</h3><p>RxJava最核心的两个东西是Observables（被观察者，事件源）和Subscribers（观察者）。Observables发出一系列事件，Subscribers处理这些事件。这里的事件可以是任何你感兴趣的东西，如触摸事件，web接口调用返回的数据等等。<br>这里我们以一个简单的Todo List的app为例来解释RxJava的基本工作原理。<br>首先假设我们有一个todo list：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">toDoList = &#123;<span class="string">"Sweep"</span>, <span class="string">"Mop"</span>, <span class="string">"Vacuum"</span>&#125;;</span><br></pre></td></tr></table></figure>

<p>第一步先创建一个Observable: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(todoList)</span><br></pre></td></tr></table></figure>
<p>这里用了just方法创建了一个Observable，表示了Observable 每次会发(emit)出todoList中的一项。</p>
<p>接下来是subscribe Observer, 代码和注释如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Subscription s = Observable.just(todoList)</span><br><span class="line">.subscribe(<span class="keyword">new</span> Observer&lt;Todo&gt;() &#123; <span class="comment">//Type is the data type being emitted</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Todo t)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//onNext is called for each item emitted.</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//onCompleted is called when the Observable has no more items to admit</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//onError is called if an error occurs.</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//It is important to note that onCompleted and onError are only ever called once.</span></span><br><span class="line">    <span class="comment">//And after they are called, onNext will not be called again.</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>调用subscribe方法会返回一个Subscription的对象, 有了它我们可以在关闭app的时候unsubscribe, 比如:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onDestroy();</span><br><span class="line">    s.unsubscribe();</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>以上就是RxJava的基本模型。</p>
<p>RxJava中包含了一些非常有用的类，可以使得在特定情况下代码写起来更简单。<br>比如说有时候我们并不需要onCompleted和onError的callback，只想知道Observable是否发出了item。这种情况下我们只需要在subscribe方法中传入一个Action1对象即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(todoList)</span><br><span class="line">.subscribe(<span class="keyword">new</span> Action1&lt;Todo&gt;() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Todo todo)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Get called for each item emitted.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><ul>
<li><a href="https://github.com/ReactiveX/RxJava/wiki" target="_blank" rel="noopener">RxJava Home</a></li>
<li><a href="http://rxmarbles.com" target="_blank" rel="noopener">RxMarbles</a></li>
<li><a href="http://blog.danlew.net/2014/09/15/grokking-rxjava-part-1/" target="_blank" rel="noopener">Grokking RxJava, Part 1: The Basics</a></li>
<li><a href="http://blog.danlew.net/2014/09/22/grokking-rxjava-part-2/" target="_blank" rel="noopener">Grokking RxJava, Part 2: Operator, Operator</a></li>
<li><a href="http://blog.danlew.net/2014/09/30/grokking-rxjava-part-3/" target="_blank" rel="noopener">Grokking RxJava, Part 3: Reactive with Benefits</a></li>
<li><a href="http://blog.danlew.net/2014/10/08/grokking-rxjava-part-4/" target="_blank" rel="noopener">Grokking RxJava, Part 4: Reactive Android</a></li>
<li><a href="https://www.gitbook.com/book/asce1885/android-rd-senior-advanced/details" target="_blank" rel="noopener">更上一层楼－Android研发工程师高级进阶</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://dannyzhang.run/2016/08/25/androidThreads/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Danny Zhang">
      <meta itemprop="description" content="Blogger/Software Engineer/Fitness Enthusiast">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="D.Z. Notes (Beta)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/08/25/androidThreads/" class="post-title-link" itemprop="url">Android中的Threads的实现</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2016-08-25 00:33:19 / Modified: 00:38:46" itemprop="dateCreated datePublished" datetime="2016-08-25T00:33:19-07:00">2016-08-25</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2016/08/25/androidThreads/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/25/androidThreads/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在Android想要创建后台任务时该怎么做呢？最简单粗暴的方法就是通过创建一个background thread来实现，这里我们以后台下载音乐为例。</p>
<p>首先建立一个Playlist的类，添加需要下载的曲目:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Playlist</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String[] songs = &#123;<span class="string">"He’s the Greatest Dancer"</span>, <span class="string">"Cut the Cake"</span>, <span class="string">"The Groove Line"</span>, <span class="string">"Stayin’ Alive"</span>, <span class="string">"Give Up the Funk"</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="1-通过Runnable实现"><a href="#1-通过Runnable实现" class="headerlink" title="1. 通过Runnable实现"></a>1. 通过Runnable实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mDownloadButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                downloadSong();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(runnable);</span><br><span class="line">        thread.setName(<span class="string">"DownloadThread"</span>);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="2-通过继承Thread实现"><a href="#2-通过继承Thread实现" class="headerlink" title="2. 通过继承Thread实现"></a>2. 通过继承Thread实现</h3><p>首先创建一个DownloadThread如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DownloadThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        downloadSong();</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后再创建一个新的DownloadThread实例，调用start()方法即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mDownloadButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        DownloadThread thread = <span class="keyword">new</span> DownloadThread();</span><br><span class="line">        thread.setName(<span class="string">"DownloadThread"</span>);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>通过以上两种形式，我们成功实现了在background thread下载歌曲。然而新的潜在问题是，若开始下载后Playlist中的曲目被误改，则很可能错误的曲目会被下载下来。那么如何避免这种情况呢？</p>
<h3 id="3-Handler-Looper和Message"><a href="#3-Handler-Looper和Message" class="headerlink" title="3. Handler, Looper和Message"></a>3. Handler, Looper和Message</h3><p>首先创建一个DownloadHandler类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">DownloadHandler</span> <span class="params">()</span> extends Handler </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">        downloadSong(msg.obj.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">downloadSong</span><span class="params">(String song)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis() + <span class="number">10</span> * <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">while</span> (System.currentTimeMillis() &lt; endTime) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Log.d(TAG, song + <span class="string">" downloaded!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其次修改DownloadThread中的run 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.os.Looper;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DownloadThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> DownloadHandler mHandler;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Looper.prepare();</span><br><span class="line">        mHandler = <span class="keyword">new</span> DownloadHandler();</span><br><span class="line">        Looper.loop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后在点击Button时把要下载的曲目通过Message的形式送到DownloadThread的handler中即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DownloadThread thread = <span class="keyword">new</span> DownloadThread();</span><br><span class="line">thread.setName(<span class="string">"DownloadThread"</span>);</span><br><span class="line">thread.start();</span><br><span class="line">mDownloadButton = (Button) findViewById(R.id.downloadButton);</span><br><span class="line">mDownloadButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (String song : Playlist.songs) &#123;</span><br><span class="line">            Message message = Message.obtain();</span><br><span class="line">            message.obj = song;</span><br><span class="line">            thread.mHandler.sendMessage(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当app被关掉之后，我们创建的DownloadThread也就同时被kill了。但如果我们想要在app被关闭之还能在后台继续下载歌曲怎么办呢？这就要引入Android Service了，且看下回分解。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Danny Zhang</p>
  <div class="site-description" itemprop="description">Blogger/Software Engineer/Fitness Enthusiast</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">51</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags">
          
        <span class="site-state-item-count">68</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Danny Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://dannyzhang-run.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
